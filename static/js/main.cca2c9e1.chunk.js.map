{"version":3,"sources":["ui/img/advantages/Compound_Armor.png","ui/img/advantages/Flight.png","ui/img/advantages/Pathfinder.png","ui/img/advantages/Revelator.png","ui/img/advantages/Stealth.png","ui/img/advantages/Weapon_Expert.png","ui/img/factions/Aeternus_Continuum.png","ui/img/factions/Fallback.png","ui/img/factions/Empyrean.png","ui/img/factions/Iron_Star_Alliance.png","ui/img/factions/Lost_Legion.png","ui/img/factions/Marcher_Worlds.png","ui/img/factions/Wild_Card.png","ui/img/faction_icons/Wild_Card_Charged.png","ui/img/faction_icons/Wild_Card_Spike.png","ui/img/weapon_qualities/Blast_Weapon.png","ui/img/weapon_qualities/Corrosion.png","ui/img/weapon_qualities/Fire.png","ui/img/weapon_qualities/Lock_Down.png","ui/img/weapon_qualities/Repulsor.png","ui/img/weapon_qualities/Spray_Weapon.png","ui/img/weapon_qualities/Strafe.png","ui/img/weapon_qualities/System_Failure.png","messages.js","state/utils.js","state/AppSync.js","state/CypherCodecs.js","state/EditMode.js","state/FactionModels.js","state/Factions.js","state/Lists.js","state/ToggleSections.js","state/Url.js","state/WildCardModels.js","state/VehicleWeapons.js","state/WarjackWeapons.js","state/CadreModels.js","state/CadreCategoryMembers.js","state/ListIndex.js","state/Cyphers.js","state/Models.js","state/PageIds.js","state/selectors/EnhancedLists.js","ui/App.js","ui/img/faction_icons/Aeternus_Continuum_Spike.png","ui/img/faction_icons/Empyrean_Spike.png","ui/img/faction_icons/Iron_Star_Alliance_Spike.png","ui/img/faction_icons/Marcher_Worlds_Spike.png","ui/img/faction_icons/Aeternus_Continuum_Charged.png","ui/img/faction_icons/Empyrean_Charged.png","ui/img/faction_icons/Iron_Star_Alliance_Charged.png","ui/img/faction_icons/Marcher_Worlds_Charged.png","state/io/Requests.js","state/ParserNames.js","businessLogic/processes/cacheParserNames.js","businessLogic/processes/jsonp.js","businessLogic/processes/cacheWikiPages/fetchWikiPage.js","businessLogic/processes/cacheWikiPages/updateCache.js","businessLogic/processes/partitionBy.js","businessLogic/processes/cacheWikiPages/fetchPageIds.js","businessLogic/processes/cacheWikiPages/index.js","businessLogic/processes/fetchCadres/fetchCadreCategoryMembers.js","businessLogic/processes/fetchCadres/fetchCadreModels.js","businessLogic/processes/fetchCadres/index.js","businessLogic/core/parse/utils.js","businessLogic/core/parse/parseCypherText.js","businessLogic/core/parse/parsers.js","businessLogic/core/parse/parseCypherCodecsText.js","businessLogic/core/parse/parseFactionModelsText.js","businessLogic/core/parse/parseFactionsText.js","businessLogic/core/parse/parseModelText.js","businessLogic/core/parse/parseVehicleAndWarjackWeaponText.js","businessLogic/core/parse/parseWildCardText.js","businessLogic/processes/parsers/parseModel.js","businessLogic/processes/parsers/index.js","businessLogic/processes/parsers/parseCypher.js","businessLogic/processes/parsers/parseCypherCodecs.js","businessLogic/processes/parsers/parseFactionModels.js","businessLogic/processes/parsers/parseFactions.js","businessLogic/processes/parsers/parseVehicleOrWarjackWeapon.js","businessLogic/processes/parsers/parseWildCard.js","businessLogic/processes/parseWikiPages.js","businessLogic/processes/triggerFetchWikiPages.js","businessLogic/processes/base62.js","businessLogic/processes/ui.js","businessLogic/processes/index.js","state/Version.js","state/index.js","index.js"],"names":["MenuItemClicked","message","FetchedWikiPage","FetchedWikiPageRevisions","RefreshWikiPages","type","payload","arguments","length","undefined","immer","f","state","action","produce","identity","StateShard","namespace","init","actions","actionCreators","selectors","_objectSpread","dispatch","Object","fromEntries","entries","map","_ref","_ref2","_slicedToArray","functionName","keys","_ref3","_ref4","name","_len2","args","Array","_key2","apply","concat","a","pipe","_len3","fs","_key3","_i","_fs","AppSync","data","sync","done","select","selectDone","CypherCodecs","cypherCodecs","set","selectByPage","page","find","codec","Cypher","EditMode","ui","editMode","toggle","FactionModels","factionModels","setForPage","models","values","flat","model","Name","Factions","factions","selectPageByText","text","Lists","lists","oneEmptyList","addCard","listIndex","pageId","card","hidden","cards","push","addEmptyList","moveListBy","_ref7","by","list","splice","removeCard","_ref5","cardIndex","removeList","_ref6","setCardCortex","_ref10","cortexIds","setCardVehicleWeapon","_ref12","vehicleWeaponId","setCardWarjackWeapons","_ref11","hardpointNameIndex","warjackWeaponId","warjackWeaponIds","setListTitle","title","toggleCard","_ref9","console","log","Date","now","moveCard","_ref8","up","newCardIndex","newList","selectCard","ToggleSections","toggleSections","section","showSection","selectSection","Url","url","WildCardModels","wildCardModels","_step","wildCards","_iterator","_createForOfIteratorHelper","s","n","wildCard","value","faction","err","e","VehicleWeapons","vehicleWeapons","vehicleWeapon","WarjackWeapons","warjackWeapons","warjackWeapon","CadreModels","cadreModels","setForCadrePageId","cadrePageId","selectCadreModelsByPageId","CadreCategoryMembers","cadreCategoryMembers","ListIndex","Cyphers","cyphers","cypher","Models","PageIds","pageIds","addPages","pageIdByTitle","selectPageByPageId","reduce","acc","statePageId","EnhancedLists","selectDetails","_ref14","pageIdByPage","filter","_ref15","_ref16","_ref17","_ref18","details","coreStats","hardpoints","hardpointNames","parseHardpoints","cortexSelections","_ref19","_ref20","cortex","advantages","_ref21","_ref22","advantage","_ref22$","category","categoryId","warjackWeaponSelections","_ref23","_ref24","selection","split","vehicleWeaponSelection","_ref25","flatMap","Type","Subtype","subtype","_","join","_ref13","Faction","rHardpointGroup","results","RegExp","repeat","exec","hardpointCount","parseInt","groupCount","groupName","i","error","Header","Layout","Footer","Content","TextArea","Input","SubMenu","Menu","factionIcons","Aeternus_Continuum","AeternusContinuum","Empyrean","Iron_Star_Alliance","IronStarAlliance","Lost_Legion","LostLegion","Marcher_Worlds","MarcherWorlds","Wild_Card","WildCard","Universal","Fallback","FactionIcon","style","_ref$height","height","src","_jsx","alt","spikeIcons","WildCardSpike","SpikeIcon","_ref2$height","marginTop","chargedIcons","WildCardCharged","ChargedIcon","_ref3$height","advantageIcons","CompoundArmor","Flight","Pathfinder","Revelator","Stealth","WeaponExpert","AdvantageIcon","_ref4$height","Tooltip","placement","trigger","children","className","onClick","event","stopPropagation","weaponQualityIcons","BlastWeapon","Corrosion","Fire","LockDown","Repulsor","SprayWeapon","Strafe","SystemFailure","WeaponQualityIcon","_ref5$height","_Fragment","Bookmark","connect","setUrl","target","bookmark","document","querySelector","navigator","userAgent","match","range","createRange","selectNodeContents","window","getSelection","removeAllRanges","addRange","setSelectionRange","open","key","Row","Col","xs","sm","md","lg","xl","xxl","onChange","onKeyDown","FactionsMenu","sort","cadreModel","includes","_ref26","cadre","allCadreModels","_ref27","_ref28","cadres","targetList","menuItemClicked","allMenuItemsClicked","pages","forEach","toggleEditMode","updateTargetList","_React$useState","React","useState","_React$useState2","openDrawer","setOpenDrawer","_jsxs","id","openKeys","onOpenChange","mode","triggerSubMenuAction","icon","CheckSquareOutlined","fontSize","FormOutlined","marginLeft","paddingTop","factionName","Drawer","visible","onClose","width","mask","closeIcon","MenuUnfoldOutlined","ItemGroup","Select","defaultValue","options","index","label","generateListNamePlaceholder","Item","w1","w2","indexOf","_defineProperty","_toConsumableArray","b","c1","c2","AddEmptyList","_ref29","color","cursor","textAlign","PlusSquareOutlined","ListHeader","_ref30","span","placeholder","maxLength","autoSize","CaretUpOutlined","marginRight","CaretDownOutlined","DeleteOutlined","_ref32","_ref33","count","Badge","size","offset","ListFooter","_ref34","_ref35","_ref36","Card","factionsPageByText","toggledSections","moveCardByOne","_ref74","_ref75","_ref76","toggleSection","_ref37","weaponIds","isInitialMount","useRef","useEffect","current","AntCard","hoverable","Meta","avatar","deploymentCost","display","alignItems","flex","replace","vehicleWeaponName","cortexName","weaponId","weapon","_ref117","storeLinks","linkText","storeIndex","Fragment","dangerouslySetInnerHTML","__html","coreStatsIndex","cardName","modelStats","_ref38","_ref39","stat","suffixIcon","onSelect","getPopupContainer","querySelectorAll","Option","_ref40","_ref41","_ref42","_ref43","_ref45","_ref46","_ref47","rule","_ref49","_ref50","markChargedOrSpike","weaponPoints","hardpointName","warjackWeaponNames","_ref51","location","_ref52","cost","vehicleWeaponName2","_ref53","weapons","specialRules","_ref54","_ref55","_ref56","_ref58","_ref59","textWithIcons","Tag","texts","_ref60","string","_string$split","description","wildCardFactions","_ref61","baseSize","health","HeartFilled","squadSize","TeamOutlined","_ref62","_ref63","chassisAdvantages","_ref64","_ref65","_ref66","_ref67","chassisSpecialRules","_ref68","_ref69","maneuvers","_ref70","_ref71","factionAttachment","attachment","wildCardAttachment","_ref72","_ref73","attachments","release","lore","pow","effect","effectIndex","margin","SyncOutlined","spin","List","_ref77","_ref78","App","initialized","_ref79","href","Affix","gutter","_ref80","getFullYear","factionNames","justFactions","factionsPresent","types","cyperTypes","_ref81","_ref82","_ref83","_ref84","weaponConfig","pointCost","_ref85","_ref86","_ref87","_ref89","_ref90","_ref91","_ref93","_ref94","markCharged","markSpike","_ref95","_ref96","_ref97","_ref98","_ref100","_ref101","_ref102","_ref104","_ref105","_ref106","_string$split3","_ref107","_ref109","_ref110","_ref111","_ref113","_ref115","_ref116","queryCadres","Requests","io","requests","cached","pending","cache","queryParams","selectCached","expire","fetch","params","selectPending","request","fetched","findIndex","parsePage","parserName","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","put","desc","jsonApiRequest","stop","queryCadreModels","_callee2","_context2","cmpageid","cmtype","cmlimit","queryRevisions","_callee3","_context4","prop","pageids","queryPageIds","_callee4","_context5","titles","encodeURIComponent","selectCachedRequestsByPageIds","parse","pageid","selectCachedParsedPageIds","selectCachedUrl","_context3","cmtitle","_marked","formatversion","format","keyValue","ParserNames","parserNames","cacheParserNames","take","sent","abrupt","jsonp","Promise","resolve","reject","callbackName","Math","round","random","body","removeChild","script","createElement","appendChild","fetchWikiPage","wikiPageChannel","_loop","actionChannel","curr","diff","wait","_data","pageRevisions","categorymembers","categoryMembers","titleToPageId","call","query","member","delay","delegateYield","t0","updateCache","_marked2","refreshWikiPages","_marked3","refreshOutdatedWikiPages","all","parsedPageIds","queryLength","slice","_yield$take","revInfoByPageId","_Object$entries","_Object$entries$_i","_Object$entries$_i$","revInfo","revision","missing","revid","max","revisions","partitionBy","array","arrays","fetchPageIds","cachedPageIds","_yield$all","_yield$all2","factionsSet","factionModelPages","wildCardPages","cypherPages","pageSlices","_pages","processedCount","t1","t2","t3","t5","finish","cacheWikiPages","fetchCadreCategoryMembers","fetchCadreModels","_pageIds","fetchCadres","cleanText","prepareDOM","doc","DOMParser","parseFromString","node","parentNode","parseCypherText","extractLink","helper","tagName","nextSibling","innerText","trim","extractParagraphs","removeUndefinedValues","source","p","hrefs","obj","isArray","parseAnchorTable","table","header","th","tr","td","anchors","parseAnchor","row","titleColon","hrefTitle","parseCypherCodecsText","cypherCodecsTable","cypherCodec","parseFactionModelsText","parseFactionsText","collectFactions","anchor","parseModelText","some","innerHTML","html","extractStoreLinks","extractText","contents","cardIndexes","el","nodeName","position","indexes","outerHTML","cardNameElement","factionAndTypes","extractList","extractDefinitions","extractWeaponSelection","cortexes","definitions","parseDefinitionText","extractCortexes","modelStatsData","modelStatsLength","from","as","extractFactionAttachment","tables","childNodes","nodeValue","extractWildCardAttachment","weaponsData","weaponsList","tds","stats","previousWeapons","lastWeapon","weaponDetails","weaponDetailsTable","weaponDetailsData","detailsHeader","_ref5$node","_step2","uls","_iterator2","ul","li","replaceWith","pairs","definition","groups","encodeHTML","textContent","append","parseVehicleAndWarjackWeaponText","parseVehicleOrWarjackWeapon","vehicleOrWarjackWeapon","prefix","res","availableFor","pointCostNode","locationNode","specialRulesP","acc2","index2","parseWildCardText","h1OrTable","factionAndModels","h1","last","buildWarjackWeaponSelections","Cost","Location","Weapon","identifyCortexSelections","categories","categoryTexts","findClosestCategory","parsers","parseCypher","parseCypherCodecs","parseFactionModels","parseFactions","parseModel","coreStat","fetchPages","_coreStat","cortexCategories","weaponPages","_iterator3","_step3","start","_parseVehicleAndWarja","vehicles","warjacks","end","vehicle","warjack","parseWildCard","parseWikiPages","parser","triggerFetchWikiPages","triggerFetchFactions","factionPages","digitsBase62","toBase62","result","updateUrl","_marked4","parseListsFromQuery","_marked5","parseListsFromQuery2","_marked6","parseLists","_marked7","fetchWeaponsIfVehicleAdded","_marked8","fetchWeaponsIfWarjackAdded","_marked9","fetchCardOnShow","renderWarjackWeaponIds","maxPageId","codeLength","history","replaceState","ids","padStart","ceil","v","origin","pathname","startsWith","loadChannel","eventChannel","emitter","addEventListener","removeEventListener","_context6","urlParams","version","exponent","listIndexes","_step2$value","_context7","URLSearchParams","search","substring","parseList","_yield$take2","pageWithoutTarget","_context8","_yield$take3","_iterator4","_step4","_context9","_yield$take4","_context10","encodedList","parseCards","rest","blockEnd","delimiter","_block$split","_block$split2","decode","normalizedString","NaN","fromBase62","strings","processes","fetchInitialData","continuePending","refresh","Version","objects","_len","_key","initAll","namespaces","group","saga","createSagaMiddleware","store","reset","persistedState","localStorage","getItem","JSON","latestState","composedEnhancers","composeWithDevTools","applyMiddleware","createStore","subscribe","setItem","stringify","getState","initStore","ReactDOM","render","Provider","getElementById","run"],"mappings":"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","file":"static/js/main.cca2c9e1.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Compound_Armor.159c8ed1.png\";","export default __webpack_public_path__ + \"static/media/Flight.ee1b66b2.png\";","export default __webpack_public_path__ + \"static/media/Pathfinder.658c0371.png\";","export default __webpack_public_path__ + \"static/media/Revelator.f9be1ca4.png\";","export default __webpack_public_path__ + \"static/media/Stealth.d0dbe094.png\";","export default __webpack_public_path__ + \"static/media/Weapon_Expert.e15642e8.png\";","export default __webpack_public_path__ + \"static/media/Aeternus_Continuum.d1b19d0e.png\";","export default __webpack_public_path__ + \"static/media/Fallback.1ae05c50.png\";","export default __webpack_public_path__ + \"static/media/Empyrean.4ab49225.png\";","export default __webpack_public_path__ + \"static/media/Iron_Star_Alliance.82d76402.png\";","export default __webpack_public_path__ + \"static/media/Lost_Legion.78737fb2.png\";","export default __webpack_public_path__ + \"static/media/Marcher_Worlds.61a330cf.png\";","export default __webpack_public_path__ + \"static/media/Wild_Card.3da9dbca.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEGUlEQVR42h2TaUzTdxjHfy1YLnHlKs4BmzgOryxMJiC6ioJzmzO6gQgNW+wmRykt5erBvyct/ffiaAtUGKwBIVB6FzTGMQfMLCabLEHdsiMZWaJLnC9ErvI/fqu+eJLPi+eTfJ88+YIgRoCN9U0AIQTb20Ewd2cZGPQB0NbopKrEszSlcCY0t3c08aaonVoX+Pb2vVe7EGIAwzcB2NrcAiSBgZW/nwJz900gFXrCNchMTGe7h65FXAmodDoRRTwJGrGPLmtxRwoFTmrA+zNYW3sOcBwHAJIkWFn5Bwj404BX64xAEV9Sl3JyX7/JXjRkGWUP9X/Ds5mHKq2o/WiP3JGiEnnpHPZU+PDQPCBIAoDVFxvA2nsrJE9G9Khv7Lbqx/IGrw0Y+gcHH+q7+150dvViBkvPU9vg8OKA2c61akaztTJ/Ard2Knxh4SEA83eXgbRtJhyV+BMtqD2vU6ublqh1kC9VQo5YDutEClgvkcMmhQoiOvS5SW+UW9CJDDHPs0uvd1GAHvVT1JJATK/akS5DlEaeSAov1/KIz9icYOmVqzirmotX1TVhl6u5m5c49ZDd2PSfSd3N6pW7k8UtPhporg+EoYiLbtHZikrLr/xaVccnrSPjweNny0jbyCgUtHcQOUXniY8ufU6cLa3CTl9gwQaeYOIaOpHZ3uiPBhLxTZpR5YrXIOiX75+5uJZ19CQ5NunElpYfhb4FSc+NW6Sxf5gUtKvIrLwS7EjxBfJiGWupD7UXaBDfTiAUeiK61e54haij4VDBaSzxYD75aSUbfyk/fvyYXF1bJ0NMLPz4E/nGO0w8JbeY/OCT8t+sJjtTIXbHAknrLK1LMRuPSk2VWbmFz+IOFBLp75ZgX1TziXOlLPhsdZ2YGJ8gnF4fWVnXjO1IOUh+eL7irtkwmquWhhLwudepapGfbjOOv1d05twPMamHIePQya2I3dkkfW8OLGdzCUZaNpmde4KoaZZir6XlwJqrDSZbl/etlnp/FNCgU0DU4og0a12pMqGCu2fv/tWIPfthfGY+FpeRh9EYGRh9X+529JtH8ChGOjx26uNfzPq+Yj3iSupAAmFgbu4eEDY6qMpWf9ywYTy7lcuXp2Yc/peW+DaMZGTD6NcPQBojxMmZMOcY875Waayw6J1pzZzpqNGRRcqrYsz4lwDnK0e4VjaTYDNOZmplelZpWcVYfiHzfl7B8UdMZvFCLbuuy6IbKjHrvGmyNlesuNFP/euPJwBgWBCsb6yB4a/nKdya6TARz7WrT+lLHjE6swZ0YwU2w/UT/YaJ3MHQzTrpVFIr1xEtFripi98/oEIYKhOOY+AlkCQOFu48AEbUR5E0u2kSvjumE/HFqoSeWHW7f2crJxDVgXjD7cPfUf78/UnICQICw8H/Di4IlwZqb7gAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAED0lEQVR42iVTa0ybZRh9W7oyxkWubpkbIlOYmk0ITGQGChkjxCiiCSFsxiUUxyhtoS0tpfQGpaU3LgVKO0bLpckg0HspVoeMreoMS4bROGfU4LZk3DQRxtrC1+97/cAfT86f55zn5Dw5IIQGwd7eHoAQgnAYAf47PwO1xg2YnBmiUOQlC/lesoh/61ATa4ooV1vBNwv3D3YP9lEUgOABGQGPHz8DfbpbQNziISmEzmi5wBqvEtmS8ElWCB1JHQJnfBvPdpjLthFnXctgZyf4vwCGKz198gxwGqcBnWaPlAvdKTrp1Cmj1lxsGpyoGdGPMq/3j1zSK0ff7RVPnpDxPfE0qo1kGrkNUCwMwIsXQTDQPw/o9Y7I/k7fMb3KnDdsvKExmE2/KHUDz9s1GqR7SLc5PGL2G/rG6Hq55bRS4kmi11lJfv9DAH649wi0tXpIcpE72aAcy+tRDczwOzohlcmCbEkn1JknIJXTDL9o4cI2dddWr6pXMqicfkPAnI3TaDwEoFZ5CDKRM3pQZkvvlMi01VfroGrAgHLFsl2Zpjv8218r4dqGJkStNwbZHTJ4hdb4d5+i//KA1H6Uz3WSAYfpjlAKvfG6LlPxZ9Srv2aXfIBV1TJ2V548xTY2NyAeMrq6uo5+ffcemldagRSWV0IGi3XzumoyQ9ToOoKn7iXr2p2JcpGa+n5J+c6F8mqMxuIj6xub+KcgFtrdw/bxtv97rPJKHXK+rAL7qKp6eVA1lq9s88QAHtcd2S93JEpbFYyM7EKk5hoLW1q6Hw4Egjh5FwuHw1goEED/3drGbB5fuKCsGisq++SRUTtOkfLtsUDM9ZF1UhfuQHspM5fyz0tp76CnsgqQ1bU1dN9CKBTYR3TKaseij7+OJLz9Hnbh46rvjGpLbqfQFQPYTCuxQzAXP6SZPFdS9um3IDEN1jD5obk5H+b2+uDW9nPUPGbB3F/No2eLKxDy8TOw4VpTt6nblcZpcEcBlXIGtDa7DhsUzpMSnoyenH52O7egFMa9/BqSS/kQsbq/RMgJr+y9mUMJnzhDgVn5JT8a1cYStciR0i5yRYD5hSXAY1uJ7S3uhBvam6fZjBZJyquZa4S4NJiYmg3fyrkADx1Lh4TYkzDrXNEDjayvWq+2pXLpjijL6CLhoBTe2WVQXztN6hL7koZ7rBlqafflqsrPLXn5hQ9yss8/LKKU3qVR63uGtMaLerU9VcKbiRVwnMSVP9cB3kAUBIIBYBpZINDrnBF8hjNuqN19dFzjyhzSTuQbesYLhrWW3NGe2TQVbpvLsB8RsD1Ev/8nIp4tOGgUBjGAwjC4s4hXuWuO0NLsIAsa7dEKkTtW3GqNVbQ5Yng0T1SHcJY0bl4k/PH7Ku4c5+DH/wODKCpYmfBgCwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Blast_Weapon.91876b57.png\";","export default __webpack_public_path__ + \"static/media/Corrosion.d848b926.png\";","export default __webpack_public_path__ + \"static/media/Fire.678cd613.png\";","export default __webpack_public_path__ + \"static/media/Lock_Down.22e3867d.png\";","export default __webpack_public_path__ + \"static/media/Repulsor.d174ca78.png\";","export default __webpack_public_path__ + \"static/media/Spray_Weapon.7d0ffad2.png\";","export default __webpack_public_path__ + \"static/media/Strafe.4aaa8fd7.png\";","export default __webpack_public_path__ + \"static/media/System_Failure.0aea5e20.png\";","const CardDragEnded = message(\"CARD/DRAG_ENDED\");\nconst CardDragStarted = message(\"CARD/DRAG_STARTED\");\nconst MenuItemClicked = message(\"MENU_ITEM/CLICKED\");\n\nconst FetchedWikiPage = message(\"WIKI_PAGE/FETCHED\");\nconst FetchedWikiPageRevisions = message(\"WIKI_PAGE_REVISIONS/FETCHED\");\nconst RefreshWikiPages = message(\"WIKI_PAGES/REFRESH\");\n\nexport {\n  CardDragEnded,\n  CardDragStarted,\n  FetchedWikiPage,\n  FetchedWikiPageRevisions,\n  MenuItemClicked,\n  RefreshWikiPages,\n};\n\nfunction message(type) {\n  return (payload = {}) => ({ type, payload });\n}\n","import produce from \"immer\";\n\nconst initAll = (...objects) =>\n  pipe(...objects.map((obj) => produce(obj.init)));\n\nconst immer = (f) => (state, action) => produce(f(action) || identity)(state);\n\nconst StateShard = (namespace, init, actions, actionCreators, selectors) => ({\n  namespace,\n  init,\n  dispatch: Object.fromEntries(\n    Object.entries(actions).map(([functionName, f]) => [\n      namespace + \".\" + functionName,\n      f,\n    ])\n  ),\n  ...Object.fromEntries(\n    Object.keys(actions).map((functionName) => [\n      functionName,\n      (payload = {}) => ({ type: namespace + \".\" + functionName, payload }),\n    ])\n  ),\n  ...actionCreators,\n  ...Object.fromEntries(\n    Object.entries(selectors).map(([name, f]) => [\n      name,\n      (...args) =>\n        (state) =>\n          f(state, ...args),\n    ])\n  ),\n});\n\nexport { StateShard, immer, initAll };\n\nfunction identity(a) {\n  return a;\n}\n\nfunction pipe(...fs) {\n  return (a) => {\n    for (const f of fs) {\n      a = f(a);\n    }\n    return a;\n  };\n}\n","import { StateShard } from \"./utils\";\n\nconst AppSync = StateShard(\"AppSync\", init, { done }, {}, { selectDone });\n\nexport { AppSync };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  if (!state.data.sync) {\n    state.data.sync = {};\n  }\n\n  state.data.sync.done = false;\n}\n\n// Actions\n\nfunction done(state) {\n  const sync = select(state);\n  sync.done = true;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.sync;\n}\n\nfunction selectDone(state) {\n  const sync = select(state);\n  return sync.done;\n}\n","import { StateShard } from \"./utils\";\n\nconst CypherCodecs = StateShard(\n  \"CypherCodecs\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { CypherCodecs };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cypherCodecs = [];\n}\n\n// Actions\n\nfunction set(state, { cypherCodecs }) {\n  state.data.cypherCodecs = cypherCodecs;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cypherCodecs;\n}\n\nfunction selectByPage(state, page) {\n  const codecs = select(state);\n  return codecs.find((codec) => codec.Cypher.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst EditMode = StateShard(\"EditMode\", init, { toggle }, {}, { select });\n\nexport { EditMode };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.editMode = false;\n}\n\n// Actions\n\nfunction toggle(state) {\n  const editMode = select(state);\n  state.ui.editMode = !editMode;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.editMode;\n}\n","import { StateShard } from \"./utils\";\n\nconst FactionModels = StateShard(\n  \"FactionModels\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { FactionModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factionModels = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, factionModels }) {\n  const models = select(state);\n  models[page] = factionModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factionModels;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Factions = StateShard(\n  \"Factions\",\n  init,\n  { set },\n  {},\n  { select, selectPageByText }\n);\n\nexport { Factions };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factions = {};\n}\n\n// Actions\n\nfunction set(state, { factions }) {\n  state.data.factions = factions;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factions;\n}\n\nfunction selectPageByText(state) {\n  const factions = select(state);\n\n  return Object.fromEntries(\n    Object.values(factions).map(({ text, page }) => [text, page])\n  );\n}\n","import { StateShard } from \"./utils\";\n\nconst Lists = StateShard(\n  \"Lists\",\n  init,\n  {\n    addCard,\n    addEmptyList,\n    moveListBy,\n    removeCard,\n    removeList,\n    set,\n    setCardCortex,\n    setCardVehicleWeapon,\n    setCardWarjackWeapons,\n    setListTitle,\n    toggleCard,\n    moveCard,\n  },\n  {},\n  { select, selectCard }\n);\n\nexport { Lists };\n\nconst oneEmptyList = [\n  {\n    title: \"\",\n    cards: [],\n  },\n];\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.lists = oneEmptyList;\n}\n\n// Actions\n\nfunction set(state, { lists }) {\n  state.ui.lists = lists.length > 0 ? lists : oneEmptyList;\n}\n\nfunction setListTitle(state, { listIndex, title }) {\n  const lists = select(state);\n  lists[listIndex].title = title;\n}\n\nfunction addCard(state, { listIndex, pageId }) {\n  const lists = select(state);\n  const card = { pageId, hidden: true };\n  lists[listIndex].cards.push(card);\n}\n\nfunction addEmptyList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 0, oneEmptyList[0]);\n}\n\nfunction removeCard(state, { listIndex, cardIndex }) {\n  const lists = select(state);\n  lists[listIndex].cards.splice(cardIndex, 1);\n}\n\nfunction removeList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 1);\n  if (lists.length === 0) {\n    addEmptyList(state, { listIndex: 0 });\n  }\n}\n\nfunction moveListBy(state, { listIndex, by }) {\n  const lists = select(state);\n  if (\n    (by > 0 && listIndex + by < lists.length) ||\n    (by < 0 && listIndex + by >= 0)\n  ) {\n    const list = lists[listIndex];\n    lists.splice(listIndex, 1);\n    lists.splice(listIndex + by, 0, list);\n  }\n}\n\nfunction moveCard(state, { listIndex, cardIndex, up }) {\n  const lists = select(state);\n  const list = lists[listIndex];\n  const card = list.cards[cardIndex];\n\n  const newCardIndex = cardIndex + (up ? -1 : 1);\n  if (newCardIndex >= 0 && newCardIndex < list.cards.length) {\n    list.cards.splice(cardIndex, 1);\n    list.cards.splice(newCardIndex, 0, card);\n  } else if (newCardIndex === -1 && listIndex > 0) {\n    const newList = lists[listIndex - 1];\n    list.cards.splice(cardIndex, 1);\n    newList.cards.push(card);\n  } else if (\n    newCardIndex === list.cards.length &&\n    listIndex < lists.length - 1\n  ) {\n    const newList = lists[listIndex + 1];\n    list.cards.splice(cardIndex, 1);\n    newList.cards.splice(0, 0, card);\n  }\n}\n\nfunction toggleCard(state, { listIndex, cardIndex, pageId }) {\n  console.log(Date.now(), \"toggleCard\");\n\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.hidden = !card.hidden;\n  }\n}\n\nfunction setCardCortex(state, { listIndex, cardIndex, pageId, cortexIds }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n\n  if (!pageId) {\n    delete card.cortexIds;\n  } else {\n    if (card.pageId === pageId) {\n      card.cortexIds = cortexIds;\n    }\n  }\n}\n\nfunction setCardWarjackWeapons(\n  state,\n  { listIndex, cardIndex, hardpointNameIndex, pageId, warjackWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!card.warjackWeaponIds) {\n      card.warjackWeaponIds = [];\n    }\n    if (!warjackWeaponId) {\n      delete card.warjackWeaponIds[hardpointNameIndex];\n    } else {\n      card.warjackWeaponIds[hardpointNameIndex] = warjackWeaponId;\n    }\n  }\n}\n\nfunction setCardVehicleWeapon(\n  state,\n  { listIndex, cardIndex, pageId, vehicleWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!vehicleWeaponId) {\n      delete card.vehicleWeaponId;\n    } else {\n      card.vehicleWeaponId = vehicleWeaponId;\n    }\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.lists;\n}\n\nfunction selectCard(state, listIndex, cardIndex) {\n  const lists = select(state);\n  return lists[listIndex].cards[cardIndex];\n}\n","import { StateShard } from \"./utils\";\n\nconst ToggleSections = StateShard(\n  \"ToggleSections\",\n  init,\n  { toggle },\n  {},\n  { select }\n);\n\nexport { ToggleSections };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.toggleSections = {};\n}\n\n// Actions\n\nfunction toggle(state, { section }) {\n  const toggleSections = select(state);\n  const showSection = selectSection(state, section);\n  toggleSections[section] = !showSection;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.toggleSections;\n}\n\nfunction selectSection(state, section) {\n  const toggleSections = select(state);\n  return toggleSections[section];\n}\n","import { StateShard } from \"./utils\";\n\nconst Url = StateShard(\"Url\", init, { set }, {}, { select });\n\nexport { Url };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.url = \"\";\n}\n\n// Actions\n\nfunction set(state, { url }) {\n  state.ui.url = url;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.url;\n}\n","import { StateShard } from \"./utils\";\n\nconst WildCardModels = StateShard(\n  \"WildCardModels\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { WildCardModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.wildCardModels = {};\n}\n\n// Actions\n\nfunction set(state, { wildCards }) {\n  const models = select(state);\n  for (const wildCard of wildCards) {\n    models[wildCard.faction] = wildCard.models;\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.wildCardModels;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst VehicleWeapons = StateShard(\n  \"VehicleWeapons\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { VehicleWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.vehicleWeapons = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, vehicleWeapon }) {\n  const vehicleWeapons = select(state);\n  vehicleWeapons[page] = vehicleWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.vehicleWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const vehicleWeapons = select(state);\n  return vehicleWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst WarjackWeapons = StateShard(\n  \"WarjackWeapons\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { WarjackWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.warjackWeapons = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, warjackWeapon }) {\n  const warjackWeapons = select(state);\n  warjackWeapons[page] = warjackWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.warjackWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const warjackWeapons = select(state);\n  return warjackWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreModels = StateShard(\n  \"CadreModels\",\n  init,\n  { set, setForCadrePageId },\n  {},\n  { select, selectCadreModelsByPageId }\n);\n\nexport { CadreModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreModels = {};\n}\n\n// Actions\n\nfunction set(state, { cadreModels }) {\n  state.data.cadreModels = cadreModels;\n}\n\nfunction setForCadrePageId(state, { cadrePageId, cadreModels }) {\n  select(state)[cadrePageId] = cadreModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreModels;\n}\n\nfunction selectCadreModelsByPageId(state, pageId) {\n  const cadreModels = select(state);\n  return cadreModels[pageId];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreCategoryMembers = StateShard(\n  \"CadreCategoryMembers\",\n  init,\n  { set },\n  {},\n  { select }\n);\n\nexport { CadreCategoryMembers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreCategoryMembers = {};\n}\n\n// Actions\n\nfunction set(state, { cadreCategoryMembers }) {\n  state.data.cadreCategoryMembers = cadreCategoryMembers;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreCategoryMembers;\n}\n","import { StateShard } from \"./utils\";\n\nconst ListIndex = StateShard(\"ListIndex\", init, { set }, {}, { select });\n\nexport { ListIndex };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.listIndex = 0;\n}\n\n// Actions\n\nfunction set(state, { listIndex }) {\n  state.ui.listIndex = listIndex;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.listIndex;\n}\n","import { StateShard } from \"./utils\";\n\nconst Cyphers = StateShard(\n  \"Cyphers\",\n  init,\n  { setForPage },\n  {},\n  { selectByPage }\n);\n\nexport { Cyphers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cyphers = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, cypher }) {\n  const cyphers = select(state);\n  cyphers[page] = cypher;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cyphers;\n}\n\nfunction selectByPage(state, page) {\n  const cyphers = select(state);\n  return Object.values(cyphers)\n    .flat()\n    .find((cypher) => cypher.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Models = StateShard(\n  \"Models\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { Models };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.models = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, model }) {\n  const models = select(state);\n  models[page] = model;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.models;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst PageIds = StateShard(\n  \"PageIds\",\n  init,\n  { addPages },\n  {},\n  { select, selectByPage, selectPageByPageId }\n);\n\nexport { PageIds };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.pageIds = {};\n}\n\n// Actions\n\nfunction addPages(state, { pageIdByTitle }) {\n  const pageIds = select(state);\n  for (const title in pageIdByTitle) {\n    pageIds[title] = pageIdByTitle[title];\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.pageIds;\n}\n\nfunction selectByPage(state, page) {\n  const pageIds = select(state);\n  return pageIds[page];\n}\n\nfunction selectPageByPageId(state, pageId) {\n  const pageIds = select(state);\n  return Object.entries(pageIds).reduce(\n    (acc, [page, statePageId]) =>\n      acc ? acc : statePageId === pageId ? page : acc,\n    undefined\n  );\n}\n","import { CypherCodecs } from \"../CypherCodecs\";\nimport { Cyphers } from \"../Cyphers\";\nimport { FactionModels } from \"../FactionModels\";\nimport { Lists } from \"../Lists\";\nimport { Models } from \"../Models\";\nimport { PageIds } from \"../PageIds\";\nimport { WildCardModels } from \"../WildCardModels\";\nimport { StateShard } from \"../utils\";\n\nconst EnhancedLists = StateShard(\n  \"EnhancedLists\",\n  undefined,\n  {},\n  {},\n  { select, selectDetails }\n);\n\nexport { EnhancedLists };\n\n// Selectors\n\nfunction select(state) {\n  const lists = Lists.select()(state);\n  const pageIdByPage = PageIds.select()(state);\n  const factionModels = FactionModels.select()(state);\n  const wildCardModels = WildCardModels.select()(state);\n  const cypherCodecs = CypherCodecs.select()(state);\n\n  return lists.map(({ title, cards }) => ({\n    title,\n    cards: cards.flatMap(\n      ({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId, hidden }) => {\n        const page =\n          Object.entries(pageIdByPage)\n            .filter(([_, id]) => id === pageId)\n            .map(([page, _]) => page)[0] || \"\";\n\n        const model = Object.entries(factionModels)\n          .flatMap(([faction, models]) =>\n            models.map((model) => ({ ...model, faction }))\n          )\n          .find(({ Name }) => Name.page === page);\n\n        if (model) {\n          return [\n            {\n              card: \"model\",\n              hidden,\n              type: model.Type.text,\n              title: model.Name.text,\n              page: model.Name.page,\n              pageId,\n              cortexIds,\n              warjackWeaponIds,\n              vehicleWeaponId,\n              faction: model.faction,\n              ...(model.Subtype\n                ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                : {}),\n            },\n          ];\n        }\n\n        const wildCard = Object.entries(wildCardModels)\n          .flatMap(([faction, models]) =>\n            models.map((model) => ({ ...model, faction }))\n          )\n          .find(({ Name }) => Name.page === page);\n\n        if (wildCard) {\n          return [\n            {\n              card: \"model\",\n              hidden,\n              type: wildCard.Type.text,\n              title: wildCard.Name.text,\n              page: wildCard.Name.page,\n              pageId,\n              faction: \"Wild_Card\",\n              ...(wildCard.Subtype\n                ? { subtype: wildCard.Subtype.map((_) => _.text).join(\" \") }\n                : {}),\n            },\n          ];\n        }\n\n        const cypher = cypherCodecs.find(({ Cypher }) => Cypher.page === page);\n\n        if (cypher) {\n          return [\n            {\n              card: \"cypher\",\n              hidden,\n              type: cypher.Type.text,\n              title: cypher.Cypher.text,\n              page: cypher.Cypher.page,\n              pageId,\n              ...(cypher.Faction.text === \"Universal\"\n                ? { faction: \"Universal\" }\n                : { faction: cypher.Faction.page }),\n            },\n          ];\n        }\n\n        return [];\n      }\n    ),\n  }));\n}\n\nfunction selectDetails(state) {\n  const lists = select(state);\n\n  return lists.map(({ title, cards }) => ({\n    title,\n    cards: cards.map((card) => {\n      const pageIdByPage = PageIds.select()(state);\n\n      const page =\n        Object.entries(pageIdByPage)\n          .filter(([_, id]) => id === card.pageId)\n          .map(([page, _]) => page)[0] || \"\";\n\n      let details = undefined;\n\n      if (card.card === \"model\" && card.faction !== \"Wild_Card\") {\n        details = Models.selectByPage(page)(state);\n        if (details) {\n          details = {\n            ...details,\n            ...(!details.coreStats\n              ? {}\n              : {\n                  coreStats: details.coreStats.map((coreStats) => ({\n                    ...coreStats,\n                    ...(!coreStats.hardpoints\n                      ? {}\n                      : {\n                          hardpointNames: parseHardpoints(coreStats.hardpoints),\n                        }),\n                    ...(!coreStats.cortexSelections\n                      ? {}\n                      : {\n                          cortexSelections: Object.fromEntries(\n                            Object.entries(coreStats.cortexSelections).map(\n                              ([cortex, advantages]) => [\n                                cortex,\n                                Object.fromEntries(\n                                  Object.entries(advantages).map(\n                                    ([advantage, { text, category }]) => [\n                                      advantage,\n                                      {\n                                        text,\n                                        categoryId: pageIdByPage[category],\n                                      },\n                                    ]\n                                  )\n                                ),\n                              ]\n                            )\n                          ),\n                        }),\n                    ...(!coreStats.warjackWeaponSelections\n                      ? {}\n                      : {\n                          warjackWeaponSelections: Object.fromEntries(\n                            Object.entries(\n                              coreStats.warjackWeaponSelections\n                            ).map(([page, selection]) => [\n                              page.split(\"#\")[0],\n                              {\n                                ...selection,\n                                pageId: pageIdByPage[page.split(\"#\")[0]],\n                              },\n                            ])\n                          ),\n                        }),\n                    ...(!coreStats.vehicleWeaponSelection\n                      ? {}\n                      : {\n                          vehicleWeaponSelection:\n                            coreStats.vehicleWeaponSelection.map(\n                              ({ text, page }) => ({\n                                text,\n                                page: page.split(\"#\")[0],\n                                pageId: pageIdByPage[page.split(\"#\")[0]],\n                              })\n                            ),\n                        }),\n                  })),\n                }),\n          };\n        }\n      }\n\n      if (card.card === \"model\" && card.faction === \"Wild_Card\") {\n        details = Models.selectByPage(page)(state);\n      }\n\n      if (card.card === \"cypher\") {\n        details = Cyphers.selectByPage(page)(state);\n      }\n\n      return {\n        ...card,\n        ...(!details ? {} : { details }),\n      };\n    }),\n  }));\n}\n\n// Helpers\n\nfunction parseHardpoints(hardpoints) {\n  // Parses strings of the following type: \"3 : 2 Arm, 1 Back\"\n\n  const rHardpointCount = \"\\\\s*(\\\\d+)\\\\s*\";\n  const rHardpointGroup = \"\\\\s*(\\\\d+)\\\\s*(\\\\w+)\\\\s*\";\n\n  let results = null;\n  for (let n = 1; n <= 10; n++) {\n    const regexp = new RegExp(\n      `^${rHardpointCount}:${rHardpointGroup}${repeat(\n        `,${rHardpointGroup}`,\n        n - 1\n      )}$`\n    );\n    results = regexp.exec(hardpoints);\n    if (results !== null) {\n      break;\n    }\n  }\n\n  if (results === null) {\n    return undefined;\n  }\n\n  const hardpointCount = parseInt(results[1], 10);\n\n  const hardpointNames = [];\n  for (let n = 2; n < results.length; n += 2) {\n    const groupCount = parseInt(results[n], 10);\n    const groupName = results[n + 1];\n\n    for (let i = 1; i <= groupCount; i++) {\n      hardpointNames.push(groupName);\n    }\n  }\n\n  if (hardpointCount !== hardpointNames.length) {\n    console.error(\n      \"Hardpoints do not add up!\",\n      hardpoints,\n      hardpointCount,\n      hardpointNames\n    );\n  }\n\n  return hardpointNames;\n\n  function repeat(s, n) {\n    if (n === 0) return \"\";\n    return s + repeat(s, n - 1);\n  }\n}\n","import \"./App.css\";\nimport React from \"react\";\nimport { useRef, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Affix,\n  Badge,\n  Card as AntCard,\n  Col,\n  Drawer,\n  Input,\n  Layout,\n  Menu,\n  Row,\n  Select,\n  Tooltip,\n} from \"antd\";\nimport {\n  CaretDownOutlined,\n  CaretUpOutlined,\n  CheckSquareOutlined,\n  DeleteOutlined,\n  FormOutlined,\n  HeartFilled,\n  MenuUnfoldOutlined,\n  PlusSquareOutlined,\n  SyncOutlined,\n  TeamOutlined,\n} from \"@ant-design/icons\";\nimport CompoundArmor from \"./img/advantages/Compound_Armor.png\";\nimport Flight from \"./img/advantages/Flight.png\";\nimport Pathfinder from \"./img/advantages/Pathfinder.png\";\nimport Revelator from \"./img/advantages/Revelator.png\";\nimport Stealth from \"./img/advantages/Stealth.png\";\nimport WeaponExpert from \"./img/advantages/Weapon_Expert.png\";\nimport AeternusContinuum from \"./img/factions/Aeternus_Continuum.png\";\nimport Fallback from \"./img/factions/Fallback.png\";\nimport Empyrean from \"./img/factions/Empyrean.png\";\nimport IronStarAlliance from \"./img/factions/Iron_Star_Alliance.png\";\nimport LostLegion from \"./img/factions/Lost_Legion.png\";\nimport MarcherWorlds from \"./img/factions/Marcher_Worlds.png\";\nimport WildCard from \"./img/factions/Wild_Card.png\";\nimport AeternusContinuumCharged from \"./img/faction_icons/Aeternus_Continuum_Charged.png\";\nimport AeternusContinuumSpike from \"./img/faction_icons/Aeternus_Continuum_Spike.png\";\nimport EmpyreanCharged from \"./img/faction_icons/Empyrean_Charged.png\";\nimport EmpyreanSpike from \"./img/faction_icons/Empyrean_Spike.png\";\nimport IronStarAllianceCharged from \"./img/faction_icons/Iron_Star_Alliance_Charged.png\";\nimport IronStarAllianceSpike from \"./img/faction_icons/Iron_Star_Alliance_Spike.png\";\nimport MarcherWorldsCharged from \"./img/faction_icons/Marcher_Worlds_Charged.png\";\nimport MarcherWorldsSpike from \"./img/faction_icons/Marcher_Worlds_Spike.png\";\nimport WildCardCharged from \"./img/faction_icons/Wild_Card_Charged.png\";\nimport WildCardSpike from \"./img/faction_icons/Wild_Card_Spike.png\";\nimport BlastWeapon from \"./img/weapon_qualities/Blast_Weapon.png\";\nimport Corrosion from \"./img/weapon_qualities/Corrosion.png\";\nimport Fire from \"./img/weapon_qualities/Fire.png\";\nimport LockDown from \"./img/weapon_qualities/Lock_Down.png\";\nimport Repulsor from \"./img/weapon_qualities/Repulsor.png\";\nimport SprayWeapon from \"./img/weapon_qualities/Spray_Weapon.png\";\nimport Strafe from \"./img/weapon_qualities/Strafe.png\";\nimport SystemFailure from \"./img/weapon_qualities/System_Failure.png\";\nimport { MenuItemClicked } from \"../messages\";\nimport { AppSync } from \"../state/AppSync\";\nimport { CypherCodecs } from \"../state/CypherCodecs\";\nimport { EditMode } from \"../state/EditMode\";\nimport { FactionModels } from \"../state/FactionModels\";\nimport { Factions } from \"../state/Factions\";\nimport { Lists } from \"../state/Lists\";\nimport { ToggleSections } from \"../state/ToggleSections\";\nimport { Url } from \"../state/Url\";\nimport { WildCardModels } from \"../state/WildCardModels\";\nimport { VehicleWeapons } from \"../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../state/WarjackWeapons\";\nimport { CadreModels } from \"../state/CadreModels\";\nimport { CadreCategoryMembers } from \"../state/CadreCategoryMembers\";\nimport { ListIndex } from \"../state/ListIndex\";\nimport { EnhancedLists } from \"../state/selectors/EnhancedLists\";\n\nconst { Header, Footer, Content } = Layout;\nconst { TextArea } = Input;\nconst { SubMenu } = Menu;\n\nconst factionIcons = {\n  Aeternus_Continuum: AeternusContinuum,\n  Empyrean,\n  Iron_Star_Alliance: IronStarAlliance,\n  Lost_Legion: LostLegion,\n  Marcher_Worlds: MarcherWorlds,\n  Wild_Card: WildCard,\n  Universal: Fallback,\n};\n\nfunction FactionIcon({ faction, style, height = \"35px\" }) {\n  const src = factionIcons[faction] || Fallback;\n  return <img src={src} height={height} alt={faction} style={style} />;\n}\n\nconst spikeIcons = {\n  Aeternus_Continuum: AeternusContinuumSpike,\n  Empyrean: EmpyreanSpike,\n  Iron_Star_Alliance: IronStarAllianceSpike,\n  Marcher_Worlds: MarcherWorldsSpike,\n  Wild_Card: WildCardSpike,\n};\n\nfunction SpikeIcon({ faction, style, height = \"18px\" }) {\n  return (\n    <img\n      src={spikeIcons[faction] || WildCardSpike}\n      height={height}\n      alt={faction}\n      style={{ ...style, marginTop: \"-4px\" }}\n    />\n  );\n}\n\nconst chargedIcons = {\n  Aeternus_Continuum: AeternusContinuumCharged,\n  Empyrean: EmpyreanCharged,\n  Iron_Star_Alliance: IronStarAllianceCharged,\n  Marcher_Worlds: MarcherWorldsCharged,\n  Wild_Card: WildCardCharged,\n};\n\nfunction ChargedIcon({ faction, style, height = \"18px\" }) {\n  return (\n    <img\n      src={chargedIcons[faction] || WildCardCharged}\n      height={height}\n      alt={faction}\n      style={{ ...style, marginTop: \"-4px\" }}\n    />\n  );\n}\n\nconst advantageIcons = {\n  \"Compound Armor\": CompoundArmor,\n  Flight,\n  Pathfinder,\n  Revelator,\n  Stealth,\n  \"Weapon Expert\": WeaponExpert,\n};\n\nfunction AdvantageIcon({ title, text, style, height = \"30px\" }) {\n  const src = advantageIcons[title];\n\n  if (src) {\n    return (\n      <Tooltip placement=\"top\" title={`${title} - ${text}`} trigger=\"click\">\n        <img\n          src={advantageIcons[title]}\n          className=\"metallic-img\"\n          alt={title}\n          height={height}\n          style={style}\n          onClick={(event) => event.stopPropagation()}\n        />\n      </Tooltip>\n    );\n  }\n\n  return <div className=\"metallic-circle\" />;\n}\n\nconst weaponQualityIcons = {\n  \"Blast Weapon\": BlastWeapon,\n  Corrosion,\n  Fire,\n  \"Lock Down\": LockDown,\n  Repulsor,\n  \"Spray Weapon\": SprayWeapon,\n  Strafe,\n  \"System Failure\": SystemFailure,\n};\n\nfunction WeaponQualityIcon({ title, text, style, height = \"16px\" }) {\n  const src = weaponQualityIcons[title];\n\n  if (src) {\n    return (\n      <Tooltip placement=\"top\" title={`${title} - ${text}`} trigger=\"click\">\n        <img\n          src={src}\n          className=\"metallic-img-tiny\"\n          alt={title}\n          height={height}\n          style={style}\n          onClick={(event) => event.stopPropagation()}\n        />\n      </Tooltip>\n    );\n  }\n\n  return <></>;\n}\n\nconst BookmarkPresentation = ({ url, setUrl, open, bookmark }) => (\n  <div className=\"bookmark\">\n    <Layout>\n      <Row>\n        <Col xs={24} sm={24} md={18} lg={18} xl={16} xxl={16}>\n          <input\n            value={url}\n            onChange={setUrl}\n            onKeyDown={open}\n            onClick={bookmark}\n          />\n        </Col>\n      </Row>\n    </Layout>\n  </div>\n);\n\nconst Bookmark = connect(\n  (state) => ({\n    url: Url.select()(state),\n  }),\n  (dispatch) => ({\n    setUrl: (event) => dispatch(Url.set({ url: event.target.value })),\n    bookmark: () => {\n      const bookmark = document.querySelector(\".bookmark input\");\n      if (bookmark) {\n        if (navigator.userAgent.match(/ipad|iphone/i)) {\n          const range = document.createRange();\n          range.selectNodeContents(bookmark);\n\n          const selection = window.getSelection();\n          selection.removeAllRanges();\n          selection.addRange(range);\n          bookmark.setSelectionRange(0, 999999);\n        } else {\n          bookmark.select();\n        }\n      }\n    },\n    open: (event) => {\n      if (event.key === \"Enter\") {\n        const url = document.querySelector(\".bookmark input\").value;\n        if (url) window.open(url, \"_self\");\n      }\n    },\n  })\n)(BookmarkPresentation);\n\nconst FactionsMenuPresentation = ({\n  factionModels,\n  wildCardModels,\n  cypherCodecs,\n  menuItemClicked,\n  allMenuItemsClicked,\n  cadres,\n  toggleEditMode,\n  updateTargetList,\n  editMode,\n  lists,\n  factions,\n  targetList,\n}) => {\n  const [openDrawer, setOpenDrawer] = React.useState(\"\");\n\n  const onOpenChangeDrawers = (keys) => {\n    if (keys.length > 0) {\n      const key = keys[0];\n      if (key === openDrawer) {\n        setOpenDrawer(\"\");\n      } else {\n        setOpenDrawer(key);\n      }\n    }\n  };\n\n  return (\n    <Content>\n      <Menu\n        id=\"factions\"\n        openKeys={[]}\n        onOpenChange={onOpenChangeDrawers}\n        mode=\"horizontal\"\n        triggerSubMenuAction=\"click\"\n      >\n        {Object.keys(factions).map((faction) => (\n          <SubMenu key={faction} icon={<FactionIcon faction={faction} />} />\n        ))}\n        <SubMenu\n          className=\"edit\"\n          key=\"edit\"\n          icon={\n            editMode ? (\n              <CheckSquareOutlined\n                onClick={toggleEditMode}\n                style={{ fontSize: \"30px\" }}\n              />\n            ) : (\n              <FormOutlined\n                onClick={toggleEditMode}\n                style={{ fontSize: \"30px\" }}\n              />\n            )\n          }\n          style={{\n            marginLeft: \"20px\",\n            paddingTop: \"5px !important\",\n          }}\n        />\n      </Menu>\n      {factionModels.map(([factionName, faction, models, cadreModels]) => (\n        <Drawer\n          key={faction}\n          visible={openDrawer === faction}\n          placement=\"right\"\n          onClose={setOpenDrawer}\n          width=\"80%\"\n          mask={false}\n          closeIcon={<MenuUnfoldOutlined />}\n        >\n          <Menu\n            id={`faction_${faction}`}\n            mode=\"inline\"\n            triggerSubMenuAction=\"click\"\n          >\n            <Menu.ItemGroup\n              title={\n                <Select\n                  defaultValue={targetList}\n                  onChange={(event) => updateTargetList(event)}\n                  options={lists.map(({ title, cards }, index) => ({\n                    value: index,\n                    label: `${index + 1} - ${\n                      title ||\n                      generateListNamePlaceholder(\n                        cards,\n                        factions,\n                        \"Name your list\"\n                      )\n                    }`,\n                  }))}\n                />\n              }\n            />\n            <Menu.ItemGroup\n              title={\n                <div\n                  onClick={allMenuItemsClicked(\n                    models.map((model) => model.page)\n                  )}\n                >\n                  {factionName}\n                </div>\n              }\n            >\n              {models.map(({ name, page, type, subtype }) => (\n                <Menu.Item key={page} className={faction}>\n                  <span onClick={menuItemClicked(page)}>\n                    <span className=\"card\">{name}</span>\n                    <span className=\"types\">\n                      {subtype ? subtype : \"\"}\n                      {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                    </span>\n                  </span>\n                </Menu.Item>\n              ))}\n            </Menu.ItemGroup>\n            {!cadreModels ? (\n              <></>\n            ) : (\n              cadreModels.map(({ cadrePageId, cadreModels }) => (\n                <Menu.ItemGroup\n                  key={cadrePageId}\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        cadreModels.map((model) => model.page)\n                      )}\n                    >\n                      {cadres[cadrePageId]}\n                    </div>\n                  }\n                >\n                  {cadreModels.map(({ name, page, type, subtype }) => (\n                    <Menu.Item key={page} className={faction}>\n                      <span onClick={menuItemClicked(page)}>\n                        <span className=\"card\">{name}</span>\n                        <span className=\"types\">\n                          {subtype ? subtype : \"\"}\n                          {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                        </span>\n                      </span>\n                    </Menu.Item>\n                  ))}\n                </Menu.ItemGroup>\n              ))\n            )}\n            <Menu.ItemGroup\n              title={\n                <div\n                  onClick={allMenuItemsClicked(\n                    (wildCardModels[faction] || []).map((model) => model.page)\n                  )}\n                >\n                  Wild Cards\n                </div>\n              }\n            >\n              {(wildCardModels[faction] || [])\n                .sort((w1, w2) => (w1.type < w2.type ? -1 : 1))\n                .map(({ name, page, type, subtype }) => (\n                  <Menu.Item key={page}>\n                    <span onClick={menuItemClicked(page)}>\n                      <span className=\"card\">{name}</span>\n                      <span className=\"types\">\n                        {subtype ? subtype : \"\"}\n                        {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                      </span>\n                    </span>\n                  </Menu.Item>\n                ))}\n            </Menu.ItemGroup>\n            {Object.entries(\n              cypherCodecs\n                .filter(\n                  (cypher) =>\n                    [factionName, \"Universal\"].indexOf(cypher.Faction.text) !==\n                    -1\n                )\n                .reduce(\n                  (acc, cypher) => ({\n                    ...acc,\n                    [cypher.Faction.text]: [\n                      ...(acc[cypher.Faction.text] || []),\n                      cypher,\n                    ],\n                  }),\n                  {}\n                )\n            )\n              .sort(([a], [b]) =>\n                a === \"Universal\" ? 1 : b === \"Universal\" ? -1 : 1\n              )\n              .map(([faction, cyphers]) => (\n                <Menu.ItemGroup\n                  key={faction}\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        cyphers\n                          .sort((c1, c2) =>\n                            c1.Type.text < c2.Type.text ? -1 : 1\n                          )\n                          .map(({ Cypher }) => Cypher.page)\n                      )}\n                    >\n                      {`${faction} Cyphers`}\n                    </div>\n                  }\n                >\n                  {cyphers\n                    .sort((c1, c2) => (c1.Type.text < c2.Type.text ? -1 : 1))\n                    .map(({ Cypher, Type }) => (\n                      <Menu.Item key={Cypher.page} className={Type.text}>\n                        <span onClick={menuItemClicked(Cypher.page)}>\n                          <span className=\"card\">{Cypher.text}</span>\n                          <span className=\"types\">{Type.text}</span>\n                        </span>\n                      </Menu.Item>\n                    ))}\n                </Menu.ItemGroup>\n              ))}\n          </Menu>\n        </Drawer>\n      ))}\n    </Content>\n  );\n};\n\nconst FactionsMenu = connect(\n  (state) => ({\n    factionModels: Object.entries(FactionModels.select()(state))\n      .sort()\n      .map(([faction, models]) => [\n        Factions.select()(state)[faction].text,\n        faction,\n        models\n          .map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          }))\n          .filter(\n            (model) =>\n              !Object.values(CadreModels.select()(state))\n                .flatMap((models) =>\n                  models.map((cadreModel) => cadreModel.title)\n                )\n                .includes(model.name)\n          ),\n        Object.entries(CadreModels.select()(state)).flatMap(\n          ([cadrePageId, cadreModels]) => {\n            const cadre = cadreModels.map((model) => model.title);\n            const allCadreModels = models\n              .filter((model) => cadre.includes(model.Name.text))\n              .map((model) => ({\n                name: model.Name.text,\n                page: model.Name.page,\n                type: model.Type.text,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n              }));\n\n            if (allCadreModels.length === cadreModels.length)\n              return [{ cadrePageId, cadreModels: allCadreModels }];\n\n            return [];\n          }\n        ),\n      ]),\n    wildCardModels: Object.fromEntries(\n      Object.entries(WildCardModels.select()(state))\n        .sort()\n        .map(([faction, models]) => [\n          faction,\n          models.map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          })),\n        ])\n    ),\n    cypherCodecs: CypherCodecs.select()(state),\n    cadres: CadreCategoryMembers.select()(state),\n    editMode: EditMode.select()(state),\n    lists: EnhancedLists.select()(state),\n    factions: Factions.select()(state),\n    targetList: ListIndex.select()(state),\n  }),\n  (dispatch) => ({\n    menuItemClicked: (page) => (event) => {\n      dispatch(MenuItemClicked({ page }));\n      event.stopPropagation();\n    },\n    allMenuItemsClicked: (pages) => (event) => {\n      pages.forEach((page) => dispatch(MenuItemClicked({ page })));\n      event.stopPropagation();\n    },\n    toggleEditMode: () => dispatch(EditMode.toggle()),\n    updateTargetList: (listIndex) => dispatch(ListIndex.set({ listIndex })),\n  })\n)(FactionsMenuPresentation);\n\nconst AddEmptyListPresentation = ({ addEmptyList, listIndex }) => (\n  <div\n    style={{\n      color: \"white\",\n      cursor: \"pointer\",\n      textAlign: \"center\",\n    }}\n  >\n    <span onClick={addEmptyList(listIndex)}>\n      <PlusSquareOutlined /> Add list\n    </span>\n  </div>\n);\n\nconst AddEmptyList = connect(\n  () => ({}),\n  (dispatch) => ({\n    addEmptyList: (listIndex) => () =>\n      dispatch(Lists.addEmptyList({ listIndex })),\n  })\n)(AddEmptyListPresentation);\n\nconst ListHeaderPresentation = ({\n  title,\n  cards,\n  index: listIndex,\n  factions,\n  editMode,\n  removeList,\n  moveListBy,\n  setListTitle,\n}) => (\n  <div style={{ cursor: \"pointer\" }} className=\"header\">\n    <Row>\n      <Col span={16} className=\"army-list-title\">\n        <TextArea\n          placeholder={generateListNamePlaceholder(\n            cards,\n            factions,\n            \"Name your list\"\n          )}\n          value={title}\n          maxLength={30}\n          autoSize\n          onChange={setListTitle(listIndex)}\n        />\n      </Col>\n      <Col span={8} className=\"faction-icons\">\n        {editMode ? (\n          <>\n            <CaretUpOutlined\n              style={{\n                fontSize: \"18px\",\n                color: \"white\",\n                marginRight: \"16px\",\n                marginTop: \"6px\",\n              }}\n              onClick={moveListBy(listIndex, -1)}\n            />\n            <CaretDownOutlined\n              style={{\n                fontSize: \"18px\",\n                color: \"white\",\n                marginRight: \"16px\",\n                marginTop: \"6px\",\n              }}\n              onClick={moveListBy(listIndex, 1)}\n            />\n            <DeleteOutlined\n              style={{\n                fontSize: \"18px\",\n                color: \"white\",\n                marginRight: \"16px\",\n                marginTop: \"6px\",\n              }}\n              onClick={removeList(listIndex)}\n            />\n          </>\n        ) : (\n          Object.entries(\n            cards.reduce(\n              (acc, card) => ({\n                ...acc,\n                ...(card.faction\n                  ? {\n                      [card.faction]: (acc[card.faction] || 0) + 1,\n                    }\n                  : {\n                      Universal: (acc.Universal || 0) + 1,\n                    }),\n              }),\n              {}\n            )\n          )\n            .sort()\n            .map(([faction, count]) => (\n              <Badge size=\"small\" key={faction} count={count} offset={[0, 10]}>\n                <FactionIcon faction={faction} />\n              </Badge>\n            ))\n        )}\n      </Col>\n    </Row>\n  </div>\n);\n\nconst ListHeader = connect(\n  (state) => ({\n    editMode: EditMode.select()(state),\n    factions: Factions.select()(state),\n  }),\n  (dispatch) => ({\n    removeList: (listIndex) => () => dispatch(Lists.removeList({ listIndex })),\n    moveListBy: (listIndex, by) => () =>\n      dispatch(Lists.moveListBy({ listIndex, by })),\n    setListTitle: (listIndex) => (event) =>\n      dispatch(Lists.setListTitle({ listIndex, title: event.target.value })),\n  })\n)(ListHeaderPresentation);\n\nconst ListFooter = ({ cards }) => (\n  <div className=\"footer\">\n    <Badge size=\"small\" count={cards.length} offset={[10, 5]}>\n      Card:\n    </Badge>\n    {Object.entries(\n      cards.reduce(\n        (acc, card) => ({\n          ...acc,\n          [card.type]: (acc[card.type] || 0) + 1,\n        }),\n        {}\n      )\n    )\n      .sort()\n      .map(([type, count]) => (\n        <Badge size=\"small\" key={type} count={count} offset={[10, 5]}>\n          {type}:\n        </Badge>\n      ))}\n  </div>\n);\n\nconst CardPresentation = ({\n  card,\n  hidden,\n  type,\n  title,\n  pageId,\n  cortexIds,\n  vehicleWeaponId,\n  warjackWeaponIds,\n  subtype,\n  faction,\n  details,\n  listIndex,\n  cardIndex,\n  editMode,\n  factionsPageByText,\n  toggledSections,\n  vehicleWeapons,\n  warjackWeapons,\n  toggleCard,\n  removeCard,\n  moveCardByOne,\n  setCardCortex,\n  setCardWarjackWeapons,\n  setCardVehicleWeapon,\n  toggleSection,\n}) => {\n  const isInitialMount = useRef(true);\n\n  useEffect(() => {\n    if (isInitialMount.current) {\n      isInitialMount.current = false;\n    } else {\n      console.log(\"Update CardPresentation\");\n    }\n  });\n\n  return (\n    <div className=\"body\">\n      <AntCard hoverable className={[\"card\", faction, type]}>\n        <AntCard.Meta\n          onClick={\n            editMode\n              ? null\n              : (event) => (\n                  console.log(Date.now(), \"AntCard.Meta:onClick\"),\n                  toggleCard(listIndex, cardIndex, pageId, card)(event)\n                )\n          }\n          avatar={\n            editMode ? (\n              <div\n                style={{\n                  height: \"25px\",\n                  width: \"35px\",\n                  textAlign: \"center\",\n                }}\n              >\n                <CaretUpOutlined\n                  onClick={moveCardByOne(listIndex, cardIndex, true)}\n                  style={{ fontSize: \"18px\" }}\n                />\n                <CaretDownOutlined\n                  onClick={moveCardByOne(listIndex, cardIndex, false)}\n                  style={{ fontSize: \"18px\" }}\n                />\n              </div>\n            ) : faction ? (\n              <div\n                style={{\n                  height: \"25px\",\n                  width: \"35px\",\n                  textAlign: \"center\",\n                  marginRight: \"12px\",\n                }}\n              >\n                {!details ||\n                !details.coreStats ||\n                details.coreStats.length === 0 ||\n                !details.coreStats[0].deploymentCost ? (\n                  <FactionIcon faction={faction} />\n                ) : (\n                  <>\n                    <FactionIcon faction={faction} height=\"23px\" />\n                    <div className=\"deployment-cost\">\n                      DC {details.coreStats[0].deploymentCost}\n                    </div>\n                  </>\n                )}\n              </div>\n            ) : (\n              <div\n                style={{\n                  marginRight: \"12px\",\n                }}\n              >\n                <FactionIcon faction=\"Universal\" />\n              </div>\n            )\n          }\n          title={\n            <div\n              style={{\n                display: \"flex\",\n                alignItems: \"center\",\n                marginRight: \"8px\",\n              }}\n            >\n              <div style={{ flex: 100 }}>\n                <div>{title}</div>\n                <div className=\"card-type\">\n                  {(faction || \"\").replace(/_/g, \" \")}\n                  {subtype ? \" \" + subtype : \"\"}\n                  {type ? \" \" + type : \"\"}\n                </div>\n                <div>\n                  <span className=\"subtitle\">\n                    {[\n                      ...(!details ||\n                      !details.coreStats ||\n                      !details.coreStats[0].vehicleWeaponSelection ||\n                      !vehicleWeaponName(\n                        details.coreStats[0].vehicleWeaponSelection,\n                        vehicleWeaponId\n                      )\n                        ? []\n                        : [\n                            vehicleWeaponName(\n                              details.coreStats[0].vehicleWeaponSelection,\n                              vehicleWeaponId\n                            ),\n                          ]),\n                      ...(!details ||\n                      !details.coreStats ||\n                      details.coreStats.length === 0 ||\n                      !details.coreStats[0].cortexSelections ||\n                      !cortexName(\n                        details.coreStats[0].cortexSelections,\n                        cortexIds\n                      )\n                        ? []\n                        : [\n                            cortexName(\n                              details.coreStats[0].cortexSelections,\n                              cortexIds\n                            ),\n                          ]),\n                      ...(!details ||\n                      !details.coreStats ||\n                      details.coreStats.length === 0 ||\n                      !details.coreStats[0].warjackWeaponSelections ||\n                      !warjackWeaponIds ||\n                      warjackWeaponIds.length === 0\n                        ? []\n                        : warjackWeaponNamesSubtitle(\n                            details.coreStats[0].warjackWeaponSelections,\n                            warjackWeaponIds\n                          )),\n                    ].join(\", \")}\n                  </span>\n                </div>\n              </div>\n              {!editMode ? (\n                <></>\n              ) : (\n                <div style={{ flex: 1 }}>\n                  <DeleteOutlined\n                    style={{\n                      fontSize: \"18px\",\n                    }}\n                    onClick={removeCard(listIndex, cardIndex)}\n                  />\n                </div>\n              )}\n            </div>\n          }\n        />\n        {hidden || editMode ? (\n          <></>\n        ) : !details ? (\n          <div\n            style={{\n              margin: \"10px 0\",\n              textAlign: \"center\",\n            }}\n          >\n            <SyncOutlined spin style={{ fontSize: \"23px\" }} />\n          </div>\n        ) : (\n          <div className=\"card-content\">\n            {!details.storeLinks || details.storeLinks.length === 0 ? (\n              <></>\n            ) : (\n              <div className=\"special-rules\">\n                <span onClick={toggleSection(\"privateer press store\")}>\n                  Privateer Press Store\n                </span>{\" \"}\n                <span>\n                  -{\" \"}\n                  {toggledSections[\"privateer press store\"]\n                    ? \"Click to expand\"\n                    : details.storeLinks.map((linkText, storeIndex) => (\n                        <React.Fragment key={storeIndex}>\n                          <span\n                            dangerouslySetInnerHTML={{\n                              __html: linkText,\n                            }}\n                          />\n                          {storeIndex === details.storeLinks.length - 1 ? (\n                            <></>\n                          ) : (\n                            <> </>\n                          )}\n                        </React.Fragment>\n                      ))}\n                </span>\n              </div>\n            )}\n            {!details ||\n            !details.coreStats ||\n            details.coreStats.length === 0 ? (\n              <></>\n            ) : (\n              details.coreStats.map((coreStats, coreStatsIndex) => (\n                <React.Fragment key={coreStatsIndex}>\n                  {!coreStats.cardName ? <></> : <h3>{coreStats.cardName}</h3>}\n                  {!coreStats.modelStats ||\n                  Object.keys(coreStats.modelStats).length === 0 ? (\n                    <></>\n                  ) : (\n                    <div className=\"model-stats\">\n                      {Object.entries(coreStats.modelStats).map(\n                        ([name, stat]) => (\n                          <div key={name}>\n                            <div>{name}</div>\n                            <div>{stat}</div>\n                          </div>\n                        )\n                      )}\n                    </div>\n                  )}\n                  {!coreStats.cortexSelections ||\n                  Object.entries(coreStats.cortexSelections).length === 0 ? (\n                    <></>\n                  ) : (\n                    <>\n                      <Select\n                        suffixIcon={<CaretDownOutlined />}\n                        className=\"select-warjack-cortex\"\n                        defaultValue=\"none\"\n                        onClick={(event) => event.stopPropagation()}\n                        onSelect={setCardCortex(listIndex, cardIndex, pageId)}\n                        value={\n                          !cortexIds\n                            ? \"none\"\n                            : cortexName(coreStats.cortexSelections, cortexIds)\n                        }\n                        getPopupContainer={() =>\n                          document\n                            .querySelectorAll(\".cards\")\n                            [listIndex].querySelectorAll(\".card\")[cardIndex]\n                        }\n                      >\n                        <Select.Option\n                          key=\"empty-default\"\n                          label={undefined}\n                          value=\"none\"\n                          onClick={(event) => event.stopPropagation()}\n                        >\n                          <div>\n                            <h3>Select Cortex</h3>\n                          </div>\n                        </Select.Option>\n                        {Object.entries(coreStats.cortexSelections).map(\n                          ([cortex, advantages]) => (\n                            <Select.Option\n                              key={cortex}\n                              label={Object.values(advantages).map(\n                                ({ categoryId }) => categoryId\n                              )}\n                              value={cortex}\n                              onClick={(event) => event.stopPropagation()}\n                            >\n                              <h3>{cortex}</h3>\n                              <div className=\"card-icons\">\n                                {!advantages ? (\n                                  <></>\n                                ) : (\n                                  Object.entries(advantages)\n                                    .filter(([name]) => advantageIcons[name])\n                                    .map(([name, { text }]) => (\n                                      <AdvantageIcon\n                                        key={name}\n                                        title={name}\n                                        text={text}\n                                      />\n                                    ))\n                                )}\n                              </div>\n                              {Object.entries(advantages)\n                                .filter(([rule]) => !advantageIcons[rule])\n                                .map(([rule, { text }]) => (\n                                  <div\n                                    key={rule}\n                                    className=\"model-cortex-special-rules\"\n                                  >\n                                    <span onClick={toggleSection(rule)}>\n                                      {markChargedOrSpike(faction, text)}\n                                      {rule}\n                                    </span>{\" \"}\n                                    <span>\n                                      -{\" \"}\n                                      {toggledSections[rule]\n                                        ? \"Click to expand\"\n                                        : text}\n                                    </span>\n                                  </div>\n                                ))}\n                            </Select.Option>\n                          )\n                        )}\n                      </Select>\n                    </>\n                  )}\n                  {!coreStats.weaponPoints ? (\n                    <></>\n                  ) : (\n                    <div className=\"special-rules\">\n                      <span>Weapon Points</span>{\" \"}\n                      <span>- {coreStats.weaponPoints}</span>\n                    </div>\n                  )}\n                  {!coreStats.hardpointNames ? (\n                    <></>\n                  ) : (\n                    <>\n                      {coreStats.hardpointNames.map(\n                        (hardpointName, hardpointNameIndex) =>\n                          !coreStats.warjackWeaponSelections ||\n                          Object.keys(coreStats.warjackWeaponSelections)\n                            .length === 0 ? (\n                            <></>\n                          ) : (\n                            <div key={hardpointNameIndex}>\n                              <Select\n                                suffixIcon={<CaretDownOutlined />}\n                                className=\"select-warjack-weapon\"\n                                defaultValue=\"none\"\n                                onClick={(event) => event.stopPropagation()}\n                                onSelect={setCardWarjackWeapons(\n                                  listIndex,\n                                  cardIndex,\n                                  hardpointNameIndex,\n                                  pageId\n                                )}\n                                value={\n                                  !warjackWeaponIds ||\n                                  !warjackWeaponIds[hardpointNameIndex]\n                                    ? \"none\"\n                                    : warjackWeaponNames(\n                                        faction,\n                                        warjackWeapons,\n                                        coreStats.warjackWeaponSelections,\n                                        warjackWeaponIds[hardpointNameIndex],\n                                        toggleSection,\n                                        toggledSections\n                                      )\n                                }\n                                getPopupContainer={() =>\n                                  document\n                                    .querySelectorAll(\".cards\")\n                                    [listIndex].querySelectorAll(\".card\")[\n                                    cardIndex\n                                  ]\n                                }\n                              >\n                                <Select.Option\n                                  label={undefined}\n                                  value=\"none\"\n                                  onClick={(event) => event.stopPropagation()}\n                                >\n                                  <div\n                                    className=\"model-weapons\"\n                                    style={{\n                                      height: \"52px\",\n                                    }}\n                                  />\n                                </Select.Option>\n                                {Object.values(\n                                  coreStats.warjackWeaponSelections\n                                )\n                                  .filter(\n                                    ({ location }) => location === hardpointName\n                                  )\n                                  .map(\n                                    ({\n                                      name,\n                                      page,\n                                      pageId,\n                                      cost,\n                                      location,\n                                    }) => (\n                                      <Select.Option\n                                        key={pageId}\n                                        label={pageId}\n                                        value={name}\n                                        onClick={(event) =>\n                                          event.stopPropagation()\n                                        }\n                                      >\n                                        <>\n                                          {warjackWeaponNames(\n                                            faction,\n                                            warjackWeapons,\n                                            coreStats.warjackWeaponSelections,\n                                            pageId,\n                                            toggleSection,\n                                            toggledSections\n                                          )}\n                                        </>\n                                      </Select.Option>\n                                    )\n                                  )}\n                              </Select>\n                            </div>\n                          )\n                      )}\n                    </>\n                  )}\n                  {!coreStats.vehicleWeaponSelection ||\n                  coreStats.vehicleWeaponSelection.length === 0 ? (\n                    <></>\n                  ) : (\n                    <div>\n                      <Select\n                        suffixIcon={<CaretDownOutlined />}\n                        className=\"select-warjack-weapon\"\n                        defaultValue=\"none\"\n                        onClick={(event) => event.stopPropagation()}\n                        onSelect={setCardVehicleWeapon(\n                          listIndex,\n                          cardIndex,\n                          pageId\n                        )}\n                        value={\n                          !vehicleWeaponId ||\n                          !coreStats ||\n                          !coreStats.vehicleWeaponSelection\n                            ? \"none\"\n                            : vehicleWeaponName2(\n                                faction,\n                                vehicleWeapons,\n                                coreStats.vehicleWeaponSelection,\n                                vehicleWeaponId,\n                                toggleSection,\n                                toggledSections\n                              )\n                        }\n                        getPopupContainer={() =>\n                          document\n                            .querySelectorAll(\".cards\")\n                            [listIndex].querySelectorAll(\".card\")[cardIndex]\n                        }\n                      >\n                        <Select.Option\n                          label={undefined}\n                          value=\"none\"\n                          onClick={(event) => event.stopPropagation()}\n                        >\n                          <div\n                            className=\"model-weapons\"\n                            style={{\n                              height: \"52px\",\n                            }}\n                          />\n                        </Select.Option>\n                        {coreStats.vehicleWeaponSelection.map(\n                          ({ text, page, pageId }) => (\n                            <Select.Option\n                              key={pageId}\n                              label={pageId}\n                              value={text}\n                              onClick={(event) => event.stopPropagation()}\n                            >\n                              {vehicleWeaponName2(\n                                faction,\n                                vehicleWeapons,\n                                coreStats.vehicleWeaponSelection,\n                                pageId,\n                                toggleSection,\n                                toggledSections\n                              )}\n                            </Select.Option>\n                          )\n                        )}\n                      </Select>\n                    </div>\n                  )}\n                  {!coreStats.weapons || coreStats.weapons.length === 0 ? (\n                    <></>\n                  ) : (\n                    coreStats.weapons.map((weapon) => (\n                      <React.Fragment key={weapon[\"Name\"]}>\n                        <div className=\"model-weapons\">\n                          <div>\n                            {weapon[\"Attack Type\"] === \"Melee\" ? (\n                              <img className=\"faction-melee\" alt=\" \" />\n                            ) : (\n                              <img className=\"faction-ranged\" alt=\" \" />\n                            )}\n                          </div>\n                          <div>\n                            <div>\n                              {weapon[\"Name\"]}\n                              {Object.entries(weapon.specialRules || {}).map(\n                                ([rule, text]) => (\n                                  <WeaponQualityIcon\n                                    key={rule}\n                                    title={rule}\n                                    text={text}\n                                  />\n                                )\n                              )}\n                            </div>\n                            <div>{weapon[\"Damage Type\"]}</div>\n                          </div>\n                          <div>\n                            <div>RNG</div>\n                            <div>{weapon[\"Range\"]}</div>\n                          </div>\n                          <div>\n                            <div>POW</div>\n                            <div>{weapon[\"POW\"]}</div>\n                          </div>\n                        </div>\n                        {!weapon.specialRules ? (\n                          <></>\n                        ) : (\n                          Object.entries(weapon.specialRules)\n                            .filter(([rule]) => !weaponQualityIcons[rule])\n                            .map(([rule, text]) => {\n                              const textWithIcons = [\n                                ...Object.keys(weaponQualityIcons).map(\n                                  (title) => ({\n                                    title,\n                                    Tag: WeaponQualityIcon,\n                                  })\n                                ),\n                                ...Object.keys(advantageIcons).map((title) => ({\n                                  title,\n                                  Tag: AdvantageIcon,\n                                })),\n                              ].reduce(\n                                (texts, { title, Tag }) =>\n                                  texts.flatMap((text) => {\n                                    if (typeof text !== \"string\") return text;\n\n                                    return text\n                                      .split(\n                                        new RegExp(\n                                          `(\\\\s.\\\\s${title}:\\\\s.+[\\\\n]*)`,\n                                          \"g\"\n                                        )\n                                      )\n                                      .flatMap((string) => {\n                                        if (\n                                          string.match(\n                                            new RegExp(`(${title}:\\\\s.+[\\\\n]*)`)\n                                          )\n                                        ) {\n                                          const [, , description] =\n                                            string.split(\n                                              new RegExp(\n                                                `(${title}:\\\\s|\\\\n)`,\n                                                \"g\"\n                                              )\n                                            );\n                                          return [\n                                            ` • ${title}: `,\n                                            <Tag\n                                              key={title}\n                                              title={title}\n                                              text={description}\n                                              height=\"16px\"\n                                            />,\n                                            \"\\n\",\n                                          ];\n                                        }\n\n                                        return string;\n                                      });\n                                  }),\n                                [text]\n                              );\n\n                              return (\n                                <div\n                                  key={rule}\n                                  className=\"model-weapons-special-rules\"\n                                >\n                                  <span onClick={toggleSection(rule)}>\n                                    {markChargedOrSpike(faction, text)}\n                                    {rule}\n                                  </span>{\" \"}\n                                  <span>\n                                    -{\" \"}\n                                    {toggledSections[rule]\n                                      ? \"Click to expand\"\n                                      : textWithIcons}\n                                  </span>\n                                </div>\n                              );\n                            })\n                        )}\n                      </React.Fragment>\n                    ))\n                  )}\n                  <div className=\"card-icons\">\n                    {!coreStats.wildCardFactions ||\n                    Object.values(coreStats.wildCardFactions).length === 0 ? (\n                      <></>\n                    ) : (\n                      Object.values(coreStats.wildCardFactions).map(\n                        ({ page }) => (\n                          <Tooltip\n                            key={page}\n                            placement=\"top\"\n                            title=\"Wild card faction\"\n                            trigger=\"click\"\n                          >\n                            <FactionIcon\n                              faction={page}\n                              height=\"30px\"\n                              style={{\n                                filter:\n                                  \"drop-shadow(0px 3px 6px hsl(200,100%,25%))\",\n                              }}\n                            />\n                          </Tooltip>\n                        )\n                      )\n                    )}\n                    {!coreStats.baseSize ? (\n                      <></>\n                    ) : (\n                      <Tooltip\n                        placement=\"top\"\n                        title={`Base size - ${coreStats.baseSize}`}\n                        trigger=\"click\"\n                      >\n                        <div className=\"metallic-circle\">\n                          {coreStats.baseSize.replace(\" mm\", \"\")}\n                        </div>\n                      </Tooltip>\n                    )}\n                    {!coreStats.health ? (\n                      <></>\n                    ) : (\n                      <Tooltip\n                        placement=\"top\"\n                        title={`Health - ${coreStats.health}`}\n                        trigger=\"click\"\n                      >\n                        <div className=\"metallic-circle\">\n                          <HeartFilled\n                            style={{\n                              fontSize: \"0.8em\",\n                            }}\n                          />\n                          {coreStats.health}\n                        </div>\n                      </Tooltip>\n                    )}\n                    {!coreStats.squadSize ? (\n                      <></>\n                    ) : (\n                      <Tooltip\n                        placement=\"top\"\n                        title={`Squad size - ${coreStats.squadSize}`}\n                        trigger=\"click\"\n                      >\n                        <div className=\"metallic-circle\">\n                          <TeamOutlined\n                            style={{\n                              fontSize: \"0.8em\",\n                            }}\n                          />\n                          {coreStats.squadSize}\n                        </div>\n                      </Tooltip>\n                    )}\n                    {!coreStats.advantages ||\n                    Object.entries(coreStats.advantages).length === 0 ? (\n                      <></>\n                    ) : (\n                      Object.entries(coreStats.advantages).map(\n                        ([name, text]) => (\n                          <AdvantageIcon key={name} title={name} text={text} />\n                        )\n                      )\n                    )}\n                    {!coreStats.chassisAdvantages ||\n                    Object.entries(coreStats.chassisAdvantages).length === 0 ? (\n                      <></>\n                    ) : (\n                      Object.entries(coreStats.chassisAdvantages).map(\n                        ([name, text]) => (\n                          <AdvantageIcon key={name} title={name} text={text} />\n                        )\n                      )\n                    )}\n                  </div>\n                  {!coreStats.specialRules ||\n                  Object.entries(coreStats.specialRules).length === 0 ? (\n                    <></>\n                  ) : (\n                    Object.entries(coreStats.specialRules).map(\n                      ([rule, text]) => (\n                        <div key={rule} className=\"special-rules\">\n                          <span onClick={toggleSection(rule)}>\n                            {markChargedOrSpike(faction, text)}\n                            {rule}\n                          </span>{\" \"}\n                          <span>\n                            - {toggledSections[rule] ? \"Click to expand\" : text}\n                          </span>\n                        </div>\n                      )\n                    )\n                  )}\n                  {!coreStats.chassisSpecialRules ||\n                  Object.entries(coreStats.chassisSpecialRules).length === 0 ? (\n                    <></>\n                  ) : (\n                    Object.entries(coreStats.chassisSpecialRules).map(\n                      ([rule, text]) => (\n                        <div key={rule} className=\"special-rules\">\n                          <span onClick={toggleSection(rule)}>\n                            {markChargedOrSpike(faction, text)}\n                            {rule}\n                          </span>{\" \"}\n                          <span>\n                            - {toggledSections[rule] ? \"Click to expand\" : text}\n                          </span>\n                        </div>\n                      )\n                    )\n                  )}\n                  {!coreStats.maneuvers ||\n                  Object.values(coreStats.maneuvers).length === 0 ? (\n                    <></>\n                  ) : (\n                    <>\n                      <h3>Maneuvers</h3>\n                      <dl>\n                        {Object.entries(coreStats.maneuvers).map(\n                          ([rule, text]) => (\n                            <div key={rule} className=\"special-rules\">\n                              <span onClick={toggleSection(rule)}>\n                                {markChargedOrSpike(faction, text)}\n                                {rule}\n                              </span>{\" \"}\n                              <span>\n                                -{\" \"}\n                                {toggledSections[rule]\n                                  ? \"Click to expand\"\n                                  : text}\n                              </span>\n                            </div>\n                          )\n                        )}\n                      </dl>\n                    </>\n                  )}\n                  {!coreStats.factionAttachment ? (\n                    <></>\n                  ) : (\n                    <div className=\"special-rules\">\n                      <span onClick={toggleSection(\"factionAttachment\")}>\n                        <FactionIcon faction={faction} height=\"18px\" />{\" \"}\n                        Attachment\n                      </span>\n                      <span>\n                        {\" \"}\n                        -{\" \"}\n                        {toggledSections[\"factionAttachment\"]\n                          ? \"Click to expand\"\n                          : coreStats.factionAttachment\n                              .map((attachment) => attachment.text)\n                              .join(\", \")}\n                      </span>\n                    </div>\n                  )}\n                  {!coreStats.wildCardAttachment ? (\n                    <></>\n                  ) : (\n                    Object.entries(coreStats.wildCardAttachment).map(\n                      ([faction, attachments]) => (\n                        <div className=\"special-rules\">\n                          <span\n                            onClick={toggleSection(\n                              `wildCardAttachment ${faction}`\n                            )}\n                          >\n                            <FactionIcon\n                              faction={factionsPageByText[faction]}\n                              height=\"18px\"\n                            />{\" \"}\n                            Attachment\n                          </span>\n                          <span>\n                            {\" \"}\n                            -{\" \"}\n                            {toggledSections[`wildCardAttachment ${faction}`]\n                              ? \"Click to expand\"\n                              : attachments\n                                  .map((attachment) => attachment.text)\n                                  .join(\", \")}\n                          </span>\n                        </div>\n                      )\n                    )\n                  )}\n                </React.Fragment>\n              ))\n            )}\n\n            {!details.release ? (\n              <></>\n            ) : (\n              <div className=\"special-rules\">\n                <span onClick={toggleSection(\"release\")}>Release</span>{\" \"}\n                <span>\n                  -{\" \"}\n                  {toggledSections[\"release\"]\n                    ? \"Click to expand\"\n                    : details.release}\n                </span>\n              </div>\n            )}\n            {!details.lore ? (\n              <></>\n            ) : (\n              <div className=\"special-rules\">\n                <span onClick={toggleSection(\"lore\")}>Lore</span>{\" \"}\n                <span>\n                  - {toggledSections[\"lore\"] ? \"Click to expand\" : details.lore}\n                </span>\n              </div>\n            )}\n            {!details.pow ? (\n              <></>\n            ) : (\n              <div className=\"special-rules\">\n                <span>Pow</span> <span>- {details.pow.text}</span>\n              </div>\n            )}\n            {!details.effect || details.effect.length === 0 ? (\n              <></>\n            ) : (\n              details.effect.map((effect, effectIndex) => (\n                <p className=\"cypher-effect\" key={effectIndex}>\n                  {effect}\n                </p>\n              ))\n            )}\n          </div>\n        )}\n      </AntCard>\n    </div>\n  );\n};\n\nconst Card = connect(\n  (state) => ({\n    editMode: EditMode.select()(state),\n    factionsPageByText: Factions.selectPageByText()(state),\n    toggledSections: ToggleSections.select()(state),\n    vehicleWeapons: VehicleWeapons.select()(state),\n    warjackWeapons: WarjackWeapons.select()(state),\n  }),\n  (dispatch) => ({\n    toggleCard: (listIndex, cardIndex, pageId, card) => () =>\n      dispatch(Lists.toggleCard({ listIndex, cardIndex, pageId, card })),\n    removeCard: (listIndex, cardIndex) => () =>\n      dispatch(\n        Lists.removeCard({\n          listIndex,\n          cardIndex,\n        })\n      ),\n    moveCardByOne: (listIndex, cardIndex, up) => () =>\n      dispatch(Lists.moveCard({ listIndex, cardIndex, up })),\n    setCardCortex:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardCortex({\n            listIndex,\n            cardIndex,\n            pageId,\n            cortexIds: label,\n          })\n        ),\n    setCardWarjackWeapons:\n      (listIndex, cardIndex, hardpointNameIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardWarjackWeapons({\n            listIndex,\n            cardIndex,\n            hardpointNameIndex,\n            pageId,\n            warjackWeaponId: label,\n          })\n        ),\n    setCardVehicleWeapon:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardVehicleWeapon({\n            listIndex,\n            cardIndex,\n            pageId,\n            vehicleWeaponId: label,\n          })\n        ),\n    toggleSection: (section) => () =>\n      dispatch(ToggleSections.toggle({ section })),\n  })\n)(CardPresentation);\n\nconst List = ({ title, cards, index: listIndex }) => (\n  <div className=\"cards\">\n    <ListHeader title={title} cards={cards} index={listIndex} />\n\n    <div>\n      {cards.map(\n        (\n          {\n            card,\n            hidden,\n            type,\n            title,\n            pageId,\n            cortexIds,\n            vehicleWeaponId,\n            warjackWeaponIds,\n            subtype,\n            faction,\n            details,\n          },\n          cardIndex\n        ) => (\n          <Card\n            key={cardIndex}\n            card={card}\n            hidden={hidden}\n            type={type}\n            title={title}\n            pageId={pageId}\n            cortexIds={cortexIds}\n            vehicleWeaponId={vehicleWeaponId}\n            warjackWeaponIds={warjackWeaponIds}\n            subtype={subtype}\n            faction={faction}\n            details={details}\n            listIndex={listIndex}\n            cardIndex={cardIndex}\n          />\n        )\n      )}\n    </div>\n\n    {cards.length > 0 ? <ListFooter cards={cards} /> : <></>}\n  </div>\n);\n\nconst AppPresentation = ({ initialized, lists, editMode }) => (\n  <div className=\"App\">\n    <Layout>\n      <Header>\n        <div>\n          <a className=\"logo\" href=\"/\">\n            WARFASTER\n          </a>\n        </div>\n      </Header>\n      {!initialized ? (\n        <Content>\n          <Layout>\n            <Row>\n              <Col xs={24} sm={12} md={12} lg={12} xl={8} xxl={8}>\n                <div className=\"cards\" key=\"cards0\">\n                  <div style={{ cursor: \"pointer\" }} className=\"header\">\n                    <Row>\n                      <Col span={16} className=\"army-list-title\">\n                        <TextArea\n                          value={\"Setting up Warfaster\"}\n                          maxLength={30}\n                          autoSize\n                        />\n                      </Col>\n                      <Col span={8} className=\"faction-icons\">\n                        <SyncOutlined\n                          spin\n                          style={{\n                            color: \"#d1c5b1\",\n                            fontSize: \"23px\",\n                            margin: \"3px 10px 0 0\",\n                          }}\n                        />\n                      </Col>\n                    </Row>\n                  </div>\n\n                  <div>\n                    <div className=\"body\">\n                      <AntCard hoverable className=\"card\">\n                        <AntCard.Meta\n                          avatar={\n                            <div\n                              style={{\n                                height: \"25px\",\n                                marginRight: \"12px\",\n                                textAlign: \"center\",\n                                width: \"35px\",\n                              }}\n                            >\n                              <SyncOutlined\n                                spin\n                                style={{\n                                  color: \"#d1c5b1\",\n                                  fontSize: \"35px\",\n                                }}\n                              />\n                            </div>\n                          }\n                          title={\n                            <>\n                              <div>Fetching data, please wait</div>\n                              <div className=\"card-type\">\n                                This may take up to 20 seconds\n                              </div>\n                            </>\n                          }\n                        />\n                      </AntCard>\n                    </div>\n                  </div>\n                  <div className=\"footer\" />\n                </div>\n              </Col>\n            </Row>\n          </Layout>\n        </Content>\n      ) : (\n        <>\n          <Affix>\n            <FactionsMenu />\n          </Affix>\n          <Content>\n            <Layout>\n              <Row gutter={16}>\n                {lists.map(({ title, cards }, listIndex) => (\n                  <Col\n                    key={listIndex}\n                    xs={24}\n                    sm={12}\n                    md={12}\n                    lg={12}\n                    xl={8}\n                    xxl={8}\n                  >\n                    <>\n                      {!editMode ? (\n                        <></>\n                      ) : (\n                        <AddEmptyList listIndex={listIndex} />\n                      )}\n                      <List title={title} cards={cards} index={listIndex} />\n                      {!editMode || listIndex !== lists.length - 1 ? (\n                        <></>\n                      ) : (\n                        <AddEmptyList listIndex={listIndex + 1} />\n                      )}\n                    </>\n                  </Col>\n                ))}\n              </Row>\n            </Layout>\n          </Content>\n        </>\n      )}\n\n      <div>\n        <Footer>\n          <Bookmark />\n          <div className=\"copyright-notice\">\n            Images originating from the Privateer Press website are © 2001—\n            <>{new Date().getFullYear()}</> Privateer Press, Inc. All Rights\n            Reserved. Privateer Press, warcaster and their logos are trademarks\n            of Privateer Press, Inc. Images and trademarks used without\n            permission. This website is unofficial and is not endorsed by\n            Privateer Press.\n          </div>\n        </Footer>\n      </div>\n    </Layout>\n  </div>\n);\n\nconst App = connect((state) => ({\n  initialized: AppSync.selectDone()(state),\n  lists: EnhancedLists.selectDetails()(state),\n  editMode: EditMode.select()(state),\n}))(AppPresentation);\n\nexport default App;\n\nfunction generateListNamePlaceholder(cards, factionNames, defaultValue) {\n  const factions = cards.map((card) => card.faction);\n  if (factions.length === 0) return defaultValue;\n\n  const justFactions = factions.filter(\n    (faction) => [\"Universal\", \"Wild_Card\"].indexOf(faction) === -1\n  );\n  if (justFactions.length === 0) {\n    const justCyphers = factions.filter((faction) => faction === \"Universal\");\n    if (justCyphers.length === factions.length) return \"Universal Cyphers\";\n\n    return defaultValue;\n  }\n\n  const factionsPresent = justFactions.reduce(\n    (acc, faction) => ({ ...acc, [faction]: true }),\n    {}\n  );\n  if (Object.keys(factionsPresent).length > 1) return \"Several factions\";\n\n  const factionName = factionNames[Object.keys(factionsPresent)[0]].text;\n  if (factionName) {\n    const types = cards.map((card) => card.type);\n\n    const cyperTypes = [\"Fury\", \"Geometric\", \"Harmonic\", \"Overdrive\"];\n    const noCyphers = types.filter((type) => cyperTypes.indexOf(type) === -1);\n    if (noCyphers.length === types.length) return factionName + \" Models\";\n\n    const justCyphers = types.filter((type) => cyperTypes.indexOf(type) > -1);\n    if (justCyphers.length === types.length) return factionName + \" Cyphers\";\n\n    return factionName;\n  }\n\n  return defaultValue;\n}\n\nfunction cortexName(cortexSelections, cortexIds) {\n  return (Object.entries(cortexSelections).find(\n    ([cortex, advantages]) =>\n      Object.values(advantages)\n        .map((advantage) => advantage.categoryId)\n        .join(\"\") === (cortexIds || []).join(\"\")\n  ) || [undefined])[0];\n}\n\nfunction vehicleWeaponName(vehicleWeaponSelection, vehicleWeaponId) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n  if (!vehicleWeapon) return undefined;\n  return vehicleWeapon.text;\n}\n\nfunction vehicleWeaponName2(\n  faction,\n  vehicleWeapons,\n  vehicleWeaponSelection,\n  vehicleWeaponId,\n  toggleSection,\n  toggledSections\n) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n\n  if (vehicleWeapon) {\n    const { page } = vehicleWeapon;\n    const weaponConfig = vehicleWeapons[page.split(\"#\")[0]];\n    if (weaponConfig) {\n      const { pointCost: cost } = weaponConfig;\n\n      return (\n        <>\n          {!weaponConfig ||\n          !weaponConfig.weapons ||\n          weaponConfig.weapons.length === 0 ? (\n            <></>\n          ) : (\n            weaponConfig.weapons.map((weapon) => (\n              <React.Fragment key={weapon[\"Name\"]}>\n                <div className=\"model-weapons\">\n                  <div>\n                    {weapon[\"Attack Type\"] === \"Melee\" ? (\n                      <img className=\"faction-melee\" alt=\" \" />\n                    ) : (\n                      <img className=\"faction-ranged\" alt=\" \" />\n                    )}\n                  </div>\n                  <div>\n                    <div>\n                      {weapon[\"Name\"]}\n                      {Object.entries(weapon.specialRules || {}).map(\n                        ([rule, text]) => (\n                          <WeaponQualityIcon\n                            key={rule}\n                            title={rule}\n                            text={text}\n                          />\n                        )\n                      )}\n                    </div>\n                    <div>\n                      <span className=\"cost\">Cost {cost}</span>{\" \"}\n                      {weapon[\"Damage Type\"].join\n                        ? weapon[\"Damage Type\"].join(\" \")\n                        : weapon[\"Damage Type\"]}\n                    </div>\n                  </div>\n                  <div>\n                    <div>RNG</div>\n                    <div>{weapon[\"Range\"]}</div>\n                  </div>\n                  <div>\n                    <div>POW</div>\n                    <div>{weapon[\"POW\"]}</div>\n                  </div>\n                </div>\n                {!weapon.specialRules ? (\n                  <></>\n                ) : (\n                  Object.entries(weapon.specialRules)\n                    .filter(([rule]) => !weaponQualityIcons[rule])\n                    .map(([rule, text]) => (\n                      <div key={rule} className=\"model-weapons-special-rules\">\n                        <span onClick={toggleSection(rule)}>\n                          {markChargedOrSpike(faction, text)}\n                          {rule}\n                        </span>{\" \"}\n                        <span>\n                          - {toggledSections[rule] ? \"Click to expand\" : text}\n                        </span>\n                      </div>\n                    ))\n                )}\n              </React.Fragment>\n            ))\n          )}\n          {!weaponConfig ||\n          !weaponConfig.specialRules ||\n          weaponConfig.specialRules.length === 0 ? (\n            <></>\n          ) : (\n            <>\n              {!weaponConfig.weapons || weaponConfig.weapons.length === 0 ? (\n                <div className=\"model-weapons-special-rules\">\n                  <span>Cost</span> <span>- {cost}</span>\n                </div>\n              ) : (\n                <></>\n              )}\n              {Object.entries(weaponConfig.specialRules)\n                .filter(([rule]) => !weaponQualityIcons[rule])\n                .map(([rule, text]) => (\n                  <div key={rule} className=\"model-weapons-special-rules\">\n                    <span>\n                      {markChargedOrSpike(faction, text)}\n                      {rule}\n                    </span>{\" \"}\n                    <span>- {text}</span>\n                  </div>\n                ))}\n            </>\n          )}\n        </>\n      );\n    }\n    return undefined;\n  }\n  return undefined;\n}\n\nfunction markCharged(faction, text) {\n  return text.includes(\"charged\") ? (\n    <>\n      <ChargedIcon faction={faction} />{\" \"}\n    </>\n  ) : (\n    <></>\n  );\n}\n\nfunction markSpike(faction, text) {\n  return text.includes(\"spike\") ? (\n    <>\n      <SpikeIcon faction={faction} />{\" \"}\n    </>\n  ) : (\n    <></>\n  );\n}\n\nfunction markChargedOrSpike(faction, text) {\n  return (\n    <>\n      {markCharged(faction, text)}\n      {markSpike(faction, text)}\n    </>\n  );\n}\n\nfunction warjackWeaponNames(\n  faction,\n  warjackWeapons,\n  warjackWeaponSelections,\n  weaponId,\n  toggleSection,\n  toggledSections\n) {\n  const weapon = Object.values(warjackWeaponSelections).find(\n    ({ pageId }) => pageId === weaponId\n  );\n  if (weapon) {\n    const { cost, page } = weapon;\n    const weaponConfig = warjackWeapons[page.split(\"#\")[0]];\n\n    return (\n      <>\n        {!weaponConfig ||\n        !weaponConfig.weapons ||\n        weaponConfig.weapons.length === 0 ? (\n          <></>\n        ) : (\n          weaponConfig.weapons.map((weapon) => (\n            <React.Fragment key={weapon[\"Name\"]}>\n              <div className=\"model-weapons\">\n                <div>\n                  {weapon[\"Attack Type\"] === \"Melee\" ? (\n                    <img className=\"faction-melee\" alt=\" \" />\n                  ) : (\n                    <img className=\"faction-ranged\" alt=\" \" />\n                  )}\n                </div>\n                <div>\n                  <div>\n                    {weapon[\"Name\"]}\n                    {Object.entries(weapon.specialRules || {}).map(\n                      ([rule, text]) => (\n                        <WeaponQualityIcon\n                          key={rule}\n                          title={rule}\n                          text={text}\n                        />\n                      )\n                    )}\n                  </div>\n                  <div>\n                    <span className=\"cost\">Cost {cost}</span>{\" \"}\n                    {weapon[\"Damage Type\"].join\n                      ? weapon[\"Damage Type\"].join(\" \")\n                      : weapon[\"Damage Type\"]}\n                  </div>\n                </div>\n                <div>\n                  <div>RNG</div>\n                  <div>{weapon[\"Range\"]}</div>\n                </div>\n                <div>\n                  <div>POW</div>\n                  <div>{weapon[\"POW\"]}</div>\n                </div>\n              </div>\n              {!weapon.specialRules ? (\n                <></>\n              ) : (\n                <>\n                  <div className=\"card-icons\">\n                    {Object.entries(weapon.specialRules)\n                      .filter(([name]) => advantageIcons[name])\n                      .map(([name, text]) => (\n                        <AdvantageIcon key={name} title={name} text={text} />\n                      ))}\n                  </div>\n                  {Object.entries(weapon.specialRules)\n                    .filter(\n                      ([name]) =>\n                        !advantageIcons[name] && !weaponQualityIcons[name]\n                    )\n                    .map(([rule, text]) => {\n                      const textWithIcons = [\n                        ...Object.keys(weaponQualityIcons).map((title) => ({\n                          title,\n                          Tag: WeaponQualityIcon,\n                        })),\n                        ...Object.keys(advantageIcons).map((title) => ({\n                          title,\n                          Tag: AdvantageIcon,\n                        })),\n                      ].reduce(\n                        (texts, { title, Tag }) =>\n                          texts.flatMap((text) => {\n                            if (typeof text !== \"string\") return text;\n\n                            return text\n                              .split(\n                                new RegExp(`(\\\\s.\\\\s${title}:\\\\s.+[\\\\n]*)`, \"g\")\n                              )\n                              .flatMap((string) => {\n                                if (\n                                  string.match(\n                                    new RegExp(`(${title}:\\\\s.+[\\\\n]*)`)\n                                  )\n                                ) {\n                                  const [, , description] = string.split(\n                                    new RegExp(`(${title}:\\\\s|\\\\n)`, \"g\")\n                                  );\n                                  return [\n                                    ` • ${title}: `,\n                                    <Tag\n                                      key={title}\n                                      title={title}\n                                      text={description}\n                                      height=\"16px\"\n                                    />,\n                                    \"\\n\",\n                                  ];\n                                }\n\n                                return string;\n                              });\n                          }),\n                        [text]\n                      );\n\n                      return (\n                        <div key={rule} className=\"model-weapons-special-rules\">\n                          <span onClick={toggleSection(rule)}>\n                            {markChargedOrSpike(faction, text)}\n                            {rule}\n                          </span>{\" \"}\n                          <span>\n                            -{\" \"}\n                            {toggledSections[rule]\n                              ? \"Click to expand\"\n                              : textWithIcons}\n                          </span>\n                        </div>\n                      );\n                    })}\n                </>\n              )}\n            </React.Fragment>\n          ))\n        )}\n        {!weaponConfig ||\n        !weaponConfig.specialRules ||\n        weaponConfig.specialRules.length === 0 ? (\n          <></>\n        ) : (\n          <>\n            {!weaponConfig.weapons || weaponConfig.weapons.length === 0 ? (\n              <div className=\"model-weapons-special-rules\">\n                <span>Cost</span> <span>- {cost}</span>\n              </div>\n            ) : (\n              <></>\n            )}\n            <div className=\"card-icons\">\n              {Object.entries(weaponConfig.specialRules)\n                .filter(([name]) => advantageIcons[name])\n                .map(([name, text]) => (\n                  <AdvantageIcon key={name} title={name} text={text} />\n                ))}\n            </div>\n            {Object.entries(weaponConfig.specialRules)\n              .filter(([rule]) => !weaponQualityIcons[rule])\n              .filter(([name]) => !advantageIcons[name])\n              .map(([rule, text]) => (\n                <div key={rule} className=\"model-weapons-special-rules\">\n                  <span onClick={toggleSection(rule)}>\n                    {markChargedOrSpike(faction, text)}\n                    {rule}\n                  </span>{\" \"}\n                  <span>\n                    - {toggledSections[rule] ? \"Click to expand\" : text}\n                  </span>\n                </div>\n              ))}\n          </>\n        )}\n      </>\n    );\n  }\n  return undefined;\n}\n\nfunction warjackWeaponNamesSubtitle(warjackWeaponSelections, weaponIds) {\n  return weaponIds.flatMap((weaponId) => {\n    const weapon = Object.values(warjackWeaponSelections).find(\n      ({ pageId }) => pageId === weaponId\n    );\n    if (weapon) {\n      return [weapon.name];\n    }\n    return [];\n  });\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APr2+QD3+fUA//36AP///wDR5OUAhrC/AHOOvQJyibsGbpC9BnCEtwV5or4CmMLKANfr7gD///sA/vzwAPz9+wAA9vn1APr6+QDp9PcApsTWAHicuwR4h7ILfnqxEIRzrBOIcKwUg3GtE3qBshBzkLgIfqXFAr7U4AD3+voA+/39AAD8+/gA6vT2AH2vxQBphLMHgHSxFZxhnCOwXY1BsmOSYrdikW64Xo5aqVuTNoxrpBx0fLQQYomtBKfH0wD8//0AAP3//wCmxdcAZoKxB4h2rBirXJA3tWiJi6aIldWZhJHzjoKK+5iJjeurfpHDuFyLbKFinCh6ebETZ5G5BM7j6gAA0ePlAHmevAR/dbEUqFqON51ngqt7gof/YXJ1/26Chf+NoaL/YXVz/2V8eP+EfoTxrFV+f6FnniVne7EOm7HKAQCGsL8BeIexC6FloCKeUXKMXWVp/4WWmv11fYT5gYuM/Nnb2/xfbG37i5Ga92yHh/9uW2TsrVOBW4xsqRd7nMIGAHKMvQOBe7AQq1WEQW5LYNc1RU/+VmJo+d7i4P7r7Oz/9/j4/ebo6P27vcP9NkZR+z1SVv+KSWamp2OfJnaJvwoAaYW1Boh5rxKfTHhjSDlN9DdTXf5mcnX76erp//////72+vr+/////ry/wP5RXmf7NE5Y/mI8U8+nXZQ5foC4DABrjLMHjneuEppJbW0wKjf7V213/sfJyvz39vf++Pn6/vv6+v728/P98O3v/qqttPw6TVn+UjFJ2KxZkj91hrgNAGyBtQaKdbYSo0x8WjQpOO0NIzb9JC49++bn5/3/////8/Ty/f////2iqq3+Dhgi+xItOv5bMkvFq1+SNHaBtwwAcqO8AnqBshCqW5U1VixCxAAYJf9ibHn4tbO3/rKytf/v7/D9nqGk/q60vP0uQE37BB0t/4U9Yo2jbKMgdI6+CQCVwccAb42zCJVtqB2hQm1sHxcq8ipFSP8MGCD7OD9J+6qvt/sIDhz6JjNC/Bo0Pv9FHjfQsleMRH9ytBWHnsYDANrq8QB8pccCcHysEapooSiTOGJ/JBAi6AAUIP8NIzP/JzVG/wUaKv8AESD/QxowzqdPdlmXcaseanexCae40AEA////AL7U4ABkhq8Ed3i0E6NtoiaqTH1bcC5Ro0seOM5FGjDWVSM6wn84Wo6sWItFmnGsHm90rQ12mLcC4O7wAAD7+vgA9/r6AKnF1QFlkbcDZXquDpBtrhesaJsnqWCQOatdlD2tX5Q0qGqlIIJvsxVnerMKeZm4Asfe5AL//v0AAPz9/AD9/fwA////AMvl6QCZsskBe5rBBnOJuwt9f7YNdoW3DXiAtgx0j70JhZ/EBKa60AHh7vAA/f/9APv9/QB7QyxSBgSw0AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEEElEQVR42h2Ta0xTdxTA/y0diFBSQeIg6hQn02wBYYgjBhBUEmVhuMzpYJk6RBHa0tLbx720FErLq1BapHSKDyaZUyZ9Pygg5aFkwURdtumyZUP5oAy2ZCDUtvfx38Xz5ZwP53fOLyc5IEBSIBgKAgghCJEhMDnxE2jXOoFAaGMqFEPhcswdrsRG3xILvmd2tN4GY74Hb3ohxAFO4ICGAwBSJHj+bB7oDKOgVuJkNWLOKLXYxWlCXHEtiGdjs9gd1yCzcjCxeZ1EOMh0OB6B1ZVVQJD0AAgpMPd8ASA8G+BVWCI0Ymd8u8Cxwyhx5F2Su7821bn5RrmrRC9yZOqEns0qZJhTWTbAunZ5ApBrA1ZWV4Gh6y7gnbdG6BWetw2IdZ9JY9Yajf2/NndcfaVsMeFtht7FHv13U3rFALdT6tjVgjnjeBW3WPcmngLw4/0ntLadpRG7N3aKbPtaavt/QFWt8LSwGtY01MHu61dghUgIL0hRiDXplpol3yoNUvdOlGeL6dC6GECrtTFUmC1Khwwnyfk97aXn+LDV2E1KahuDmjYd8fvsM+JsZQ3e1t37GlE3wjPlon+0gtulnRLvJlQ8GA7EfEtYs2yUoxOY80q+rHr64eGj1ImzvODs3By1sLgI/SGcfDE/T3onp8mPCorw3OLjkH9affMi6kpGq53rgRLzhHdgQ7Ga81fK9ucfW8kvPkldEMrweRqmgwoEg9Ra9k1NU8e/KsezjhRTRYWVj/Ria5YKG4oGItQd0a4YjlWWm3jv7jmAn6qqoWZmHhB+v5+GQxRBENRrv5/8b2mZGrR7iP0fn6Byc079ZpTYc+VSFxug0hHawBvbUNlbsjPt0L/R29PIpD3Z+Mu/X5BrCoGAfy2Tt+6YKXZCEs5OyaQOHCy/3yV1ZjRinmgg4N9h1ks8HD3q2ZufXXKPuWE7PMOXBVxDHsru8sKl5Vfktb5+yu69S6bmFeERCSnw3Oeqju76sW2iKkckaG8eAKjIus6Ajm/BygzchC1py+k5B2FM/Dv43txCfNDmxiM4iaHd6TnE1tRsmJ5S+NiAmA+pMU+8SmkNA77RGSAWWphKZHiDSe7ZxT/ZpoxPfH8ecDbD2KQUuDsjF4YlJkFGzA6Y+sHRhxruzS8MipGtCNcceaNvnPHmMZyux6CizMpqlY3EfaPwJqurbpR+WsDrz0z95GFqcsGTrMzPJsuO1eoMYsvhNbiuxsquFdqZs38tAEASBPD7V8HVy2MMfsVAGMq1xHTJfJsuyUffuyi1ZJlklmyj1JHRo/Rt09DaCNeyHqPh6amfmfRtAcDph6DogqJwMDH+C2hrcTBQZDBcUm2PUmMj7HpkiN2EuqNFVc7IBqWT1Xfdx/jzj5e0OUEvJ8H/Q3cpHlin8poAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAED0lEQVR42h2Ta0ybdRTGD6XCuA5hZJtKRzDAZBkMgXIptIW+lDJWGiYppZUV6mq5toFQCrvAGGwT2WacE2NMFnSJJk6WjCGXaDIRZ+KiaJY5UeQ2kLaUAr1f3svfFz6cPF/O75yTPOcBHCfB5/MDQgj8PgpWxqfhmbodrMIqhuPUW0HbCkWQhVf5kvltGWO2sxuWRh/t9RJ0kX4vgJeGfSQC58IiWC68D+baaqa5VhzmqCuOcqmLYpz12AGbqiRmW41FGesk+9arpQzrna/Bs+MCkvADkBQJjqVlWJZWwZakMNih4sb6GjNft53jFK72V6iMVyq0m718ubM1j+3ScF+zqrlRG0V5zNWeD8FPEvQAtx8s3YM0zAu2a4sPOdo42U8HzwyOfHrlz09uXHUMDFzCP77dbxkfOjcz31fW7GzlHnWpT8YYyzDm1tgUwMp302BWVjE9dYIDOzQ81qu8197Xj87oDKi1+z10c/gLVNd2EZ3VX0LXrl62/XZe0uPScxIdUnbkklYXAE81ugBTXVkYoeUkTLadul7Z0IQGbg+R7d2XfX2Dt4iFxXmitlmHf/DRkEfbex011Cs25zu4CrxRcHCjRhIEVkwa6FaJoyztOYU6peSvE4JKSn62xbew9oKyWCzI6/eRq2YTOTXzmMwRivHsiir0mVr0pU+PJdnLsVCw0lbhDaLo2ZaCd3gY38mXKKn61gu40bJBu4Uoj89P7eqjmZ8pqVKNs0tlVKOk4He7npvrrikNh02ZLJjUCqN/1RS0vJGegyua2qgnT34h3G43RVtMEQRBedxu0mazUyMPx4mcMhklK06f2+ko5DkaSiLAwpEGeevF0XPNbHnWiWxrSHwGmZiWi5tMRnL3BK/XvavkV9/cpyIPJ+ChxwopFZb52GkQZm5Wi8PBLJcxtjTCKLuhMEvFz/gJYpKRprnDOzkxQY1+O4lsdgd5Z/gu9XDqezKNX44HvHIcDctzbiC9MN5aIQyB2a7zYFKK9/m1grgfGjOaWUcS7cfzJSgyloVn8crwkdEJPGT/YX/Km/lEbKoInUxP+cOq52FudVHsiloRCItj02CUVTG2VQUv+zsFRx8o2T1xcSwTRLNQxJEMlJRZjBiHUhDsfxWVpCXM/qvlVXs7BSyrmB+ydnEgYC8Ym5/fA5Mgj+lSi2LwLkHSnI6juFJ67O7pjORZUWrC89rsxB+Hpak3zYb8Yq8BY1mk/AhjuZzhef4PAEEHwuNywYveWwH/iQWBtkp2JGrCDlJdRcnOTl6u3YAVOLuEmZSBH+/UcGOt5fzQdbGCsX5/koHTy4HACUCUfy9UOw+mYJF+zzXl6aANiSjMUSOOcDaURlhlpeFbFYKQ5XdrmKv02e5nf8MuTOI++B9NGyAYlSH/2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APn69QD6+PoA///+APf//QDG09wAh6W8AHKKuwN1h7gGb4y9B3eCvgV5qcQBnsHLAN7z8QH///8A/Pb5APr6+QAA9fr2AP77+wDW6+8AjLfJAXaWvgVwjLsMY4zBEGKPwxNikcQTZYzDEmuOvA5yj74If6nFAsLb3QD3+fkA+fr6AAD///8AyeHjAGiduwNfhLkLYInEF1Sb0ilYp9FKY6vMaGKrz2xWqdRUV5zOMF6NyBpfhr8QYoi0A7LI1wD+//wAANvp7ACArMQCY4S3DGSVyx5Spc1IbKvDoYOjrN97lZb4dZOV+3ufp+h2qLu4WajKYl6byCZiicASapS5A87m6AAAi7O+AG2Otwljjs0aTqLNUWSYn85yf33/XWxx/4SIi/+Tl5n/ZWtu/253ev9tj5boTqG+cl+byyJifrYNmLTSAQBnjLEDa4zEEVCg1DZKhZm6X2xq/5KdmvlkbnL7nqir/cbO1P1bZ2z6jZua93B1e/9LdoHhUaLIUmOLxhd5nsIFAHKBtQpklcwXSZa4a0ReZfgvPUP9d4WN++nq6v7t8fL+9ff2/ufo6P6hr7L9NEJM/ERRXP9Eh6OaXZ7OI22QwAkAdIKxDV+f0x87fpuXMEVG/0RUYP2CiJP++/7+//////38/fz9/////qWutP5OW2P8PkRO/jFqesRUo9A1borCDAB1gLoOWqTXISp0j6QmMDn+gYaR/Nva3P319fX++fn6/vv6+v729fX96Ont/Z+krPs4QEj+J11qzVak0jpmkbkNAHCDtAxlnM4dOHuYixosOv8HGij9SlNb+/////7////++Pn2/f////2GjpL+CBgh/BQqM/4oYXq7W6PUMHCHvgwAZY6yCGaUyhVLl71YETdH7AkYKP+HkpX4qKyt/cfHyP/h4uT9n6Cm/qWvtvwjMUD8CCI2/jqEp4Rmmc4ebJXDCQBemrUDY4y6Dl6i1SkucImWDR8n/zxBTP8ABxr6YWdv/JWbofsABhP6NDpH/RslNf8bTWrDVKbQPmaFuhSGoMcDAJfBzgFtlr0GaYzJF1ukzTgoaYGgBhUr9gYMHv8gJS7/JjA6/wURH/8EEB3/Gkxhw0yizFBsltMdZX20Cam70QAA8vv7AJe4zwFcfrEIaY/IF1uk2S5Bj7JuI15vsRpDVNIZPVjVHlRvvTSBnIRVpNE9ZpjTHGN4uAyDnb4B5PLxAAD++/wA5ezuAIOzxgBeibsFY4G7EWOXzhpcpNYqX5/TO1uh0TxapdExYZzRHmSEwRNofbUJfZ25ANHi5AD///8AAPX5+wD9/f4A8Pr6ALvR3QCIq8cCc5a+CHGLvwprjcENZ5DBDW2JvwxwlMIIhqLDArG80gHn8fMA/f3+APv7/QAlXTSQL9Q7UgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APr5+AD2+PkA////APr/+QDC2OIAdKfIAGWLwwJ2h8QGbofCBm+ExAVfmsMCfrHGAL/e5AD///8A//n5APb9/AAA9vn3APz88wDb7vEAhbfVAGyTyAR4h7sLgoGyEI14qROPdaMUjXmsE36EuBBvib8IZ5jOAqvO4gDw+fAA/Pz9AAD+/v0A3PDyAFuh0QBifb8Hf3qvFaFsmCO4aopBuXGNYr5viW69bIlatWaQNpZzoxx1frgQXH+9BJa72AD+//wAAPT8+QCIuNYAYX3AB5h8rhi2bIc3unWIi6aIk9WSiJHzjoiQ+5aLjeuugo3DuG2GbKpykCiGfbQTXYbEBLLd6gAAxNrhAG2UwwR9fKwUtmiLN6Rpd6t8hYr/cn+G/2p7f/9qeXz/bHp6/3CDg/+DgYbxq2R5f6txnSVvd7UOgabMAQB1p8gBdoe4C6VxnyKeWnKMcHl9/1Rra/1SYGb5VWFk/FxmavxaaXD7W2Nr91lqa/9yY2rsrWF9W5N2pxdplcIGAGWKwwOEgrcQtmWLQWFJVNdYcHD+k52i+TtKUv6Yn6P/cHyE/TBCT/1MVF79SlRZ+z9VWf+GUmCmrXCZJmuIwAoAcoO+BpN+rhKjWndjQkFL9CI6QP6lqKr7z9PW//////6vtbj+jJac/nB7gv4oNkT7MkdV/mNCU8+xaZE5hIC5DABrg70HlX6mEp9Vbm0yMkb7Fio7/lNbYfz//v/+5ubm/vL09f7////9wsfN/hwtPvweN0X+WzdM2LJnjD+AgroNAG6AxAaQgLASo1t4Wi4rPO0PLD/9HjRF+11nb/1MVFr/7fL1/aalpv2ssLL+XWhy+wEhLP5bOUzFs2iTNHqCtwwAYJjFAnyEuhC2aJQ1VyxCxAMkMf8UKj74Bxco/g8iMf9YYmz9Fh4n/igzPv1ocnv7DSEv/4JFWY2udqMgYIvICQB7sMUAa4e9CKF4qh2gUW1sHBwq8gIfK/8VJTb7ESQ2+wYWJPsSIjT6Cx40/AYbJv9PLELQsGWFRId5qBV8l8QDALjc4QBmmMsCeX23EbF2lyiQSGJ/Khsn6AYVJP8FGCz/BR0v/wQbJ/8LFyX/RiQ2zqxXd1mhe6geanqxCZ2zzgEA////AKnQ4QBefr0EiHuxE6x3niapWnNbbjZJo0slO85NIjjWUio+woRBU463ZYNFoHunHnJ2qw1nksEC1uv0AAD7+/oA9fnyAJS71gFWisMDbnWyDpd4phevdZsnsGqSObJoij2ybJg0rXajIIl4qRVpe7EKZZLEArrX4gL//vkAAPn8/AD9/f0A/f/9ALTb7ACCpM0Ba5HFBmmEwAt8gbkNfYS4DX6AuwxjiMYJdpjFBJqzzwHX6vMA/f76APv7+wDj3Ax+yZru6gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEFElEQVR42h1Ta1ATZxT9EiJPYZAAQqfBBwOmtFKVACK1DiLTjjK0FDoI2OoYRBISMCa77OZNSIkJ4ZEAQaUqUxmlUCDkyavhoaU/7Cgz1sdMp3Xa/mix7Y9WIpDN7teFX/f8OOfcO/feA9ZJCgQCAQAhBEQwAO4tPAZt7W4gkUwwNcrpUBXuDW3GfNtkl75mmtqGgW/uwRYXQoLmEwBsBNYApEjw24uXoMsyCxSIh6WTO6N0TZ5Yg9TNNknd8QbUw1bjjlgMHQtHJaNMp/MR8K/6QZCkDSAkwe+/rgBE5AANdWNhesSRYJJMpPainoI+tfN8j3a8oVfpruqUenJMUu+bOtlUrJA/zLp5fQGQmwarfj+wWme3xBaVO8mCjuf2GEbbLJbBJ0Zz/yu9uYcwdl79q6f9zr1u1Yios8nBvSJ3scV1Q6z7i88A+H7pKVCgLpYedcZ3IRO5OuzmCNZqho1aDaxXyGE9jsEGXA6R5laobLX+24oOaCyYJw0XT8SYTW4GMJmdDB3ujuqQeffi9d1mEa6DpwUXyfJzNRtlZwXB0xekwWqBlKioFa1VChtgrRD/29Q4VN2JTu3EZaOh9La/CTHg07GdspGC4lL+s3NCCXX1xuDGeydLqWu3BuFllYHMPF5MfvhpNXmyrJooLD8DxZ/r79gwT7qi0RUJlIrJ0A58Jk4r6OfnH69a5eYUUoPD48Tyk+f0tSDlmJym2m1fUlKlnuLmFhIHPyihSopFj7oQe16L3Lsd4KgnrEs+E6e8YBPvzykh2O8coUrP8IOb4pWVFcq/tk7RmFz6YZniZB4NpuQUUMeLap93I45jStQVDVTIdKhRMRv3haC/Kj2z8J/4jHwy/WABcfaimDxVVgVfrW2QQ3eHyNEJF/WZUEow9rxNnSgSfteLunmtOD2BTDzIbEZdsbYmR/axIxX3Y1Lehcnc/PWwZC61Y28WrKwRk4mcdIrLe58UIioiZhcP8st07X3a+d2o0BkB2ox3gVJiD+/GfByc3yVK2pX1XzjnLZiw7zDBTsslIhLTiLhUXiAyJSsYmbQH5h3+ZLldOnZCj08l6NT2EOD79gFALtmZGtnMjj6llyuuMGo4qYf+DEnkwLDkNBiVnAG3vUHXxAx46MCphzrh7UqrejZFWj8W8dXAPGMrGC73Mqg7b2cZsRn2NdVUeotgoLq0qPZ29oGPH/L2lz7Nzy5frPmoqcMiGy3aFKsv26MVEgfzxS8vASCDQfD6tR/cuO5jNNQNh+Ci8RgrNrezXzWzz4qN5/Wg9qO2JhfPpvHt1ss9CTLRWKScFi8tPmZu5ggQdCAoGlAUARbmfwSmK07G5odhjY6oFvl0tBrxRhuwye0yoTtCq3WwBm7NMX7+6Q968iDdnAT/A22QCVwQ8htxAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEGElEQVR42h2TaUzadxjHH1BRqzZaaum66XpMPGKNCsisiCBQLQM8QCkgOA9UULStdw1qM9rOVZt0S5ulWeqS7ujadGlnZub2oml3JFs212b2MqlunohgKYIcf/7/37AvnuR58Tzf5/xAMEBAwOcHhBBgPgQL39+Df/Rd4CipJr8qL6O4VGrKOr88wqZRkv8YMMPcxL3XscGQ4QEfQMCPQQBHsDn3AuzmEbDVKsOtdZIYd50w3t0koLoMwt3OBhHV2Vgav1pfHrWiriZvXLsJXqcH8GAAAEc4bP47D/PKatgo40W667mJ3jbGoc2+fP6SRVr/33lZu32Yp/Z0svK2mjlvOfTceFvxkfDFoUuhwsGQgCcA64MXYKOcF+lqE+51dxawH43qLty8Mvz48sWRzbGxc9jlS5b1yU8Gfn5uEbe5T3LTtvRi6opYEL4x8SPAwtQDWNOpwrfqBLtdnRz2HXPNre4PR5Bx2IKaBwZRc/8ZZOg7i9oHR9EH58+8+mtANuTpKkhxVeXtnG/vIMGM/iRpe2asg3NwskM82jIwhFTNJlxep/cr3q8LqpqMQa2xFdM0Gr1ywwnU0a6zz3ZxNMFWAc2mLaOAXSQPc4cW5Ohh8hvloqfK1i7i02vX/RyxnLg6/gU6ZbbgWcUS/FiVDn9PocI4CjW62lD8VaCbS3dJS3aAXVpJCRjEu6ZNhQ2lApE7hc0jvvzmNvbo8dPQtRDx3Q8/EWNXPiM6zRYinS3AGAIlYajg/L3Ry8n3aKWx4DheFYm3Hdv1e8sRU+67fCz+MJeo0DQFt5Ota1bC4/URIR//7c+HRFIWN/gms5TQihnPXnbyi9wGaRxYeWKKN9TBs/ZcdVYOy5GQwccPsIqwmhYTLpFr0KbXj9/4+gZ+++4EUWs4hUFyLqEvZf/q6REzHUpxLNhUGrJTXxrv6ylgaYsO/xKRxET7MvJ9kW+kEgkHc5GqoQ1PTKIT6cxC3NhlxmKTs9H4ccYY6hHsX5cfjYbp/kFYqZVEBU4UJd03sNrePkB3kfflokQ6G6OmsLHoPakY9RAjEJOcGyTRMlElJ/vhWneR0NvET1zQa8PgxeR9WFYryY6GwgSsV5h2R8cYSnknxQo0OorYk4OiaNkI9mahCFoakuRkTM+2clS+PlGyQ8aPXjKPkF6D4fj8FlhD77nZWEL19RfTZ0z5mrMlGdcVjMxpKSv9SW0e/cG4IvOirYcn8veKku3VvLhVmZq89WQWIBgCwufxwOLwx6QliSDspSJvJ2EU0NBpYaq7j5vv7BEWuk+LmKiXt9/dzE10yIp2rEo15OVvp8gYIkICWBAIIgA4gYPz7hTMmTpIy7oKyrqsJMallcV5DEfjHNWS2I3K4uj5pprwRfNHpK2Z54Bt44z54X99uP/jai+vaQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APv69gD69/kA///7APf//ADG090AiaPDAHCLvAN3hbgGd4i8B3iCuQV2qsQBn8DKAN7z8QH///8A/Pb5APr6+QAA9vr3AP37+gDU7O4Ai7jHAXaXvgVzib8MZIzBEGCQxBNikcMTZ4y/EmuOvQ5vkb0IfqnFAsLb3wD3+foA+fr8AAD///8AyuDjAGmdvANehLoLX4rDF1Oc0SlUqc9KYKvOaGGrzWxUqtFUVJ3QMFyOxxpfhrwQY4ixA7LI1QD+//sAANnq7ACArMUCZIO5DGOUzB5UqNBIaqzBoX2hpt97lZj4eZOX+3eeo+hzqb24XKnMYl+bySZiiMESaZS6A87m6gAAhrW+AGmQtgljj80aUaLMUWOTm857g4T/cnmB/3F3ff9reXn/cXd5/3p+h/9rkpjoTqO+cmCczCJhfrYNmLPSAQBnjbIDa4zCEU+gzjZQiZm6a3h4/1ViZ/lXYWj7U2Jn/VdqcP1Xam36V2hq911lav9Pe4ThUKHHUmOMxBd5n8EFAHWAuQpllM0XS5i5azpSWfh6gYz9fYuO+0FQUv6mrbP+W2dx/jVESf5HV179SVRf/ERRWv9BhKGaXJ7OI2yQvwkAboK4DWCe0R9BfqCXKTtE/zpLVv29wcb+0dbX//////2Zn6T9lZ2h/l9qdf4pO0n8OUFM/jFqeMRTotA1borDDABxgLUOX6HTITF0kKQrMz3+ESg2/IGKk/3////+5OLh/vr5+f7////9p621/RgpOPsoMz7+LWFwzVSi0jpmkbwNAHKBsQxgn9AdO3mZixorOf8PKDj9OkZS+1ZgZP5manH++fr6/ZSYmv2ws7n+TFhi/AgeJ/4qYn67WaLVMHCHwAwAbYmxCGeTyRVMl79YEzZM7BQhM/8UKDb4AhUi/SAuPv9YYmv9BRId/jxDTvxjanT8BiAy/jeDpYRmmcwebJTCCQBembQDZ4m+Dl2h1ykyc42WDBYj/xIbL/8UKDr6DyI0/AYYKPsQJjn6Dhsq/Q8WI/8iVG/DUaTMPmaEuRSGoMcDAJXCzwFslb0GaYzIF1ilzzgsaYagEB4w9goSIP8MFiP/DBgp/wkUKf8JGin/Gk1lw0qfy1Bsl9QdZX2zCam70QAA8vv7AJa5zQFbfrAIao7LF1mk3C5Ajq1uKFpusSBEVdIhQlnVIE5tvTN+nYRWpc89Z5fRHGN4uAyDnb4B5PLxAAD++vsA5O3uAIOzxgBfiL0FY4G9EWOXzRpepNMqW6LOO1mizDxbo9IxYJvRHmeFuxNqfrMJfZ26ANHi5AD///8AAPP5+QD++/0A8Pr7ALrS3wCLqcYCdJa+CHGLvwprjcMNaJDCDW6Jugxulb0IiKHFArK71AHn8vMA/f7+APv7/QBXjxPRmZifdgAAAABJRU5ErkJggg==\"","import { StateShard } from \"../utils\";\nimport { put } from \"redux-saga/effects\";\n\nconst Requests = StateShard(\n  \"Requests\",\n  init,\n  { cache, expire, fetch, fetched },\n  {\n    parsePage,\n    queryCadreModels,\n    queryCadres,\n    queryRevisions,\n    queryPageIds,\n  },\n  {\n    selectCachedRequestsByPageIds,\n    selectCachedParsedPageIds,\n    selectCachedUrl,\n    selectPending,\n  }\n);\n\nexport { Requests };\n\nfunction init(state) {\n  if (!state.io) {\n    state.io = {};\n  }\n\n  state.io.requests = { cached: {}, pending: [] };\n}\n\n// Actions\n\nfunction cache(state, { url, data, queryParams }) {\n  const cached = selectCached(state);\n\n  cached[url] = { data, queryParams };\n}\n\nfunction expire(state, { url }) {\n  const cached = selectCached(state);\n\n  delete cached[url];\n}\n\nfunction fetch(state, params) {\n  const pending = selectPending(state);\n\n  if (!pending.find((request) => request.url === params.url)) {\n    pending.push(params);\n  }\n}\n\nfunction fetched(state, { url }) {\n  const pending = selectPending(state);\n\n  const index = pending.findIndex((request) => request.url === url);\n  if (index > -1) {\n    pending.splice(index, 1);\n  }\n}\n\n// Action Creators\n\nfunction* parsePage({ page, parserName }) {\n  const queryParams = { action: \"parse\", page };\n\n  yield put(\n    Requests.fetch({\n      desc: \"parsePage\",\n      parserName,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadreModels({ pageId }) {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmpageid: pageId,\n    cmtype: \"page\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadreModels\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadres() {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmtitle: \"Category:Cadre\",\n    cmtype: \"subcat\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadres\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryRevisions({ pageIds }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"revisions\",\n    pageids: pageIds.join(\"|\"),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryRevisions\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryPageIds({ pages }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"pageprops\",\n    titles: encodeURIComponent(pages.map((_) => _.text).join(\"|\")),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryPageIds\",\n      pages,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.io.requests;\n}\n\nfunction selectCached(state) {\n  const requests = select(state);\n  return requests.cached;\n}\n\nfunction selectCachedUrl(state, url) {\n  const cached = selectCached(state);\n  return cached[url];\n}\n\nfunction selectCachedRequestsByPageIds(state, pageIds) {\n  const cached = selectCached(state);\n  return Object.fromEntries(\n    Object.entries(cached).filter(\n      ([key, { data }]) =>\n        data && data.parse && pageIds.includes(data.parse.pageid)\n    )\n  );\n}\n\nfunction selectCachedParsedPageIds(state) {\n  const cached = selectCached(state);\n  return Object.values(cached)\n    .filter(({ data }) => data && data.parse)\n    .map(({ data }) => data.parse.pageid);\n}\n\nfunction selectPending(state) {\n  const requests = select(state);\n  return requests.pending;\n}\n\n// Utils\n\nfunction jsonApiRequest(queryParams) {\n  const jsonFormat = {\n    formatversion: 2,\n    format: \"json\",\n  };\n  const params = { ...queryParams, ...jsonFormat };\n\n  const queryString = Object.entries(params)\n    .map((keyValue) => keyValue.join(\"=\"))\n    .join(\"&\");\n\n  return \"https://privateerpress.wiki/api.php?\" + queryString;\n}\n","import { StateShard } from \"./utils\";\n\nconst ParserNames = StateShard(\n  \"ParserNames\",\n  init,\n  { setForPage },\n  {},\n  { selectByPage }\n);\n\nexport { ParserNames };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.parserNames = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, parserName }) {\n  const parserNames = select(state);\n  parserNames[page] = parserName;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.parserNames;\n}\n\nfunction selectByPage(state, page) {\n  const parserNames = select(state);\n  return parserNames[page];\n}\n","import { put, take } from \"redux-saga/effects\";\n\nimport { Requests } from \"../../state/io/Requests\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* cacheParserNames() {\n  while (true) {\n    const action = yield take(Requests.fetch().type);\n    const { payload } = action;\n    const { desc, queryParams, parserName } = payload;\n\n    if (desc !== \"parsePage\") {\n      continue;\n    }\n\n    const page = queryParams.page;\n\n    if (!page || !parserName) {\n      console.error(\"Could not cache parser!\", { page, parserName }, action);\n      continue;\n    }\n\n    yield put(ParserNames.setForPage({ page, parserName }));\n  }\n}\n\nexport { cacheParserNames };\n","const jsonp = (url) => {\n  return new Promise(function (resolve, reject) {\n    const callbackName = \"jsonp_callback_\" + Math.round(100000 * Math.random());\n    window[callbackName] = function (data) {\n      delete window[callbackName];\n      document.body.removeChild(script);\n      resolve(data);\n    };\n\n    const script = document.createElement(\"script\");\n    script.src =\n      url + (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"callback=\" + callbackName;\n    document.body.appendChild(script);\n  });\n};\n\nexport { jsonp };\n","/*\nThese sagas fetch and cache wiki pages.\n\nThe wiki's JSONP API is used to fetch page contents. Since we want to be\npolite, we only call the API every two seconds. This throttle is implemented in\nfetchWikiPage through an actionChannel and a call to delay.\n*/\n\nimport {\n  actionChannel,\n  call,\n  delay,\n  put,\n  select,\n  take,\n} from \"redux-saga/effects\";\nimport { FetchedWikiPage, FetchedWikiPageRevisions } from \"../../../messages\";\nimport { jsonp } from \"../jsonp\";\n\nimport { Requests } from \"../../../state/io/Requests\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { CadreModels } from \"../../../state/CadreModels\";\nimport { PageIds } from \"../../../state/PageIds\";\n\nfunction* fetchWikiPage() {\n  const wikiPageChannel = yield actionChannel(Requests.fetch().type);\n\n  while (true) {\n    const action = yield take(wikiPageChannel);\n    const { payload } = action;\n    const { desc, parserName, queryParams, url } = payload;\n\n    let curr = Date.now();\n    let diff = 0;\n    console.log(\n      (((diff = Date.now() - curr), (curr = Date.now())), curr),\n      \"fetchWikiPage 1\",\n      diff,\n      { page: queryParams.page }\n    );\n\n    let request = yield select(Requests.selectCachedUrl(url));\n\n    console.log(\n      (((diff = Date.now() - curr), (curr = Date.now())), curr),\n      \"fetchWikiPage 2\",\n      diff,\n      { page: queryParams.page }\n    );\n\n    let wait = false;\n    if (!request) {\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 3\",\n        diff,\n        { page: queryParams.page }\n      );\n\n      const data = yield call(jsonp, url);\n      request = { data, queryParams };\n      wait = true;\n      yield put(Requests.cache({ url, data, queryParams }));\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 4\",\n        diff,\n        { page: queryParams.page }\n      );\n    }\n\n    console.log(\n      (((diff = Date.now() - curr), (curr = Date.now())), curr),\n      \"fetchWikiPage 5\",\n      diff,\n      { page: queryParams.page }\n    );\n\n    yield put(Requests.fetched({ url }));\n\n    console.log(\n      (((diff = Date.now() - curr), (curr = Date.now())), curr),\n      \"fetchWikiPage 6\",\n      diff,\n      { page: queryParams.page }\n    );\n\n    const data = request.data;\n\n    if (desc === \"queryRevisions\") {\n      const pageRevisions = data.query.pages;\n\n      yield put(FetchedWikiPageRevisions({ pageRevisions }));\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 7\",\n        diff,\n        { page: queryParams.page }\n      );\n    }\n\n    if (desc === \"queryCadres\") {\n      const categorymembers = data.query.categorymembers;\n      if (categorymembers) {\n        const cadreCategoryMembers = Object.fromEntries(\n          categorymembers.map((member) => [\n            member.pageid,\n            member.title.replace(/^Category:/, \"\"),\n          ])\n        );\n\n        yield put(CadreCategoryMembers.set({ cadreCategoryMembers }));\n      }\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 8\",\n        diff,\n        { page: queryParams.page }\n      );\n    }\n\n    if (desc === \"queryCadreModels\") {\n      const { cmpageid: cadrePageId } = queryParams;\n\n      const categoryMembers = data.query.categorymembers;\n      if (categoryMembers) {\n        const cadreModels = categoryMembers.map(({ pageid, title }) => ({\n          pageId: pageid,\n          title,\n        }));\n\n        yield put(CadreModels.setForCadrePageId({ cadrePageId, cadreModels }));\n      }\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 9\",\n        diff,\n        { page: queryParams.page }\n      );\n    }\n\n    if (desc === \"parsePage\") {\n      const { page } = queryParams;\n\n      if (!page) {\n        console.error(\"No page to fetch!\", action);\n        continue;\n      }\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 10.5\",\n        diff,\n        { page: queryParams.page }\n      );\n\n      yield put(FetchedWikiPage({ page, data: data.parse, parserName }));\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 10\",\n        diff,\n        { page: queryParams.page }\n      );\n    }\n\n    if (desc === \"queryPageIds\") {\n      const { pages } = payload;\n\n      const titleToPageId = Object.fromEntries(\n        data.query.pages.map(({ title, pageid }) => [title, pageid])\n      );\n\n      const pageIdByTitle = Object.fromEntries(\n        pages.map(({ text, page }) => [page.split(\"#\")[0], titleToPageId[text]])\n      );\n\n      yield put(PageIds.addPages({ pageIdByTitle }));\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 11\",\n        diff,\n        { page: queryParams.page }\n      );\n    }\n\n    if (wait) {\n      const twoSecondsInMs = 2 * 1000;\n      yield delay(twoSecondsInMs);\n\n      console.log(\n        (((diff = Date.now() - curr), (curr = Date.now())), curr),\n        \"fetchWikiPage 12\",\n        diff,\n        { page: queryParams.page }\n      );\n    }\n\n    console.log(\n      (((diff = Date.now() - curr), (curr = Date.now())), curr),\n      \"fetchWikiPage 13\",\n      diff,\n      { page: queryParams.page }\n    );\n  }\n}\n\nexport { fetchWikiPage };\n","/*\nThese sagas make sure, cached wiki pages stay up-to-date.\n\nEach app reload triggers a RefreshWikiPages action, that starts the cache\nupdate process. The refreshWikiPages saga bulk loads revision data for all\ncached pages from the wiki API. If a page cannot be found (probably because it\nwas deleted from the wiki), it is removed from the cache. If revision\ninformation is found, it is compared with the cached revision of the page. If\nthe loaded revision is higher, the page is removed and fetched again. If the\ncached revision is higher or equal, the page is not refreshed and remains\ncached.\n*/\n\nimport { FetchedWikiPageRevisions, RefreshWikiPages } from \"../../../messages\";\nimport { all, put, take, select } from \"redux-saga/effects\";\n\nimport { Requests } from \"../../../state/io/Requests\";\nimport { ParserNames } from \"../../../state/ParserNames\";\n\nfunction* updateCache() {\n  yield all([refreshWikiPages(), refreshOutdatedWikiPages()]);\n}\n\nexport { updateCache };\n\nfunction* refreshWikiPages() {\n  yield take(RefreshWikiPages().type);\n  const parsedPageIds = yield select(Requests.selectCachedParsedPageIds());\n\n  const queryLength = 50;\n  for (let i = 0; i < parsedPageIds.length; i += queryLength) {\n    const pageIds = parsedPageIds.slice(i, i + queryLength);\n\n    yield* Requests.queryRevisions({ pageIds });\n  }\n}\n\nfunction* refreshOutdatedWikiPages() {\n  while (true) {\n    const { payload } = yield take(FetchedWikiPageRevisions().type);\n    const { pageRevisions } = payload;\n    const revInfoByPageId = Object.fromEntries(\n      pageRevisions.map((revision) => [\n        revision.pageid,\n        revision.missing\n          ? { missing: revision.missing }\n          : {\n              revid: Math.max(\n                ...revision.revisions.map((revision) => revision.revid)\n              ),\n            },\n      ])\n    );\n    const pageIds = pageRevisions.map((revision) => revision.pageid);\n\n    const requests = yield select(\n      Requests.selectCachedRequestsByPageIds(pageIds)\n    );\n\n    for (const [url, { data, queryParams }] of Object.entries(requests)) {\n      const { page } = queryParams;\n      const { parse } = data;\n\n      const revInfo = revInfoByPageId[parse.pageid];\n      if (revInfo.missing) {\n        yield put(Requests.expire({ url }));\n      } else if (parse.revid < revInfo.revid) {\n        yield put(Requests.expire({ url }));\n        const parserName = yield select(ParserNames.selectByPage(page));\n\n        yield* Requests.parsePage({ page, parserName });\n      }\n    }\n  }\n}\n","function partitionBy(slice, array) {\n  var arrays = [];\n\n  for (var i = 0; i < array.length; i += slice) {\n    arrays[arrays.length] = array.slice(i, i + slice);\n  }\n\n  return arrays;\n}\n\nexport { partitionBy };\n","import { all, put, take, select } from \"redux-saga/effects\";\n\nimport { AppSync } from \"../../../state/AppSync\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\nimport { FactionModels } from \"../../../state/FactionModels\";\nimport { Factions } from \"../../../state/Factions\";\nimport { PageIds } from \"../../../state/PageIds\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchPageIds() {\n  const cachedPageIds = yield select(PageIds.select());\n\n  if (Object.keys(cachedPageIds).length === 0) {\n    const [factionsSet] = yield all([\n      take(Factions.set().type),\n      take(CypherCodecs.set().type),\n      take(WildCardModels.set().type),\n    ]);\n\n    const factions = Object.keys(factionsSet.payload.factions);\n\n    yield all(\n      factions.map((faction) =>\n        take(\n          (action) =>\n            action.type === FactionModels.setForPage().type &&\n            action.payload.page === faction\n        )\n      )\n    );\n\n    const factionModelPages = Object.values(\n      yield select(FactionModels.select())\n    )\n      .flat()\n      .map((_) => _.Name);\n\n    const wildCardPages = Object.values(yield select(WildCardModels.select()))\n      .flat()\n      .map((_) => _.Name)\n      .sort(({ text, page }) => [text, page])\n      .filter(\n        ({ text, page }, index, cards) =>\n          !index ||\n          (text !== cards[index - 1].text && page !== cards[index - 1].page)\n      );\n\n    const cypherPages = (yield select(CypherCodecs.select())).map(\n      (_) => _.Cypher\n    );\n\n    const pages = [...factionModelPages, ...wildCardPages, ...cypherPages].sort(\n      (_) => _.page\n    );\n    const pageSlices = partitionBy(50, pages);\n\n    for (const pages of pageSlices) {\n      yield* Requests.queryPageIds({ pages });\n    }\n\n    let processedCount = 0;\n    while (yield take(PageIds.addPages().type)) {\n      processedCount += 1;\n      if (pageSlices.length === processedCount) {\n        yield put(AppSync.done());\n      }\n    }\n  }\n}\n\nexport { fetchPageIds };\n","import { all } from \"redux-saga/effects\";\nimport { fetchWikiPage } from \"./fetchWikiPage\";\nimport { updateCache } from \"./updateCache\";\nimport { fetchPageIds } from \"./fetchPageIds\";\n\nfunction* cacheWikiPages() {\n  yield all([fetchPageIds(), updateCache(), fetchWikiPage()]);\n}\n\nexport { cacheWikiPages };\n","import { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreCategoryMembers() {\n  yield* Requests.queryCadres();\n}\n\nexport { fetchCadreCategoryMembers };\n","import { take } from \"redux-saga/effects\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreModels() {\n  while (true) {\n    const {\n      payload: { cadreCategoryMembers },\n    } = yield take(CadreCategoryMembers.set().type);\n\n    const pageIds = Object.keys(cadreCategoryMembers);\n    for (const pageId of pageIds) {\n      yield* Requests.queryCadreModels({ pageId });\n    }\n  }\n}\n\nexport { fetchCadreModels };\n","/*\nThese sagas load meta data necessary for grouping models into cadres.\n\n`fetchCadreCategoryMembers` gets a list of all cadres in game, while `fetchCadreModels` fetches\nthe cadre models for a given cadre.\n*/\n\nimport { all } from \"redux-saga/effects\";\nimport { fetchCadreCategoryMembers } from \"./fetchCadreCategoryMembers\";\nimport { fetchCadreModels } from \"./fetchCadreModels\";\n\nfunction* fetchCadres() {\n  yield all([fetchCadreCategoryMembers(), fetchCadreModels()]);\n}\n\nexport { fetchCadres };\n","function cleanText(text) {\n  return text.replace(/\\n/g, \"\");\n}\n\nfunction prepareDOM(text) {\n  const doc = new DOMParser().parseFromString(text, \"text/html\");\n  doc\n    .querySelectorAll(\n      \"h1 > span[id], h2 > span[id], h3 > span[id], h4 > span[id]\"\n    )\n    .forEach((node) => {\n      node.parentNode.id = node.id;\n    });\n\n  return doc;\n}\n\nexport { cleanText, prepareDOM };\n","import { prepareDOM } from \"./utils\";\n\nconst parseCypherText = (text) => {\n  const doc = prepareDOM(text);\n\n  const type = extractLink(doc, \"Type\");\n  const pow = extractLink(doc, \"Pow\");\n  const effect = extractParagraphs(doc, \"Effect\");\n  const faction = extractLink(doc, \"Faction\");\n  const source = extractLink(doc, \"Source\");\n\n  const cypher = {\n    type,\n    pow,\n    effect,\n    faction,\n    source,\n  };\n\n  return removeUndefinedValues(cypher);\n};\n\nexport { parseCypherText };\n\nfunction extractLink(doc, id) {\n  const p = doc.querySelector(`h2#${id} ~ p`);\n  if (!p) return undefined;\n\n  const a = p.querySelector(\"a\");\n  if (!a) return { text: p.innerText };\n\n  const hrefs = a.href.split(\"title=\");\n  return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n}\n\nfunction extractParagraphs(doc, id) {\n  function helper(node, texts) {\n    switch (node.tagName) {\n      case \"P\":\n        return helper(node.nextSibling, [...texts, node.innerText.trim()]);\n      case \"H2\":\n        return texts;\n      default:\n        return helper(node.nextSibling, texts);\n    }\n  }\n\n  const node = doc.querySelector(`h2#${id} ~ p`);\n  if (!node) return undefined;\n\n  return helper(node, []);\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n","import { cleanText } from \"./utils\";\n\nfunction parseAnchorTable(table) {\n  const header = [...table.querySelectorAll(\"th\")].map((th) =>\n    cleanText(th.innerText)\n  );\n\n  const body = [...table.querySelectorAll(\"tr\")].map((tr) =>\n    [...tr.querySelectorAll(\"td\")].map((td) => {\n      const anchors = [...td.querySelectorAll(\"a\")].map(parseAnchor);\n      if (anchors.length > 0) {\n        return anchors;\n      }\n      const text = parseText(td);\n      if (text) {\n        return [{ text }];\n      }\n      return [];\n    })\n  );\n\n  return body\n    .filter((row) => row.length === header.length)\n    .map((row) =>\n      Object.fromEntries(\n        header.flatMap((title, i) => (row[i] ? [[title, row[i]]] : []))\n      )\n    );\n}\n\nfunction parseAnchor(a) {\n  const titleColon = a.title.split(\":\");\n  const hrefTitle = a.href.split(\"title=\");\n  return {\n    text: titleColon[titleColon.length - 1],\n    page: hrefTitle[hrefTitle.length - 1],\n  };\n}\n\nexport { parseAnchor, parseAnchorTable };\n\nfunction parseText(node) {\n  return cleanText(node.innerText);\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseCypherCodecsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const cypherCodecsTable = doc.querySelector(\"table.sortable\");\n  if (!cypherCodecsTable) {\n    console.error(\"parseCypherCodecsText: cypherCodecsTable not found!\");\n    return undefined;\n  }\n\n  const cypherCodecs = parseAnchorTable(cypherCodecsTable);\n  return cypherCodecs.map((cypherCodec) =>\n    Object.fromEntries(\n      Object.entries(cypherCodec).map(([key, values]) => [key, values[0]])\n    )\n  );\n};\n\nexport { parseCypherCodecsText };\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionModelsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const table = doc.querySelector(\"h1#Models ~ table\");\n  if (!table) {\n    console.error(\"parseFactionModelsText: table not found!\");\n    return undefined;\n  }\n  const models = parseAnchorTable(table);\n\n  return models.map((model) =>\n    Object.fromEntries(\n      Object.entries(model).flatMap(([key, values]) =>\n        key === \"Subtype\"\n          ? values.length > 0\n            ? [[key, values]]\n            : []\n          : [[key, values[0]]]\n      )\n    )\n  );\n};\n\nexport { parseFactionModelsText };\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const p = doc.querySelector(\"h2#Factions ~ p\");\n  const factions = Object.fromEntries(collectFactions(p, []));\n  delete factions.Wild_Card; // Wild Cards are crawled independently.\n  return factions;\n};\n\nexport { parseFactionsText };\n\nfunction collectFactions(node, factions) {\n  switch (node.tagName) {\n    case \"P\":\n      const a = node.querySelector(\"a\");\n      if (!a) {\n        console.error(\"collectFactions: a not found!\");\n        return collectFactions(node.nextSibling, factions);\n      }\n      const anchor = parseAnchor(a);\n      const faction = [anchor.page, anchor];\n      return collectFactions(node.nextSibling, [...factions, faction]);\n    case \"H2\":\n      return factions;\n    default:\n      return collectFactions(node.nextSibling, factions);\n  }\n}\n","import { parseAnchor } from \"./parsers\";\nimport { cleanText, prepareDOM } from \"./utils\";\n\nconst parseModelText = (text) => {\n  const doc = prepareDOM(text);\n\n  const storeLinks = extractStoreLinks(doc);\n  const release = extractText(doc, \"Release\", { node: \"h1\" });\n  const lore = extractText(doc, \"Lore\", { node: \"h1\" });\n\n  const contents = [...doc.querySelectorAll(\".mw-parser-output > *\")];\n\n  // In cases where a model has more than a single card (see Phaetheon),\n  // h2s are used to seperate stats. Pages with a single card don't use h2s.\n  const cardIndexes = contents.flatMap((el, index) =>\n    el.nodeName === \"H2\" ? [index] : []\n  );\n\n  const docs =\n    cardIndexes.length === 0\n      ? [doc]\n      : cardIndexes.map((position, index, indexes) =>\n          prepareDOM(\n            contents\n              .slice(position, indexes[index + 1])\n              .map((_) => _.outerHTML)\n              .join()\n          )\n        );\n\n  const coreStats = docs.map((doc) => {\n    const cardNameElement = doc.querySelector(\"h2[id] > span\");\n    const cardName = cardNameElement ? cardNameElement.innerText : undefined;\n\n    const factionAndTypes =\n      extractList(doc, \"Unit_Faction_and_Type\") ||\n      extractList(doc, \"Model_Faction_and_Type\");\n    const faction = factionAndTypes[0];\n    const types = factionAndTypes.slice(1);\n    const squadSize =\n      extractText(doc, \"Squad_Size\") || extractText(doc, \"Model_Count\");\n    const deploymentCost = extractText(doc, \"Deployment_Cost\");\n    const baseSize = extractText(doc, \"Base_Size\");\n    const health = extractText(doc, \"Health\");\n    const wildCardFactions = extractList(doc, \"Wild_Card_Factions\");\n    const weaponPoints = extractText(doc, \"Weapon_Points\");\n    const hardpoints = extractText(doc, \"Hardpoints\");\n    const specialRules = extractDefinitions(doc, \"Special_Rules\");\n    const chassisSpecialRules = extractDefinitions(\n      doc,\n      \"Chassis_Special_Rules\"\n    );\n    const chassisAdvantages = extractDefinitions(doc, \"Chassis_Advantages\");\n    const advantages = extractDefinitions(doc, \"Advantages\");\n    const maneuvers = extractDefinitions(doc, \"Maneuvers\");\n    const vehicleWeaponSelection = extractWeaponSelection(\n      doc,\n      \"Weapon_Selection\"\n    );\n    const cortexes = extractCortexes(doc, \"Cortexes\");\n\n    const modelStatsData = [\n      ...doc\n        .querySelector(\n          \"h3[id^=Unit_Stats] ~ table, h3[id^=Model_Stats] ~ table\"\n        )\n        .querySelectorAll(\"tr > td\"),\n    ].map((_) => cleanText(_.innerText));\n    const modelStatsLength = modelStatsData.length / 2;\n    const modelStats = Object.fromEntries(\n      Array.from({ length: modelStatsLength }, (_, i) => i).map((i) => [\n        modelStatsData[i],\n        modelStatsData[i + modelStatsLength],\n      ])\n    );\n\n    const factionAttachment = extractFactionAttachment(doc);\n    const wildCardAttachment = extractWildCardAttachment(doc);\n\n    let weaponsData = [\n      ...doc.querySelectorAll(\"h3[id^=Weapons] ~ table tr\"),\n    ].map((tr) => [...tr.querySelectorAll(\"td\")]);\n    let weapons = undefined;\n    if (weaponsData.length > 0) {\n      weapons = [];\n      let header = weaponsData[0].map((td) => td.innerText);\n      let weaponsList = weaponsData.slice(1);\n      for (const tds of weaponsList) {\n        if (tds.length === header.length) {\n          const stats = tds.map((td) => td.innerText);\n          const weapon = Object.fromEntries(\n            header.map((key, i) => [cleanText(key), cleanText(stats[i])])\n          );\n          weapons.push(weapon);\n        }\n        if (tds.length === 1) {\n          const previousWeapons = weapons.slice(0, weapons.length - 1);\n          const lastWeapon = weapons[weapons.length - 1];\n\n          const weapon = {\n            ...lastWeapon,\n            specialRules: parseDefinitionText(tds[0]),\n          };\n          weapons = [...previousWeapons, weapon];\n        }\n      }\n    }\n\n    function weaponDetails() {\n      const weaponDetailsTable = doc.querySelector(\"table.mw-collapsible\");\n      if (!weaponDetailsTable) return undefined;\n\n      const weaponDetailsData = [...weaponDetailsTable.querySelectorAll(\"tr\")]\n        .map((tr) => [...tr.querySelectorAll(\"td, th\")])\n        .filter((_) => _.length === 4);\n      if (!weaponDetailsData || weaponDetailsData.length === 0)\n        return undefined;\n\n      const detailsHeader = weaponDetailsData[0].map((_) =>\n        cleanText(_.innerText)\n      );\n      return weaponDetailsData.slice(1).map((tds) =>\n        Object.fromEntries(\n          tds.map((td, i) => {\n            const a = td.querySelector(\"a\");\n            const hrefs = a ? a.href.split(\"title=\") : undefined;\n            const text = cleanText(td.innerText);\n            return [\n              detailsHeader[i],\n              a ? { text, page: hrefs[hrefs.length - 1] } : { text },\n            ];\n          })\n        )\n      );\n    }\n\n    return {\n      ...(cardName ? { cardName } : {}),\n      faction,\n      types,\n      squadSize,\n      deploymentCost,\n      baseSize,\n      health,\n      wildCardFactions,\n      hardpoints,\n      weaponPoints,\n      modelStats,\n      factionAttachment,\n      wildCardAttachment,\n      specialRules,\n      weapons,\n      advantages,\n      maneuvers,\n      vehicleWeaponSelection,\n      cortexes,\n      chassisSpecialRules,\n      chassisAdvantages,\n      weaponDetails: weaponDetails(),\n    };\n  });\n\n  const model = {\n    storeLinks,\n    coreStats,\n    release,\n    lore,\n  };\n\n  return removeUndefinedValues(model);\n};\n\nexport { parseModelText, parseDefinitionText };\n\nfunction extractStoreLinks(doc) {\n  return [...doc.querySelectorAll(\"p\")]\n    .filter((p) =>\n      [...p.querySelectorAll(\"a\")].some((a) => a.href.includes(\"store\"))\n    )\n    .map((p) => p.innerHTML.replace(/\\n/g, \"\"))\n    .flatMap((html) => html.split(\"<br>\"));\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n\nfunction extractText(doc, id, { node = \"h3\" } = {}) {\n  const p = doc.querySelector(`${node}[id^=${id}] ~ p`);\n  if (!p) return undefined;\n\n  return cleanText(p.innerText);\n}\n\nfunction extractList(doc, id) {\n  const p = doc.querySelector(`h3[id^=${id}] ~ p`);\n  if (!p) return undefined;\n\n  const as = [...p.querySelectorAll(\"a\")];\n  if (as.length === 0) return undefined;\n\n  return as.map((a) => {\n    const hrefs = a.href.split(\"title=\");\n    return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n  });\n}\n\nfunction extractWeaponSelection(doc, id) {\n  const node = doc.querySelector(`h3[id^=${id}] + p`);\n  if (!node) return undefined;\n\n  const anchors = [...node.querySelectorAll(\"a\")];\n\n  return anchors.map((a) => parseAnchor(a));\n}\n\nfunction extractCortexes(doc, id) {\n  function helper(node, cortexes) {\n    switch (node.tagName) {\n      case \"P\":\n        const cortex = node.querySelector(\"b\").innerText;\n        const definitions = parseDefinitionText(node);\n        return helper(node.nextSibling, [...cortexes, [cortex, definitions]]);\n      case \"H3\":\n        return cortexes;\n      default:\n        return helper(node.nextSibling, cortexes);\n    }\n  }\n\n  const node = doc.querySelector(`h3[id^=${id}] ~ p`);\n  if (!node) return undefined;\n\n  return Object.fromEntries(helper(node, []));\n}\n\nfunction parseDefinitionText(node) {\n  const uls = [...node.querySelectorAll(\"ul\")];\n\n  for (const ul of uls) {\n    const list = [...ul.querySelectorAll(\"li\")].map(\n      (li) => \" • \" + li.innerText\n    );\n    ul.replaceWith(list.join(\"\"));\n  }\n\n  const definitions = node.innerHTML\n    .split(\"<br>\")\n    .map((_) => _.replace(/<[^>]+>/g, \"\").trim());\n\n  const pairs = definitions.flatMap((definition) => {\n    const separator = \": \";\n    const groups = definition.split(separator).map(cleanText).map(encodeHTML);\n    if (groups.length < 2) return [];\n    const key = groups[0];\n    const val = groups.slice(1).join(separator).replace(/\\s•\\s/g, \"\\n • \");\n    return [[key, val]];\n  });\n  if (pairs.length === 0) return undefined;\n\n  return Object.fromEntries(pairs);\n}\n\nfunction encodeHTML(text) {\n  const parser = new DOMParser();\n  const dom = parser.parseFromString(\n    \"<!doctype html><body>\" + text,\n    \"text/html\"\n  );\n  return dom.body.textContent;\n}\n\nfunction extractDefinitions(doc, id) {\n  const ul = doc.querySelector(`h3[id^='${id}'] ~ p ~ ul`);\n  const p = doc.querySelector(`h3[id^='${id}'] ~ p`);\n  if (!p) return undefined;\n\n  if (ul) p.append(ul);\n\n  return parseDefinitionText(p);\n}\n\nfunction extractFactionAttachment(doc) {\n  const p = doc.querySelector(\"h3[id^=Attachment] + p\");\n  if (p) {\n    const as = p.querySelectorAll(\"a\");\n    if (as) {\n      return [...as].map(parseAnchor);\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractWildCardAttachment(doc) {\n  const table = doc.querySelector(\"h3[id^=Attachment] + table\");\n  if (table) {\n    const tables = [...doc.querySelectorAll(\"h3[id^=Attachment] ~ *\")].reduce(\n      ({ tables, stop }, el) =>\n        stop\n          ? { tables, stop }\n          : el.nodeName === \"TABLE\"\n          ? { tables: [...tables, el], stop }\n          : { tables, stop: true },\n      { tables: [], stop: false }\n    ).tables;\n\n    const attachments = Object.fromEntries(\n      tables.map((table) => {\n        const factionName = table\n          .querySelector(\"caption\")\n          .childNodes[0].nodeValue.replace(/\\n/g, \"\");\n        return [\n          factionName === \"Empyreans\" ? \"Empyrean\" : factionName,\n          [...table.querySelectorAll(\"td > a\")].map(parseAnchor),\n        ];\n      })\n    );\n\n    return attachments;\n  }\n\n  return undefined;\n}\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\nimport { parseDefinitionText } from \"./parseModelText\";\n\nconst parseVehicleAndWarjackWeaponText = (text) => {\n  const doc = prepareDOM(text);\n\n  const vehicleWeaponId = doc.querySelector(\"#Vehicle_Weapon\");\n  const warjackWeaponId = doc.querySelector(\"#Warjack_Weapon\");\n\n  if (vehicleWeaponId && warjackWeaponId) {\n    const vehicleWeapon = parseVehicleOrWarjackWeapon(\n      \"#Vehicle_Weapon ~ \",\n      doc\n    );\n    const warjackWeapon = parseVehicleOrWarjackWeapon(\n      \"#Warjack_Weapon ~ \",\n      doc\n    );\n\n    return { vehicleWeapon, warjackWeapon };\n  } else {\n    const vehicleOrWarjackWeapon = parseVehicleOrWarjackWeapon(\"\", doc);\n\n    return { vehicleOrWarjackWeapon };\n  }\n};\n\nexport { parseVehicleAndWarjackWeaponText };\n\nfunction parseVehicleOrWarjackWeapon(prefix, doc) {\n  let res = {};\n\n  const availableFor = [\n    ...doc.querySelectorAll(`${prefix}[id^=Available_For] + p > a`),\n  ].map(parseAnchor);\n\n  res.availableFor = availableFor;\n\n  const pointCostNode = doc.querySelector(`${prefix}[id^=Point_Cost] + p`);\n  if (pointCostNode) {\n    const pointCost = parseInt(pointCostNode.innerText);\n\n    res.pointCost = pointCost;\n  }\n\n  const locationNode = doc.querySelector(`${prefix}[id^=Location] + p`);\n  if (locationNode) {\n    const location = locationNode.innerText.replace(/\\n/g, \"\");\n\n    res.location = location;\n  }\n\n  // Good special rules example: Metaperceptor\n  const specialRulesP = doc.querySelector(`${prefix}[id^=Special_Rules] + p`);\n  if (specialRulesP) {\n    res.specialRules = parseDefinitionText(specialRulesP);\n  }\n\n  // Good weapons examples:\n  // - Nova_Cannon#Warjack_Weapon (several special abilities)\n  // - Protean_Forge (several attack modes)\n  // - Assault_Rifle_%26_Bayonet (several weapons)\n  const table = doc.querySelector(`${prefix}[id^=Weapons] + table`);\n\n  if (table) {\n    const header = [...table.querySelectorAll(\"tr:first-of-type td\")].map(\n      (td) => td.innerText.replace(/\\n/g, \"\")\n    );\n\n    const weapons = [...table.querySelectorAll(\"tr:not(:first-of-type)\")]\n      .map((tr) => [...tr.querySelectorAll(\"td\")])\n      .flatMap((tr, index) =>\n        index % 2 === 0\n          ? [\n              tr.map((td) =>\n                [...td.childNodes]\n                  .map((node) =>\n                    (node.innerText || node.textContent).replace(/\\n$/g, \"\")\n                  )\n                  .filter((text) => [\" \", \"\"].indexOf(text) === -1)\n              ),\n            ]\n          : tr.map((td) => {\n              const specialRules = parseDefinitionText(td);\n\n              if (!specialRules || Object.keys(specialRules).length === 0)\n                return {};\n              return { specialRules };\n            })\n      )\n      .reduce(\n        (acc, tr, index) =>\n          index % 2 === 0\n            ? [\n                ...acc,\n                tr.reduce(\n                  (acc2, value, index2) => ({\n                    ...acc2,\n                    [header[index2]]: value.length === 1 ? value[0] : value,\n                  }),\n                  {}\n                ),\n              ]\n            : [\n                ...acc.slice(0, acc.length - 1),\n                { ...acc[acc.length - 1], ...tr },\n              ],\n        []\n      );\n    if (weapons.length > 0) {\n      res.weapons = weapons;\n    }\n  }\n\n  return res;\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseWildCardText = (text) => {\n  const doc = prepareDOM(text);\n\n  const h1OrTable = doc.querySelectorAll(\"h1, table.sortable\");\n  const factionAndModels = [];\n\n  for (let i = 0; i < h1OrTable.length; i++) {\n    if (i % 2 === 0) {\n      const h1 = h1OrTable[i];\n      if (h1.tagName !== \"H1\") {\n        console.error(\n          `parseWildCardText: expected H1, but got ${h1.tagName}!`,\n          h1\n        );\n      }\n      factionAndModels.push({ faction: h1.id });\n    } else {\n      const table = h1OrTable[i];\n      if (table.tagName !== \"TABLE\") {\n        console.error(\n          `parseWildCardText: expected TABLE, but got ${table.tagName}!`,\n          table\n        );\n      }\n      const last = factionAndModels[factionAndModels.length - 1];\n      const models = parseAnchorTable(table);\n      last.models = models.map((model) =>\n        Object.fromEntries(\n          Object.entries(model).flatMap(([key, values]) =>\n            key === \"Subtype\"\n              ? values.length > 0\n                ? [[key, values]]\n                : []\n              : [[key, values[0]]]\n          )\n        )\n      );\n    }\n  }\n\n  return factionAndModels;\n};\n\nexport { parseWildCardText };\n","import { put, select } from \"redux-saga/effects\";\nimport { parseModelText } from \"../../core/parse\";\nimport { Models } from \"../../../state/Models\";\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\nimport { PageIds } from \"../../../state/PageIds\";\n\nfunction* parseModel({ data, page }) {\n  const model = parseModelText(data.text);\n  model.name = { text: data.title, page };\n\n  const coreStats = model.coreStats;\n\n  for (const coreStat of coreStats) {\n    const cortexSelections = identifyCortexSelections(\n      coreStat.cortexes,\n      data.categories\n    );\n\n    if (cortexSelections) {\n      coreStat.cortexSelections = cortexSelections;\n    }\n\n    const warjackWeaponSelections = buildWarjackWeaponSelections(\n      coreStat.weaponDetails\n    );\n\n    if (warjackWeaponSelections) {\n      coreStat.warjackWeaponSelections = warjackWeaponSelections;\n    }\n  }\n\n  yield put(Models.setForPage({ page, model }));\n\n  let fetchPages = [];\n\n  for (const coreStat of coreStats) {\n    if (coreStat.cortexSelections) {\n      const cortexCategories = Object.values(coreStat.cortexSelections).flatMap(\n        (advantages) =>\n          Object.values(advantages).flatMap(({ category }) => ({\n            text: category.replace(/_/g, \" \"),\n            page: category,\n          }))\n      );\n\n      fetchPages = [...fetchPages, ...cortexCategories];\n    }\n\n    if (coreStat.warjackWeaponSelections) {\n      const weaponPages = Object.values(coreStat.warjackWeaponSelections).map(\n        ({ name, page }) => ({ text: name, page })\n      );\n\n      fetchPages = [...fetchPages, ...weaponPages];\n    }\n\n    if (coreStat.vehicleWeaponSelection) {\n      fetchPages = [...fetchPages, ...coreStat.vehicleWeaponSelection];\n    }\n\n    // const fetchedPages = yield select(PageIds.select());\n    // fetchPages = fetchPages.filter(\n    //   ({ page }) => !fetchedPages[page.split(\"#\")[0]]\n    // );\n\n    if (fetchPages.length > 0) {\n      const pageSlices = partitionBy(50, fetchPages);\n\n      for (const pages of pageSlices) {\n        yield* Requests.queryPageIds({ pages: pages });\n      }\n    }\n  }\n}\n\nexport { parseModel };\n\nfunction buildWarjackWeaponSelections(weaponDetails) {\n  if (!weaponDetails) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    weaponDetails.map(({ Cost, Location, Weapon }) => [\n      Weapon.page,\n      {\n        cost: Cost.text,\n        location: Location.text,\n        name: Weapon.text,\n        page: Weapon.page,\n      },\n    ])\n  );\n}\n\nfunction identifyCortexSelections(cortexes, categories) {\n  if (\n    !cortexes ||\n    Object.entries(cortexes).length === 0 ||\n    !categories ||\n    Object.entries(categories).length === 0\n  ) {\n    return undefined;\n  }\n\n  const categoryTexts = categories.map(({ category }) => category);\n\n  return Object.fromEntries(\n    Object.entries(cortexes).map(([cortex, advantages]) => [\n      cortex,\n      Object.fromEntries(\n        Object.entries(advantages).map(([advantage, text]) => [\n          advantage,\n          {\n            category: `Category:${findClosestCategory(\n              advantage,\n              categoryTexts\n            )}`,\n            text,\n          },\n        ])\n      ),\n    ])\n  );\n}\n\nfunction findClosestCategory(advantage, categoryTexts) {\n  return categoryTexts.find(\n    (category) => advantage === category.replace(/^WNM_/, \"\").replace(/_/g, \" \")\n  );\n}\n","import { parseCypher } from \"./parseCypher\";\nimport { parseCypherCodecs } from \"./parseCypherCodecs\";\nimport { parseFactionModels } from \"./parseFactionModels\";\nimport { parseFactions } from \"./parseFactions\";\nimport { parseModel } from \"./parseModel\";\nimport { parseVehicleOrWarjackWeapon } from \"./parseVehicleOrWarjackWeapon\";\nimport { parseWildCard } from \"./parseWildCard\";\n\nconst parsers = {\n  parseCypher,\n  parseCypherCodecs,\n  parseFactionModels,\n  parseFactions,\n  parseModel,\n  parseVehicleOrWarjackWeapon,\n  parseWildCard,\n};\n\nexport default parsers;\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherText } from \"../../core/parse\";\nimport { Cyphers } from \"../../../state/Cyphers\";\n\nfunction* parseCypher({ data, page }) {\n  const cypher = parseCypherText(data.text);\n  cypher.name = { text: data.title, page };\n  yield put(Cyphers.setForPage({ page, cypher }));\n}\n\nexport { parseCypher };\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherCodecsText } from \"../../core/parse\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\n\nfunction* parseCypherCodecs({ data }) {\n  const cypherCodecs = parseCypherCodecsText(data.text);\n  yield put(CypherCodecs.set({ cypherCodecs }));\n}\n\nexport { parseCypherCodecs };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionModelsText } from \"../../core/parse\";\nimport { FactionModels } from \"../../../state/FactionModels\";\n\nfunction* parseFactionModels({ data, page }) {\n  const factionModels = parseFactionModelsText(data.text);\n  yield put(FactionModels.setForPage({ page, factionModels }));\n}\n\nexport { parseFactionModels };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionsText } from \"../../core/parse\";\nimport { Factions } from \"../../../state/Factions\";\n\nfunction* parseFactions({ data }) {\n  const factions = parseFactionsText(data.text);\n  yield put(Factions.set({ factions }));\n}\n\nexport { parseFactions };\n","import { put, select } from \"redux-saga/effects\";\nimport { parseVehicleAndWarjackWeaponText } from \"../../core/parse\";\nimport { VehicleWeapons } from \"../../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../../state/WarjackWeapons\";\nimport { Models } from \"../../../state/Models\";\n\nfunction* parseVehicleOrWarjackWeapon({ data, page }) {\n  const start = Date.now();\n  if (page === \"Arcantrik_Destabilizer\") {\n    console.log(start, \"parseVehicleOrWarjackWeapon\");\n  }\n\n  const { vehicleWeapon, vehicleOrWarjackWeapon, warjackWeapon } =\n    parseVehicleAndWarjackWeaponText(data.text);\n\n  if (vehicleWeapon)\n    yield put(VehicleWeapons.setForPage({ page, vehicleWeapon }));\n  if (warjackWeapon)\n    yield put(WarjackWeapons.setForPage({ page, warjackWeapon }));\n  if (vehicleOrWarjackWeapon) {\n    const models = Object.values(yield select(Models.select()));\n\n    const vehicles = models.filter((model) =>\n      model.coreStats[0].types.some(({ text }) => text === \"Vehicle\")\n    );\n    const warjacks = models.filter((model) =>\n      model.coreStats[0].types.some(({ text }) => text === \"Warjack\")\n    );\n\n    const vehicleWeapons = vehicles.flatMap((vehicle) =>\n      vehicle.coreStats[0].vehicleWeaponSelection.map((weapon) => weapon.page)\n    );\n    const warjackWeapons = warjacks.flatMap((warjack) =>\n      !warjack.coreStats[0].weaponDetails\n        ? []\n        : warjack.coreStats[0].weaponDetails.map(({ Weapon }) => Weapon.page)\n    );\n\n    if (vehicleWeapons.includes(page) && warjackWeapons.includes(page)) {\n      console.error(\n        `Vehicle weapons and warjack weapons cannot both contain page ${page}!`\n      );\n    }\n\n    if (vehicleWeapons.includes(page)) {\n      yield put(\n        VehicleWeapons.setForPage({\n          page,\n          vehicleWeapon: vehicleOrWarjackWeapon,\n        })\n      );\n    }\n\n    if (warjackWeapons.includes(page)) {\n      yield put(\n        WarjackWeapons.setForPage({\n          page,\n          warjackWeapon: vehicleOrWarjackWeapon,\n        })\n      );\n    }\n  }\n\n  const end = Date.now();\n  if (page === \"Arcantrik_Destabilizer\") {\n    console.log(end, \"parseVehicleOrWarjackWeapon\", end - start);\n  }\n}\n\nexport { parseVehicleOrWarjackWeapon };\n","import { put } from \"redux-saga/effects\";\nimport { parseWildCardText } from \"../../core/parse\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nfunction* parseWildCard({ data }) {\n  const wildCards = parseWildCardText(data.text);\n  yield put(WildCardModels.set({ wildCards }));\n}\n\nexport { parseWildCard };\n","import { select, take } from \"redux-saga/effects\";\n\nimport { FetchedWikiPage } from \"../../messages\";\nimport parsers from \"./parsers\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* parseWikiPages() {\n  while (true) {\n    const action = yield take(FetchedWikiPage().type);\n    const { payload } = action;\n\n    let parserName = payload.parserName;\n    if (!parserName) {\n      parserName = yield select(ParserNames.selectByPage(payload.page));\n    }\n\n    if (!parserName) {\n      console.error(\"Parser name not found!\", action);\n      continue;\n    }\n\n    const parser = parsers[parserName];\n\n    if (!parser) {\n      console.error(\"Parser not found!\", action);\n      continue;\n    }\n\n    yield* parser(payload);\n  }\n}\n\nexport { parseWikiPages };\n","import { all, take } from \"redux-saga/effects\";\nimport { Factions } from \"../../state/Factions\";\nimport { Requests } from \"../../state/io/Requests\";\n\nfunction* triggerFetchWikiPages() {\n  yield all([triggerFetchFactions()]);\n}\n\nexport { triggerFetchWikiPages };\n\nfunction* triggerFetchFactions() {\n  while (true) {\n    const { payload } = yield take(Factions.set().type);\n    const { factions } = payload;\n\n    const factionPages = Object.values(factions).map((faction) => faction.page);\n\n    for (const page of factionPages) {\n      yield* Requests.parsePage({ page, parserName: \"parseFactionModels\" });\n    }\n  }\n}\n","const digitsBase62 =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\nfunction toBase62(n) {\n  if (n === 0) return \"0\";\n  var result = \"\";\n  while (n > 0) {\n    result = digitsBase62[n % digitsBase62.length] + result;\n    n = parseInt(n / digitsBase62.length, 10);\n  }\n  return result;\n}\n\nfunction fromBase62(s) {\n  var result = 0;\n  for (var i = 0; i < s.length; i++) {\n    var p = digitsBase62.indexOf(s[i]);\n    if (p < 0) return NaN;\n    result += p * Math.pow(digitsBase62.length, s.length - i - 1);\n  }\n  return result;\n}\n\nexport { fromBase62, toBase62 };\n","import { eventChannel } from \"redux-saga\";\nimport { all, put, select, take } from \"redux-saga/effects\";\nimport { MenuItemClicked } from \"../../messages\";\nimport { AppSync } from \"../../state/AppSync\";\nimport { CypherCodecs } from \"../../state/CypherCodecs\";\nimport { FactionModels } from \"../../state/FactionModels\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { Lists } from \"../../state/Lists\";\nimport { Models } from \"../../state/Models\";\nimport { PageIds } from \"../../state/PageIds\";\nimport { Url } from \"../../state/Url\";\nimport { VehicleWeapons } from \"../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../state/WarjackWeapons\";\nimport { WildCardModels } from \"../../state/WildCardModels\";\nimport { toBase62, fromBase62 } from \"./base62\";\nimport { ListIndex } from \"../../state/ListIndex\";\n\nfunction* ui() {\n  yield all([\n    addCard(),\n    updateUrl(),\n    parseListsFromQuery(),\n    parseListsFromQuery2(),\n    fetchCardOnShow(),\n    fetchWeaponsIfVehicleAdded(),\n    fetchWeaponsIfWarjackAdded(),\n  ]);\n}\n\nexport { ui };\n\nfunction* addCard() {\n  while (true) {\n    const { payload } = yield take(MenuItemClicked().type);\n    const { page } = payload;\n    const model = yield select(FactionModels.selectByPage(page));\n    const wildCard = yield select(WildCardModels.selectByPage(page));\n    const cypher = yield select(CypherCodecs.selectByPage(page));\n    if (model || wildCard || cypher) {\n      const pageId = yield select(PageIds.selectByPage(page));\n      const listIndex = yield select(ListIndex.select());\n      yield put(Lists.addCard({ listIndex, pageId }));\n    }\n  }\n}\n\nfunction* updateUrl() {\n  while (yield take((action) => action.type.startsWith(\"Lists.\"))) {\n    const lists = yield select(Lists.select());\n    const pageIds = lists.map(({ cards }) => cards.map((_) => _.pageId));\n\n    if (window.history && window.history.replaceState) {\n      const maxPageId = Math.max(0, ...pageIds.flat());\n      const codeLength = Math.ceil(Math.log(maxPageId + 1) / Math.log(62)) || 0;\n\n      function renderWarjackWeaponIds(warjackWeaponIds, codeLength) {\n        const ids = warjackWeaponIds || [];\n        let res = \"\";\n        for (let i = 0; i < ids.length; i++) {\n          const id = ids[i];\n          res += (id ? toBase62(id) : \"0\").padStart(codeLength, \"0\");\n        }\n        return res;\n      }\n\n      const state = lists.reduce(\n        (state, list, index) => ({\n          ...state,\n          ...(list.title ? { [`t${index}`]: list.title } : {}),\n          [`l${index}`]: list.cards.reduce(\n            (acc, card) =>\n              acc +\n              toBase62(card.pageId).padStart(codeLength, \"0\") +\n              (card.cortexIds || card.warjackWeaponIds\n                ? `(${(card.cortexIds || [])\n                    .map((id) => toBase62(id).padStart(codeLength, \"0\"))\n                    .join(\"\")},${renderWarjackWeaponIds(\n                    card.warjackWeaponIds,\n                    codeLength\n                  )})`\n                : \"\") +\n              (card.vehicleWeaponId\n                ? `[${toBase62(card.vehicleWeaponId).padStart(\n                    codeLength,\n                    \"0\"\n                  )}]`\n                : \"\"),\n            \"\"\n          ),\n        }),\n        { v: 1, e: codeLength }\n      );\n\n      const query = Object.entries(state)\n        .map(([key, value]) => `${key}=${value}`)\n        .join(\"&\");\n      const url =\n        window.location.origin + window.location.pathname + \"?\" + query;\n\n      yield put(Url.set({ url }));\n\n      window.history.replaceState(query, \"\", url);\n    }\n  }\n}\n\nfunction* parseListsFromQuery() {\n  const loadChannel = eventChannel((emitter) => {\n    window.addEventListener(\"load\", emitter);\n\n    return () => {\n      window.removeEventListener(\"load\", emitter);\n    };\n  });\n\n  while (true) {\n    yield take(loadChannel);\n\n    yield* parseLists();\n  }\n}\n\nfunction* parseListsFromQuery2() {\n  yield take(AppSync.done().type);\n\n  yield* parseLists();\n}\n\nfunction* parseLists() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlParams);\n\n  const version = params.v;\n  const exponent = parseInt(params.e, 10) || 0;\n\n  let lists = null;\n  if (version === \"1\" && exponent) {\n    const listIndexes = Object.keys(params)\n      .filter((key) => key.match(/^l[\\d]+$/))\n      .map((key) => parseInt(key.substring(1), 10))\n      .sort((a, b) => a - b);\n\n    lists = listIndexes.map((index) => ({\n      title: params[\"t\" + index] || \"\",\n      cards: parseList(exponent, params[\"l\" + index]),\n    }));\n  } else {\n    lists = yield select(Lists.select());\n  }\n\n  // If the card is either a configured warjack or a configured vehicle, its page must be\n  // fetched in order for its subtitle to be shown correctly. A warjack or vehicle can be\n  // identified by having at least one cortex id, warjack weapon id or vehicle weapon id.\n  for (const list of lists) {\n    for (const {\n      pageId,\n      cortexIds,\n      warjackWeaponIds,\n      vehicleWeaponId,\n    } of list.cards) {\n      if (cortexIds || warjackWeaponIds || vehicleWeaponId) {\n        const page = yield select(PageIds.selectPageByPageId(pageId));\n        if (page) {\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n        }\n      }\n    }\n  }\n\n  yield put(Lists.set({ lists }));\n}\n\nfunction* fetchWeaponsIfVehicleAdded() {\n  while (true) {\n    const { payload } = yield take(Models.setForPage().type);\n    if (\n      payload &&\n      payload.model &&\n      payload.model.coreStats &&\n      payload.model.coreStats.length > 0 &&\n      payload.model.coreStats[0].types &&\n      payload.model.coreStats[0].types\n        .map((type) => type.text)\n        .includes(\"Vehicle\")\n    ) {\n      const vehicleWeaponSelection =\n        payload.model.coreStats[0].vehicleWeaponSelection;\n      if (vehicleWeaponSelection) {\n        for (const { page } of vehicleWeaponSelection) {\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              VehicleWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                VehicleWeapons.setForPage({\n                  page: pageWithoutTarget,\n                  vehicleWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchWeaponsIfWarjackAdded() {\n  while (true) {\n    const { payload } = yield take(Models.setForPage().type);\n    if (\n      payload &&\n      payload.model &&\n      payload.model.coreStats &&\n      payload.model.coreStats.length > 0 &&\n      payload.model.coreStats[0].types &&\n      payload.model.coreStats[0].types\n        .map((type) => type.text)\n        .includes(\"Warjack\")\n    ) {\n      const weaponDetails = payload.model.coreStats[0].weaponDetails;\n      if (weaponDetails) {\n        for (const { Weapon } of weaponDetails) {\n          const page = Weapon.page;\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              WarjackWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                WarjackWeapons.setForPage({\n                  page: pageWithoutTarget,\n                  warjackWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchCardOnShow() {\n  while (true) {\n    const { payload } = yield take(Lists.toggleCard().type);\n    const { listIndex, cardIndex } = payload;\n    const card = yield select(Lists.selectCard(listIndex, cardIndex));\n    if (payload && payload.pageId && !card.hidden) {\n      const page = yield select(PageIds.selectPageByPageId(payload.pageId));\n      if (page) {\n        const cypher = yield select(CypherCodecs.selectByPage(page));\n        if (cypher) {\n          yield* Requests.parsePage({ page, parserName: \"parseCypher\" });\n        } else {\n          console.log(Date.now(), \"fetchCardOnShow 2\");\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n          console.log(Date.now(), \"fetchCardOnShow 3\");\n        }\n      }\n    }\n  }\n}\n\nfunction parseList(exponent, encodedList) {\n  function parseCards(cards, rest) {\n    if (rest === \"\") {\n      return cards;\n    }\n\n    const pageId = rest.slice(0, exponent);\n\n    if (rest[exponent] === \"(\") {\n      const blockEnd = rest.indexOf(\")\");\n      const delimiter = rest.indexOf(\",\");\n      if (!blockEnd || !delimiter) {\n        return [];\n      }\n\n      const block = rest.slice(exponent + 1, blockEnd);\n      const [cortexIds, warjackWeaponIds] = block.split(\",\");\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: partitionBy(exponent, cortexIds),\n            warjackWeaponIds: partitionBy(exponent, warjackWeaponIds),\n            vehicleWeaponId: [],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    if (rest[exponent] === \"[\") {\n      const blockEnd = rest.indexOf(\"]\");\n      if (!blockEnd) {\n        return [];\n      }\n\n      const vehicleWeaponId = rest.slice(exponent + 1, blockEnd);\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: [],\n            warjackWeaponIds: [],\n            vehicleWeaponId: [vehicleWeaponId],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    return parseCards(\n      [\n        ...cards,\n        { pageId, cortexIds: [], warjackWeaponIds: [], vehicleWeaponId: [] },\n      ],\n      rest.slice(exponent)\n    );\n  }\n\n  const cards = parseCards([], encodedList);\n\n  const decode = (string) => {\n    const normalizedString = string.replace(/^0+/, \"\") || \"0\";\n    if (normalizedString === \"0\") return null;\n    return parseInt(fromBase62(normalizedString), 10);\n  };\n\n  return cards\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId: decode(pageId),\n      cortexIds: cortexIds.map(decode),\n      warjackWeaponIds: warjackWeaponIds.map(decode),\n      vehicleWeaponId: vehicleWeaponId.map(decode),\n    }))\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId,\n      ...(cortexIds.length === 0 ? {} : { cortexIds }),\n      ...(warjackWeaponIds.length === 0 ? {} : { warjackWeaponIds }),\n      ...(vehicleWeaponId.length === 0\n        ? {}\n        : { vehicleWeaponId: vehicleWeaponId[0] }),\n      hidden: true,\n    }));\n}\n\nfunction partitionBy(slice, string) {\n  var strings = [];\n\n  for (let i = 0; i < string.length; i += slice) {\n    strings[strings.length] = string.slice(i, i + slice);\n  }\n\n  return strings;\n}\n","import { all, put, select } from \"redux-saga/effects\";\nimport { RefreshWikiPages } from \"../../messages\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { cacheParserNames } from \"./cacheParserNames\";\nimport { cacheWikiPages } from \"./cacheWikiPages\";\nimport { fetchCadres } from \"./fetchCadres\";\nimport { parseWikiPages } from \"./parseWikiPages\";\nimport { triggerFetchWikiPages } from \"./triggerFetchWikiPages\";\nimport { ui } from \"./ui\";\n\nfunction* processes() {\n  yield all([\n    continuePending(),\n    cacheWikiPages(),\n    parseWikiPages(),\n    triggerFetchWikiPages(),\n    cacheParserNames(),\n    ui(),\n    fetchCadres(),\n    fetchInitialData(),\n    refresh(),\n  ]);\n}\n\nexport { processes };\n\nfunction* fetchInitialData() {\n  const pages = [\n    { page: \"Warcaster\", parserName: \"parseFactions\" },\n    { page: \"Wild_Card\", parserName: \"parseWildCard\" },\n    { page: \"Cypher_Codecs\", parserName: \"parseCypherCodecs\" },\n  ];\n  for (const page of pages) {\n    yield* Requests.parsePage(page);\n  }\n}\n\nfunction* continuePending() {\n  const pending = yield select(Requests.selectPending());\n  for (const params of pending) {\n    yield put(Requests.fetch(params));\n  }\n}\n\nfunction* refresh() {\n  yield put(RefreshWikiPages());\n}\n","import { StateShard } from \"./utils\";\n\nconst Version = StateShard(\"Version\", init, {}, {}, {});\n\nexport { Version };\n\nfunction init(state) {\n  state.version = \"2023-07-06T22:58:00.000Z\";\n}\n","import { AppSync } from \"./AppSync\";\nimport { CadreCategoryMembers } from \"./CadreCategoryMembers\";\nimport { CadreModels } from \"./CadreModels\";\nimport { Cyphers } from \"./Cyphers\";\nimport { CypherCodecs } from \"./CypherCodecs\";\nimport { EditMode } from \"./EditMode\";\nimport { Factions } from \"./Factions\";\nimport { FactionModels } from \"./FactionModels\";\nimport { ListIndex } from \"./ListIndex\";\nimport { Lists } from \"./Lists\";\nimport { Models } from \"./Models\";\nimport { PageIds } from \"./PageIds\";\nimport { ParserNames } from \"./ParserNames\";\nimport { Requests } from \"./io/Requests\";\nimport { ToggleSections } from \"./ToggleSections\";\nimport { Url } from \"./Url\";\nimport { VehicleWeapons } from \"./VehicleWeapons\";\nimport { Version } from \"./Version\";\nimport { WarjackWeapons } from \"./WarjackWeapons\";\nimport { WildCardModels } from \"./WildCardModels\";\nimport { immer, initAll } from \"./utils\";\n\nconst objects = [\n  AppSync,\n  CadreCategoryMembers,\n  CadreModels,\n  CypherCodecs,\n  Cyphers,\n  EditMode,\n  Factions,\n  FactionModels,\n  Models,\n  PageIds,\n  ParserNames,\n  Requests,\n  ToggleSections,\n  Url,\n  VehicleWeapons,\n  WarjackWeapons,\n  WildCardModels,\n  // UI\n  ListIndex,\n  Lists,\n  // General\n  Version,\n];\n\nconst state = initAll(...objects)({});\n\nconst dispatch = immer(({ type, payload }) => {\n  const namespaces = Object.fromEntries(\n    objects.map((group) => [group.namespace, group])\n  );\n\n  const namespace = type.substring(0, type.indexOf(\".\"));\n  if (namespace && namespaces[namespace]) {\n    return redirect({ type, payload }, namespaces[namespace]);\n  }\n  return (state) => state;\n});\n\nexport { dispatch, state };\n\nfunction redirect(action, obj) {\n  return (state) =>\n    immer(({ type, payload }) => {\n      const f = obj.dispatch[type] || ((state, payload) => state);\n      return (state) => f(state, payload);\n    })(state, action);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport \"./index.css\";\nimport App from \"./ui/App\";\nimport { processes } from \"./businessLogic/processes\";\nimport { dispatch, state } from \"./state\";\n\nconst saga = initSaga();\nconst store = initStore(saga);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nsaga.run(processes);\n\nfunction initStore(saga) {\n  const reset = document.location.search === \"?reset\";\n\n  const persistedState = localStorage.getItem(\"reduxState\")\n    ? JSON.parse(localStorage.getItem(\"reduxState\"))\n    : state;\n\n  const latestState =\n    !reset && new Date(persistedState.version) >= new Date(state.version)\n      ? persistedState\n      : state;\n\n  const composedEnhancers = composeWithDevTools(applyMiddleware(saga));\n  const store = createStore(dispatch, latestState, composedEnhancers);\n\n  store.subscribe(() => {\n    localStorage.setItem(\"reduxState\", JSON.stringify(store.getState()));\n  });\n\n  return store;\n}\n\nfunction initSaga() {\n  return createSagaMiddleware();\n}\n"],"sourceRoot":""}