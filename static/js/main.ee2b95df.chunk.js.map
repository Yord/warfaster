{"version":3,"sources":["ui/Aeternus_Continuum.png","ui/Cyphers.png","ui/Empyrean.png","ui/Iron_Star_Alliance.png","ui/Lost_Legion.png","ui/Marcher_Worlds.png","ui/Wild_Card.png","messages.js","state/utils.js","state/AppSync.js","state/CypherCodecs.js","state/Cyphers.js","state/Dragging.js","state/FactionModels.js","state/Factions.js","state/Lists.js","state/PageIds.js","state/Url.js","state/WildCardModels.js","state/Models.js","ui/App.js","businessLogic/processes/jsonp.js","state/WikiPages.js","businessLogic/processes/cacheWikiPages/cacheWikiPages.js","businessLogic/processes/cacheWikiPages/updateCache.js","businessLogic/processes/partitionBy.js","businessLogic/processes/cacheWikiPages/fetchPageIds.js","businessLogic/processes/cacheWikiPages/index.js","businessLogic/core/parse/utils.js","businessLogic/core/parse/parseCypherText.js","businessLogic/core/parse/parsers.js","businessLogic/core/parse/parseCypherCodecsText.js","businessLogic/core/parse/parseFactionModelsText.js","businessLogic/core/parse/parseFactionsText.js","businessLogic/core/parse/parseModelText.js","businessLogic/core/parse/parseWildCardText.js","businessLogic/processes/parseWikiPages.js","businessLogic/processes/triggerFetchWikiPages.js","businessLogic/processes/base62.js","businessLogic/processes/ui.js","businessLogic/processes/index.js","state/Version.js","state/index.js","index.js"],"names":["CardDragEnded","message","CardDragStarted","MenuItemClicked","FetchPageIdsSlice","FetchWikiPage","FetchedWikiPage","FetchWikiPageRevisions","FetchedWikiPageRevisions","RefreshWikiPages","type","payload","immer","f","state","action","produce","identity","StateShard","namespace","init","actions","selectors","dispatch","Object","fromEntries","entries","map","name","args","a","pipe","fs","AppSync","data","sync","done","reasons","select","addReasons","selectDone","selectReasons","CypherCodecs","cypherCodecs","set","selectPages","codec","Cypher","page","selectByPage","find","Cyphers","cyphers","cypher","values","flat","Dragging","ui","dragging","activate","deactivate","FactionModels","factionModels","models","selectModelPages","model","Name","Factions","factions","keys","Lists","lists","oneEmptyList","addCard","pageId","card","hidden","cards","push","addEmptyList","moveListBy","listIndex","by","length","list","splice","removeCard","source","cardIndex","removeList","setCardCortex","cortexIds","setCardVehicleWeapon","vehicleWeaponId","setCardWarjackWeapons","hardpointNameIndex","warjackWeaponId","warjackWeaponIds","setListTitle","title","toggleCard","moveCard","destination","PageIds","pageIds","addPages","pageIdByTitle","selectByPages","pages","reduce","acc","selectPageByPageId","statePageId","undefined","Url","url","WildCardModels","wildCardModels","wildCards","wildCard","faction","Models","Header","Layout","Footer","Content","TextArea","Input","SubMenu","Menu","FactionImage","src","Aeternus_Continuum","alt","height","Empyrean","Iron_Star_Alliance","Lost_Legion","Marcher_Worlds","Wild_Card","App","connect","initialized","syncReasons","sort","text","Type","Subtype","subtype","_","join","flatMap","pageIdByPage","filter","details","hardpoints","hardpointNames","parseHardpoints","cortexSelections","cortex","advantages","advantage","category","categoryId","warjackWeaponSelections","selection","vehicleWeaponSelection","Cyphers2","Faction","dragStart","event","dragEnd","menuItemClicked","stopPropagation","target","value","setUrl","bookmark","document","querySelector","navigator","userAgent","match","range","createRange","selectNodeContents","window","getSelection","removeAllRanges","addRange","setSelectionRange","open","key","label","rootSubmenuKeys","i","React","useState","openKeys","setOpenKeys","className","onDragStart","onDragEnd","droppableId","provided","ref","innerRef","droppableProps","style","animation","color","DeleteOutlined","href","placeholder","id","onOpenChange","latestOpenKey","indexOf","mode","triggerSubMenuAction","factionName","icon","ItemGroup","shortName","slice","Item","onClick","placement","w1","w2","j","c1","c2","gutter","xs","sm","md","lg","xl","xxl","trigger","align","offset","cursor","display","paddingRight","fontSize","padding","PlusSquareOutlined","UpSquareOutlined","paddingLeft","DownSquareOutlined","span","maxLength","autoSize","onChange","Universal","count","size","draggableId","index","draggableProps","dragHandleProps","hoverable","Meta","avatar","width","textAlign","replace","vehicleWeaponName","cortexName","weaponIds","weaponId","weapon","pow","effect","squadSize","deploymentCost","baseSize","health","wildCardFactions","weaponPoints","modelStats","stat","specialRules","Fragment","weapons","ruleIndex","rule","colSpan","maneuvers","defaultValue","fontStyle","onSelect","Option","cortexes","advantageIndex","chassisSpecialRules","hardpointName","warjackWeaponNames","location","cost","warjackWeaponName","weaponDetails","release","lore","margin","SyncOutlined","spin","reason","description","Date","getFullYear","onKeyDown","vehicleWeapon","rHardpointGroup","results","n","RegExp","repeat","exec","hardpointCount","parseInt","groupCount","groupName","console","error","s","jsonp","Promise","resolve","reject","callbackName","Math","round","random","body","removeChild","script","createElement","appendChild","WikiPages","addPage","removePage","selectPageByPage","selectPagesByPageIds","includes","pageid","selectPageIds","cacheWikiPages","fetchWikiPage","addWikiPage","all","actionChannel","wikiPageChannel","take","call","parsePage","put","parse","delay","updateCache","refreshWikiPages","fetchWikiPageRevisions","refreshOutdatedWikiPages","pageidsList","ids","pageids","revisionsChannel","revisionsQuery","pageRevisions","query","revInfoByPageId","revision","missing","revid","max","revisions","revInfo","partitionBy","array","arrays","fetchPageIds","fetchPageIds2","fetchPageIdsSlice","cachedPageIds","factionsSet","factionModelPages","wildCardPages","cypherPages","pageSlices","processedCount","pageIdsSliceChannel","pageInfo","titleToPageId","pageList","encodeURIComponent","cacheWikiPages2","cleanText","prepareDOM","doc","DOMParser","parseFromString","querySelectorAll","forEach","node","parentNode","parseCypherText","removeUndefinedValues","extractLink","helper","texts","tagName","nextSibling","innerText","trim","extractParagraphs","p","hrefs","split","obj","Array","isArray","parseAnchorTable","table","header","th","tr","td","anchors","parseAnchor","row","titleColon","hrefTitle","parseCypherCodecsText","cypherCodecsTable","cypherCodec","parseFactionModelsText","parseFactionsText","collectFactions","anchor","parseModelText","factionAndTypes","extractList","types","extractText","extractDefinitions","extractWeaponSelection","definitions","parseDefinitionText","extractCortexes","modelStatsData","modelStatsLength","from","weaponsData","weaponsList","tds","stats","previousWeapons","lastWeapon","weaponDetailsTable","weaponDetailsData","detailsHeader","as","pairs","innerHTML","definition","groups","parseWildCardText","h1OrTable","factionAndModels","h1","last","parseWikiPages","identifyCortexSelections","categories","buildWarjackWeaponSelections","fetchPages","cortexCategories","weaponPages","Cost","Location","Weapon","categoryTexts","findClosestCategory","triggerFetchWikiPages","triggerFetchFactions","factionPages","digitsBase62","toBase62","result","updateCards","removeCards","setDraggingTrue","setDraggingFalse","updateUrl","parseListsFromQuery","parseListsFromQuery2","parseLists","fetchCardOnShow","startsWith","sourceListIndex","sourcePosition","destinationListIndex","destinationPosition","history","replaceState","renderWarjackWeaponIds","codeLength","res","padStart","maxPageId","ceil","log","v","e","origin","pathname","loadChannel","eventChannel","emitter","addEventListener","removeEventListener","urlParams","URLSearchParams","search","params","version","exponent","titleIndexes","substring","b","parseList","encodedList","parseCards","rest","blockEnd","delimiter","decode","string","normalizedString","NaN","fromBase62","strings","processes","fetchInitialData","refresh","Version","objects","initAll","namespaces","group","saga","createSagaMiddleware","store","persistedState","localStorage","getItem","JSON","latestState","composedEnhancers","composeWithDevTools","applyMiddleware","createStore","subscribe","setItem","stringify","getState","initStore","ReactDOM","render","getElementById","run"],"mappings":"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","file":"static/js/main.ee2b95df.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Aeternus_Continuum.d1b19d0e.png\";","export default __webpack_public_path__ + \"static/media/Cyphers.1ae05c50.png\";","export default __webpack_public_path__ + \"static/media/Empyrean.4ab49225.png\";","export default __webpack_public_path__ + \"static/media/Iron_Star_Alliance.82d76402.png\";","export default __webpack_public_path__ + \"static/media/Lost_Legion.78737fb2.png\";","export default __webpack_public_path__ + \"static/media/Marcher_Worlds.61a330cf.png\";","export default __webpack_public_path__ + \"static/media/Wild_Card.3da9dbca.png\";","const CardDragEnded = message(\"CARD/DRAG_ENDED\");\nconst CardDragStarted = message(\"CARD/DRAG_STARTED\");\nconst MenuItemClicked = message(\"MENU_ITEM/CLICKED\");\n\nconst FetchPageIdsSlice = message(\"PAGE_IDS_SLICE/FETCH\");\nconst FetchWikiPage = message(\"WIKI_PAGE/FETCH\");\nconst FetchedWikiPage = message(\"WIKI_PAGE/FETCHED\");\nconst FetchWikiPageRevisions = message(\"WIKI_PAGE_REVISIONS/FETCH\");\nconst FetchedWikiPageRevisions = message(\"WIKI_PAGE_REVISIONS/FETCHED\");\nconst RefreshWikiPages = message(\"WIKI_PAGES/REFRESH\");\n\nexport {\n  CardDragEnded,\n  CardDragStarted,\n  FetchPageIdsSlice,\n  FetchedWikiPage,\n  FetchedWikiPageRevisions,\n  FetchWikiPage,\n  FetchWikiPageRevisions,\n  MenuItemClicked,\n  RefreshWikiPages,\n};\n\nfunction message(type) {\n  return (payload = {}) => ({ type, payload });\n}\n","import produce from \"immer\";\n\nconst initAll = (...objects) =>\n  pipe(...objects.map((obj) => produce(obj.init)));\n\nconst immer = (f) => (state, action) => produce(f(action) || identity)(state);\n\nconst StateShard = (namespace, init, actions, selectors) => ({\n  namespace,\n  init,\n  dispatch: Object.fromEntries(\n    Object.entries(actions).map(([type, f]) => [namespace + \".\" + type, f])\n  ),\n  ...Object.fromEntries(\n    Object.entries(actions).map(([type, f]) => [\n      f.name,\n      (payload = {}) => ({ type: namespace + \".\" + type, payload }),\n    ])\n  ),\n  ...Object.fromEntries(\n    Object.entries(selectors).map(([name, f]) => [\n      name,\n      (...args) =>\n        (state) =>\n          f(state, ...args),\n    ])\n  ),\n});\n\nexport { StateShard, immer, initAll };\n\nfunction identity(a) {\n  return a;\n}\n\nfunction pipe(...fs) {\n  return (a) => {\n    for (const f of fs) {\n      a = f(a);\n    }\n    return a;\n  };\n}\n","import { StateShard } from \"./utils\";\n\nconst AppSync = StateShard(\n  \"AppSync\",\n  init,\n  { done, addReasons },\n  { selectDone, selectReasons }\n);\n\nexport { AppSync };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  if (!state.data.sync) {\n    state.data.sync = {};\n  }\n\n  state.data.sync.done = false;\n  state.data.sync.reasons = [];\n}\n\n// Actions\n\nfunction done(state) {\n  const sync = select(state);\n  sync.done = true;\n}\n\nfunction addReasons(state, { reasons }) {\n  const sync = select(state);\n  sync.reasons = [...sync.reasons, ...reasons];\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.sync;\n}\n\nfunction selectDone(state) {\n  const sync = select(state);\n  return sync.done;\n}\n\nfunction selectReasons(state) {\n  const sync = select(state);\n  return sync.reasons;\n}\n","import { StateShard } from \"./utils\";\n\nconst CypherCodecs = StateShard(\n  \"CypherCodecs\",\n  init,\n  { set },\n  { select, selectPages, selectByPage }\n);\n\nexport { CypherCodecs };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cypherCodecs = [];\n}\n\n// Actions\n\nfunction set(state, { cypherCodecs }) {\n  state.data.cypherCodecs = cypherCodecs;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cypherCodecs;\n}\n\nfunction selectPages(state) {\n  const codecs = select(state);\n  return codecs.map((codec) => codec.Cypher.page);\n}\n\nfunction selectByPage(state, page) {\n  const codecs = select(state);\n  return codecs.find((codec) => codec.Cypher.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Cyphers = StateShard(\"Cyphers\", init, { set }, { select, selectByPage });\n\nexport { Cyphers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cyphers = {};\n}\n\n// Actions\n\nfunction set(state, { page, cypher }) {\n  const cyphers = select(state);\n  cyphers[page] = cypher;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cyphers;\n}\n\nfunction selectByPage(state, page) {\n  const cyphers = select(state);\n  return Object.values(cyphers)\n    .flat()\n    .find((cypher) => cypher.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Dragging = StateShard(\n  \"Dragging\",\n  init,\n  { activate, deactivate },\n  { select }\n);\n\nexport { Dragging };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.dragging = false;\n}\n\n// Actions\n\nfunction activate(state) {\n  state.ui.dragging = true;\n}\n\nfunction deactivate(state) {\n  state.ui.dragging = false;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.dragging;\n}\n","import { StateShard } from \"./utils\";\n\nconst FactionModels = StateShard(\n  \"FactionModels\",\n  init,\n  { set },\n  { select, selectModelPages, selectByPage }\n);\n\nexport { FactionModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factionModels = {};\n}\n\n// Actions\n\nfunction set(state, { page, factionModels }) {\n  const models = select(state);\n  if (!models[page]) {\n    models[page] = [];\n  }\n  models[page] = [...models[page], ...factionModels];\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factionModels;\n}\n\nfunction selectModelPages(state) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .map((model) => model.Name.page);\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Factions = StateShard(\"Factions\", init, { set }, { select, selectPages });\n\nexport { Factions };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factions = {};\n}\n\n// Actions\n\nfunction set(state, { factions }) {\n  state.data.factions = factions;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factions;\n}\n\nfunction selectPages(state) {\n  const factions = select(state);\n  return Object.keys(factions);\n}\n","import { StateShard } from \"./utils\";\n\nconst Lists = StateShard(\n  \"Lists\",\n  init,\n  {\n    addCard,\n    addEmptyList,\n    moveListBy,\n    removeCard,\n    removeList,\n    set,\n    setCardCortex,\n    setCardVehicleWeapon,\n    setCardWarjackWeapons,\n    setListTitle,\n    toggleCard,\n    moveCard,\n  },\n  { select }\n);\n\nexport { Lists };\n\nconst oneEmptyList = [\n  {\n    title: \"Empty\",\n    cards: [],\n  },\n];\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.lists = oneEmptyList;\n}\n\n// Actions\n\nfunction set(state, { lists }) {\n  state.ui.lists = lists.length > 0 ? lists : oneEmptyList;\n}\n\nfunction setListTitle(state, { listIndex, title }) {\n  const lists = select(state);\n  lists[listIndex].title = title;\n}\n\nfunction addCard(state, { pageId }) {\n  const lists = select(state);\n  const card = { pageId, hidden: true };\n  lists[0].cards.push(card);\n}\n\nfunction addEmptyList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 0, oneEmptyList[0]);\n}\n\nfunction removeCard(state, { source }) {\n  const lists = select(state);\n  lists[source.listIndex].cards.splice(source.cardIndex, 1);\n}\n\nfunction removeList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 1);\n  if (lists.length === 0) {\n    addEmptyList(state, { listIndex: 0 });\n  }\n}\n\nfunction moveListBy(state, { listIndex, by }) {\n  const lists = select(state);\n  if (\n    (by > 0 && listIndex + by < lists.length) ||\n    (by < 0 && listIndex + by >= 0)\n  ) {\n    const list = lists[listIndex];\n    lists.splice(listIndex, 1);\n    lists.splice(listIndex + by, 0, list);\n  }\n}\n\nfunction moveCard(state, { destination, source }) {\n  const lists = select(state);\n  const card = lists[source.listIndex].cards[source.cardIndex];\n  lists[source.listIndex].cards.splice(source.cardIndex, 1);\n  lists[destination.listIndex].cards.splice(destination.cardIndex, 0, card);\n}\n\nfunction toggleCard(state, { listIndex, cardIndex, pageId }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.hidden = !card.hidden;\n  }\n}\n\nfunction setCardCortex(state, { listIndex, cardIndex, pageId, cortexIds }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.cortexIds = cortexIds;\n  }\n}\n\nfunction setCardWarjackWeapons(\n  state,\n  { listIndex, cardIndex, hardpointNameIndex, pageId, warjackWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!card.warjackWeaponIds) {\n      card.warjackWeaponIds = [];\n    }\n    card.warjackWeaponIds[hardpointNameIndex] = warjackWeaponId;\n  }\n}\n\nfunction setCardVehicleWeapon(\n  state,\n  { listIndex, cardIndex, pageId, vehicleWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.vehicleWeaponId = vehicleWeaponId;\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.lists;\n}\n","import { StateShard } from \"./utils\";\n\nconst PageIds = StateShard(\n  \"PageIds\",\n  init,\n  { addPages },\n  { select, selectByPage, selectByPages, selectPageByPageId }\n);\n\nexport { PageIds };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.pageIds = {};\n}\n\n// Actions\n\nfunction addPages(state, { pageIdByTitle }) {\n  const pageIds = select(state);\n  for (const title in pageIdByTitle) {\n    pageIds[title] = pageIdByTitle[title];\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.pageIds;\n}\n\nfunction selectByPage(state, page) {\n  const pageIds = select(state);\n  return pageIds[page];\n}\n\nfunction selectByPages(state, pages) {\n  const pageIds = select(state);\n  return pages.reduce((acc, page) => [...acc, pageIds[page]], []);\n}\n\nfunction selectPageByPageId(state, pageId) {\n  const pageIds = select(state);\n  return Object.entries(pageIds).reduce(\n    (acc, [page, statePageId]) =>\n      acc ? acc : statePageId === pageId ? page : acc,\n    undefined\n  );\n}\n","import { StateShard } from \"./utils\";\n\nconst Url = StateShard(\"Url\", init, { set }, { select });\n\nexport { Url };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.url = \"\";\n}\n\n// Actions\n\nfunction set(state, { url }) {\n  state.ui.url = url;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.url;\n}\n","import { StateShard } from \"./utils\";\n\nconst WildCardModels = StateShard(\n  \"WildCardModels\",\n  init,\n  { set },\n  { select, selectByPage, selectModelPages }\n);\n\nexport { WildCardModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.wildCardModels = {};\n}\n\n// Actions\n\nfunction set(state, { wildCards }) {\n  const models = select(state);\n  for (const wildCard of wildCards) {\n    models[wildCard.faction] = wildCard.models;\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.wildCardModels;\n}\n\nfunction selectModelPages(state) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .map((model) => model.Name.page);\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Models = StateShard(\"Models\", init, { set }, { select, selectByPage });\n\nexport { Models };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.models = {};\n}\n\n// Actions\n\nfunction set(state, { page, model }) {\n  const models = select(state);\n  models[page] = model;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.models;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.name.page === page);\n}\n","import \"./App.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Badge,\n  Card,\n  Col,\n  Input,\n  Layout,\n  Menu,\n  Row,\n  Select,\n  Tooltip,\n} from \"antd\";\nimport {\n  DeleteOutlined,\n  DownSquareOutlined,\n  PlusSquareOutlined,\n  SyncOutlined,\n  UpSquareOutlined,\n} from \"@ant-design/icons\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\nimport Aeternus_Continuum from \"./Aeternus_Continuum.png\";\nimport Cyphers from \"./Cyphers.png\";\nimport Empyrean from \"./Empyrean.png\";\nimport Iron_Star_Alliance from \"./Iron_Star_Alliance.png\";\nimport Lost_Legion from \"./Lost_Legion.png\";\nimport Marcher_Worlds from \"./Marcher_Worlds.png\";\nimport Wild_Card from \"./Wild_Card.png\";\nimport { CardDragEnded, CardDragStarted, MenuItemClicked } from \"../messages\";\nimport { AppSync } from \"../state/AppSync\";\nimport { CypherCodecs } from \"../state/CypherCodecs\";\nimport { Cyphers as Cyphers2 } from \"../state/Cyphers\";\nimport { Dragging } from \"../state/Dragging\";\nimport { FactionModels } from \"../state/FactionModels\";\nimport { Factions } from \"../state/Factions\";\nimport { Lists } from \"../state/Lists\";\nimport { PageIds } from \"../state/PageIds\";\nimport { Url } from \"../state/Url\";\nimport { WildCardModels } from \"../state/WildCardModels\";\nimport { Models } from \"../state/Models\";\n\nconst { Header, Footer, Content } = Layout;\nconst { TextArea } = Input;\nconst { SubMenu } = Menu;\n\nfunction FactionImage({ faction }) {\n  switch (faction) {\n    case \"Aeternus_Continuum\":\n      return <img src={Aeternus_Continuum} alt={faction} height=\"35px\" />;\n    case \"Empyrean\":\n      return <img src={Empyrean} alt={faction} height=\"35px\" />;\n    case \"Iron_Star_Alliance\":\n      return <img src={Iron_Star_Alliance} alt={faction} height=\"35px\" />;\n    case \"Lost_Legion\":\n      return <img src={Lost_Legion} alt={faction} height=\"35px\" />;\n    case \"Marcher_Worlds\":\n      return <img src={Marcher_Worlds} alt={faction} height=\"35px\" />;\n    case \"Wild_Card\":\n      return <img src={Wild_Card} alt={faction} height=\"35px\" />;\n    case \"Universal\":\n      return <img src={Cyphers} alt={faction} height=\"35px\" />;\n    default:\n      return <img src={Cyphers} alt={faction} height=\"35px\" />;\n  }\n}\n\nfunction AppPresentation({\n  initialized,\n  syncReasons,\n  factionModels,\n  wildCardModels,\n  cypherCodecs,\n  dragging,\n  menuItemClicked,\n  dragEnd,\n  dragStart,\n  lists,\n  toggleCard,\n  removeList,\n  addEmptyList,\n  moveListBy,\n  setListTitle,\n  setUrl,\n  url,\n  bookmark,\n  open,\n  setCardCortex,\n  setCardWarjackWeapons,\n  setCardVehicleWeapon,\n}) {\n  const rootSubmenuKeys = [\n    ...[...factionModels, ...Object.entries(wildCardModels)].map(\n      (_, i) => `sub${i}`\n    ),\n    \"cypher_codecs\",\n  ];\n\n  const [openKeys, setOpenKeys] = React.useState([\"sub0\"]);\n\n  const onOpenChange = (keys) => {\n    const latestOpenKey = keys.find((key) => openKeys.indexOf(key) === -1);\n    if (rootSubmenuKeys.indexOf(latestOpenKey) === -1) {\n      setOpenKeys(keys);\n    } else {\n      setOpenKeys(latestOpenKey ? [latestOpenKey] : []);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <Layout>\n        <Layout>\n          <DragDropContext onDragStart={dragStart} onDragEnd={dragEnd}>\n            <Header>\n              <Droppable key={\"trash_header\"} droppableId={\"trash_header\"}>\n                {(provided) => (\n                  <div ref={provided.innerRef} {...provided.droppableProps}>\n                    {dragging ? (\n                      <div\n                        style={{\n                          animation:\n                            \"shake 0.82s cubic-bezier(.36,.07,.19,.97) both\",\n                          color: \"white\",\n                        }}\n                      >\n                        <DeleteOutlined />\n                      </div>\n                    ) : (\n                      <a className=\"logo\" href=\"/\">\n                        WARFASTER\n                      </a>\n                    )}\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </Header>\n            {!initialized ? (\n              <Content>\n                <Layout>\n                  <Row>\n                    <Col xs={24} sm={12} md={12} lg={12} xl={8} xxl={8}>\n                      <div className=\"cards\" key=\"cards0\">\n                        <div style={{ cursor: \"pointer\" }} className=\"header\">\n                          <Row>\n                            <Col span={16} className=\"army-list-title\">\n                              <TextArea\n                                value={\"Setting up Warfaster\"}\n                                maxLength={30}\n                                autoSize\n                              />\n                            </Col>\n                            <Col span={8} className=\"faction-icons\">\n                              <SyncOutlined\n                                spin\n                                style={{\n                                  color: \"#d1c5b1\",\n                                  fontSize: \"23px\",\n                                  margin: \"3px 10px 0 0\",\n                                }}\n                              />\n                            </Col>\n                          </Row>\n                        </div>\n\n                        <div>\n                          {syncReasons.map(({ reason, description }, index) => (\n                            <div className=\"body\" key={`reason${index}`}>\n                              <Card hoverable className=\"card\">\n                                <Card.Meta\n                                  avatar={\n                                    <div\n                                      style={{\n                                        height: \"25px\",\n                                        width: \"35px\",\n                                        textAlign: \"center\",\n                                      }}\n                                    >\n                                      <SyncOutlined\n                                        spin\n                                        style={{\n                                          color: \"#d1c5b1\",\n                                          fontSize: \"35px\",\n                                        }}\n                                      />\n                                    </div>\n                                  }\n                                  title={\n                                    <>\n                                      <div>{reason}</div>\n                                      <div className=\"card-type\">\n                                        {description}\n                                      </div>\n                                    </>\n                                  }\n                                />\n                              </Card>\n                            </div>\n                          ))}\n                        </div>\n                        <div className=\"footer\">\n                          <Badge\n                            size=\"small\"\n                            key=\"_badge\"\n                            count={syncReasons.length}\n                            offset={[10, 5]}\n                          >\n                            Loading:\n                          </Badge>\n                        </div>\n                      </div>\n                    </Col>\n                  </Row>\n                </Layout>\n              </Content>\n            ) : (\n              <>\n                <Content>\n                  <Menu\n                    id=\"factions\"\n                    openKeys={openKeys}\n                    onOpenChange={onOpenChange}\n                    mode=\"horizontal\"\n                    triggerSubMenuAction=\"click\"\n                  >\n                    {factionModels.map(([factionName, faction, models]) => (\n                      <SubMenu\n                        key={faction}\n                        icon={<FactionImage faction={faction} />}\n                      >\n                        <Menu.ItemGroup title={factionName}>\n                          {models.map(({ name, page, type, subtype }) => {\n                            const shortName = name.slice(0, 40);\n\n                            return (\n                              <Menu.Item\n                                key={faction + \":\" + page}\n                                className={faction}\n                              >\n                                <span onClick={menuItemClicked(page)}>\n                                  <span className=\"card\">\n                                    {shortName.length === name.length ? (\n                                      shortName\n                                    ) : (\n                                      <Tooltip placement=\"top\" title={name}>\n                                        {shortName}...\n                                      </Tooltip>\n                                    )}\n                                  </span>\n                                  <span className=\"types\">\n                                    {subtype ? subtype : \"\"}\n                                    {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                                  </span>\n                                </span>\n                              </Menu.Item>\n                            );\n                          })}\n                        </Menu.ItemGroup>\n                        <Menu.ItemGroup title={`${factionName} Wild Cards`}>\n                          {(wildCardModels[faction] || [])\n                            .sort((w1, w2) => (w1.type < w2.type ? -1 : 1))\n                            .map(({ name, page, type, subtype }, j) => {\n                              const shortName = name.slice(0, 40);\n\n                              return (\n                                <Menu.Item key={faction + \":\" + page}>\n                                  <span onClick={menuItemClicked(page)}>\n                                    <span className=\"card\">\n                                      {shortName.length === name.length ? (\n                                        shortName\n                                      ) : (\n                                        <Tooltip placement=\"top\" title={name}>\n                                          {shortName}...\n                                        </Tooltip>\n                                      )}\n                                    </span>\n                                    <span className=\"types\">\n                                      {subtype ? subtype : \"\"}\n                                      {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                                    </span>\n                                  </span>\n                                </Menu.Item>\n                              );\n                            })}\n                        </Menu.ItemGroup>\n                      </SubMenu>\n                    ))}\n                    <SubMenu\n                      key=\"cypher_codecs\"\n                      icon={<FactionImage faction=\"Cyphers\" />}\n                    >\n                      {Object.entries(\n                        cypherCodecs.reduce(\n                          (acc, cypher) => ({\n                            ...acc,\n                            [cypher.Faction.text]: [\n                              ...(acc[cypher.Faction.text] || []),\n                              cypher,\n                            ],\n                          }),\n                          {}\n                        )\n                      )\n                        .sort()\n                        .map(([faction, cyphers]) => (\n                          <Menu.ItemGroup\n                            title={`${faction} Cyphers`}\n                            key={faction}\n                          >\n                            {cyphers\n                              .sort((c1, c2) =>\n                                c1.Type.text < c2.Type.text ? -1 : 1\n                              )\n                              .map(({ Cypher, Type }) => (\n                                <Menu.Item\n                                  key={\":\" + Cypher.page}\n                                  className={Type.text}\n                                >\n                                  <span onClick={menuItemClicked(Cypher.page)}>\n                                    <span className=\"card\">{Cypher.text}</span>\n                                    <span className=\"types\">{Type.text}</span>\n                                  </span>\n                                </Menu.Item>\n                              ))}\n                          </Menu.ItemGroup>\n                        ))}\n                    </SubMenu>\n                  </Menu>\n                </Content>\n                <Content>\n                  <Layout>\n                    <Row gutter={16}>\n                      {lists.map(({ title, cards }, listIndex) => (\n                        <Col\n                          key={`lists_col_${listIndex}`}\n                          xs={24}\n                          sm={12}\n                          md={12}\n                          lg={12}\n                          xl={8}\n                          xxl={8}\n                        >\n                          <div className=\"cards\" key={`cards${listIndex}`}>\n                            <Tooltip\n                              placement=\"top\"\n                              color=\"transparent\"\n                              trigger=\"click\"\n                              align={{ offset: [0, 17] }}\n                              title={\n                                <div className=\"ant-tooltip-inner-box\">\n                                  <div\n                                    onClick={removeList(listIndex)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      paddingRight: \"4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <DeleteOutlined />\n                                  </div>\n                                  <div\n                                    onClick={addEmptyList(listIndex)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      padding: \"0 4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <PlusSquareOutlined />\n                                  </div>\n                                  <div\n                                    onClick={moveListBy(listIndex, -1)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      padding: \"0 4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <UpSquareOutlined />\n                                  </div>\n                                  <div\n                                    onClick={moveListBy(listIndex, 1)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      paddingLeft: \"4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <DownSquareOutlined />\n                                  </div>\n                                </div>\n                              }\n                            >\n                              <div\n                                style={{ cursor: \"pointer\" }}\n                                className=\"header\"\n                              >\n                                <Row>\n                                  <Col span={16} className=\"army-list-title\">\n                                    <TextArea\n                                      placeholder=\"Name your list\"\n                                      value={title}\n                                      maxLength={30}\n                                      autoSize\n                                      onChange={setListTitle(listIndex)}\n                                    />\n                                  </Col>\n                                  <Col span={8} className=\"faction-icons\">\n                                    {Object.entries(\n                                      cards.reduce(\n                                        (acc, card) => ({\n                                          ...acc,\n                                          ...(card.faction\n                                            ? {\n                                                [card.faction]:\n                                                  (acc[card.faction] || 0) + 1,\n                                              }\n                                            : {\n                                                Universal:\n                                                  (acc.Universal || 0) + 1,\n                                              }),\n                                        }),\n                                        {}\n                                      )\n                                    )\n                                      .sort()\n                                      .map(([faction, count], i) => (\n                                        <Badge\n                                          size=\"small\"\n                                          key={`badge${i}`}\n                                          count={count}\n                                          offset={[0, 10]}\n                                        >\n                                          <FactionImage faction={faction} />\n                                        </Badge>\n                                      ))}\n                                  </Col>\n                                </Row>\n                              </div>\n                            </Tooltip>\n\n                            <Droppable\n                              key={`cards_${listIndex}`}\n                              droppableId={`cards_${listIndex}`}\n                            >\n                              {(provided) => (\n                                <div\n                                  ref={provided.innerRef}\n                                  {...provided.droppableProps}\n                                >\n                                  {cards.map(\n                                    (\n                                      {\n                                        card,\n                                        hidden,\n                                        type,\n                                        title,\n                                        page,\n                                        pageId,\n                                        cortexIds,\n                                        vehicleWeaponId,\n                                        warjackWeaponIds,\n                                        subtype,\n                                        faction,\n                                        details,\n                                      },\n                                      cardIndex\n                                    ) => (\n                                      <Draggable\n                                        key={`${page}_${listIndex}_${cardIndex}`}\n                                        draggableId={`${page}_${listIndex}_${cardIndex}`}\n                                        index={cardIndex}\n                                      >\n                                        {(provided) => (\n                                          <div\n                                            className=\"body\"\n                                            ref={provided.innerRef}\n                                            {...provided.draggableProps}\n                                            {...provided.dragHandleProps}\n                                          >\n                                            <Card\n                                              hoverable\n                                              className={[\n                                                \"card\",\n                                                faction,\n                                                type,\n                                              ]}\n                                              onClick={toggleCard(\n                                                listIndex,\n                                                cardIndex,\n                                                pageId,\n                                                card\n                                              )}\n                                            >\n                                              <Card.Meta\n                                                avatar={\n                                                  faction ? (\n                                                    <div\n                                                      style={{\n                                                        height: \"25px\",\n                                                        width: \"35px\",\n                                                        textAlign: \"center\",\n                                                      }}\n                                                    >\n                                                      <FactionImage\n                                                        faction={faction}\n                                                      />\n                                                    </div>\n                                                  ) : (\n                                                    <FactionImage faction=\"Universal\" />\n                                                  )\n                                                }\n                                                title={\n                                                  <>\n                                                    <div>{title}</div>\n                                                    <div className=\"card-type\">\n                                                      {(faction || \"\").replace(\n                                                        /_/g,\n                                                        \" \"\n                                                      )}\n                                                      {subtype\n                                                        ? \" \" + subtype\n                                                        : \"\"}\n                                                      {type ? \" \" + type : \"\"}\n                                                    </div>\n                                                    <div>\n                                                      <span className=\"subtitle\">\n                                                        {[\n                                                          ...(!details ||\n                                                          !details.vehicleWeaponSelection ||\n                                                          !vehicleWeaponName(\n                                                            details.vehicleWeaponSelection,\n                                                            vehicleWeaponId\n                                                          )\n                                                            ? []\n                                                            : [\n                                                                vehicleWeaponName(\n                                                                  details.vehicleWeaponSelection,\n                                                                  vehicleWeaponId\n                                                                ),\n                                                              ]),\n                                                          ...(!details ||\n                                                          !details.cortexSelections ||\n                                                          !cortexName(\n                                                            details.cortexSelections,\n                                                            cortexIds\n                                                          )\n                                                            ? []\n                                                            : [\n                                                                cortexName(\n                                                                  details.cortexSelections,\n                                                                  cortexIds\n                                                                ),\n                                                              ]),\n                                                          ...(!details ||\n                                                          !details.warjackWeaponSelections ||\n                                                          !warjackWeaponIds ||\n                                                          warjackWeaponIds.length ===\n                                                            0\n                                                            ? []\n                                                            : warjackWeaponNamesSubtitle(\n                                                                details.warjackWeaponSelections,\n                                                                warjackWeaponIds\n                                                              )),\n                                                        ].join(\", \")}\n                                                      </span>\n                                                    </div>\n                                                  </>\n                                                }\n                                              />\n                                              {hidden ? (\n                                                <></>\n                                              ) : !details ? (\n                                                <div\n                                                  style={{\n                                                    margin: \"10px 0\",\n                                                    textAlign: \"center\",\n                                                  }}\n                                                >\n                                                  <SyncOutlined\n                                                    spin\n                                                    style={{ fontSize: \"23px\" }}\n                                                  />\n                                                </div>\n                                              ) : (\n                                                <div className=\"card-content\">\n                                                  {!details.pow ? (\n                                                    <></>\n                                                  ) : (\n                                                    <p>\n                                                      Pow: {details.pow.text}\n                                                    </p>\n                                                  )}\n                                                  {!details.effect ||\n                                                  details.effect.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    details.effect.map(\n                                                      (effect, index) => (\n                                                        <p\n                                                          key={`effect_${index}`}\n                                                        >\n                                                          {effect}\n                                                        </p>\n                                                      )\n                                                    )\n                                                  )}\n                                                  {!details.squadSize ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Squad Size</dt>\n                                                      <dd>\n                                                        {details.squadSize}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.deploymentCost ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>DC</dt>\n                                                      <dd>\n                                                        {details.deploymentCost}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.baseSize ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Base Size</dt>\n                                                      <dd>\n                                                        {details.baseSize}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.health ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Health</dt>\n                                                      <dd>{details.health}</dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.wildCardFactions ||\n                                                  Object.values(\n                                                    details.wildCardFactions\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Wild Card Factions</p>\n                                                      <ul>\n                                                        {Object.values(\n                                                          details.wildCardFactions\n                                                        ).map(\n                                                          ({ text }, index) => (\n                                                            <li\n                                                              key={`wild_card_faction_${index}`}\n                                                            >\n                                                              {text}\n                                                            </li>\n                                                          )\n                                                        )}\n                                                      </ul>\n                                                    </>\n                                                  )}\n                                                  {!details.hardpoints ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Hardpoints</dt>\n                                                      <dd>\n                                                        {details.hardpoints}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.weaponPoints ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Weapon Points</dt>\n                                                      <dd>\n                                                        {details.weaponPoints}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.modelStats ||\n                                                  Object.keys(\n                                                    details.modelStats\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <table>\n                                                      <thead>\n                                                        <tr>\n                                                          {Object.keys(\n                                                            details.modelStats\n                                                          ).map(\n                                                            (name, index) => (\n                                                              <th\n                                                                key={`${name}_stat_${index}`}\n                                                              >\n                                                                {name}\n                                                              </th>\n                                                            )\n                                                          )}\n                                                        </tr>\n                                                      </thead>\n                                                      <tbody>\n                                                        <tr>\n                                                          {Object.entries(\n                                                            details.modelStats\n                                                          ).map(\n                                                            (\n                                                              [name, stat],\n                                                              index\n                                                            ) => (\n                                                              <td\n                                                                key={`${name}_stat_value_${index}`}\n                                                              >\n                                                                {stat}\n                                                              </td>\n                                                            )\n                                                          )}\n                                                        </tr>\n                                                      </tbody>\n                                                    </table>\n                                                  )}\n                                                  {!details.specialRules ||\n                                                  Object.entries(\n                                                    details.specialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Special Rules</p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.specialRules\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`special_rules_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!details.weapons ||\n                                                  details.weapons.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Weapons</p>\n                                                      <table>\n                                                        <thead>\n                                                          <tr>\n                                                            <th>Name</th>\n                                                            <th>Attack Type</th>\n                                                            <th>Damage Type</th>\n                                                            <th>Range</th>\n                                                            <th>POW</th>\n                                                          </tr>\n                                                        </thead>\n                                                        <tbody>\n                                                          {details.weapons.map(\n                                                            (weapon, index) => (\n                                                              <React.Fragment\n                                                                key={`weapon_number_${index}`}\n                                                              >\n                                                                <tr>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Name\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Attack Type\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Damage Type\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Range\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"POW\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                </tr>\n                                                                {!weapon.specialRules ? (\n                                                                  <></>\n                                                                ) : (\n                                                                  Object.entries(\n                                                                    weapon.specialRules\n                                                                  ).map(\n                                                                    (\n                                                                      [\n                                                                        rule,\n                                                                        text,\n                                                                      ],\n                                                                      ruleIndex\n                                                                    ) => (\n                                                                      <tr\n                                                                        key={`weapon_number_${index}_rule_${ruleIndex}`}\n                                                                      >\n                                                                        <td colSpan=\"5\">\n                                                                          <dl>\n                                                                            <dt>\n                                                                              {\n                                                                                rule\n                                                                              }\n                                                                            </dt>\n                                                                            <dd>\n                                                                              {\n                                                                                text\n                                                                              }\n                                                                            </dd>\n                                                                          </dl>\n                                                                        </td>\n                                                                      </tr>\n                                                                    )\n                                                                  )\n                                                                )}\n                                                              </React.Fragment>\n                                                            )\n                                                          )}\n                                                        </tbody>\n                                                      </table>\n                                                    </>\n                                                  )}\n                                                  {!details.advantages ||\n                                                  Object.entries(\n                                                    details.advantages\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Advantages</p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.advantages\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`advantage_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!details.maneuvers ||\n                                                  Object.values(\n                                                    details.maneuvers\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Maneuvers</p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.maneuvers\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`advantage_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n\n                                                  {!details.vehicleWeaponSelection ||\n                                                  details.vehicleWeaponSelection\n                                                    .length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Vehicle Weapon\n                                                        Selections\n                                                      </p>\n                                                      <Select\n                                                        defaultValue={\n                                                          <span\n                                                            style={{\n                                                              color: \"gray\",\n                                                              fontStyle:\n                                                                \"italic\",\n                                                            }}\n                                                          >\n                                                            Vehicle Weapon\n                                                          </span>\n                                                        }\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardVehicleWeapon(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !vehicleWeaponId\n                                                            ? undefined\n                                                            : vehicleWeaponName(\n                                                                details.vehicleWeaponSelection,\n                                                                vehicleWeaponId\n                                                              )\n                                                        }\n                                                      >\n                                                        {details.vehicleWeaponSelection.map(\n                                                          (\n                                                            { text, pageId },\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`vehicle_weapon_${index}`}\n                                                              label={pageId}\n                                                              value={text}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              {text}\n                                                              {\n                                                                // TODO\n                                                              }\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </>\n                                                  )}\n\n                                                  {!details.vehicleWeaponSelection ||\n                                                  Object.values(\n                                                    details.vehicleWeaponSelection\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Vehicle Weapon Selection\n                                                      </p>\n                                                      <ol>\n                                                        {Object.values(\n                                                          details.vehicleWeaponSelection\n                                                        ).map(\n                                                          (\n                                                            { text, page },\n                                                            index\n                                                          ) => (\n                                                            <li\n                                                              key={`weapon_selection_${index}`}\n                                                            >\n                                                              <a href={page}>\n                                                                {text}\n                                                              </a>\n                                                            </li>\n                                                          )\n                                                        )}\n                                                      </ol>\n                                                    </>\n                                                  )}\n                                                  {!details.cortexes ||\n                                                  Object.entries(\n                                                    details.cortexes\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Cortex</p>\n                                                      <ol>\n                                                        {Object.entries(\n                                                          details.cortexes\n                                                        ).map(\n                                                          (\n                                                            [\n                                                              cortex,\n                                                              advantages,\n                                                            ],\n                                                            index\n                                                          ) => (\n                                                            <li\n                                                              key={`cortex_${index}`}\n                                                            >\n                                                              {cortex}\n                                                              <dl>\n                                                                {Object.entries(\n                                                                  advantages\n                                                                ).map(\n                                                                  (\n                                                                    [\n                                                                      name,\n                                                                      text,\n                                                                    ],\n                                                                    advantageIndex\n                                                                  ) => (\n                                                                    <React.Fragment\n                                                                      key={`cortex_${index}_advantage_${advantageIndex}`}\n                                                                    >\n                                                                      <dt>\n                                                                        {name}\n                                                                      </dt>\n                                                                      <dd>\n                                                                        {text}\n                                                                      </dd>\n                                                                    </React.Fragment>\n                                                                  )\n                                                                )}\n                                                              </dl>\n                                                            </li>\n                                                          )\n                                                        )}\n                                                      </ol>\n                                                    </>\n                                                  )}\n                                                  {!details.cortexSelections ||\n                                                  Object.entries(\n                                                    details.cortexSelections\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Cortex Selections</p>\n                                                      <Select\n                                                        defaultValue={\n                                                          <span\n                                                            style={{\n                                                              color: \"gray\",\n                                                              fontStyle:\n                                                                \"italic\",\n                                                            }}\n                                                          >\n                                                            Cortex\n                                                          </span>\n                                                        }\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardCortex(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !cortexIds\n                                                            ? undefined\n                                                            : cortexName(\n                                                                details.cortexSelections,\n                                                                cortexIds\n                                                              )\n                                                        }\n                                                      >\n                                                        {Object.entries(\n                                                          details.cortexSelections\n                                                        ).map(\n                                                          (\n                                                            [\n                                                              cortex,\n                                                              advantages,\n                                                            ],\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`cortex_${index}`}\n                                                              label={Object.values(\n                                                                advantages\n                                                              ).map(\n                                                                ({\n                                                                  categoryId,\n                                                                }) => categoryId\n                                                              )}\n                                                              value={cortex}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              {cortex}\n                                                              <dl>\n                                                                {Object.entries(\n                                                                  advantages\n                                                                ).map(\n                                                                  (\n                                                                    [\n                                                                      name,\n                                                                      { text },\n                                                                    ],\n                                                                    advantageIndex\n                                                                  ) => (\n                                                                    <React.Fragment\n                                                                      key={`cortex_${index}_advantage_${advantageIndex}`}\n                                                                    >\n                                                                      <dt>\n                                                                        {name}\n                                                                      </dt>\n                                                                      <dd>\n                                                                        {text}\n                                                                      </dd>\n                                                                    </React.Fragment>\n                                                                  )\n                                                                )}\n                                                              </dl>\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </>\n                                                  )}\n                                                  {!details.chassisSpecialRules ||\n                                                  Object.entries(\n                                                    details.chassisSpecialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Chassis Special Rules\n                                                      </p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.chassisSpecialRules\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`advantage_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!details.hardpointNames ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Warjack Weapon\n                                                        Selections\n                                                      </p>\n                                                      {details.hardpointNames.map(\n                                                        (\n                                                          hardpointName,\n                                                          hardpointNameIndex\n                                                        ) =>\n                                                          !details.warjackWeaponSelections ||\n                                                          Object.keys(\n                                                            details.warjackWeaponSelections\n                                                          ).length === 0 ? (\n                                                            <></>\n                                                          ) : (\n                                                            <div\n                                                              key={`warjack_weapon_${hardpointNameIndex}`}\n                                                            >\n                                                              <Select\n                                                                defaultValue={\n                                                                  <span\n                                                                    style={{\n                                                                      color:\n                                                                        \"gray\",\n                                                                      fontStyle:\n                                                                        \"italic\",\n                                                                    }}\n                                                                  >\n                                                                    {\n                                                                      hardpointName\n                                                                    }\n                                                                  </span>\n                                                                }\n                                                                onClick={(\n                                                                  event\n                                                                ) =>\n                                                                  event.stopPropagation()\n                                                                }\n                                                                onSelect={setCardWarjackWeapons(\n                                                                  listIndex,\n                                                                  cardIndex,\n                                                                  hardpointNameIndex,\n                                                                  pageId\n                                                                )}\n                                                                value={\n                                                                  !warjackWeaponIds ||\n                                                                  !warjackWeaponIds[\n                                                                    hardpointNameIndex\n                                                                  ]\n                                                                    ? undefined\n                                                                    : warjackWeaponNames(\n                                                                        details.warjackWeaponSelections,\n                                                                        warjackWeaponIds[\n                                                                          hardpointNameIndex\n                                                                        ]\n                                                                      )\n                                                                }\n                                                              >\n                                                                {Object.values(\n                                                                  details.warjackWeaponSelections\n                                                                )\n                                                                  .filter(\n                                                                    ({\n                                                                      location,\n                                                                    }) =>\n                                                                      location ===\n                                                                      hardpointName\n                                                                  )\n                                                                  .map(\n                                                                    (\n                                                                      {\n                                                                        name,\n                                                                        page,\n                                                                        pageId,\n                                                                        cost,\n                                                                        location,\n                                                                      },\n                                                                      index\n                                                                    ) => (\n                                                                      <Select.Option\n                                                                        key={`warjack_weapon_${hardpointNameIndex}_${index}`}\n                                                                        label={\n                                                                          pageId\n                                                                        }\n                                                                        value={\n                                                                          name\n                                                                        }\n                                                                        onClick={(\n                                                                          event\n                                                                        ) =>\n                                                                          event.stopPropagation()\n                                                                        }\n                                                                      >\n                                                                        {warjackWeaponName(\n                                                                          name,\n                                                                          cost\n                                                                        )}\n                                                                        <div>\n                                                                          Weapon\n                                                                          details!\n                                                                        </div>\n                                                                        {\n                                                                          // TODO\n                                                                        }\n                                                                      </Select.Option>\n                                                                    )\n                                                                  )}\n                                                              </Select>\n                                                            </div>\n                                                          )\n                                                      )}\n                                                    </>\n                                                  )}\n                                                  {!details.weaponDetails ||\n                                                  details.weaponDetails\n                                                    .length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Weapon Details</p>\n                                                      <table>\n                                                        <thead>\n                                                          <tr>\n                                                            <th>Weapon</th>\n                                                            <th>Location</th>\n                                                            <th>Cost</th>\n                                                            <th>Weapon Pack</th>\n                                                          </tr>\n                                                        </thead>\n                                                        <tbody>\n                                                          {details.weaponDetails.map(\n                                                            (weapon, index) => (\n                                                              <React.Fragment\n                                                                key={`weapon_details_number_${index}`}\n                                                              >\n                                                                <tr>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Weapon\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Location\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Cost\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Weapon Pack\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                </tr>\n                                                              </React.Fragment>\n                                                            )\n                                                          )}\n                                                        </tbody>\n                                                      </table>\n                                                    </>\n                                                  )}\n                                                  {!details.release ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Release</p>\n                                                      <p>{details.release}</p>\n                                                    </>\n                                                  )}\n                                                  {!details.lore ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Lore</p>\n                                                      <p>{details.lore}</p>\n                                                    </>\n                                                  )}\n                                                </div>\n                                              )}\n                                            </Card>\n                                          </div>\n                                        )}\n                                      </Draggable>\n                                    )\n                                  )}\n                                  {provided.placeholder}\n                                </div>\n                              )}\n                            </Droppable>\n\n                            {cards.length > 0 ? (\n                              <div className=\"footer\">\n                                <Badge\n                                  size=\"small\"\n                                  key=\"_badge\"\n                                  count={cards.length}\n                                  offset={[10, 5]}\n                                >\n                                  Card:\n                                </Badge>\n                                {Object.entries(\n                                  cards.reduce(\n                                    (acc, card) => ({\n                                      ...acc,\n                                      [card.type]: (acc[card.type] || 0) + 1,\n                                    }),\n                                    {}\n                                  )\n                                )\n                                  .sort()\n                                  .map(([type, count], i) => (\n                                    <Badge\n                                      size=\"small\"\n                                      key={`badge${i}`}\n                                      count={count}\n                                      offset={[10, 5]}\n                                    >\n                                      {type}:\n                                    </Badge>\n                                  ))}\n                              </div>\n                            ) : (\n                              <></>\n                            )}\n                          </div>\n                        </Col>\n                      ))}\n                    </Row>\n                  </Layout>\n                </Content>\n              </>\n            )}\n            <Droppable key={\"trash_footer\"} droppableId={\"trash_footer\"}>\n              {(provided) => (\n                <div ref={provided.innerRef} {...provided.droppableProps}>\n                  {dragging ? (\n                    <>\n                      <div className=\"trash-footer\">\n                        <div\n                          style={{\n                            animation:\n                              \"shake 0.82s cubic-bezier(.36,.07,.19,.97) both\",\n                            color: \"white\",\n                          }}\n                        >\n                          <DeleteOutlined />\n                          <div style={{ display: \"none\" }}>\n                            {provided.placeholder}\n                          </div>\n                        </div>\n                      </div>\n                      <Footer>\n                        <div className=\"copyright-notice\">\n                          Images originating from the Privateer Press website\n                          are © 2001—\n                          <>{new Date().getFullYear()}</> Privateer Press, Inc.\n                          All Rights Reserved. Privateer Press, warcaster and\n                          their logos are trademarks of Privateer Press, Inc.\n                          Images and trademarks used without permission. This\n                          website is unofficial and is not endorsed by Privateer\n                          Press.\n                        </div>\n                      </Footer>\n                    </>\n                  ) : (\n                    <Footer>\n                      <div className=\"bookmark\">\n                        <Layout>\n                          <Row>\n                            <Col\n                              xs={24}\n                              sm={24}\n                              md={18}\n                              lg={18}\n                              xl={16}\n                              xxl={16}\n                            >\n                              <input\n                                value={url}\n                                onChange={setUrl}\n                                onKeyDown={open}\n                                onClick={bookmark}\n                              />\n                            </Col>\n                          </Row>\n                        </Layout>\n                      </div>\n                      <div className=\"copyright-notice\">\n                        Images originating from the Privateer Press website are\n                        © 2001—\n                        <>{new Date().getFullYear()}</> Privateer Press, Inc.\n                        All Rights Reserved. Privateer Press, warcaster and\n                        their logos are trademarks of Privateer Press, Inc.\n                        Images and trademarks used without permission. This\n                        website is unofficial and is not endorsed by Privateer\n                        Press.\n                      </div>\n                    </Footer>\n                  )}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n        </Layout>\n      </Layout>\n    </div>\n  );\n}\n\nconst App = connect(\n  (state) => ({\n    initialized: AppSync.selectDone()(state),\n    syncReasons: AppSync.selectReasons()(state),\n    factionModels: Object.entries(FactionModels.select()(state))\n      .sort()\n      .map(([faction, models]) => [\n        Factions.select()(state)[faction].text,\n        faction,\n        models.map((model) => ({\n          name: model.Name.text,\n          page: model.Name.page,\n          type: model.Type.text,\n          ...(model.Subtype\n            ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n            : {}),\n        })),\n      ]),\n    wildCardModels: Object.fromEntries(\n      Object.entries(WildCardModels.select()(state))\n        .sort()\n        .map(([faction, models]) => [\n          faction,\n          models.map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          })),\n        ])\n    ),\n    cypherCodecs: CypherCodecs.select()(state),\n    lists: Lists.select()(state).map(({ title, cards }) => ({\n      title,\n      cards: cards.flatMap(\n        ({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId, hidden }) => {\n          const pageIdByPage = PageIds.select()(state);\n\n          const page =\n            Object.entries(pageIdByPage)\n              .filter(([_, id]) => id === pageId)\n              .map(([page, _]) => page)[0] || \"\";\n\n          const model = Object.entries(state.data.factionModels)\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const wildCard = Object.entries(state.data.wildCardModels)\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const cypher = state.data.cypherCodecs.find(\n            ({ Cypher }) => Cypher.page === page\n          );\n\n          if (model) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: model.Type.text,\n                title: model.Name.text,\n                page: model.Name.page,\n                pageId,\n                cortexIds,\n                warjackWeaponIds,\n                vehicleWeaponId,\n                faction: model.faction,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                ...(!details\n                  ? {}\n                  : {\n                      details: {\n                        ...details,\n                        ...(!details.hardpoints\n                          ? {}\n                          : {\n                              hardpointNames: parseHardpoints(\n                                details.hardpoints\n                              ),\n                            }),\n                        ...(!details.cortexSelections\n                          ? {}\n                          : {\n                              cortexSelections: Object.fromEntries(\n                                Object.entries(details.cortexSelections).map(\n                                  ([cortex, advantages]) => [\n                                    cortex,\n                                    Object.fromEntries(\n                                      Object.entries(advantages).map(\n                                        ([advantage, { text, category }]) => [\n                                          advantage,\n                                          {\n                                            text,\n                                            categoryId: pageIdByPage[category],\n                                          },\n                                        ]\n                                      )\n                                    ),\n                                  ]\n                                )\n                              ),\n                            }),\n                        ...(!details.warjackWeaponSelections\n                          ? {}\n                          : {\n                              warjackWeaponSelections: Object.fromEntries(\n                                Object.entries(\n                                  details.warjackWeaponSelections\n                                ).map(([page, selection]) => [\n                                  page,\n                                  { ...selection, pageId: pageIdByPage[page] },\n                                ])\n                              ),\n                            }),\n                        ...(!details.vehicleWeaponSelection\n                          ? {}\n                          : {\n                              vehicleWeaponSelection:\n                                details.vehicleWeaponSelection.map(\n                                  ({ text, page }) => ({\n                                    text,\n                                    page,\n                                    pageId: pageIdByPage[page],\n                                  })\n                                ),\n                            }),\n                      },\n                    }),\n              },\n            ];\n          }\n\n          if (wildCard) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: wildCard.Type.text,\n                title: wildCard.Name.text,\n                page: wildCard.Name.page,\n                pageId,\n                faction: \"Wild_Card\",\n                ...(wildCard.Subtype\n                  ? { subtype: wildCard.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                details,\n              },\n            ];\n          }\n\n          if (cypher) {\n            const details = Cyphers2.selectByPage(page)(state);\n            return [\n              {\n                card: \"cypher\",\n                hidden,\n                type: cypher.Type.text,\n                title: cypher.Cypher.text,\n                page: cypher.Cypher.page,\n                pageId,\n                ...(cypher.Faction.text === \"Universal\"\n                  ? { faction: \"Universal\" }\n                  : { faction: cypher.Faction.page }),\n                details,\n              },\n            ];\n          }\n\n          return [];\n        }\n      ),\n    })),\n    dragging: Dragging.select()(state),\n    url: Url.select()(state),\n  }),\n  (dispatch) => ({\n    toggleCard: (listIndex, cardIndex, pageId, card) => {\n      return () =>\n        dispatch(Lists.toggleCard({ listIndex, cardIndex, pageId, card }));\n    },\n    dragStart: (event) => dispatch(CardDragStarted(event)),\n    dragEnd: (event) => dispatch(CardDragEnded(event)),\n    menuItemClicked: (page) => (event) => {\n      dispatch(MenuItemClicked({ page }));\n      event.stopPropagation();\n    },\n    removeList: (listIndex) => () => dispatch(Lists.removeList({ listIndex })),\n    addEmptyList: (listIndex) => () =>\n      dispatch(Lists.addEmptyList({ listIndex })),\n    moveListBy: (listIndex, by) => () =>\n      dispatch(Lists.moveListBy({ listIndex, by })),\n    setListTitle: (listIndex) => (event) =>\n      dispatch(Lists.setListTitle({ listIndex, title: event.target.value })),\n    setUrl: (event) => dispatch(Url.set({ url: event.target.value })),\n    bookmark: () => {\n      const bookmark = document.querySelector(\".bookmark input\");\n      if (bookmark) {\n        if (navigator.userAgent.match(/ipad|iphone/i)) {\n          const range = document.createRange();\n          range.selectNodeContents(bookmark);\n\n          const selection = window.getSelection();\n          selection.removeAllRanges();\n          selection.addRange(range);\n          bookmark.setSelectionRange(0, 999999);\n        } else {\n          bookmark.select();\n        }\n      }\n    },\n    open: (event) => {\n      if (event.key === \"Enter\") {\n        const url = document.querySelector(\".bookmark input\").value;\n        if (url) window.open(url, \"_self\");\n      }\n    },\n    setCardCortex:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardCortex({\n            listIndex,\n            cardIndex,\n            pageId,\n            cortexIds: label,\n          })\n        ),\n    setCardWarjackWeapons:\n      (listIndex, cardIndex, hardpointNameIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardWarjackWeapons({\n            listIndex,\n            cardIndex,\n            hardpointNameIndex,\n            pageId,\n            warjackWeaponId: label,\n          })\n        ),\n    setCardVehicleWeapon:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardVehicleWeapon({\n            listIndex,\n            cardIndex,\n            pageId,\n            vehicleWeaponId: label,\n          })\n        ),\n  })\n)(AppPresentation);\n\nexport default App;\n\nfunction cortexName(cortexSelections, cortexIds) {\n  return (Object.entries(cortexSelections).find(\n    ([cortex, advantages]) =>\n      Object.values(advantages)\n        .map((advantage) => advantage.categoryId)\n        .join(\"\") === (cortexIds || []).join(\"\")\n  ) || [undefined])[0];\n}\n\nfunction vehicleWeaponName(vehicleWeaponSelection, vehicleWeaponId) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n  if (!vehicleWeapon) return undefined;\n  return vehicleWeapon.text;\n}\n\nfunction warjackWeaponNames(warjackWeaponSelections, weaponId) {\n  const weapon = Object.values(warjackWeaponSelections).find(\n    ({ pageId }) => pageId === weaponId\n  );\n  if (weapon) {\n    return warjackWeaponName(weapon.name, weapon.cost);\n  }\n  return weaponId;\n}\n\nfunction warjackWeaponNamesSubtitle(warjackWeaponSelections, weaponIds) {\n  return weaponIds.flatMap((weaponId) => {\n    const weapon = Object.values(warjackWeaponSelections).find(\n      ({ pageId }) => pageId === weaponId\n    );\n    if (weapon) {\n      return [weapon.name];\n    }\n    return [];\n  });\n}\n\nfunction warjackWeaponName(name, cost) {\n  return `${name} (cost ${cost})`;\n}\n\nfunction parseHardpoints(hardpoints) {\n  // Parses strings of the following type: \"3 : 2 Arm, 1 Back\"\n\n  const rHardpointCount = \"\\\\s*(\\\\d+)\\\\s*\";\n  const rHardpointGroup = \"\\\\s*(\\\\d+)\\\\s*(\\\\w+)\\\\s*\";\n\n  let results = null;\n  for (let n = 1; n <= 10; n++) {\n    const regexp = new RegExp(\n      `^${rHardpointCount}:${rHardpointGroup}${repeat(\n        `,${rHardpointGroup}`,\n        n - 1\n      )}$`\n    );\n    results = regexp.exec(hardpoints);\n    if (results !== null) {\n      break;\n    }\n  }\n\n  if (results === null) {\n    return undefined;\n  }\n\n  const hardpointCount = parseInt(results[1], 10);\n\n  const hardpointNames = [];\n  for (let n = 2; n < results.length; n += 2) {\n    const groupCount = parseInt(results[n], 10);\n    const groupName = results[n + 1];\n\n    for (let i = 1; i <= groupCount; i++) {\n      hardpointNames.push(groupName);\n    }\n  }\n\n  if (hardpointCount !== hardpointNames.length) {\n    console.error(\n      \"Hardpoints do not add up!\",\n      hardpoints,\n      hardpointCount,\n      hardpointNames\n    );\n  }\n\n  return hardpointNames;\n\n  function repeat(s, n) {\n    if (n === 0) return \"\";\n    return s + repeat(s, n - 1);\n  }\n}\n","const jsonp = (url) => {\n  return new Promise(function (resolve, reject) {\n    const callbackName = \"jsonp_callback_\" + Math.round(100000 * Math.random());\n    window[callbackName] = function (data) {\n      delete window[callbackName];\n      document.body.removeChild(script);\n      resolve(data);\n    };\n\n    const script = document.createElement(\"script\");\n    script.src =\n      url + (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"callback=\" + callbackName;\n    document.body.appendChild(script);\n  });\n};\n\nexport { jsonp };\n","import { StateShard } from \"./utils\";\n\nconst WikiPages = StateShard(\n  \"WikiPages\",\n  init,\n  { addPage, removePage },\n  {\n    selectPageByPage,\n    selectPagesByPageIds,\n    selectPageIds,\n  }\n);\n\nexport { WikiPages };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.pages = {};\n}\n\n// Actions\n\nfunction addPage(state, { page, type, data }) {\n  const pages = select(state);\n  data.page = page;\n  data.type = type;\n  pages[page] = data;\n}\n\nfunction removePage(state, { page }) {\n  const pages = select(state);\n  delete pages[page];\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.pages;\n}\n\nfunction selectPageByPage(state, page) {\n  const pages = select(state);\n  return pages[page];\n}\n\nfunction selectPagesByPageIds(state, pageIds) {\n  const pages = select(state);\n  return Object.values(pages).filter((page) => pageIds.includes(page.pageid));\n}\n\nfunction selectPageIds(state) {\n  const pages = select(state);\n  return Object.values(pages).map((page) => page.pageid);\n}\n","/*\nThese sagas fetch and cache wiki pages.\n\nThe wiki's JSONP API is used to fetch page contents. Since we want to be\npolite, we only call the API every two seconds. This throttle is implemented in\nfetchWikiPage through an actionChannel and a call to delay.\n*/\n\nimport {\n  actionChannel,\n  all,\n  call,\n  delay,\n  put,\n  select,\n  take,\n} from \"redux-saga/effects\";\nimport { FetchedWikiPage, FetchWikiPage } from \"../../../messages\";\nimport { jsonp } from \"../jsonp\";\n\nimport { WikiPages } from \"../../../state/WikiPages\";\n\nfunction* cacheWikiPages() {\n  yield all([addWikiPage(), fetchWikiPage()]);\n}\n\nexport { cacheWikiPages };\n\nfunction* fetchWikiPage() {\n  const wikiPageChannel = yield actionChannel(FetchWikiPage().type);\n\n  while (true) {\n    const { payload } = yield take(wikiPageChannel);\n    const page = payload.page;\n    const data = yield select(WikiPages.selectPageByPage(page));\n\n    if (!data) {\n      const data = yield call(jsonp, parsePage(page));\n      yield put(FetchedWikiPage({ page, data: data.parse }));\n\n      const twoSecondsInMs = 2 * 1000;\n      yield delay(twoSecondsInMs);\n    }\n  }\n}\n\nfunction* addWikiPage() {\n  while (true) {\n    const { payload } = yield take(FetchedWikiPage().type);\n    const page = payload.page;\n    const data = payload.data;\n\n    if (data) {\n      yield put(WikiPages.addPage({ page, data }));\n    }\n  }\n}\n\nfunction parsePage(page) {\n  return `https://privateerpress.wiki/api.php?action=parse&page=${page}&formatversion=2&format=json`;\n}\n","/*\nThese sagas make sure, cached wiki pages stay up-to-date.\n\nEach app reload triggers a RefreshWikiPages action, that starts the cache\nupdate process. The refreshWikiPages saga bulk loads revision data for all\ncached pages from the wiki API. If a page cannot be found (probably because it\nwas deleted from the wiki), it is removed from the cache. If revision\ninformation is found, it is compared with the cached revision of the page. If\nthe loaded revision is higher, the page is removed and fetched again. If the\ncached revision is higher or equal, the page is not refreshed and remains\ncached.\n*/\n\nimport {\n  FetchWikiPage,\n  FetchWikiPageRevisions,\n  FetchedWikiPageRevisions,\n  RefreshWikiPages,\n} from \"../../../messages\";\nimport {\n  actionChannel,\n  all,\n  call,\n  delay,\n  put,\n  take,\n  select,\n} from \"redux-saga/effects\";\nimport { jsonp } from \"../jsonp\";\n\nimport { WikiPages } from \"../../../state/WikiPages\";\n\nfunction* updateCache() {\n  yield all([\n    refreshWikiPages(),\n    fetchWikiPageRevisions(),\n    refreshOutdatedWikiPages(),\n  ]);\n}\n\nexport { updateCache };\n\nfunction* refreshWikiPages() {\n  yield take(RefreshWikiPages().type);\n  const pageIds = yield select(WikiPages.selectPageIds());\n\n  const queryLength = 50;\n  const pageidsList = [];\n  for (let i = 0; i < pageIds.length; i += queryLength) {\n    const ids = pageIds.slice(i, i + queryLength);\n    const pageids = ids.join(\"|\");\n    pageidsList.push(pageids);\n  }\n\n  for (const pageids of pageidsList) {\n    yield put(FetchWikiPageRevisions({ pageids }));\n  }\n}\n\nfunction* fetchWikiPageRevisions() {\n  const revisionsChannel = yield actionChannel(FetchWikiPageRevisions().type);\n\n  while (true) {\n    const { payload } = yield take(revisionsChannel);\n    const pageids = payload.pageids;\n\n    const data = yield call(jsonp, revisionsQuery(pageids));\n    yield put(\n      FetchedWikiPageRevisions({\n        pageRevisions: data.query.pages,\n      })\n    );\n\n    const twoSecondsInMs = 2 * 1000;\n    yield delay(twoSecondsInMs);\n  }\n}\n\nfunction* refreshOutdatedWikiPages() {\n  while (true) {\n    const { payload } = yield take(FetchedWikiPageRevisions().type);\n    const { pageRevisions } = payload;\n    const revInfoByPageId = Object.fromEntries(\n      pageRevisions.map((revision) => [\n        revision.pageid,\n        revision.missing\n          ? { missing: revision.missing }\n          : {\n              revid: Math.max(\n                ...revision.revisions.map((revision) => revision.revid)\n              ),\n            },\n      ])\n    );\n    const pageIds = pageRevisions.map((revision) => revision.pageid);\n\n    const pages = yield select(WikiPages.selectPagesByPageIds(pageIds));\n    for (const page of pages) {\n      const revInfo = revInfoByPageId[page.pageid];\n      if (revInfo.missing) {\n        yield put(WikiPages.removePage({ page: page.page }));\n      } else if (page.revid < revInfo.revid) {\n        yield put(WikiPages.removePage({ page: page.page }));\n        yield put(FetchWikiPage({ page: page.page, type: page.type }));\n      }\n    }\n  }\n}\n\nfunction revisionsQuery(pageids) {\n  return `https://privateerpress.wiki/api.php?action=query&pageids=${pageids}&prop=revisions&formatversion=2&format=json`;\n}\n","function partitionBy(slice, array) {\n  var arrays = [];\n\n  for (var i = 0; i < array.length; i += slice) {\n    arrays[arrays.length] = array.slice(i, i + slice);\n  }\n\n  return arrays;\n}\n\nexport { partitionBy };\n","import {\n  actionChannel,\n  all,\n  call,\n  delay,\n  put,\n  take,\n  select,\n} from \"redux-saga/effects\";\nimport { jsonp } from \"../jsonp\";\n\nimport { AppSync } from \"../../../state/AppSync\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\nimport { FactionModels } from \"../../../state/FactionModels\";\nimport { Factions } from \"../../../state/Factions\";\nimport { PageIds } from \"../../../state/PageIds\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\nimport { FetchPageIdsSlice } from \"../../../messages\";\n\nimport { partitionBy } from \"../partitionBy\";\n\nfunction* fetchPageIds() {\n  yield all([fetchPageIds2(), fetchPageIdsSlice()]);\n}\n\nexport { fetchPageIds };\n\nfunction* fetchPageIds2() {\n  const cachedPageIds = yield select(PageIds.select());\n\n  if (Object.keys(cachedPageIds).length === 0) {\n    yield put(\n      AppSync.addReasons({\n        reasons: [\n          {\n            reason: \"Loading factions\",\n            description: \"Load available Warcaster factions\",\n          },\n          {\n            reason: \"Loading cyphers\",\n            description: \"Load available Cypher Codecs\",\n          },\n          {\n            reason: \"Loading wildcard models\",\n            description: \"Load available Wild Cards\",\n          },\n        ],\n      })\n    );\n\n    const [factionsSet] = yield all([\n      take(Factions.set().type),\n      take(CypherCodecs.set().type),\n      take(WildCardModels.set().type),\n    ]);\n\n    const factions = Object.keys(factionsSet.payload.factions);\n\n    yield put(\n      AppSync.addReasons({\n        reasons: factions.map((faction) => ({\n          reason: `Loading ${faction.replace(/_/g, \" \")}`,\n          description: `Used to build ${faction.replace(/_/g, \" \")} menu`,\n        })),\n      })\n    );\n\n    yield all(\n      factions.map((faction) =>\n        take(\n          (action) =>\n            action.type === FactionModels.set().type &&\n            action.payload.page === faction\n        )\n      )\n    );\n\n    const factionModelPages = Object.values(\n      yield select(FactionModels.select())\n    )\n      .flat()\n      .map((_) => _.Name);\n\n    const wildCardPages = Object.values(yield select(WildCardModels.select()))\n      .flat()\n      .map((_) => _.Name)\n      .sort(({ text, page }) => [text, page])\n      .filter(\n        ({ text, page }, index, cards) =>\n          !index ||\n          (text !== cards[index - 1].text && page !== cards[index - 1].page)\n      );\n\n    const cypherPages = (yield select(CypherCodecs.select())).map(\n      (_) => _.Cypher\n    );\n\n    const pages = [...factionModelPages, ...wildCardPages, ...cypherPages].sort(\n      (_) => _.page\n    );\n    const pageSlices = partitionBy(50, pages);\n\n    yield put(\n      AppSync.addReasons({\n        reasons: pageSlices.map((_, index) => ({\n          reason: `Loading page ids ${index + 1} of ${pageSlices.length}`,\n          description:\n            \"Card lists are encoded in the URL using unique wiki page ids\",\n        })),\n      })\n    );\n\n    for (const pages of pageSlices) {\n      yield put(FetchPageIdsSlice({ pages }));\n    }\n\n    let processedCount = 0;\n    while (yield take(PageIds.addPages().type)) {\n      processedCount += 1;\n      if (pageSlices.length === processedCount) {\n        yield put(AppSync.done());\n      }\n    }\n  }\n}\n\nfunction* fetchPageIdsSlice() {\n  const pageIdsSliceChannel = yield actionChannel(FetchPageIdsSlice().type);\n\n  while (true) {\n    const { payload } = yield take(pageIdsSliceChannel);\n    const pages = payload.pages;\n\n    const data = yield call(jsonp, pageInfo(pages.map((_) => _.text)));\n    const titleToPageId = Object.fromEntries(\n      data.query.pages.map(({ title, pageid }) => [title, pageid])\n    );\n\n    const pageIdByTitle = Object.fromEntries(\n      pages.map(({ text, page }) => [page, titleToPageId[text]])\n    );\n\n    yield put(PageIds.addPages({ pageIdByTitle }));\n\n    const twoSecondsInMs = 2 * 1000;\n    yield delay(twoSecondsInMs);\n  }\n}\n\nfunction pageInfo(pages) {\n  const pageList = encodeURIComponent(pages.join(\"|\"));\n  return `https://privateerpress.wiki/api.php?action=query&formatversion=2&format=json&prop=pageprops&titles=${pageList}`;\n}\n","import { all } from \"redux-saga/effects\";\nimport { cacheWikiPages as cacheWikiPages2 } from \"./cacheWikiPages\";\nimport { updateCache } from \"./updateCache\";\nimport { fetchPageIds } from \"./fetchPageIds\";\n\nfunction* cacheWikiPages() {\n  yield all([updateCache(), cacheWikiPages2(), fetchPageIds()]);\n}\n\nexport { cacheWikiPages };\n","function cleanText(text) {\n  return text.replace(/\\n/g, \"\");\n}\n\nfunction prepareDOM(text) {\n  const doc = new DOMParser().parseFromString(text, \"text/html\");\n  doc\n    .querySelectorAll(\n      \"h1 > span[id], h2 > span[id], h3 > span[id], h4 > span[id]\"\n    )\n    .forEach((node) => {\n      node.parentNode.id = node.id;\n    });\n\n  return doc;\n}\n\nexport { cleanText, prepareDOM };\n","import { prepareDOM } from \"./utils\";\n\nconst parseCypherText = (text) => {\n  const doc = prepareDOM(text);\n\n  const type = extractLink(doc, \"Type\");\n  const pow = extractLink(doc, \"Pow\");\n  const effect = extractParagraphs(doc, \"Effect\");\n  const faction = extractLink(doc, \"Faction\");\n  const source = extractLink(doc, \"Source\");\n\n  const cypher = {\n    type,\n    pow,\n    effect,\n    faction,\n    source,\n  };\n\n  return removeUndefinedValues(cypher);\n};\n\nexport { parseCypherText };\n\nfunction extractLink(doc, id) {\n  const p = doc.querySelector(`h2#${id} ~ p`);\n  if (!p) return undefined;\n\n  const a = p.querySelector(\"a\");\n  if (!a) return { text: p.innerText };\n\n  const hrefs = a.href.split(\"title=\");\n  return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n}\n\nfunction extractParagraphs(doc, id) {\n  function helper(node, texts) {\n    switch (node.tagName) {\n      case \"P\":\n        return helper(node.nextSibling, [...texts, node.innerText.trim()]);\n      case \"H2\":\n        return texts;\n      default:\n        return helper(node.nextSibling, texts);\n    }\n  }\n\n  const node = doc.querySelector(`h2#${id} ~ p`);\n  if (!node) return undefined;\n\n  return helper(node, []);\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n","import { cleanText } from \"./utils\";\n\nfunction parseAnchorTable(table) {\n  const header = [...table.querySelectorAll(\"th\")].map((th) =>\n    cleanText(th.innerText)\n  );\n\n  const body = [...table.querySelectorAll(\"tr\")].map((tr) =>\n    [...tr.querySelectorAll(\"td\")].map((td) => {\n      const anchors = [...td.querySelectorAll(\"a\")].map(parseAnchor);\n      if (anchors.length > 0) {\n        return anchors;\n      }\n      const text = parseText(td);\n      if (text) {\n        return [{ text }];\n      }\n      return [];\n    })\n  );\n\n  return body\n    .filter((row) => row.length === header.length)\n    .map((row) =>\n      Object.fromEntries(\n        header.flatMap((title, i) => (row[i] ? [[title, row[i]]] : []))\n      )\n    );\n}\n\nfunction parseAnchor(a) {\n  const titleColon = a.title.split(\":\");\n  const hrefTitle = a.href.split(\"title=\");\n  return {\n    text: titleColon[titleColon.length - 1],\n    page: hrefTitle[hrefTitle.length - 1],\n  };\n}\n\nexport { parseAnchor, parseAnchorTable };\n\nfunction parseText(node) {\n  return cleanText(node.innerText);\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseCypherCodecsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const cypherCodecsTable = doc.querySelector(\"table.sortable\");\n  if (!cypherCodecsTable) {\n    console.error(\"parseCypherCodecsText: cypherCodecsTable not found!\");\n    return undefined;\n  }\n\n  const cypherCodecs = parseAnchorTable(cypherCodecsTable);\n  return cypherCodecs.map((cypherCodec) =>\n    Object.fromEntries(\n      Object.entries(cypherCodec).map(([key, values]) => [key, values[0]])\n    )\n  );\n};\n\nexport { parseCypherCodecsText };\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionModelsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const table = doc.querySelector(\"h1#Models ~ table\");\n  if (!table) {\n    console.error(\"parseFactionModelsText: table not found!\");\n    return undefined;\n  }\n  const models = parseAnchorTable(table);\n\n  return models.map((model) =>\n    Object.fromEntries(\n      Object.entries(model).flatMap(([key, values]) =>\n        key === \"Subtype\"\n          ? values.length > 0\n            ? [[key, values]]\n            : []\n          : [[key, values[0]]]\n      )\n    )\n  );\n};\n\nexport { parseFactionModelsText };\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const p = doc.querySelector(\"h2#Factions ~ p\");\n  const factions = Object.fromEntries(collectFactions(p, []));\n  delete factions.Wild_Card; // Wild Cards are crawled independently.\n  return factions;\n};\n\nexport { parseFactionsText };\n\nfunction collectFactions(node, factions) {\n  switch (node.tagName) {\n    case \"P\":\n      const a = node.querySelector(\"a\");\n      if (!a) {\n        console.error(\"collectFactions: a not found!\");\n        return collectFactions(node.nextSibling, factions);\n      }\n      const anchor = parseAnchor(a);\n      const faction = [anchor.page, anchor];\n      return collectFactions(node.nextSibling, [...factions, faction]);\n    case \"H2\":\n      return factions;\n    default:\n      return collectFactions(node.nextSibling, factions);\n  }\n}\n","import { parseAnchor } from \"./parsers\";\nimport { cleanText, prepareDOM } from \"./utils\";\n\nconst parseModelText = (text) => {\n  const doc = prepareDOM(text);\n\n  const factionAndTypes =\n    extractList(doc, \"Unit_Faction_and_Type\") ||\n    extractList(doc, \"Model_Faction_and_Type\");\n  const faction = factionAndTypes[0];\n  const types = factionAndTypes.slice(1);\n  const squadSize = extractText(doc, \"Squad_Size\");\n  const deploymentCost = extractText(doc, \"Deployment_Cost\");\n  const baseSize = extractText(doc, \"Base_Size\");\n  const health = extractText(doc, \"Health\");\n  const wildCardFactions = extractList(doc, \"Wild_Card_Factions\");\n  const weaponPoints = extractText(doc, \"Weapon_Points\");\n  const hardpoints = extractText(doc, \"Hardpoints\");\n  const specialRules = extractDefinitions(doc, \"Special_Rules\");\n  const chassisSpecialRules = extractDefinitions(doc, \"Chassis_Special_Rules\");\n  const advantages = extractDefinitions(doc, \"Advantages\");\n  const maneuvers = extractDefinitions(doc, \"Maneuvers\");\n  const vehicleWeaponSelection = extractWeaponSelection(\n    doc,\n    \"Weapon_Selection\"\n  );\n  const cortexes = extractCortexes(doc, \"Cortexes\");\n\n  const modelStatsData = [\n    ...doc\n      .querySelector(\"h3#Unit_Stats ~ table, h3#Model_Stats ~ table\")\n      .querySelectorAll(\"tr > td\"),\n  ].map((_) => cleanText(_.innerText));\n  const modelStatsLength = modelStatsData.length / 2;\n  const modelStats = Object.fromEntries(\n    Array.from({ length: modelStatsLength }, (_, i) => i).map((i) => [\n      modelStatsData[i],\n      modelStatsData[i + modelStatsLength],\n    ])\n  );\n\n  let weaponsData = [...doc.querySelectorAll(\"h3#Weapons ~ table tr\")].map(\n    (tr) => [...tr.querySelectorAll(\"td\")]\n  );\n  let weapons = undefined;\n  if (weaponsData.length > 0) {\n    weapons = [];\n    let header = weaponsData[0].map((td) => td.innerText);\n    let weaponsList = weaponsData.slice(1);\n    for (const tds of weaponsList) {\n      if (tds.length === header.length) {\n        const stats = tds.map((td) => td.innerText);\n        const weapon = Object.fromEntries(\n          header.map((key, i) => [cleanText(key), cleanText(stats[i])])\n        );\n        weapons.push(weapon);\n      }\n      if (tds.length === 1) {\n        const previousWeapons = weapons.slice(0, weapons.length - 1);\n        const lastWeapon = weapons[weapons.length - 1];\n\n        const weapon = {\n          ...lastWeapon,\n          specialRules: parseDefinitionText(tds[0]),\n        };\n        weapons = [...previousWeapons, weapon];\n      }\n    }\n  }\n\n  function weaponDetails() {\n    const weaponDetailsTable = doc.querySelector(\"table.mw-collapsible\");\n    if (!weaponDetailsTable) return undefined;\n\n    const weaponDetailsData = [...weaponDetailsTable.querySelectorAll(\"tr\")]\n      .map((tr) => [...tr.querySelectorAll(\"td, th\")])\n      .filter((_) => _.length === 4);\n    if (!weaponDetailsData || weaponDetailsData.length === 0) return undefined;\n\n    const detailsHeader = weaponDetailsData[0].map((_) =>\n      cleanText(_.innerText)\n    );\n    return weaponDetailsData.slice(1).map((tds) =>\n      Object.fromEntries(\n        tds.map((td, i) => {\n          const a = td.querySelector(\"a\");\n          const hrefs = a ? a.href.split(\"title=\") : undefined;\n          const text = cleanText(td.innerText);\n          return [\n            detailsHeader[i],\n            a ? { text, page: hrefs[hrefs.length - 1] } : { text },\n          ];\n        })\n      )\n    );\n  }\n\n  const release = extractText(doc, \"Release\", { node: \"h1\" });\n  const lore = extractText(doc, \"Lore\", { node: \"h1\" });\n\n  const model = {\n    faction,\n    types,\n    squadSize,\n    deploymentCost,\n    baseSize,\n    health,\n    wildCardFactions,\n    hardpoints,\n    weaponPoints,\n    modelStats,\n    specialRules,\n    weapons,\n    advantages,\n    maneuvers,\n    vehicleWeaponSelection,\n    cortexes,\n    chassisSpecialRules,\n    weaponDetails: weaponDetails(),\n    release,\n    lore,\n  };\n\n  return removeUndefinedValues(model);\n};\n\nexport { parseModelText };\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n\nfunction extractText(doc, id, { node = \"h3\" } = {}) {\n  const p = doc.querySelector(`${node}#${id} ~ p`);\n  if (!p) return undefined;\n\n  return cleanText(p.innerText);\n}\n\nfunction extractList(doc, id) {\n  const p = doc.querySelector(`h3#${id} ~ p`);\n  if (!p) return undefined;\n\n  const as = [...p.querySelectorAll(\"a\")];\n  if (as.length === 0) return undefined;\n\n  return as.map((a) => {\n    const hrefs = a.href.split(\"title=\");\n    return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n  });\n}\n\nfunction extractWeaponSelection(doc, id) {\n  const node = doc.querySelector(`h3#${id} + p`);\n  if (!node) return undefined;\n\n  const anchors = [...node.querySelectorAll(\"a\")];\n\n  return anchors.map((a) => parseAnchor(a));\n}\n\nfunction extractCortexes(doc, id) {\n  function helper(node, cortexes) {\n    switch (node.tagName) {\n      case \"P\":\n        const cortex = node.querySelector(\"b\").innerText;\n        const definitions = parseDefinitionText(node);\n        return helper(node.nextSibling, [...cortexes, [cortex, definitions]]);\n      case \"H3\":\n        return cortexes;\n      default:\n        return helper(node.nextSibling, cortexes);\n    }\n  }\n\n  const node = doc.querySelector(`h3#${id} ~ p`);\n  if (!node) return undefined;\n\n  return Object.fromEntries(helper(node, []));\n}\n\nfunction parseDefinitionText(node) {\n  const definitions = node.innerHTML\n    .split(\"<br>\")\n    .map((_) => _.replace(/<[^>]+>/g, \"\").trim());\n\n  const pairs = definitions.flatMap((definition) => {\n    const separator = \": \";\n    const groups = definition.split(separator).map(cleanText);\n    if (groups.length < 2) return [];\n    const key = groups[0];\n    const val = groups.slice(1).join(separator);\n    return [[key, val]];\n  });\n  if (pairs.length === 0) return undefined;\n\n  return Object.fromEntries(pairs);\n}\n\nfunction extractDefinitions(doc, id) {\n  const p = doc.querySelector(`h3#${id} ~ p`);\n  if (!p) return undefined;\n\n  return parseDefinitionText(p);\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseWildCardText = (text) => {\n  const doc = prepareDOM(text);\n\n  const h1OrTable = doc.querySelectorAll(\"h1, table.sortable\");\n  const factionAndModels = [];\n\n  for (let i = 0; i < h1OrTable.length; i++) {\n    if (i % 2 === 0) {\n      const h1 = h1OrTable[i];\n      if (h1.tagName !== \"H1\") {\n        console.error(\n          `parseWildCardText: expected H1, but got ${h1.tagName}!`,\n          h1\n        );\n      }\n      factionAndModels.push({ faction: h1.id });\n    } else {\n      const table = h1OrTable[i];\n      if (table.tagName !== \"TABLE\") {\n        console.error(\n          `parseWildCardText: expected TABLE, but got ${table.tagName}!`,\n          table\n        );\n      }\n      const last = factionAndModels[factionAndModels.length - 1];\n      const models = parseAnchorTable(table);\n      last.models = models.map((model) =>\n        Object.fromEntries(\n          Object.entries(model).flatMap(([key, values]) =>\n            key === \"Subtype\"\n              ? values.length > 0\n                ? [[key, values]]\n                : []\n              : [[key, values[0]]]\n          )\n        )\n      );\n    }\n  }\n\n  return factionAndModels;\n};\n\nexport { parseWildCardText };\n","import { put, select, take } from \"redux-saga/effects\";\nimport {\n  parseCypherCodecsText,\n  parseCypherText,\n  parseFactionModelsText,\n  parseFactionsText,\n  parseModelText,\n  parseWildCardText,\n} from \"../core/parse\";\nimport { Cyphers } from \"../../state/Cyphers\";\nimport { CypherCodecs } from \"../../state/CypherCodecs\";\nimport { Factions } from \"../../state/Factions\";\nimport { FactionModels } from \"../../state/FactionModels\";\nimport { Models } from \"../../state/Models\";\nimport { WildCardModels } from \"../../state/WildCardModels\";\nimport { FetchedWikiPage, FetchPageIdsSlice } from \"../../messages\";\nimport { partitionBy } from \"./partitionBy\";\n\nfunction* parseWikiPages() {\n  while (true) {\n    const { payload } = yield take(FetchedWikiPage().type);\n    const { data, page } = payload;\n\n    const cypherCodecs = yield select(CypherCodecs.selectPages());\n    const factions = yield select(Factions.selectPages());\n\n    // TODO: Why Object.values?\n    const factionModels = Object.values(\n      yield select(FactionModels.selectModelPages())\n    );\n\n    const wildCardModels = Object.values(\n      yield select(WildCardModels.selectModelPages())\n    );\n\n    if (page === \"Warcaster\") {\n      const factions = parseFactionsText(data.text);\n      yield put(Factions.set({ factions }));\n    } else if (page === \"Wild_Card\") {\n      const wildCards = parseWildCardText(data.text);\n      yield put(WildCardModels.set({ wildCards }));\n    } else if (factionModels.includes(page) || wildCardModels.includes(page)) {\n      const model = parseModelText(data.text);\n      model.name = { text: data.title, page };\n\n      const cortexSelections = identifyCortexSelections(\n        model.cortexes,\n        data.categories\n      );\n\n      if (cortexSelections) {\n        model.cortexSelections = cortexSelections;\n      }\n\n      const warjackWeaponSelections = buildWarjackWeaponSelections(\n        model.weaponDetails\n      );\n\n      if (warjackWeaponSelections) {\n        model.warjackWeaponSelections = warjackWeaponSelections;\n      }\n\n      yield put(Models.set({ page, model }));\n\n      let fetchPages = [];\n\n      if (cortexSelections) {\n        const cortexCategories = Object.values(cortexSelections).flatMap(\n          (advantages) =>\n            Object.values(advantages).flatMap(({ category }) => ({\n              text: category.replace(/_/g, \" \"),\n              page: category,\n            }))\n        );\n\n        fetchPages = [...fetchPages, ...cortexCategories];\n      }\n\n      if (warjackWeaponSelections) {\n        const weaponPages = Object.values(warjackWeaponSelections).map(\n          ({ name, page }) => ({ text: name, page })\n        );\n\n        fetchPages = [...fetchPages, ...weaponPages];\n      }\n\n      if (model.vehicleWeaponSelection) {\n        fetchPages = [...fetchPages, ...model.vehicleWeaponSelection];\n      }\n\n      if (fetchPages.length > 0) {\n        const pageSlices = partitionBy(50, fetchPages);\n\n        for (const pages of pageSlices) {\n          yield put(FetchPageIdsSlice({ pages }));\n        }\n      }\n    } else if (factions.includes(page)) {\n      const factionModels = parseFactionModelsText(data.text);\n      yield put(FactionModels.set({ page, factionModels }));\n    } else if (page === \"Cypher_Codecs\") {\n      const cypherCodecs = parseCypherCodecsText(data.text);\n      yield put(CypherCodecs.set({ cypherCodecs }));\n    } else if (cypherCodecs.includes(page)) {\n      const cypher = parseCypherText(data.text);\n      cypher.name = { text: data.title, page };\n      yield put(Cyphers.set({ page, cypher }));\n    } else {\n      // TODO: Cannot parse WikiPage\n    }\n  }\n}\n\nexport { parseWikiPages };\n\nfunction buildWarjackWeaponSelections(weaponDetails) {\n  if (!weaponDetails) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    weaponDetails.map(({ Cost, Location, Weapon }) => [\n      Weapon.page,\n      {\n        cost: Cost.text,\n        location: Location.text,\n        name: Weapon.text,\n        page: Weapon.page,\n      },\n    ])\n  );\n}\n\nfunction identifyCortexSelections(cortexes, categories) {\n  if (\n    !cortexes ||\n    Object.entries(cortexes).length === 0 ||\n    !categories ||\n    Object.entries(categories).length === 0\n  ) {\n    return undefined;\n  }\n\n  const categoryTexts = categories.map(({ category }) => category);\n\n  return Object.fromEntries(\n    Object.entries(cortexes).map(([cortex, advantages]) => [\n      cortex,\n      Object.fromEntries(\n        Object.entries(advantages).map(([advantage, text]) => [\n          advantage,\n          {\n            category: `Category:${findClosestCategory(\n              advantage,\n              categoryTexts\n            )}`,\n            text,\n          },\n        ])\n      ),\n    ])\n  );\n}\n\nfunction findClosestCategory(advantage, categoryTexts) {\n  return categoryTexts.find(\n    (category) => advantage === category.replace(/^WNM_/, \"\").replace(/_/g, \" \")\n  );\n}\n","import { all, put, take } from \"redux-saga/effects\";\nimport { FetchWikiPage } from \"../../messages\";\nimport { Factions } from \"../../state/Factions\";\n\nfunction* triggerFetchWikiPages() {\n  yield all([triggerFetchFactions()]);\n}\n\nexport { triggerFetchWikiPages };\n\nfunction* triggerFetchFactions() {\n  while (true) {\n    const { payload } = yield take(Factions.set().type);\n    const { factions } = payload;\n\n    const factionPages = Object.values(factions).map((faction) => faction.page);\n\n    for (const page of factionPages) {\n      yield put(FetchWikiPage({ page }));\n    }\n  }\n}\n","const digitsBase62 =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\nfunction toBase62(n) {\n  if (n === 0) return \"0\";\n  var result = \"\";\n  while (n > 0) {\n    result = digitsBase62[n % digitsBase62.length] + result;\n    n = parseInt(n / digitsBase62.length, 10);\n  }\n  return result;\n}\n\nfunction fromBase62(s) {\n  var result = 0;\n  for (var i = 0; i < s.length; i++) {\n    var p = digitsBase62.indexOf(s[i]);\n    if (p < 0) return NaN;\n    result += p * Math.pow(digitsBase62.length, s.length - i - 1);\n  }\n  return result;\n}\n\nexport { fromBase62, toBase62 };\n","import { eventChannel } from \"redux-saga\";\nimport { all, put, select, take } from \"redux-saga/effects\";\nimport {\n  CardDragEnded,\n  CardDragStarted,\n  FetchWikiPage,\n  MenuItemClicked,\n} from \"../../messages\";\nimport { AppSync } from \"../../state/AppSync\";\nimport { CypherCodecs } from \"../../state/CypherCodecs\";\nimport { Dragging } from \"../../state/Dragging\";\nimport { FactionModels } from \"../../state/FactionModels\";\nimport { Lists } from \"../../state/Lists\";\nimport { PageIds } from \"../../state/PageIds\";\nimport { Url } from \"../../state/Url\";\nimport { WildCardModels } from \"../../state/WildCardModels\";\nimport { toBase62, fromBase62 } from \"./base62\";\n\nfunction* ui() {\n  yield all([\n    addCard(),\n    removeCards(),\n    setDraggingFalse(),\n    setDraggingTrue(),\n    updateCards(),\n    updateUrl(),\n    parseListsFromQuery(),\n    parseListsFromQuery2(),\n    fetchCardOnShow(),\n  ]);\n}\n\nexport { ui };\n\nfunction* updateCards() {\n  while (true) {\n    const { payload } = yield take(CardDragEnded().type);\n    const { reason, source, destination } = payload;\n    if (reason === \"DROP\" && destination.droppableId.startsWith(\"cards_\")) {\n      const sourceListIndex = parseInt(\n        source.droppableId.replace(\"cards_\", \"\"),\n        10\n      );\n      const sourcePosition = source.index;\n\n      const destinationListIndex = parseInt(\n        destination.droppableId.replace(\"cards_\", \"\"),\n        10\n      );\n      const destinationPosition = destination.index;\n\n      yield put(\n        Lists.moveCard({\n          source: { listIndex: sourceListIndex, cardIndex: sourcePosition },\n          destination: {\n            listIndex: destinationListIndex,\n            cardIndex: destinationPosition,\n          },\n        })\n      );\n    }\n  }\n}\n\nfunction* removeCards() {\n  while (true) {\n    const { payload } = yield take(CardDragEnded().type);\n    const { reason, source, destination } = payload;\n    if (reason === \"DROP\" && destination.droppableId.startsWith(\"trash\")) {\n      const listIndex = parseInt(source.droppableId.replace(\"cards_\", \"\"), 10);\n      const cardIndex = source.index;\n\n      yield put(\n        Lists.removeCard({\n          source: { listIndex, cardIndex },\n        })\n      );\n    }\n  }\n}\n\nfunction* addCard() {\n  while (true) {\n    const { payload } = yield take(MenuItemClicked().type);\n    const { page } = payload;\n    const model = yield select(FactionModels.selectByPage(page));\n    const wildCard = yield select(WildCardModels.selectByPage(page));\n    const cypher = yield select(CypherCodecs.selectByPage(page));\n    if (model || wildCard || cypher) {\n      const pageId = yield select(PageIds.selectByPage(page));\n      yield put(Lists.addCard({ pageId }));\n    }\n  }\n}\n\nfunction* setDraggingTrue() {\n  while (yield take(CardDragStarted().type)) {\n    yield put(Dragging.activate());\n  }\n}\n\nfunction* setDraggingFalse() {\n  while (yield take(CardDragEnded().type)) {\n    yield put(Dragging.deactivate());\n  }\n}\n\nfunction* updateUrl() {\n  while (yield take((action) => action.type.startsWith(\"Lists.\"))) {\n    const lists = yield select(Lists.select());\n    const pageIds = lists.map(({ cards }) => cards.map((_) => _.pageId));\n\n    if (window.history && window.history.replaceState) {\n      const maxPageId = Math.max(0, ...pageIds.flat());\n      const codeLength = Math.ceil(Math.log(maxPageId + 1) / Math.log(62)) || 0;\n\n      function renderWarjackWeaponIds(warjackWeaponIds, codeLength) {\n        const ids = warjackWeaponIds || [];\n        let res = \"\";\n        for (let i = 0; i < ids.length; i++) {\n          const id = ids[i];\n          res += (id ? toBase62(id) : \"0\").padStart(codeLength, \"0\");\n        }\n        return res;\n      }\n\n      const state = lists.reduce(\n        (state, list, index) => ({\n          ...state,\n          [`t${index}`]: list.title,\n          [`l${index}`]: list.cards.reduce(\n            (acc, card) =>\n              acc +\n              toBase62(card.pageId).padStart(codeLength, \"0\") +\n              (card.cortexIds || card.warjackWeaponIds\n                ? `(${(card.cortexIds || [])\n                    .map((id) => toBase62(id).padStart(codeLength, \"0\"))\n                    .join(\"\")},${renderWarjackWeaponIds(\n                    card.warjackWeaponIds,\n                    codeLength\n                  )})`\n                : \"\") +\n              (card.vehicleWeaponId\n                ? `[${toBase62(card.vehicleWeaponId).padStart(\n                    codeLength,\n                    \"0\"\n                  )}]`\n                : \"\"),\n            \"\"\n          ),\n        }),\n        { v: 1, e: codeLength }\n      );\n\n      const query = Object.entries(state)\n        .map(([key, value]) => `${key}=${value}`)\n        .join(\"&\");\n      const url =\n        window.location.origin + window.location.pathname + \"?\" + query;\n\n      yield put(Url.set({ url }));\n\n      window.history.replaceState(query, \"\", url);\n    }\n  }\n}\n\nfunction* parseListsFromQuery() {\n  const loadChannel = eventChannel((emitter) => {\n    window.addEventListener(\"load\", emitter);\n\n    return () => {\n      window.removeEventListener(\"load\", emitter);\n    };\n  });\n\n  while (true) {\n    yield take(loadChannel);\n\n    yield* parseLists();\n  }\n}\n\nfunction* parseListsFromQuery2() {\n  yield take(AppSync.done().type);\n\n  yield* parseLists();\n}\n\nfunction* parseLists() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlParams);\n\n  const version = params.v;\n  const exponent = parseInt(params.e, 10) || 0;\n\n  if (version === \"1\" && exponent) {\n    const titleIndexes = Object.keys(params)\n      .filter((key) => key.match(/^t[\\d]+$/))\n      .map((key) => parseInt(key.substring(1), 10))\n      .sort((a, b) => a - b);\n\n    const lists = titleIndexes.map((index) => ({\n      title: params[\"t\" + index],\n      cards: parseList(exponent, params[\"l\" + index]),\n    }));\n\n    // If the card is either a configured warjack or a configured vehicle, its page must be\n    // fetched in order for its subtitle to be shown correctly. A warjack or vehicle can be\n    // identified by having at least one cortex id, warjack weapon id or vehicle weapon id.\n    for (const list of lists) {\n      for (const {\n        pageId,\n        cortexIds,\n        warjackWeaponIds,\n        vehicleWeaponId,\n      } of list.cards) {\n        if (cortexIds || warjackWeaponIds || vehicleWeaponId) {\n          const page = yield select(PageIds.selectPageByPageId(pageId));\n          if (page) {\n            yield put(FetchWikiPage({ page }));\n          }\n        }\n      }\n    }\n\n    yield put(Lists.set({ lists }));\n  } else {\n    yield put(Lists.set({ lists: [] }));\n  }\n}\n\nfunction* fetchCardOnShow() {\n  while (true) {\n    const { payload } = yield take(\"Lists.toggleCard\");\n    if (payload && payload.pageId) {\n      const page = yield select(PageIds.selectPageByPageId(payload.pageId));\n      if (page) {\n        yield put(FetchWikiPage({ page }));\n      }\n    }\n  }\n}\n\nfunction parseList(exponent, encodedList) {\n  function parseCards(cards, rest) {\n    if (rest === \"\") {\n      return cards;\n    }\n\n    const pageId = rest.slice(0, exponent);\n\n    if (rest[exponent] === \"(\") {\n      const blockEnd = rest.indexOf(\")\");\n      const delimiter = rest.indexOf(\",\");\n      if (!blockEnd || !delimiter) {\n        return [];\n      }\n\n      const block = rest.slice(exponent + 1, blockEnd);\n      const [cortexIds, warjackWeaponIds] = block.split(\",\");\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: partitionBy(exponent, cortexIds),\n            warjackWeaponIds: partitionBy(exponent, warjackWeaponIds),\n            vehicleWeaponId: [],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    if (rest[exponent] === \"[\") {\n      const blockEnd = rest.indexOf(\"]\");\n      if (!blockEnd) {\n        return [];\n      }\n\n      const vehicleWeaponId = rest.slice(exponent + 1, blockEnd);\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: [],\n            warjackWeaponIds: [],\n            vehicleWeaponId: [vehicleWeaponId],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    return parseCards(\n      [\n        ...cards,\n        { pageId, cortexIds: [], warjackWeaponIds: [], vehicleWeaponId: [] },\n      ],\n      rest.slice(exponent)\n    );\n  }\n\n  const cards = parseCards([], encodedList);\n\n  const decode = (string) => {\n    const normalizedString = string.replace(/^0+/, \"\") || \"0\";\n    if (normalizedString === \"0\") return null;\n    return parseInt(fromBase62(normalizedString), 10);\n  };\n\n  return cards\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId: decode(pageId),\n      cortexIds: cortexIds.map(decode),\n      warjackWeaponIds: warjackWeaponIds.map(decode),\n      vehicleWeaponId: vehicleWeaponId.map(decode),\n    }))\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId,\n      ...(cortexIds.length === 0 ? {} : { cortexIds }),\n      ...(warjackWeaponIds.length === 0 ? {} : { warjackWeaponIds }),\n      ...(vehicleWeaponId.length === 0\n        ? {}\n        : { vehicleWeaponId: vehicleWeaponId[0] }),\n      hidden: true,\n    }));\n}\n\nfunction partitionBy(slice, string) {\n  var strings = [];\n\n  for (let i = 0; i < string.length; i += slice) {\n    strings[strings.length] = string.slice(i, i + slice);\n  }\n\n  return strings;\n}\n","import { all, put } from \"redux-saga/effects\";\nimport { FetchWikiPage, RefreshWikiPages } from \"../../messages\";\nimport { cacheWikiPages } from \"./cacheWikiPages\";\nimport { parseWikiPages } from \"./parseWikiPages\";\nimport { triggerFetchWikiPages } from \"./triggerFetchWikiPages\";\nimport { ui } from \"./ui\";\n\nfunction* processes() {\n  yield all([\n    cacheWikiPages(),\n    parseWikiPages(),\n    triggerFetchWikiPages(),\n    ui(),\n    fetchInitialData(),\n    refresh(),\n  ]);\n}\n\nexport { processes };\n\nfunction* fetchInitialData() {\n  const pages = [\"Warcaster\", \"Wild_Card\", \"Cypher_Codecs\"];\n  for (const page of pages) {\n    yield put(FetchWikiPage({ page }));\n  }\n}\n\nfunction* refresh() {\n  yield put(RefreshWikiPages());\n}\n","import { StateShard } from \"./utils\";\n\nconst Version = StateShard(\"Version\", init, {}, {});\n\nexport { Version };\n\nfunction init(state) {\n  state.version = \"2022-08-28T16:43:31.730Z\";\n}\n","import { AppSync } from \"./AppSync\";\nimport { Cyphers } from \"./Cyphers\";\nimport { CypherCodecs } from \"./CypherCodecs\";\nimport { Dragging } from \"./Dragging\";\nimport { Factions } from \"./Factions\";\nimport { FactionModels } from \"./FactionModels\";\nimport { Lists } from \"./Lists\";\nimport { Models } from \"./Models\";\nimport { PageIds } from \"./PageIds\";\nimport { Url } from \"./Url\";\nimport { Version } from \"./Version\";\nimport { WikiPages } from \"./WikiPages\";\nimport { WildCardModels } from \"./WildCardModels\";\nimport { immer, initAll } from \"./utils\";\n\nconst objects = [\n  AppSync,\n  CypherCodecs,\n  Cyphers,\n  Factions,\n  FactionModels,\n  Models,\n  PageIds,\n  Url,\n  WildCardModels,\n  WikiPages,\n  // UI\n  Dragging,\n  Lists,\n  // General\n  Version,\n];\n\nconst state = initAll(...objects)({});\n\nconst dispatch = immer(({ type, payload }) => {\n  const namespaces = Object.fromEntries(\n    objects.map((group) => [group.namespace, group])\n  );\n\n  const namespace = type.substring(0, type.indexOf(\".\"));\n  if (namespace && namespaces[namespace]) {\n    return redirect({ type, payload }, namespaces[namespace]);\n  }\n  if (type === \"RE\") {\n    return (state) => {\n      state.data.models = {};\n      for (const page of Object.keys(state.data.pages)) {\n        const white_list = [\n          \"Warcaster\",\n          \"Wild_Card\",\n          \"Cypher_Codecs\",\n          \"Aeternus_Continuum\",\n          \"Empyrean\",\n          \"Iron_Star_Alliance\",\n          \"Marcher_Worlds\",\n        ];\n        if (!white_list.includes(page)) {\n          delete state.data.pages[page];\n        }\n      }\n    };\n  }\n  return (state) => state;\n});\n\nexport { dispatch, state };\n\nfunction redirect(action, obj) {\n  return (state) =>\n    immer(({ type, payload }) => {\n      const f = obj.dispatch[type] || ((state, payload) => state);\n      return (state) => f(state, payload);\n    })(state, action);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport \"./index.css\";\nimport App from \"./ui/App\";\nimport { processes } from \"./businessLogic/processes\";\nimport { dispatch, state } from \"./state\";\n\nconst saga = initSaga();\nconst store = initStore(saga);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nsaga.run(processes);\n\nfunction initStore(saga) {\n  const persistedState = localStorage.getItem(\"reduxState\")\n    ? JSON.parse(localStorage.getItem(\"reduxState\"))\n    : state;\n\n  const latestState =\n    new Date(persistedState.version) >= new Date(state.version)\n      ? persistedState\n      : state;\n\n  const composedEnhancers = composeWithDevTools(applyMiddleware(saga));\n  const store = createStore(dispatch, latestState, composedEnhancers);\n\n  store.subscribe(() => {\n    localStorage.setItem(\"reduxState\", JSON.stringify(store.getState()));\n  });\n\n  return store;\n}\n\nfunction initSaga() {\n  return createSagaMiddleware();\n}\n"],"sourceRoot":""}