{"version":3,"sources":["ui/img/advantages/Compound_Armor.png","ui/img/advantages/Flight.png","ui/img/advantages/Pathfinder.png","ui/img/advantages/Revelator.png","ui/img/advantages/Stealth.png","ui/img/advantages/Weapon_Expert.png","ui/img/factions/Aeternus_Continuum.png","ui/img/factions/Fallback.png","ui/img/factions/Empyrean.png","ui/img/factions/Iron_Star_Alliance.png","ui/img/factions/Lost_Legion.png","ui/img/factions/Marcher_Worlds.png","ui/img/factions/Wild_Card.png","ui/img/faction_icons/Wild_Card_Charged.png","ui/img/faction_icons/Wild_Card_Spike.png","ui/img/weapon_qualities/Blast_Weapon.png","ui/img/weapon_qualities/Corrosion.png","ui/img/weapon_qualities/Fire.png","ui/img/weapon_qualities/Lock_Down.png","ui/img/weapon_qualities/Repulsor.png","ui/img/weapon_qualities/Spray_Weapon.png","ui/img/weapon_qualities/Strafe.png","ui/img/weapon_qualities/System_Failure.png","messages.js","state/utils.js","state/AppSync.js","state/CypherCodecs.js","state/Cyphers.js","state/Dragging.js","state/FactionModels.js","state/Factions.js","state/Lists.js","state/PageIds.js","state/Url.js","state/WildCardModels.js","state/Models.js","state/VehicleWeapons.js","state/WarjackWeapons.js","state/CadreModels.js","state/CadreCategoryMembers.js","ui/App.js","ui/img/faction_icons/Aeternus_Continuum_Spike.png","ui/img/faction_icons/Empyrean_Spike.png","ui/img/faction_icons/Iron_Star_Alliance_Spike.png","ui/img/faction_icons/Marcher_Worlds_Spike.png","ui/img/faction_icons/Aeternus_Continuum_Charged.png","ui/img/faction_icons/Empyrean_Charged.png","ui/img/faction_icons/Iron_Star_Alliance_Charged.png","ui/img/faction_icons/Marcher_Worlds_Charged.png","state/io/Requests.js","state/ParserNames.js","businessLogic/processes/cacheParserNames.js","businessLogic/processes/jsonp.js","businessLogic/processes/cacheWikiPages/fetchWikiPage.js","businessLogic/processes/cacheWikiPages/updateCache.js","businessLogic/processes/partitionBy.js","businessLogic/processes/cacheWikiPages/fetchPageIds.js","businessLogic/processes/cacheWikiPages/index.js","businessLogic/processes/fetchCadres/fetchCadreCategoryMembers.js","businessLogic/processes/fetchCadres/fetchCadreModels.js","businessLogic/processes/fetchCadres/index.js","businessLogic/core/parse/utils.js","businessLogic/core/parse/parseCypherText.js","businessLogic/core/parse/parsers.js","businessLogic/core/parse/parseCypherCodecsText.js","businessLogic/core/parse/parseFactionModelsText.js","businessLogic/core/parse/parseFactionsText.js","businessLogic/core/parse/parseModelText.js","businessLogic/core/parse/parseVehicleAndWarjackWeaponText.js","businessLogic/core/parse/parseWildCardText.js","businessLogic/processes/parsers/parseCypher.js","businessLogic/processes/parsers/parseCypherCodecs.js","businessLogic/processes/parsers/parseFactionModels.js","businessLogic/processes/parsers/parseFactions.js","businessLogic/processes/parsers/parseModel.js","businessLogic/processes/parsers/parseVehicleOrWarjackWeapon.js","businessLogic/processes/parsers/parseWildCard.js","businessLogic/processes/parsers/index.js","businessLogic/processes/parseWikiPages.js","businessLogic/processes/triggerFetchWikiPages.js","businessLogic/processes/base62.js","businessLogic/processes/ui.js","businessLogic/processes/index.js","state/Version.js","state/index.js","index.js"],"names":["CardDragEnded","message","CardDragStarted","MenuItemClicked","FetchedWikiPage","FetchedWikiPageRevisions","RefreshWikiPages","type","payload","immer","f","state","action","produce","identity","StateShard","namespace","init","actions","actionCreators","selectors","dispatch","Object","fromEntries","entries","map","functionName","keys","name","args","a","pipe","fs","AppSync","data","sync","done","reasons","select","addReasons","selectDone","selectReasons","CypherCodecs","cypherCodecs","set","selectByPage","page","find","codec","Cypher","Cyphers","cyphers","setForPage","cypher","values","flat","Dragging","ui","dragging","activate","deactivate","FactionModels","factionModels","models","model","Name","Factions","factions","Lists","lists","oneEmptyList","addCard","pageId","card","hidden","cards","push","addEmptyList","moveListBy","listIndex","by","length","list","splice","removeCard","source","cardIndex","removeList","setCardCortex","cortexIds","setCardVehicleWeapon","vehicleWeaponId","setCardWarjackWeapons","hardpointNameIndex","warjackWeaponId","warjackWeaponIds","setListTitle","title","toggleCard","moveCard","destination","PageIds","pageIds","addPages","pageIdByTitle","selectPageByPageId","reduce","acc","statePageId","undefined","Url","url","WildCardModels","wildCardModels","wildCards","wildCard","faction","Models","VehicleWeapons","vehicleWeapons","vehicleWeapon","WarjackWeapons","warjackWeapons","warjackWeapon","CadreModels","cadreModels","setForCadrePageId","cadrePageId","selectCadreModelsByPageId","CadreCategoryMembers","cadreCategoryMembers","Header","Layout","Footer","Content","TextArea","Input","SubMenu","Menu","FactionImage","style","height","src","AeternusContinuum","alt","Empyrean","IronStarAlliance","LostLegion","MarcherWorlds","WildCard","Fallback","Spike","style2","marginTop","WildCardSpike","Charged","WildCardCharged","AdvantageImage","advantage","CompoundArmor","className","Flight","Pathfinder","Revelator","Stealth","WeaponExpert","weaponQualities","BlastWeapon","Corrosion","Fire","LockDown","Repulsor","SprayWeapon","Strafe","SystemFailure","WeaponQuality","weaponQuality","App","connect","initialized","syncReasons","sort","text","Type","Subtype","subtype","_","join","filter","flatMap","cadreModel","includes","cadre","allCadreModels","pageIdByPage","details","hardpoints","hardpointNames","parseHardpoints","cortexSelections","cortex","advantages","category","categoryId","warjackWeaponSelections","selection","split","vehicleWeaponSelection","Faction","cadres","dragStart","event","dragEnd","menuItemClicked","stopPropagation","allMenuItemsClicked","pages","forEach","target","value","setUrl","bookmark","document","querySelector","navigator","userAgent","match","range","createRange","selectNodeContents","window","getSelection","removeAllRanges","addRange","setSelectionRange","open","key","label","React","useState","openDrawer","setOpenDrawer","onDragStart","onDragEnd","droppableId","provided","ref","innerRef","droppableProps","animation","color","DeleteOutlined","href","placeholder","id","openKeys","onOpenChange","mode","triggerSubMenuAction","icon","gutter","xs","sm","md","lg","xl","xxl","placement","trigger","align","offset","onClick","cursor","display","paddingRight","fontSize","padding","PlusSquareOutlined","UpSquareOutlined","paddingLeft","DownSquareOutlined","span","generateListNamePlaceholder","maxLength","autoSize","onChange","Universal","i","count","size","draggableId","index","draggableProps","dragHandleProps","hoverable","Meta","avatar","width","textAlign","deploymentCost","replace","vehicleWeaponName","cortexName","weaponIds","weaponId","weapon","modelStats","stat","suffixIcon","CaretDownOutlined","defaultValue","onSelect","getPopupContainer","querySelectorAll","Option","advantageIndex","rule","markChargedOrSpike","weaponPoints","hardpointName","warjackWeaponNames","location","cost","vehicleWeaponName2","weapons","Fragment","specialRules","index2","ruleIndex","wildCardFactions","baseSize","health","HeartFilled","squadSize","TeamOutlined","chassisAdvantages","chassisSpecialRules","maneuvers","storeLinks","linkText","dangerouslySetInnerHTML","__html","release","lore","pow","effect","margin","SyncOutlined","spin","reason","description","Date","getFullYear","onKeyDown","factionName","visible","onClose","mask","closeIcon","MenuUnfoldOutlined","ItemGroup","shortName","slice","Item","w1","w2","j","indexOf","b","c1","c2","factionNames","justFactions","factionsPresent","types","cyperTypes","weaponConfig","pointCost","markCharged","markSpike","rHardpointGroup","results","n","RegExp","repeat","exec","hardpointCount","parseInt","groupCount","groupName","console","error","s","parsePage","queryCadreModels","queryCadres","queryRevisions","queryPageIds","Requests","io","requests","cached","pending","cache","queryParams","selectCached","expire","fetch","params","selectPending","request","fetched","findIndex","selectCachedRequestsByPageIds","parse","pageid","selectCachedParsedPageIds","selectCachedUrl","parserName","put","desc","jsonApiRequest","cmpageid","cmtype","cmlimit","cmtitle","prop","pageids","titles","encodeURIComponent","formatversion","format","keyValue","ParserNames","parserNames","cacheParserNames","take","jsonp","Promise","resolve","reject","callbackName","Math","round","random","body","removeChild","script","createElement","appendChild","fetchWikiPage","actionChannel","wikiPageChannel","wait","call","pageRevisions","query","categorymembers","member","categoryMembers","titleToPageId","delay","updateCache","refreshWikiPages","refreshOutdatedWikiPages","all","parsedPageIds","queryLength","revInfoByPageId","revision","missing","revid","max","revisions","revInfo","partitionBy","array","arrays","fetchPageIds","cachedPageIds","factionsSet","factionModelPages","wildCardPages","cypherPages","pageSlices","processedCount","cacheWikiPages","fetchCadreCategoryMembers","fetchCadreModels","fetchCadres","cleanText","prepareDOM","doc","DOMParser","parseFromString","node","parentNode","parseCypherText","removeUndefinedValues","extractLink","helper","texts","tagName","nextSibling","innerText","trim","extractParagraphs","p","hrefs","obj","Array","isArray","parseAnchorTable","table","header","th","tr","td","anchors","parseAnchor","row","titleColon","hrefTitle","parseCypherCodecsText","cypherCodecsTable","cypherCodec","parseFactionModelsText","parseFactionsText","collectFactions","Wild_Card","anchor","parseModelText","some","innerHTML","html","extractStoreLinks","factionAndTypes","extractList","extractText","extractDefinitions","extractWeaponSelection","cortexes","definitions","parseDefinitionText","extractCortexes","modelStatsData","modelStatsLength","from","weaponsData","weaponsList","tds","stats","previousWeapons","lastWeapon","weaponDetails","weaponDetailsTable","weaponDetailsData","detailsHeader","as","uls","ul","li","replaceWith","pairs","definition","groups","encodeHTML","textContent","append","parseVehicleAndWarjackWeaponText","parseVehicleOrWarjackWeapon","vehicleOrWarjackWeapon","prefix","res","availableFor","pointCostNode","locationNode","specialRulesP","specialRule","childNodes","textNode","previousSibling","nodeValue","insertAdjacentText","remove","nodeName","entry","colonIndex","acc2","parseWildCardText","h1OrTable","factionAndModels","h1","last","parseCypher","parseCypherCodecs","parseFactionModels","parseFactions","parseModel","identifyCortexSelections","categories","buildWarjackWeaponSelections","fetchPages","cortexCategories","weaponPages","Cost","Location","Weapon","categoryTexts","findClosestCategory","vehicles","warjacks","vehicle","warjack","parseWildCard","parsers","parseWikiPages","parser","triggerFetchWikiPages","triggerFetchFactions","factionPages","digitsBase62","toBase62","result","updateCards","removeCards","setDraggingTrue","setDraggingFalse","updateUrl","parseListsFromQuery","parseListsFromQuery2","parseLists","fetchWeaponsIfVehicleAdded","fetchWeaponsIfWarjackAdded","fetchCardOnShow","startsWith","sourceListIndex","sourcePosition","destinationListIndex","destinationPosition","history","replaceState","renderWarjackWeaponIds","codeLength","ids","padStart","maxPageId","ceil","log","v","e","origin","pathname","loadChannel","eventChannel","emitter","addEventListener","removeEventListener","urlParams","URLSearchParams","search","version","exponent","listIndexes","substring","parseList","pageWithoutTarget","encodedList","parseCards","rest","blockEnd","delimiter","decode","string","normalizedString","NaN","fromBase62","strings","processes","fetchInitialData","continuePending","refresh","Version","objects","initAll","namespaces","group","saga","createSagaMiddleware","store","reset","persistedState","localStorage","getItem","JSON","latestState","composedEnhancers","composeWithDevTools","applyMiddleware","createStore","subscribe","setItem","stringify","getState","initStore","ReactDOM","render","getElementById","run"],"mappings":"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","file":"static/js/main.ea980431.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Compound_Armor.159c8ed1.png\";","export default __webpack_public_path__ + \"static/media/Flight.ee1b66b2.png\";","export default __webpack_public_path__ + \"static/media/Pathfinder.658c0371.png\";","export default __webpack_public_path__ + \"static/media/Revelator.f9be1ca4.png\";","export default __webpack_public_path__ + \"static/media/Stealth.d0dbe094.png\";","export default __webpack_public_path__ + \"static/media/Weapon_Expert.e15642e8.png\";","export default __webpack_public_path__ + \"static/media/Aeternus_Continuum.d1b19d0e.png\";","export default __webpack_public_path__ + \"static/media/Fallback.1ae05c50.png\";","export default __webpack_public_path__ + \"static/media/Empyrean.4ab49225.png\";","export default __webpack_public_path__ + \"static/media/Iron_Star_Alliance.82d76402.png\";","export default __webpack_public_path__ + \"static/media/Lost_Legion.78737fb2.png\";","export default __webpack_public_path__ + \"static/media/Marcher_Worlds.61a330cf.png\";","export default __webpack_public_path__ + \"static/media/Wild_Card.3da9dbca.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEGUlEQVR42h2TaUzTdxjHfy1YLnHlKs4BmzgOryxMJiC6ioJzmzO6gQgNW+wmRykt5erBvyct/ffiaAtUGKwBIVB6FzTGMQfMLCabLEHdsiMZWaJLnC9ErvI/fqu+eJLPi+eTfJ88+YIgRoCN9U0AIQTb20Ewd2cZGPQB0NbopKrEszSlcCY0t3c08aaonVoX+Pb2vVe7EGIAwzcB2NrcAiSBgZW/nwJz900gFXrCNchMTGe7h65FXAmodDoRRTwJGrGPLmtxRwoFTmrA+zNYW3sOcBwHAJIkWFn5Bwj404BX64xAEV9Sl3JyX7/JXjRkGWUP9X/Ds5mHKq2o/WiP3JGiEnnpHPZU+PDQPCBIAoDVFxvA2nsrJE9G9Khv7Lbqx/IGrw0Y+gcHH+q7+150dvViBkvPU9vg8OKA2c61akaztTJ/Ard2Knxh4SEA83eXgbRtJhyV+BMtqD2vU6ublqh1kC9VQo5YDutEClgvkcMmhQoiOvS5SW+UW9CJDDHPs0uvd1GAHvVT1JJATK/akS5DlEaeSAov1/KIz9icYOmVqzirmotX1TVhl6u5m5c49ZDd2PSfSd3N6pW7k8UtPhporg+EoYiLbtHZikrLr/xaVccnrSPjweNny0jbyCgUtHcQOUXniY8ufU6cLa3CTl9gwQaeYOIaOpHZ3uiPBhLxTZpR5YrXIOiX75+5uJZ19CQ5NunElpYfhb4FSc+NW6Sxf5gUtKvIrLwS7EjxBfJiGWupD7UXaBDfTiAUeiK61e54haij4VDBaSzxYD75aSUbfyk/fvyYXF1bJ0NMLPz4E/nGO0w8JbeY/OCT8t+sJjtTIXbHAknrLK1LMRuPSk2VWbmFz+IOFBLp75ZgX1TziXOlLPhsdZ2YGJ8gnF4fWVnXjO1IOUh+eL7irtkwmquWhhLwudepapGfbjOOv1d05twPMamHIePQya2I3dkkfW8OLGdzCUZaNpmde4KoaZZir6XlwJqrDSZbl/etlnp/FNCgU0DU4og0a12pMqGCu2fv/tWIPfthfGY+FpeRh9EYGRh9X+529JtH8ChGOjx26uNfzPq+Yj3iSupAAmFgbu4eEDY6qMpWf9ywYTy7lcuXp2Yc/peW+DaMZGTD6NcPQBojxMmZMOcY875Waayw6J1pzZzpqNGRRcqrYsz4lwDnK0e4VjaTYDNOZmplelZpWcVYfiHzfl7B8UdMZvFCLbuuy6IbKjHrvGmyNlesuNFP/euPJwBgWBCsb6yB4a/nKdya6TARz7WrT+lLHjE6swZ0YwU2w/UT/YaJ3MHQzTrpVFIr1xEtFripi98/oEIYKhOOY+AlkCQOFu48AEbUR5E0u2kSvjumE/HFqoSeWHW7f2crJxDVgXjD7cPfUf78/UnICQICw8H/Di4IlwZqb7gAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAED0lEQVR42iVTa0ybZRh9W7oyxkWubpkbIlOYmk0ITGQGChkjxCiiCSFsxiUUxyhtoS0tpfQGpaU3LgVKO0bLpckg0HspVoeMreoMS4bROGfU4LZk3DQRxtrC1+97/cAfT86f55zn5Dw5IIQGwd7eHoAQgnAYAf47PwO1xg2YnBmiUOQlC/lesoh/61ATa4ooV1vBNwv3D3YP9lEUgOABGQGPHz8DfbpbQNziISmEzmi5wBqvEtmS8ElWCB1JHQJnfBvPdpjLthFnXctgZyf4vwCGKz198gxwGqcBnWaPlAvdKTrp1Cmj1lxsGpyoGdGPMq/3j1zSK0ff7RVPnpDxPfE0qo1kGrkNUCwMwIsXQTDQPw/o9Y7I/k7fMb3KnDdsvKExmE2/KHUDz9s1GqR7SLc5PGL2G/rG6Hq55bRS4kmi11lJfv9DAH649wi0tXpIcpE72aAcy+tRDczwOzohlcmCbEkn1JknIJXTDL9o4cI2dddWr6pXMqicfkPAnI3TaDwEoFZ5CDKRM3pQZkvvlMi01VfroGrAgHLFsl2Zpjv8218r4dqGJkStNwbZHTJ4hdb4d5+i//KA1H6Uz3WSAYfpjlAKvfG6LlPxZ9Srv2aXfIBV1TJ2V548xTY2NyAeMrq6uo5+ffcemldagRSWV0IGi3XzumoyQ9ToOoKn7iXr2p2JcpGa+n5J+c6F8mqMxuIj6xub+KcgFtrdw/bxtv97rPJKHXK+rAL7qKp6eVA1lq9s88QAHtcd2S93JEpbFYyM7EKk5hoLW1q6Hw4Egjh5FwuHw1goEED/3drGbB5fuKCsGisq++SRUTtOkfLtsUDM9ZF1UhfuQHspM5fyz0tp76CnsgqQ1bU1dN9CKBTYR3TKaseij7+OJLz9Hnbh46rvjGpLbqfQFQPYTCuxQzAXP6SZPFdS9um3IDEN1jD5obk5H+b2+uDW9nPUPGbB3F/No2eLKxDy8TOw4VpTt6nblcZpcEcBlXIGtDa7DhsUzpMSnoyenH52O7egFMa9/BqSS/kQsbq/RMgJr+y9mUMJnzhDgVn5JT8a1cYStciR0i5yRYD5hSXAY1uJ7S3uhBvam6fZjBZJyquZa4S4NJiYmg3fyrkADx1Lh4TYkzDrXNEDjayvWq+2pXLpjijL6CLhoBTe2WVQXztN6hL7koZ7rBlqafflqsrPLXn5hQ9yss8/LKKU3qVR63uGtMaLerU9VcKbiRVwnMSVP9cB3kAUBIIBYBpZINDrnBF8hjNuqN19dFzjyhzSTuQbesYLhrWW3NGe2TQVbpvLsB8RsD1Ev/8nIp4tOGgUBjGAwjC4s4hXuWuO0NLsIAsa7dEKkTtW3GqNVbQ5Yng0T1SHcJY0bl4k/PH7Ku4c5+DH/wODKCpYmfBgCwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Blast_Weapon.91876b57.png\";","export default __webpack_public_path__ + \"static/media/Corrosion.d848b926.png\";","export default __webpack_public_path__ + \"static/media/Fire.678cd613.png\";","export default __webpack_public_path__ + \"static/media/Lock_Down.22e3867d.png\";","export default __webpack_public_path__ + \"static/media/Repulsor.d174ca78.png\";","export default __webpack_public_path__ + \"static/media/Spray_Weapon.7d0ffad2.png\";","export default __webpack_public_path__ + \"static/media/Strafe.4aaa8fd7.png\";","export default __webpack_public_path__ + \"static/media/System_Failure.0aea5e20.png\";","const CardDragEnded = message(\"CARD/DRAG_ENDED\");\nconst CardDragStarted = message(\"CARD/DRAG_STARTED\");\nconst MenuItemClicked = message(\"MENU_ITEM/CLICKED\");\n\nconst FetchedWikiPage = message(\"WIKI_PAGE/FETCHED\");\nconst FetchedWikiPageRevisions = message(\"WIKI_PAGE_REVISIONS/FETCHED\");\nconst RefreshWikiPages = message(\"WIKI_PAGES/REFRESH\");\n\nexport {\n  CardDragEnded,\n  CardDragStarted,\n  FetchedWikiPage,\n  FetchedWikiPageRevisions,\n  MenuItemClicked,\n  RefreshWikiPages,\n};\n\nfunction message(type) {\n  return (payload = {}) => ({ type, payload });\n}\n","import produce from \"immer\";\n\nconst initAll = (...objects) =>\n  pipe(...objects.map((obj) => produce(obj.init)));\n\nconst immer = (f) => (state, action) => produce(f(action) || identity)(state);\n\nconst StateShard = (namespace, init, actions, actionCreators, selectors) => ({\n  namespace,\n  init,\n  dispatch: Object.fromEntries(\n    Object.entries(actions).map(([functionName, f]) => [\n      namespace + \".\" + functionName,\n      f,\n    ])\n  ),\n  ...Object.fromEntries(\n    Object.keys(actions).map((functionName) => [\n      functionName,\n      (payload = {}) => ({ type: namespace + \".\" + functionName, payload }),\n    ])\n  ),\n  ...actionCreators,\n  ...Object.fromEntries(\n    Object.entries(selectors).map(([name, f]) => [\n      name,\n      (...args) =>\n        (state) =>\n          f(state, ...args),\n    ])\n  ),\n});\n\nexport { StateShard, immer, initAll };\n\nfunction identity(a) {\n  return a;\n}\n\nfunction pipe(...fs) {\n  return (a) => {\n    for (const f of fs) {\n      a = f(a);\n    }\n    return a;\n  };\n}\n","import { StateShard } from \"./utils\";\n\nconst AppSync = StateShard(\n  \"AppSync\",\n  init,\n  { done, addReasons },\n  {},\n  { selectDone, selectReasons }\n);\n\nexport { AppSync };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  if (!state.data.sync) {\n    state.data.sync = {};\n  }\n\n  state.data.sync.done = false;\n  state.data.sync.reasons = [];\n}\n\n// Actions\n\nfunction done(state) {\n  const sync = select(state);\n  sync.done = true;\n}\n\nfunction addReasons(state, { reasons }) {\n  const sync = select(state);\n  sync.reasons = [...sync.reasons, ...reasons];\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.sync;\n}\n\nfunction selectDone(state) {\n  const sync = select(state);\n  return sync.done;\n}\n\nfunction selectReasons(state) {\n  const sync = select(state);\n  return sync.reasons;\n}\n","import { StateShard } from \"./utils\";\n\nconst CypherCodecs = StateShard(\n  \"CypherCodecs\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { CypherCodecs };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cypherCodecs = [];\n}\n\n// Actions\n\nfunction set(state, { cypherCodecs }) {\n  state.data.cypherCodecs = cypherCodecs;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cypherCodecs;\n}\n\nfunction selectByPage(state, page) {\n  const codecs = select(state);\n  return codecs.find((codec) => codec.Cypher.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Cyphers = StateShard(\n  \"Cyphers\",\n  init,\n  { setForPage },\n  {},\n  { selectByPage }\n);\n\nexport { Cyphers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cyphers = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, cypher }) {\n  const cyphers = select(state);\n  cyphers[page] = cypher;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cyphers;\n}\n\nfunction selectByPage(state, page) {\n  const cyphers = select(state);\n  return Object.values(cyphers)\n    .flat()\n    .find((cypher) => cypher.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Dragging = StateShard(\n  \"Dragging\",\n  init,\n  { activate, deactivate },\n  {},\n  { select }\n);\n\nexport { Dragging };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.dragging = false;\n}\n\n// Actions\n\nfunction activate(state) {\n  state.ui.dragging = true;\n}\n\nfunction deactivate(state) {\n  state.ui.dragging = false;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.dragging;\n}\n","import { StateShard } from \"./utils\";\n\nconst FactionModels = StateShard(\n  \"FactionModels\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { FactionModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factionModels = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, factionModels }) {\n  const models = select(state);\n  models[page] = factionModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factionModels;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Factions = StateShard(\"Factions\", init, { set }, {}, { select });\n\nexport { Factions };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factions = {};\n}\n\n// Actions\n\nfunction set(state, { factions }) {\n  state.data.factions = factions;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factions;\n}\n","import { StateShard } from \"./utils\";\n\nconst Lists = StateShard(\n  \"Lists\",\n  init,\n  {\n    addCard,\n    addEmptyList,\n    moveListBy,\n    removeCard,\n    removeList,\n    set,\n    setCardCortex,\n    setCardVehicleWeapon,\n    setCardWarjackWeapons,\n    setListTitle,\n    toggleCard,\n    moveCard,\n  },\n  {},\n  { select }\n);\n\nexport { Lists };\n\nconst oneEmptyList = [\n  {\n    title: \"\",\n    cards: [],\n  },\n];\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.lists = oneEmptyList;\n}\n\n// Actions\n\nfunction set(state, { lists }) {\n  state.ui.lists = lists.length > 0 ? lists : oneEmptyList;\n}\n\nfunction setListTitle(state, { listIndex, title }) {\n  const lists = select(state);\n  lists[listIndex].title = title;\n}\n\nfunction addCard(state, { pageId }) {\n  const lists = select(state);\n  const card = { pageId, hidden: true };\n  lists[0].cards.push(card);\n}\n\nfunction addEmptyList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 0, oneEmptyList[0]);\n}\n\nfunction removeCard(state, { source }) {\n  const lists = select(state);\n  lists[source.listIndex].cards.splice(source.cardIndex, 1);\n}\n\nfunction removeList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 1);\n  if (lists.length === 0) {\n    addEmptyList(state, { listIndex: 0 });\n  }\n}\n\nfunction moveListBy(state, { listIndex, by }) {\n  const lists = select(state);\n  if (\n    (by > 0 && listIndex + by < lists.length) ||\n    (by < 0 && listIndex + by >= 0)\n  ) {\n    const list = lists[listIndex];\n    lists.splice(listIndex, 1);\n    lists.splice(listIndex + by, 0, list);\n  }\n}\n\nfunction moveCard(state, { destination, source }) {\n  const lists = select(state);\n  const card = lists[source.listIndex].cards[source.cardIndex];\n  lists[source.listIndex].cards.splice(source.cardIndex, 1);\n  lists[destination.listIndex].cards.splice(destination.cardIndex, 0, card);\n}\n\nfunction toggleCard(state, { listIndex, cardIndex, pageId }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.hidden = !card.hidden;\n  }\n}\n\nfunction setCardCortex(state, { listIndex, cardIndex, pageId, cortexIds }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n\n  if (!pageId) {\n    delete card.cortexIds;\n  } else {\n    if (card.pageId === pageId) {\n      card.cortexIds = cortexIds;\n    }\n  }\n}\n\nfunction setCardWarjackWeapons(\n  state,\n  { listIndex, cardIndex, hardpointNameIndex, pageId, warjackWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!card.warjackWeaponIds) {\n      card.warjackWeaponIds = [];\n    }\n    if (!warjackWeaponId) {\n      delete card.warjackWeaponIds[hardpointNameIndex];\n    } else {\n      card.warjackWeaponIds[hardpointNameIndex] = warjackWeaponId;\n    }\n  }\n}\n\nfunction setCardVehicleWeapon(\n  state,\n  { listIndex, cardIndex, pageId, vehicleWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!vehicleWeaponId) {\n      delete card.vehicleWeaponId;\n    } else {\n      card.vehicleWeaponId = vehicleWeaponId;\n    }\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.lists;\n}\n","import { StateShard } from \"./utils\";\n\nconst PageIds = StateShard(\n  \"PageIds\",\n  init,\n  { addPages },\n  {},\n  { select, selectByPage, selectPageByPageId }\n);\n\nexport { PageIds };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.pageIds = {};\n}\n\n// Actions\n\nfunction addPages(state, { pageIdByTitle }) {\n  const pageIds = select(state);\n  for (const title in pageIdByTitle) {\n    pageIds[title] = pageIdByTitle[title];\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.pageIds;\n}\n\nfunction selectByPage(state, page) {\n  const pageIds = select(state);\n  return pageIds[page];\n}\n\nfunction selectPageByPageId(state, pageId) {\n  const pageIds = select(state);\n  return Object.entries(pageIds).reduce(\n    (acc, [page, statePageId]) =>\n      acc ? acc : statePageId === pageId ? page : acc,\n    undefined\n  );\n}\n","import { StateShard } from \"./utils\";\n\nconst Url = StateShard(\"Url\", init, { set }, {}, { select });\n\nexport { Url };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.url = \"\";\n}\n\n// Actions\n\nfunction set(state, { url }) {\n  state.ui.url = url;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.url;\n}\n","import { StateShard } from \"./utils\";\n\nconst WildCardModels = StateShard(\n  \"WildCardModels\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { WildCardModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.wildCardModels = {};\n}\n\n// Actions\n\nfunction set(state, { wildCards }) {\n  const models = select(state);\n  for (const wildCard of wildCards) {\n    models[wildCard.faction] = wildCard.models;\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.wildCardModels;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Models = StateShard(\n  \"Models\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { Models };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.models = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, model }) {\n  const models = select(state);\n  models[page] = model;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.models;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst VehicleWeapons = StateShard(\n  \"VehicleWeapons\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { VehicleWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.vehicleWeapons = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, vehicleWeapon }) {\n  const vehicleWeapons = select(state);\n  vehicleWeapons[page] = vehicleWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.vehicleWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const vehicleWeapons = select(state);\n  return vehicleWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst WarjackWeapons = StateShard(\n  \"WarjackWeapons\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { WarjackWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.warjackWeapons = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, warjackWeapon }) {\n  const warjackWeapons = select(state);\n  warjackWeapons[page] = warjackWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.warjackWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const warjackWeapons = select(state);\n  return warjackWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreModels = StateShard(\n  \"CadreModels\",\n  init,\n  { set, setForCadrePageId },\n  {},\n  { select, selectCadreModelsByPageId }\n);\n\nexport { CadreModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreModels = {};\n}\n\n// Actions\n\nfunction set(state, { cadreModels }) {\n  state.data.cadreModels = cadreModels;\n}\n\nfunction setForCadrePageId(state, { cadrePageId, cadreModels }) {\n  select(state)[cadrePageId] = cadreModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreModels;\n}\n\nfunction selectCadreModelsByPageId(state, pageId) {\n  const cadreModels = select(state);\n  return cadreModels[pageId];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreCategoryMembers = StateShard(\n  \"CadreCategoryMembers\",\n  init,\n  { set },\n  {},\n  { select }\n);\n\nexport { CadreCategoryMembers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreCategoryMembers = {};\n}\n\n// Actions\n\nfunction set(state, { cadreCategoryMembers }) {\n  state.data.cadreCategoryMembers = cadreCategoryMembers;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreCategoryMembers;\n}\n","import \"./App.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Badge,\n  Card,\n  Col,\n  Drawer,\n  Input,\n  Layout,\n  Menu,\n  Row,\n  Select,\n  Tooltip,\n} from \"antd\";\nimport {\n  CaretDownOutlined,\n  DeleteOutlined,\n  DownSquareOutlined,\n  HeartFilled,\n  MenuUnfoldOutlined,\n  PlusSquareOutlined,\n  SyncOutlined,\n  TeamOutlined,\n  UpSquareOutlined,\n} from \"@ant-design/icons\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\nimport CompoundArmor from \"./img/advantages/Compound_Armor.png\";\nimport Flight from \"./img/advantages/Flight.png\";\nimport Pathfinder from \"./img/advantages/Pathfinder.png\";\nimport Revelator from \"./img/advantages/Revelator.png\";\nimport Stealth from \"./img/advantages/Stealth.png\";\nimport WeaponExpert from \"./img/advantages/Weapon_Expert.png\";\nimport AeternusContinuum from \"./img/factions/Aeternus_Continuum.png\";\nimport Fallback from \"./img/factions/Fallback.png\";\nimport Empyrean from \"./img/factions/Empyrean.png\";\nimport IronStarAlliance from \"./img/factions/Iron_Star_Alliance.png\";\nimport LostLegion from \"./img/factions/Lost_Legion.png\";\nimport MarcherWorlds from \"./img/factions/Marcher_Worlds.png\";\nimport WildCard from \"./img/factions/Wild_Card.png\";\nimport AeternusContinuumCharged from \"./img/faction_icons/Aeternus_Continuum_Charged.png\";\nimport AeternusContinuumSpike from \"./img/faction_icons/Aeternus_Continuum_Spike.png\";\nimport EmpyreanCharged from \"./img/faction_icons/Empyrean_Charged.png\";\nimport EmpyreanSpike from \"./img/faction_icons/Empyrean_Spike.png\";\nimport IronStarAllianceCharged from \"./img/faction_icons/Iron_Star_Alliance_Charged.png\";\nimport IronStarAllianceSpike from \"./img/faction_icons/Iron_Star_Alliance_Spike.png\";\nimport MarcherWorldsCharged from \"./img/faction_icons/Marcher_Worlds_Charged.png\";\nimport MarcherWorldsSpike from \"./img/faction_icons/Marcher_Worlds_Spike.png\";\nimport WildCardCharged from \"./img/faction_icons/Wild_Card_Charged.png\";\nimport WildCardSpike from \"./img/faction_icons/Wild_Card_Spike.png\";\nimport BlastWeapon from \"./img/weapon_qualities/Blast_Weapon.png\";\nimport Corrosion from \"./img/weapon_qualities/Corrosion.png\";\nimport Fire from \"./img/weapon_qualities/Fire.png\";\nimport LockDown from \"./img/weapon_qualities/Lock_Down.png\";\nimport Repulsor from \"./img/weapon_qualities/Repulsor.png\";\nimport SprayWeapon from \"./img/weapon_qualities/Spray_Weapon.png\";\nimport Strafe from \"./img/weapon_qualities/Strafe.png\";\nimport SystemFailure from \"./img/weapon_qualities/System_Failure.png\";\nimport { CardDragEnded, CardDragStarted, MenuItemClicked } from \"../messages\";\nimport { AppSync } from \"../state/AppSync\";\nimport { CypherCodecs } from \"../state/CypherCodecs\";\nimport { Cyphers } from \"../state/Cyphers\";\nimport { Dragging } from \"../state/Dragging\";\nimport { FactionModels } from \"../state/FactionModels\";\nimport { Factions } from \"../state/Factions\";\nimport { Lists } from \"../state/Lists\";\nimport { PageIds } from \"../state/PageIds\";\nimport { Url } from \"../state/Url\";\nimport { WildCardModels } from \"../state/WildCardModels\";\nimport { Models } from \"../state/Models\";\nimport { VehicleWeapons } from \"../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../state/WarjackWeapons\";\nimport { CadreModels } from \"../state/CadreModels\";\nimport { CadreCategoryMembers } from \"../state/CadreCategoryMembers\";\n\nconst { Header, Footer, Content } = Layout;\nconst { TextArea } = Input;\nconst { SubMenu } = Menu;\n\nfunction FactionImage({ faction, style, height = \"35px\" }) {\n  switch (faction) {\n    case \"Aeternus_Continuum\":\n      return (\n        <img\n          src={AeternusContinuum}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Empyrean\":\n      return <img src={Empyrean} height={height} alt={faction} style={style} />;\n    case \"Iron_Star_Alliance\":\n      return (\n        <img\n          src={IronStarAlliance}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Lost_Legion\":\n      return (\n        <img src={LostLegion} height={height} alt={faction} style={style} />\n      );\n    case \"Marcher_Worlds\":\n      return (\n        <img src={MarcherWorlds} height={height} alt={faction} style={style} />\n      );\n    case \"Wild_Card\":\n      return <img src={WildCard} height={height} alt={faction} style={style} />;\n    case \"Universal\":\n      return <img src={Fallback} height={height} alt={faction} style={style} />;\n    default:\n      return <img src={Fallback} height={height} alt={faction} style={style} />;\n  }\n}\n\nfunction Spike({ faction, style: style2, height = \"18px\" }) {\n  const style = { ...style2, marginTop: \"-4px\" };\n  switch (faction) {\n    case \"Aeternus_Continuum\":\n      return (\n        <img\n          src={AeternusContinuumSpike}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Empyrean\":\n      return (\n        <img src={EmpyreanSpike} height={height} alt={faction} style={style} />\n      );\n    case \"Iron_Star_Alliance\":\n      return (\n        <img\n          src={IronStarAllianceSpike}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Marcher_Worlds\":\n      return (\n        <img\n          src={MarcherWorldsSpike}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Wild_Card\":\n      return (\n        <img src={WildCardSpike} height={height} alt={faction} style={style} />\n      );\n    default:\n      return (\n        <img src={WildCardSpike} height={height} alt={faction} style={style} />\n      );\n  }\n}\n\nfunction Charged({ faction, style: style2, height = \"18px\" }) {\n  const style = { ...style2, marginTop: \"-4px\" };\n  switch (faction) {\n    case \"Aeternus_Continuum\":\n      return (\n        <img\n          src={AeternusContinuumCharged}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Empyrean\":\n      return (\n        <img\n          src={EmpyreanCharged}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Iron_Star_Alliance\":\n      return (\n        <img\n          src={IronStarAllianceCharged}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Marcher_Worlds\":\n      return (\n        <img\n          src={MarcherWorldsCharged}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    case \"Wild_Card\":\n      return (\n        <img\n          src={WildCardCharged}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n    default:\n      return (\n        <img\n          src={WildCardCharged}\n          height={height}\n          alt={faction}\n          style={style}\n        />\n      );\n  }\n}\n\nfunction AdvantageImage({ advantage, style, height = \"30px\" }) {\n  switch (advantage) {\n    case \"Compound Armor\":\n      return (\n        <img\n          src={CompoundArmor}\n          className=\"metallic-img\"\n          alt={advantage}\n          height={height}\n          style={style}\n        />\n      );\n    case \"Flight\":\n      return (\n        <img\n          src={Flight}\n          className=\"metallic-img\"\n          alt={advantage}\n          height={height}\n          style={style}\n        />\n      );\n    case \"Pathfinder\":\n      return (\n        <img\n          src={Pathfinder}\n          className=\"metallic-img\"\n          alt={advantage}\n          height={height}\n          style={style}\n        />\n      );\n    case \"Revelator\":\n      return (\n        <img\n          src={Revelator}\n          className=\"metallic-img\"\n          alt={advantage}\n          height={height}\n          style={style}\n        />\n      );\n    case \"Stealth\":\n      return (\n        <img\n          src={Stealth}\n          className=\"metallic-img\"\n          alt={advantage}\n          height={height}\n          style={style}\n        />\n      );\n    case \"Weapon Expert\":\n      return (\n        <img\n          src={WeaponExpert}\n          className=\"metallic-img\"\n          alt={advantage}\n          height={height}\n          style={style}\n        />\n      );\n    default:\n      return <div className=\"metallic-circle\"></div>;\n  }\n}\n\nconst weaponQualities = {\n  \"Blast Weapon\": BlastWeapon,\n  Corrosion,\n  Fire,\n  \"Lock Down\": LockDown,\n  Repulsor,\n  \"Spray Weapon\": SprayWeapon,\n  Strafe,\n  \"System Failure\": SystemFailure,\n};\n\nfunction WeaponQuality({ weaponQuality, style, height = \"16px\" }) {\n  const src = weaponQualities[weaponQuality];\n\n  if (src) {\n    return (\n      <img\n        src={src}\n        className=\"metallic-img-tiny\"\n        alt={weaponQuality}\n        height={height}\n        style={style}\n      />\n    );\n  }\n\n  return <></>;\n}\n\nfunction AppPresentation({\n  initialized,\n  syncReasons,\n  factionModels,\n  wildCardModels,\n  cypherCodecs,\n  dragging,\n  menuItemClicked,\n  allMenuItemsClicked,\n  dragEnd,\n  dragStart,\n  lists,\n  toggleCard,\n  removeList,\n  addEmptyList,\n  moveListBy,\n  setListTitle,\n  setUrl,\n  url,\n  bookmark,\n  open,\n  setCardCortex,\n  setCardWarjackWeapons,\n  setCardVehicleWeapon,\n  factions,\n  vehicleWeapons,\n  warjackWeapons,\n  cadres,\n}) {\n  const [openDrawer, setOpenDrawer] = React.useState(\"\");\n\n  const onOpenChangeDrawers = (keys) => {\n    if (keys.length > 0) {\n      const key = keys[0];\n      if (key === openDrawer) {\n        setOpenDrawer(\"\");\n      } else {\n        setOpenDrawer(keys[0]);\n      }\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <Layout>\n        <Layout>\n          <DragDropContext onDragStart={dragStart} onDragEnd={dragEnd}>\n            <Header>\n              <Droppable key={\"trash_header\"} droppableId={\"trash_header\"}>\n                {(provided) => (\n                  <div ref={provided.innerRef} {...provided.droppableProps}>\n                    {dragging ? (\n                      <div\n                        style={{\n                          animation:\n                            \"shake 0.82s cubic-bezier(.36,.07,.19,.97) both\",\n                          color: \"white\",\n                        }}\n                      >\n                        <DeleteOutlined />\n                      </div>\n                    ) : (\n                      <a className=\"logo\" href=\"/\">\n                        WARFASTER\n                      </a>\n                    )}\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </Header>\n            {!initialized ? (\n              <Content>\n                <Layout>\n                  <Row>\n                    <Col xs={24} sm={12} md={12} lg={12} xl={8} xxl={8}>\n                      <div className=\"cards\" key=\"cards0\">\n                        <div style={{ cursor: \"pointer\" }} className=\"header\">\n                          <Row>\n                            <Col span={16} className=\"army-list-title\">\n                              <TextArea\n                                value={\"Setting up Warfaster\"}\n                                maxLength={30}\n                                autoSize\n                              />\n                            </Col>\n                            <Col span={8} className=\"faction-icons\">\n                              <SyncOutlined\n                                spin\n                                style={{\n                                  color: \"#d1c5b1\",\n                                  fontSize: \"23px\",\n                                  margin: \"3px 10px 0 0\",\n                                }}\n                              />\n                            </Col>\n                          </Row>\n                        </div>\n\n                        <div>\n                          {syncReasons.map(({ reason, description }, index) => (\n                            <div className=\"body\" key={`reason${index}`}>\n                              <Card hoverable className=\"card\">\n                                <Card.Meta\n                                  avatar={\n                                    <div\n                                      style={{\n                                        height: \"25px\",\n                                        width: \"35px\",\n                                        textAlign: \"center\",\n                                      }}\n                                    >\n                                      <SyncOutlined\n                                        spin\n                                        style={{\n                                          color: \"#d1c5b1\",\n                                          fontSize: \"35px\",\n                                        }}\n                                      />\n                                    </div>\n                                  }\n                                  title={\n                                    <>\n                                      <div>{reason}</div>\n                                      <div className=\"card-type\">\n                                        {description}\n                                      </div>\n                                    </>\n                                  }\n                                />\n                              </Card>\n                            </div>\n                          ))}\n                        </div>\n                        <div className=\"footer\">\n                          <Badge\n                            size=\"small\"\n                            key=\"_badge\"\n                            count={syncReasons.length}\n                            offset={[10, 5]}\n                          >\n                            Loading:\n                          </Badge>\n                        </div>\n                      </div>\n                    </Col>\n                  </Row>\n                </Layout>\n              </Content>\n            ) : (\n              <>\n                <Content>\n                  <Menu\n                    id=\"factions\"\n                    openKeys={[]}\n                    onOpenChange={onOpenChangeDrawers}\n                    mode=\"horizontal\"\n                    triggerSubMenuAction=\"click\"\n                  >\n                    {factionModels.map(([factionName, faction, models]) => (\n                      <SubMenu\n                        key={faction}\n                        icon={<FactionImage faction={faction} />}\n                      ></SubMenu>\n                    ))}\n                  </Menu>\n                </Content>\n                <Content>\n                  <Layout>\n                    <Row gutter={16}>\n                      {lists.map(({ title, cards }, listIndex) => (\n                        <Col\n                          key={`lists_col_${listIndex}`}\n                          xs={24}\n                          sm={12}\n                          md={12}\n                          lg={12}\n                          xl={8}\n                          xxl={8}\n                        >\n                          <div className=\"cards\" key={`cards${listIndex}`}>\n                            <Tooltip\n                              placement=\"top\"\n                              color=\"transparent\"\n                              trigger=\"click\"\n                              align={{ offset: [0, 17] }}\n                              title={\n                                <div className=\"ant-tooltip-inner-box\">\n                                  <div\n                                    onClick={removeList(listIndex)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      paddingRight: \"4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <DeleteOutlined />\n                                  </div>\n                                  <div\n                                    onClick={addEmptyList(listIndex)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      padding: \"0 4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <PlusSquareOutlined />\n                                  </div>\n                                  <div\n                                    onClick={moveListBy(listIndex, -1)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      padding: \"0 4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <UpSquareOutlined />\n                                  </div>\n                                  <div\n                                    onClick={moveListBy(listIndex, 1)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      paddingLeft: \"4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <DownSquareOutlined />\n                                  </div>\n                                </div>\n                              }\n                            >\n                              <div\n                                style={{ cursor: \"pointer\" }}\n                                className=\"header\"\n                              >\n                                <Row>\n                                  <Col span={16} className=\"army-list-title\">\n                                    <TextArea\n                                      placeholder={generateListNamePlaceholder(\n                                        cards,\n                                        factions,\n                                        \"Name your list\"\n                                      )}\n                                      value={title}\n                                      maxLength={30}\n                                      autoSize\n                                      onChange={setListTitle(listIndex)}\n                                    />\n                                  </Col>\n                                  <Col span={8} className=\"faction-icons\">\n                                    {Object.entries(\n                                      cards.reduce(\n                                        (acc, card) => ({\n                                          ...acc,\n                                          ...(card.faction\n                                            ? {\n                                                [card.faction]:\n                                                  (acc[card.faction] || 0) + 1,\n                                              }\n                                            : {\n                                                Universal:\n                                                  (acc.Universal || 0) + 1,\n                                              }),\n                                        }),\n                                        {}\n                                      )\n                                    )\n                                      .sort()\n                                      .map(([faction, count], i) => (\n                                        <Badge\n                                          size=\"small\"\n                                          key={`badge${i}`}\n                                          count={count}\n                                          offset={[0, 10]}\n                                        >\n                                          <FactionImage faction={faction} />\n                                        </Badge>\n                                      ))}\n                                  </Col>\n                                </Row>\n                              </div>\n                            </Tooltip>\n\n                            <Droppable\n                              key={`cards_${listIndex}`}\n                              droppableId={`cards_${listIndex}`}\n                            >\n                              {(provided) => (\n                                <div\n                                  ref={provided.innerRef}\n                                  {...provided.droppableProps}\n                                >\n                                  {cards.map(\n                                    (\n                                      {\n                                        card,\n                                        hidden,\n                                        type,\n                                        title,\n                                        page,\n                                        pageId,\n                                        cortexIds,\n                                        vehicleWeaponId,\n                                        warjackWeaponIds,\n                                        subtype,\n                                        faction,\n                                        details,\n                                      },\n                                      cardIndex\n                                    ) => (\n                                      <Draggable\n                                        key={`${page}_${listIndex}_${cardIndex}`}\n                                        draggableId={`${page}_${listIndex}_${cardIndex}`}\n                                        index={cardIndex}\n                                      >\n                                        {(provided) => (\n                                          <div\n                                            className=\"body\"\n                                            ref={provided.innerRef}\n                                            {...provided.draggableProps}\n                                            {...provided.dragHandleProps}\n                                          >\n                                            <Card\n                                              hoverable\n                                              className={[\n                                                \"card\",\n                                                faction,\n                                                type,\n                                              ]}\n                                            >\n                                              <Card.Meta\n                                                onClick={toggleCard(\n                                                  listIndex,\n                                                  cardIndex,\n                                                  pageId,\n                                                  card\n                                                )}\n                                                avatar={\n                                                  faction ? (\n                                                    <div\n                                                      style={{\n                                                        height: \"25px\",\n                                                        width: \"35px\",\n                                                        textAlign: \"center\",\n                                                      }}\n                                                    >\n                                                      {!details ||\n                                                      !details.deploymentCost ? (\n                                                        <FactionImage\n                                                          faction={faction}\n                                                        />\n                                                      ) : (\n                                                        <>\n                                                          <FactionImage\n                                                            faction={faction}\n                                                            height=\"23px\"\n                                                          />\n                                                          <div className=\"deployment-cost\">\n                                                            DC{\" \"}\n                                                            {\n                                                              details.deploymentCost\n                                                            }\n                                                          </div>\n                                                        </>\n                                                      )}\n                                                    </div>\n                                                  ) : (\n                                                    <FactionImage faction=\"Universal\" />\n                                                  )\n                                                }\n                                                title={\n                                                  <>\n                                                    <div>{title}</div>\n                                                    <div className=\"card-type\">\n                                                      {(faction || \"\").replace(\n                                                        /_/g,\n                                                        \" \"\n                                                      )}\n                                                      {subtype\n                                                        ? \" \" + subtype\n                                                        : \"\"}\n                                                      {type ? \" \" + type : \"\"}\n                                                    </div>\n                                                    <div>\n                                                      <span className=\"subtitle\">\n                                                        {[\n                                                          ...(!details ||\n                                                          !details.vehicleWeaponSelection ||\n                                                          !vehicleWeaponName(\n                                                            details.vehicleWeaponSelection,\n                                                            vehicleWeaponId\n                                                          )\n                                                            ? []\n                                                            : [\n                                                                vehicleWeaponName(\n                                                                  details.vehicleWeaponSelection,\n                                                                  vehicleWeaponId\n                                                                ),\n                                                              ]),\n                                                          ...(!details ||\n                                                          !details.cortexSelections ||\n                                                          !cortexName(\n                                                            details.cortexSelections,\n                                                            cortexIds\n                                                          )\n                                                            ? []\n                                                            : [\n                                                                cortexName(\n                                                                  details.cortexSelections,\n                                                                  cortexIds\n                                                                ),\n                                                              ]),\n                                                          ...(!details ||\n                                                          !details.warjackWeaponSelections ||\n                                                          !warjackWeaponIds ||\n                                                          warjackWeaponIds.length ===\n                                                            0\n                                                            ? []\n                                                            : warjackWeaponNamesSubtitle(\n                                                                details.warjackWeaponSelections,\n                                                                warjackWeaponIds\n                                                              )),\n                                                        ].join(\", \")}\n                                                      </span>\n                                                    </div>\n                                                  </>\n                                                }\n                                              />\n                                              {hidden ? (\n                                                <></>\n                                              ) : !details ? (\n                                                <div\n                                                  style={{\n                                                    margin: \"10px 0\",\n                                                    textAlign: \"center\",\n                                                  }}\n                                                >\n                                                  <SyncOutlined\n                                                    spin\n                                                    style={{ fontSize: \"23px\" }}\n                                                  />\n                                                </div>\n                                              ) : (\n                                                <div className=\"card-content\">\n                                                  {!details.modelStats ||\n                                                  Object.keys(\n                                                    details.modelStats\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"model-stats\">\n                                                      {Object.entries(\n                                                        details.modelStats\n                                                      ).map(\n                                                        (\n                                                          [name, stat],\n                                                          index\n                                                        ) => (\n                                                          <div\n                                                            key={`${name}_stat`}\n                                                          >\n                                                            <div>{name}</div>\n                                                            <div>{stat}</div>\n                                                          </div>\n                                                        )\n                                                      )}\n                                                    </div>\n                                                  )}\n                                                  {!details.cortexSelections ||\n                                                  Object.entries(\n                                                    details.cortexSelections\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <Select\n                                                        suffixIcon={\n                                                          <CaretDownOutlined />\n                                                        }\n                                                        className=\"select-warjack-cortex\"\n                                                        defaultValue=\"none\"\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardCortex(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !cortexIds\n                                                            ? \"none\"\n                                                            : cortexName(\n                                                                details.cortexSelections,\n                                                                cortexIds\n                                                              )\n                                                        }\n                                                        getPopupContainer={() =>\n                                                          document.querySelectorAll(\n                                                            \".card\"\n                                                          )[cardIndex]\n                                                        }\n                                                      >\n                                                        <Select.Option\n                                                          key={\"cortex_-1\"}\n                                                          label={undefined}\n                                                          value=\"none\"\n                                                          onClick={(event) =>\n                                                            event.stopPropagation()\n                                                          }\n                                                        >\n                                                          <div>\n                                                            <h3>\n                                                              Select Cortex\n                                                            </h3>\n                                                          </div>\n                                                        </Select.Option>\n                                                        {Object.entries(\n                                                          details.cortexSelections\n                                                        ).map(\n                                                          (\n                                                            [\n                                                              cortex,\n                                                              advantages,\n                                                            ],\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`cortex_${index}`}\n                                                              label={Object.values(\n                                                                advantages\n                                                              ).map(\n                                                                ({\n                                                                  categoryId,\n                                                                }) => categoryId\n                                                              )}\n                                                              value={cortex}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              <h3>{cortex}</h3>\n                                                              {Object.entries(\n                                                                advantages\n                                                              ).map(\n                                                                (\n                                                                  [\n                                                                    rule,\n                                                                    { text },\n                                                                  ],\n                                                                  advantageIndex\n                                                                ) => (\n                                                                  <div\n                                                                    key={`cortex_${index}_advantage_${advantageIndex}`}\n                                                                    className=\"model-cortex-special-rules\"\n                                                                  >\n                                                                    <span>\n                                                                      {markChargedOrSpike(\n                                                                        faction,\n                                                                        text\n                                                                      )}\n                                                                      {rule}\n                                                                    </span>{\" \"}\n                                                                    <span>\n                                                                      - {text}\n                                                                    </span>\n                                                                  </div>\n                                                                )\n                                                              )}\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </>\n                                                  )}\n                                                  {!details.weaponPoints ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"special-rules\">\n                                                      <span>Weapon Points</span>{\" \"}\n                                                      <span>\n                                                        - {details.weaponPoints}\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                  {!details.hardpointNames ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      {details.hardpointNames.map(\n                                                        (\n                                                          hardpointName,\n                                                          hardpointNameIndex\n                                                        ) =>\n                                                          !details.warjackWeaponSelections ||\n                                                          Object.keys(\n                                                            details.warjackWeaponSelections\n                                                          ).length === 0 ? (\n                                                            <></>\n                                                          ) : (\n                                                            <div\n                                                              key={`warjack_weapon_${hardpointNameIndex}`}\n                                                            >\n                                                              <Select\n                                                                suffixIcon={\n                                                                  <CaretDownOutlined />\n                                                                }\n                                                                className=\"select-warjack-weapon\"\n                                                                defaultValue=\"none\"\n                                                                onClick={(\n                                                                  event\n                                                                ) =>\n                                                                  event.stopPropagation()\n                                                                }\n                                                                onSelect={setCardWarjackWeapons(\n                                                                  listIndex,\n                                                                  cardIndex,\n                                                                  hardpointNameIndex,\n                                                                  pageId\n                                                                )}\n                                                                value={\n                                                                  !warjackWeaponIds ||\n                                                                  !warjackWeaponIds[\n                                                                    hardpointNameIndex\n                                                                  ]\n                                                                    ? \"none\"\n                                                                    : warjackWeaponNames(\n                                                                        faction,\n                                                                        warjackWeapons,\n                                                                        details.warjackWeaponSelections,\n                                                                        warjackWeaponIds[\n                                                                          hardpointNameIndex\n                                                                        ]\n                                                                      )\n                                                                }\n                                                                getPopupContainer={() =>\n                                                                  document.querySelectorAll(\n                                                                    \".card\"\n                                                                  )[cardIndex]\n                                                                }\n                                                              >\n                                                                <Select.Option\n                                                                  key={`warjack_weapon_${hardpointNameIndex}_-1`}\n                                                                  label={\n                                                                    undefined\n                                                                  }\n                                                                  value=\"none\"\n                                                                  onClick={(\n                                                                    event\n                                                                  ) =>\n                                                                    event.stopPropagation()\n                                                                  }\n                                                                >\n                                                                  <div\n                                                                    className=\"model-weapons\"\n                                                                    style={{\n                                                                      height:\n                                                                        \"52px\",\n                                                                    }}\n                                                                  ></div>\n                                                                </Select.Option>\n                                                                {Object.values(\n                                                                  details.warjackWeaponSelections\n                                                                )\n                                                                  .filter(\n                                                                    ({\n                                                                      location,\n                                                                    }) =>\n                                                                      location ===\n                                                                      hardpointName\n                                                                  )\n                                                                  .map(\n                                                                    (\n                                                                      {\n                                                                        name,\n                                                                        page,\n                                                                        pageId,\n                                                                        cost,\n                                                                        location,\n                                                                      },\n                                                                      index\n                                                                    ) => (\n                                                                      <Select.Option\n                                                                        key={`warjack_weapon_${hardpointNameIndex}_${index}`}\n                                                                        label={\n                                                                          pageId\n                                                                        }\n                                                                        value={\n                                                                          name\n                                                                        }\n                                                                        onClick={(\n                                                                          event\n                                                                        ) =>\n                                                                          event.stopPropagation()\n                                                                        }\n                                                                      >\n                                                                        <>\n                                                                          {warjackWeaponNames(\n                                                                            faction,\n                                                                            warjackWeapons,\n                                                                            details.warjackWeaponSelections,\n                                                                            pageId\n                                                                          )}\n                                                                        </>\n                                                                      </Select.Option>\n                                                                    )\n                                                                  )}\n                                                              </Select>\n                                                            </div>\n                                                          )\n                                                      )}\n                                                    </>\n                                                  )}\n                                                  {!details.vehicleWeaponSelection ||\n                                                  details.vehicleWeaponSelection\n                                                    .length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div key=\"vehicle_weapon_selection\">\n                                                      <Select\n                                                        suffixIcon={\n                                                          <CaretDownOutlined />\n                                                        }\n                                                        className=\"select-warjack-weapon\"\n                                                        defaultValue=\"none\"\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardVehicleWeapon(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !vehicleWeaponId ||\n                                                          !details ||\n                                                          !details.vehicleWeaponSelection\n                                                            ? \"none\"\n                                                            : vehicleWeaponName2(\n                                                                faction,\n                                                                vehicleWeapons,\n                                                                details.vehicleWeaponSelection,\n                                                                vehicleWeaponId\n                                                              )\n                                                        }\n                                                        getPopupContainer={() =>\n                                                          document.querySelectorAll(\n                                                            \".card\"\n                                                          )[cardIndex]\n                                                        }\n                                                      >\n                                                        <Select.Option\n                                                          key={\n                                                            \"vehicle_weapon_selection_-1\"\n                                                          }\n                                                          label={undefined}\n                                                          value=\"none\"\n                                                          onClick={(event) =>\n                                                            event.stopPropagation()\n                                                          }\n                                                        >\n                                                          <div\n                                                            className=\"model-weapons\"\n                                                            style={{\n                                                              height: \"52px\",\n                                                            }}\n                                                          ></div>\n                                                        </Select.Option>\n                                                        {details.vehicleWeaponSelection.map(\n                                                          (\n                                                            {\n                                                              text,\n                                                              page,\n                                                              pageId,\n                                                            },\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`vehicle_weapon_selection_${index}`}\n                                                              label={pageId}\n                                                              value={text}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              {vehicleWeaponName2(\n                                                                faction,\n                                                                vehicleWeapons,\n                                                                details.vehicleWeaponSelection,\n                                                                pageId\n                                                              )}\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </div>\n                                                  )}\n                                                  {!details.weapons ||\n                                                  details.weapons.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    details.weapons.map(\n                                                      (weapon, index) => (\n                                                        <React.Fragment\n                                                          key={`weapon_number_${index}`}\n                                                        >\n                                                          <div className=\"model-weapons\">\n                                                            <div>\n                                                              {weapon[\n                                                                \"Attack Type\"\n                                                              ] === \"Melee\" ? (\n                                                                <img\n                                                                  className=\"faction-melee\"\n                                                                  alt=\" \"\n                                                                />\n                                                              ) : (\n                                                                <img\n                                                                  className=\"faction-ranged\"\n                                                                  alt=\" \"\n                                                                />\n                                                              )}\n                                                            </div>\n                                                            <div>\n                                                              <div>\n                                                                {weapon[\"Name\"]}\n                                                                {Object.keys(\n                                                                  weapon.specialRules ||\n                                                                    {}\n                                                                ).map(\n                                                                  (\n                                                                    rule,\n                                                                    index2\n                                                                  ) => (\n                                                                    <WeaponQuality\n                                                                      key={`weapon_number_${index}_rule_${index2}`}\n                                                                      weaponQuality={\n                                                                        rule\n                                                                      }\n                                                                    />\n                                                                  )\n                                                                )}\n                                                              </div>\n                                                              <div>\n                                                                {\n                                                                  weapon[\n                                                                    \"Damage Type\"\n                                                                  ]\n                                                                }\n                                                              </div>\n                                                            </div>\n                                                            <div>\n                                                              <div>RNG</div>\n                                                              <div>\n                                                                {\n                                                                  weapon[\n                                                                    \"Range\"\n                                                                  ]\n                                                                }\n                                                              </div>\n                                                            </div>\n                                                            <div>\n                                                              <div>POW</div>\n                                                              <div>\n                                                                {weapon[\"POW\"]}\n                                                              </div>\n                                                            </div>\n                                                          </div>\n                                                          {!weapon.specialRules ? (\n                                                            <></>\n                                                          ) : (\n                                                            Object.entries(\n                                                              weapon.specialRules\n                                                            )\n                                                              .filter(\n                                                                ([rule]) =>\n                                                                  !weaponQualities[\n                                                                    rule\n                                                                  ]\n                                                              )\n                                                              .map(\n                                                                (\n                                                                  [rule, text],\n                                                                  ruleIndex\n                                                                ) => (\n                                                                  <div\n                                                                    key={`weapon_number_${index}_${ruleIndex}`}\n                                                                    className=\"model-weapons-special-rules\"\n                                                                  >\n                                                                    <span>\n                                                                      {markChargedOrSpike(\n                                                                        faction,\n                                                                        text\n                                                                      )}\n                                                                      {rule}\n                                                                    </span>{\" \"}\n                                                                    <span>\n                                                                      - {text}\n                                                                    </span>\n                                                                  </div>\n                                                                )\n                                                              )\n                                                          )}\n                                                        </React.Fragment>\n                                                      )\n                                                    )\n                                                  )}\n                                                  <div className=\"card-icons\">\n                                                    {!details.wildCardFactions ||\n                                                    Object.values(\n                                                      details.wildCardFactions\n                                                    ).length === 0 ? (\n                                                      <></>\n                                                    ) : (\n                                                      Object.values(\n                                                        details.wildCardFactions\n                                                      ).map(\n                                                        ({ page }, index) => (\n                                                          <FactionImage\n                                                            key={`wild_card_faction_${index}`}\n                                                            faction={page}\n                                                            height=\"30px\"\n                                                            style={{\n                                                              filter:\n                                                                \"drop-shadow(0px 3px 6px hsl(200,100%,25%))\",\n                                                            }}\n                                                          />\n                                                        )\n                                                      )\n                                                    )}\n                                                    {!details.baseSize ? (\n                                                      <></>\n                                                    ) : (\n                                                      <div className=\"metallic-circle\">\n                                                        {details.baseSize.replace(\n                                                          \" mm\",\n                                                          \"\"\n                                                        )}\n                                                      </div>\n                                                    )}\n                                                    {!details.health ? (\n                                                      <></>\n                                                    ) : (\n                                                      <div className=\"metallic-circle\">\n                                                        <HeartFilled\n                                                          style={{\n                                                            fontSize: \"0.8em\",\n                                                          }}\n                                                        />\n                                                        {details.health}\n                                                      </div>\n                                                    )}\n                                                    {!details.squadSize ? (\n                                                      <></>\n                                                    ) : (\n                                                      <div className=\"metallic-circle\">\n                                                        <TeamOutlined\n                                                          style={{\n                                                            fontSize: \"0.8em\",\n                                                          }}\n                                                        />\n                                                        {details.squadSize}\n                                                      </div>\n                                                    )}\n                                                    {!details.advantages ||\n                                                    Object.entries(\n                                                      details.advantages\n                                                    ).length === 0 ? (\n                                                      <></>\n                                                    ) : (\n                                                      Object.entries(\n                                                        details.advantages\n                                                      ).map(\n                                                        (\n                                                          [name, text],\n                                                          index\n                                                        ) => (\n                                                          <AdvantageImage\n                                                            key={`advantage_${index}`}\n                                                            advantage={name}\n                                                          />\n                                                        )\n                                                      )\n                                                    )}\n                                                    {!details.chassisAdvantages ||\n                                                    Object.entries(\n                                                      details.chassisAdvantages\n                                                    ).length === 0 ? (\n                                                      <></>\n                                                    ) : (\n                                                      Object.entries(\n                                                        details.chassisAdvantages\n                                                      ).map(\n                                                        (\n                                                          [name, text],\n                                                          index\n                                                        ) => (\n                                                          <AdvantageImage\n                                                            key={`advantage_${index}`}\n                                                            advantage={name}\n                                                          />\n                                                        )\n                                                      )\n                                                    )}\n                                                  </div>\n                                                  {!details.specialRules ||\n                                                  Object.entries(\n                                                    details.specialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    Object.entries(\n                                                      details.specialRules\n                                                    ).map(\n                                                      ([rule, text], index) => (\n                                                        <div\n                                                          key={`special_rules_${index}`}\n                                                          className=\"special-rules\"\n                                                        >\n                                                          <span>\n                                                            {markChargedOrSpike(\n                                                              faction,\n                                                              text\n                                                            )}\n                                                            {rule}\n                                                          </span>{\" \"}\n                                                          <span>- {text}</span>\n                                                        </div>\n                                                      )\n                                                    )\n                                                  )}\n                                                  {!details.chassisSpecialRules ||\n                                                  Object.entries(\n                                                    details.chassisSpecialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    Object.entries(\n                                                      details.chassisSpecialRules\n                                                    ).map(\n                                                      ([rule, text], index) => (\n                                                        <div\n                                                          key={`chassis_special_rules_${index}`}\n                                                          className=\"special-rules\"\n                                                        >\n                                                          <span>\n                                                            {markChargedOrSpike(\n                                                              faction,\n                                                              text\n                                                            )}\n                                                            {rule}\n                                                          </span>{\" \"}\n                                                          <span>- {text}</span>\n                                                        </div>\n                                                      )\n                                                    )\n                                                  )}\n                                                  {!details.maneuvers ||\n                                                  Object.values(\n                                                    details.maneuvers\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <h3>Maneuvers</h3>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.maneuvers\n                                                        ).map(\n                                                          (\n                                                            [rule, text],\n                                                            index\n                                                          ) => (\n                                                            <div\n                                                              key={`maneuvers_advantage_${index}`}\n                                                              className=\"special-rules\"\n                                                            >\n                                                              <span>\n                                                                {markChargedOrSpike(\n                                                                  faction,\n                                                                  text\n                                                                )}\n                                                                {rule}\n                                                              </span>{\" \"}\n                                                              <span>\n                                                                - {text}\n                                                              </span>\n                                                            </div>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!details.storeLinks ||\n                                                  details.storeLinks.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"special-rules\">\n                                                      <span>\n                                                        Privateer Press Store\n                                                      </span>{\" \"}\n                                                      <span>\n                                                        -{\" \"}\n                                                        {details.storeLinks.map(\n                                                          (linkText, index) => (\n                                                            <React.Fragment\n                                                              key={`store_link_${index}`}\n                                                            >\n                                                              <span\n                                                                dangerouslySetInnerHTML={{\n                                                                  __html:\n                                                                    linkText,\n                                                                }}\n                                                              />\n                                                              {index ===\n                                                              details.storeLinks\n                                                                .length -\n                                                                1 ? (\n                                                                <></>\n                                                              ) : (\n                                                                <> </>\n                                                              )}\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                  {!details.release ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"special-rules\">\n                                                      <span>Release</span>{\" \"}\n                                                      <span>\n                                                        - {details.release}\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                  {!details.lore ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"special-rules\">\n                                                      <span>Lore</span>{\" \"}\n                                                      <span>\n                                                        - {details.lore}\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                  {!details.pow ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"special-rules\">\n                                                      <span>Pow</span>{\" \"}\n                                                      <span>\n                                                        - {details.pow.text}\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                  {!details.effect ||\n                                                  details.effect.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    details.effect.map(\n                                                      (effect, index) => (\n                                                        <p\n                                                          className=\"cypher-effect\"\n                                                          key={`cypher_effect_${listIndex}_${cardIndex}_${index}`}\n                                                        >\n                                                          {effect}\n                                                        </p>\n                                                      )\n                                                    )\n                                                  )}\n                                                </div>\n                                              )}\n                                            </Card>\n                                          </div>\n                                        )}\n                                      </Draggable>\n                                    )\n                                  )}\n                                  {provided.placeholder}\n                                </div>\n                              )}\n                            </Droppable>\n\n                            {cards.length > 0 ? (\n                              <div className=\"footer\">\n                                <Badge\n                                  size=\"small\"\n                                  key=\"_badge\"\n                                  count={cards.length}\n                                  offset={[10, 5]}\n                                >\n                                  Card:\n                                </Badge>\n                                {Object.entries(\n                                  cards.reduce(\n                                    (acc, card) => ({\n                                      ...acc,\n                                      [card.type]: (acc[card.type] || 0) + 1,\n                                    }),\n                                    {}\n                                  )\n                                )\n                                  .sort()\n                                  .map(([type, count], i) => (\n                                    <Badge\n                                      size=\"small\"\n                                      key={`badge${i}`}\n                                      count={count}\n                                      offset={[10, 5]}\n                                    >\n                                      {type}:\n                                    </Badge>\n                                  ))}\n                              </div>\n                            ) : (\n                              <></>\n                            )}\n                          </div>\n                        </Col>\n                      ))}\n                    </Row>\n                  </Layout>\n                </Content>\n              </>\n            )}\n            <Droppable key={\"trash_footer\"} droppableId={\"trash_footer\"}>\n              {(provided) => (\n                <div ref={provided.innerRef} {...provided.droppableProps}>\n                  {dragging ? (\n                    <>\n                      <div className=\"trash-footer\">\n                        <div\n                          style={{\n                            animation:\n                              \"shake 0.82s cubic-bezier(.36,.07,.19,.97) both\",\n                            color: \"white\",\n                          }}\n                        >\n                          <DeleteOutlined />\n                          <div style={{ display: \"none\" }}>\n                            {provided.placeholder}\n                          </div>\n                        </div>\n                      </div>\n                      <Footer>\n                        <div className=\"copyright-notice\">\n                          Images originating from the Privateer Press website\n                          are  2001\n                          <>{new Date().getFullYear()}</> Privateer Press, Inc.\n                          All Rights Reserved. Privateer Press, warcaster and\n                          their logos are trademarks of Privateer Press, Inc.\n                          Images and trademarks used without permission. This\n                          website is unofficial and is not endorsed by Privateer\n                          Press.\n                        </div>\n                      </Footer>\n                    </>\n                  ) : (\n                    <Footer>\n                      <div className=\"bookmark\">\n                        <Layout>\n                          <Row>\n                            <Col\n                              xs={24}\n                              sm={24}\n                              md={18}\n                              lg={18}\n                              xl={16}\n                              xxl={16}\n                            >\n                              <input\n                                value={url}\n                                onChange={setUrl}\n                                onKeyDown={open}\n                                onClick={bookmark}\n                              />\n                            </Col>\n                          </Row>\n                        </Layout>\n                      </div>\n                      <div className=\"copyright-notice\">\n                        Images originating from the Privateer Press website are\n                         2001\n                        <>{new Date().getFullYear()}</> Privateer Press, Inc.\n                        All Rights Reserved. Privateer Press, warcaster and\n                        their logos are trademarks of Privateer Press, Inc.\n                        Images and trademarks used without permission. This\n                        website is unofficial and is not endorsed by Privateer\n                        Press.\n                      </div>\n                    </Footer>\n                  )}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n          {factionModels.map(([factionName, faction, models, cadreModels]) => (\n            <Drawer\n              key={`drawer_${faction}`}\n              visible={openDrawer === faction}\n              placement=\"right\"\n              onClose={setOpenDrawer}\n              width=\"80%\"\n              mask={false}\n              closeIcon={<MenuUnfoldOutlined />}\n            >\n              <Menu\n                id={`faction_${faction}`}\n                mode=\"inline\"\n                triggerSubMenuAction=\"click\"\n              >\n                <Menu.ItemGroup\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        models.map((model) => model.page)\n                      )}\n                    >\n                      {factionName}\n                    </div>\n                  }\n                >\n                  {models.map(({ name, page, type, subtype }) => {\n                    const shortName = name.slice(0, 40);\n\n                    return (\n                      <Menu.Item key={faction + \":\" + page} className={faction}>\n                        <span onClick={menuItemClicked(page)}>\n                          <span className=\"card\">\n                            {shortName.length === name.length ? (\n                              shortName\n                            ) : (\n                              <Tooltip placement=\"top\" title={name}>\n                                {shortName}...\n                              </Tooltip>\n                            )}\n                          </span>\n                          <span className=\"types\">\n                            {subtype ? subtype : \"\"}\n                            {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                          </span>\n                        </span>\n                      </Menu.Item>\n                    );\n                  })}\n                </Menu.ItemGroup>\n                {!cadreModels ? (\n                  <></>\n                ) : (\n                  cadreModels.map(({ cadrePageId, cadreModels }) => (\n                    <Menu.ItemGroup\n                      key={`Cadre:${cadrePageId}`}\n                      title={\n                        <div\n                          onClick={allMenuItemsClicked(\n                            cadreModels.map((model) => model.page)\n                          )}\n                        >\n                          {cadres[cadrePageId]}\n                        </div>\n                      }\n                    >\n                      {cadreModels.map(({ name, page, type, subtype }) => {\n                        const shortName = name.slice(0, 40);\n\n                        return (\n                          <Menu.Item\n                            key={faction + \":\" + page + \":cadre:\" + cadrePageId}\n                            className={faction}\n                          >\n                            <span onClick={menuItemClicked(page)}>\n                              <span className=\"card\">\n                                {shortName.length === name.length ? (\n                                  shortName\n                                ) : (\n                                  <Tooltip placement=\"top\" title={name}>\n                                    {shortName}...\n                                  </Tooltip>\n                                )}\n                              </span>\n                              <span className=\"types\">\n                                {subtype ? subtype : \"\"}\n                                {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                              </span>\n                            </span>\n                          </Menu.Item>\n                        );\n                      })}\n                    </Menu.ItemGroup>\n                  ))\n                )}\n                <Menu.ItemGroup\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        (wildCardModels[faction] || []).map(\n                          (model) => model.page\n                        )\n                      )}\n                    >\n                      Wild Cards\n                    </div>\n                  }\n                >\n                  {(wildCardModels[faction] || [])\n                    .sort((w1, w2) => (w1.type < w2.type ? -1 : 1))\n                    .map(({ name, page, type, subtype }, j) => {\n                      const shortName = name.slice(0, 40);\n\n                      return (\n                        <Menu.Item key={faction + \":\" + page}>\n                          <span onClick={menuItemClicked(page)}>\n                            <span className=\"card\">\n                              {shortName.length === name.length ? (\n                                shortName\n                              ) : (\n                                <Tooltip placement=\"top\" title={name}>\n                                  {shortName}...\n                                </Tooltip>\n                              )}\n                            </span>\n                            <span className=\"types\">\n                              {subtype ? subtype : \"\"}\n                              {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                            </span>\n                          </span>\n                        </Menu.Item>\n                      );\n                    })}\n                </Menu.ItemGroup>\n                {Object.entries(\n                  cypherCodecs\n                    .filter(\n                      (cypher) =>\n                        [factionName, \"Universal\"].indexOf(\n                          cypher.Faction.text\n                        ) !== -1\n                    )\n                    .reduce(\n                      (acc, cypher) => ({\n                        ...acc,\n                        [cypher.Faction.text]: [\n                          ...(acc[cypher.Faction.text] || []),\n                          cypher,\n                        ],\n                      }),\n                      {}\n                    )\n                )\n                  .sort(([a], [b]) =>\n                    a === \"Universal\" ? 1 : b === \"Universal\" ? -1 : 1\n                  )\n                  .map(([faction, cyphers]) => (\n                    <Menu.ItemGroup\n                      title={\n                        <div\n                          onClick={allMenuItemsClicked(\n                            cyphers\n                              .sort((c1, c2) =>\n                                c1.Type.text < c2.Type.text ? -1 : 1\n                              )\n                              .map(({ Cypher }) => Cypher.page)\n                          )}\n                        >\n                          {`${faction} Cyphers`}\n                        </div>\n                      }\n                      key={faction}\n                    >\n                      {cyphers\n                        .sort((c1, c2) =>\n                          c1.Type.text < c2.Type.text ? -1 : 1\n                        )\n                        .map(({ Cypher, Type }) => (\n                          <Menu.Item\n                            key={\":\" + Cypher.page}\n                            className={Type.text}\n                          >\n                            <span onClick={menuItemClicked(Cypher.page)}>\n                              <span className=\"card\">{Cypher.text}</span>\n                              <span className=\"types\">{Type.text}</span>\n                            </span>\n                          </Menu.Item>\n                        ))}\n                    </Menu.ItemGroup>\n                  ))}\n              </Menu>\n            </Drawer>\n          ))}\n          <Drawer\n            key=\"drawer_cyphers\"\n            visible={openDrawer === \"cypher_codecs\"}\n            placement=\"right\"\n            onClose={setOpenDrawer}\n            width=\"80%\"\n            mask={false}\n            closeIcon={<MenuUnfoldOutlined />}\n          >\n            <Menu\n              id={`faction_cyphers`}\n              mode=\"inline\"\n              triggerSubMenuAction=\"click\"\n            >\n              {Object.entries(\n                cypherCodecs.reduce(\n                  (acc, cypher) => ({\n                    ...acc,\n                    [cypher.Faction.text]: [\n                      ...(acc[cypher.Faction.text] || []),\n                      cypher,\n                    ],\n                  }),\n                  {}\n                )\n              )\n                .sort()\n                .map(([faction, cyphers]) => (\n                  <Menu.ItemGroup title={`${faction} Cyphers`} key={faction}>\n                    {cyphers\n                      .sort((c1, c2) => (c1.Type.text < c2.Type.text ? -1 : 1))\n                      .map(({ Cypher, Type }) => (\n                        <Menu.Item\n                          key={\":\" + Cypher.page}\n                          className={Type.text}\n                        >\n                          <span onClick={menuItemClicked(Cypher.page)}>\n                            <span className=\"card\">{Cypher.text}</span>\n                            <span className=\"types\">{Type.text}</span>\n                          </span>\n                        </Menu.Item>\n                      ))}\n                  </Menu.ItemGroup>\n                ))}\n            </Menu>\n          </Drawer>\n        </Layout>\n      </Layout>\n    </div>\n  );\n}\n\nconst App = connect(\n  (state) => ({\n    initialized: AppSync.selectDone()(state),\n    syncReasons: AppSync.selectReasons()(state),\n    factionModels: Object.entries(FactionModels.select()(state))\n      .sort()\n      .map(([faction, models]) => [\n        Factions.select()(state)[faction].text,\n        faction,\n        models\n          .map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          }))\n          .filter(\n            (model) =>\n              !Object.values(CadreModels.select()(state))\n                .flatMap((models) =>\n                  models.map((cadreModel) => cadreModel.title)\n                )\n                .includes(model.name)\n          ),\n        Object.entries(CadreModels.select()(state)).flatMap(\n          ([cadrePageId, cadreModels]) => {\n            const cadre = cadreModels.map((model) => model.title);\n            const allCadreModels = models\n              .filter((model) => cadre.includes(model.Name.text))\n              .map((model) => ({\n                name: model.Name.text,\n                page: model.Name.page,\n                type: model.Type.text,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n              }));\n\n            if (allCadreModels.length === cadreModels.length)\n              return [{ cadrePageId, cadreModels: allCadreModels }];\n\n            return [];\n          }\n        ),\n      ]),\n    wildCardModels: Object.fromEntries(\n      Object.entries(WildCardModels.select()(state))\n        .sort()\n        .map(([faction, models]) => [\n          faction,\n          models.map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          })),\n        ])\n    ),\n    cypherCodecs: CypherCodecs.select()(state),\n    lists: Lists.select()(state).map(({ title, cards }) => ({\n      title,\n      cards: cards.flatMap(\n        ({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId, hidden }) => {\n          const pageIdByPage = PageIds.select()(state);\n\n          const page =\n            Object.entries(pageIdByPage)\n              .filter(([_, id]) => id === pageId)\n              .map(([page, _]) => page)[0] || \"\";\n\n          const model = Object.entries(FactionModels.select()(state))\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const wildCard = Object.entries(WildCardModels.select()(state))\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const cypher = CypherCodecs.select()(state).find(\n            ({ Cypher }) => Cypher.page === page\n          );\n\n          if (model) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: model.Type.text,\n                title: model.Name.text,\n                page: model.Name.page,\n                pageId,\n                cortexIds,\n                warjackWeaponIds,\n                vehicleWeaponId,\n                faction: model.faction,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                ...(!details\n                  ? {}\n                  : {\n                      details: {\n                        ...details,\n                        ...(!details.hardpoints\n                          ? {}\n                          : {\n                              hardpointNames: parseHardpoints(\n                                details.hardpoints\n                              ),\n                            }),\n                        ...(!details.cortexSelections\n                          ? {}\n                          : {\n                              cortexSelections: Object.fromEntries(\n                                Object.entries(details.cortexSelections).map(\n                                  ([cortex, advantages]) => [\n                                    cortex,\n                                    Object.fromEntries(\n                                      Object.entries(advantages).map(\n                                        ([advantage, { text, category }]) => [\n                                          advantage,\n                                          {\n                                            text,\n                                            categoryId: pageIdByPage[category],\n                                          },\n                                        ]\n                                      )\n                                    ),\n                                  ]\n                                )\n                              ),\n                            }),\n                        ...(!details.warjackWeaponSelections\n                          ? {}\n                          : {\n                              warjackWeaponSelections: Object.fromEntries(\n                                Object.entries(\n                                  details.warjackWeaponSelections\n                                ).map(([page, selection]) => [\n                                  page.split(\"#\")[0],\n                                  {\n                                    ...selection,\n                                    pageId: pageIdByPage[page.split(\"#\")[0]],\n                                  },\n                                ])\n                              ),\n                            }),\n                        ...(!details.vehicleWeaponSelection\n                          ? {}\n                          : {\n                              vehicleWeaponSelection:\n                                details.vehicleWeaponSelection.map(\n                                  ({ text, page }) => ({\n                                    text,\n                                    page: page.split(\"#\")[0],\n                                    pageId: pageIdByPage[page.split(\"#\")[0]],\n                                  })\n                                ),\n                            }),\n                      },\n                    }),\n              },\n            ];\n          }\n\n          if (wildCard) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: wildCard.Type.text,\n                title: wildCard.Name.text,\n                page: wildCard.Name.page,\n                pageId,\n                faction: \"Wild_Card\",\n                ...(wildCard.Subtype\n                  ? { subtype: wildCard.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                details,\n              },\n            ];\n          }\n\n          if (cypher) {\n            const details = Cyphers.selectByPage(page)(state);\n            return [\n              {\n                card: \"cypher\",\n                hidden,\n                type: cypher.Type.text,\n                title: cypher.Cypher.text,\n                page: cypher.Cypher.page,\n                pageId,\n                ...(cypher.Faction.text === \"Universal\"\n                  ? { faction: \"Universal\" }\n                  : { faction: cypher.Faction.page }),\n                details,\n              },\n            ];\n          }\n\n          return [];\n        }\n      ),\n    })),\n    dragging: Dragging.select()(state),\n    url: Url.select()(state),\n    factions: Factions.select()(state),\n    vehicleWeapons: VehicleWeapons.select()(state),\n    warjackWeapons: WarjackWeapons.select()(state),\n    cadres: CadreCategoryMembers.select()(state),\n  }),\n  (dispatch) => ({\n    toggleCard: (listIndex, cardIndex, pageId, card) => {\n      return () =>\n        dispatch(Lists.toggleCard({ listIndex, cardIndex, pageId, card }));\n    },\n    dragStart: (event) => dispatch(CardDragStarted(event)),\n    dragEnd: (event) => dispatch(CardDragEnded(event)),\n    menuItemClicked: (page) => (event) => {\n      dispatch(MenuItemClicked({ page }));\n      event.stopPropagation();\n    },\n    allMenuItemsClicked: (pages) => (event) => {\n      pages.forEach((page) => dispatch(MenuItemClicked({ page })));\n      event.stopPropagation();\n    },\n    removeList: (listIndex) => () => dispatch(Lists.removeList({ listIndex })),\n    addEmptyList: (listIndex) => () =>\n      dispatch(Lists.addEmptyList({ listIndex })),\n    moveListBy: (listIndex, by) => () =>\n      dispatch(Lists.moveListBy({ listIndex, by })),\n    setListTitle: (listIndex) => (event) =>\n      dispatch(Lists.setListTitle({ listIndex, title: event.target.value })),\n    setUrl: (event) => dispatch(Url.set({ url: event.target.value })),\n    bookmark: () => {\n      const bookmark = document.querySelector(\".bookmark input\");\n      if (bookmark) {\n        if (navigator.userAgent.match(/ipad|iphone/i)) {\n          const range = document.createRange();\n          range.selectNodeContents(bookmark);\n\n          const selection = window.getSelection();\n          selection.removeAllRanges();\n          selection.addRange(range);\n          bookmark.setSelectionRange(0, 999999);\n        } else {\n          bookmark.select();\n        }\n      }\n    },\n    open: (event) => {\n      if (event.key === \"Enter\") {\n        const url = document.querySelector(\".bookmark input\").value;\n        if (url) window.open(url, \"_self\");\n      }\n    },\n    setCardCortex:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardCortex({\n            listIndex,\n            cardIndex,\n            pageId,\n            cortexIds: label,\n          })\n        ),\n    setCardWarjackWeapons:\n      (listIndex, cardIndex, hardpointNameIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardWarjackWeapons({\n            listIndex,\n            cardIndex,\n            hardpointNameIndex,\n            pageId,\n            warjackWeaponId: label,\n          })\n        ),\n    setCardVehicleWeapon:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardVehicleWeapon({\n            listIndex,\n            cardIndex,\n            pageId,\n            vehicleWeaponId: label,\n          })\n        ),\n  })\n)(AppPresentation);\n\nexport default App;\n\nfunction generateListNamePlaceholder(cards, factionNames, defaultValue) {\n  const factions = cards.map((card) => card.faction);\n  if (factions.length === 0) return defaultValue;\n\n  const justFactions = factions.filter(\n    (faction) => [\"Universal\", \"Wild_Card\"].indexOf(faction) === -1\n  );\n  if (justFactions.length === 0) {\n    const justCyphers = factions.filter((faction) => faction === \"Universal\");\n    if (justCyphers.length === factions.length) return \"Universal Cyphers\";\n\n    return defaultValue;\n  }\n\n  const factionsPresent = justFactions.reduce(\n    (acc, faction) => ({ ...acc, [faction]: true }),\n    {}\n  );\n  if (Object.keys(factionsPresent).length > 1) return \"Several factions\";\n\n  const factionName = factionNames[Object.keys(factionsPresent)[0]].text;\n  if (factionName) {\n    const types = cards.map((card) => card.type);\n\n    const cyperTypes = [\"Fury\", \"Geometric\", \"Harmonic\", \"Overdrive\"];\n    const noCyphers = types.filter((type) => cyperTypes.indexOf(type) === -1);\n    if (noCyphers.length === types.length) return factionName + \" Models\";\n\n    const justCyphers = types.filter((type) => cyperTypes.indexOf(type) > -1);\n    if (justCyphers.length === types.length) return factionName + \" Cyphers\";\n\n    return factionName;\n  }\n\n  return defaultValue;\n}\n\nfunction cortexName(cortexSelections, cortexIds) {\n  return (Object.entries(cortexSelections).find(\n    ([cortex, advantages]) =>\n      Object.values(advantages)\n        .map((advantage) => advantage.categoryId)\n        .join(\"\") === (cortexIds || []).join(\"\")\n  ) || [undefined])[0];\n}\n\nfunction vehicleWeaponName(vehicleWeaponSelection, vehicleWeaponId) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n  if (!vehicleWeapon) return undefined;\n  return vehicleWeapon.text;\n}\n\nfunction vehicleWeaponName2(\n  faction,\n  vehicleWeapons,\n  vehicleWeaponSelection,\n  vehicleWeaponId\n) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n\n  if (vehicleWeapon) {\n    const { page } = vehicleWeapon;\n    const weaponConfig = vehicleWeapons[page.split(\"#\")[0]];\n    if (weaponConfig) {\n      const { pointCost: cost } = weaponConfig;\n\n      return (\n        <>\n          {!weaponConfig ||\n          !weaponConfig.weapons ||\n          weaponConfig.weapons.length === 0 ? (\n            <></>\n          ) : (\n            weaponConfig.weapons.map((weapon, index) => (\n              <React.Fragment key={`vehicle_weapon_selection_number_${index}`}>\n                <div className=\"model-weapons\">\n                  <div>\n                    {weapon[\"Attack Type\"] === \"Melee\" ? (\n                      <img className=\"faction-melee\" alt=\" \" />\n                    ) : (\n                      <img className=\"faction-ranged\" alt=\" \" />\n                    )}\n                  </div>\n                  <div>\n                    <div>\n                      {weapon[\"Name\"]}\n                      {Object.keys(weapon.specialRules || {}).map(\n                        (rule, index2) => (\n                          <WeaponQuality\n                            key={`vehicle_weapon_selection_number_${index}_rule_${index2}`}\n                            weaponQuality={rule}\n                          />\n                        )\n                      )}\n                    </div>\n                    <div>\n                      <span className=\"cost\">Cost {cost}</span>{\" \"}\n                      {weapon[\"Damage Type\"].join\n                        ? weapon[\"Damage Type\"].join(\" \")\n                        : weapon[\"Damage Type\"]}\n                    </div>\n                  </div>\n                  <div>\n                    <div>RNG</div>\n                    <div>{weapon[\"Range\"]}</div>\n                  </div>\n                  <div>\n                    <div>POW</div>\n                    <div>{weapon[\"POW\"]}</div>\n                  </div>\n                </div>\n                {!weapon.specialRules ? (\n                  <></>\n                ) : (\n                  Object.entries(weapon.specialRules)\n                    .filter(([rule]) => !weaponQualities[rule])\n                    .map(([rule, text], ruleIndex) => (\n                      <div\n                        key={`vehicle_weapon_selection_number_${index}_${ruleIndex}`}\n                        className=\"model-weapons-special-rules\"\n                      >\n                        <span>\n                          {markChargedOrSpike(faction, text)}\n                          {rule}\n                        </span>{\" \"}\n                        <span>- {text}</span>\n                      </div>\n                    ))\n                )}\n              </React.Fragment>\n            ))\n          )}\n          {!weaponConfig ||\n          !weaponConfig.specialRules ||\n          weaponConfig.specialRules.length === 0 ? (\n            <></>\n          ) : (\n            <>\n              {!weaponConfig.weapons || weaponConfig.weapons.length === 0 ? (\n                <div className=\"model-weapons-special-rules\">\n                  <span>Cost</span> <span>- {cost}</span>\n                </div>\n              ) : (\n                <></>\n              )}\n              {Object.entries(weaponConfig.specialRules)\n                .filter(([rule]) => !weaponQualities[rule])\n                .map(([rule, text], ruleIndex) => (\n                  <div\n                    key={`vehicle_weapon_selection_rules_number_${ruleIndex}`}\n                    className=\"model-weapons-special-rules\"\n                  >\n                    <span>\n                      {markChargedOrSpike(faction, text)}\n                      {rule}\n                    </span>{\" \"}\n                    <span>- {text}</span>\n                  </div>\n                ))}\n            </>\n          )}\n        </>\n      );\n    }\n    return undefined;\n  }\n  return undefined;\n}\n\nfunction markCharged(faction, text) {\n  return text.includes(\"charged\") ? (\n    <>\n      <Charged faction={faction} />{\" \"}\n    </>\n  ) : (\n    <></>\n  );\n}\n\nfunction markSpike(faction, text) {\n  return text.includes(\"spike\") ? (\n    <>\n      <Spike faction={faction} />{\" \"}\n    </>\n  ) : (\n    <></>\n  );\n}\n\nfunction markChargedOrSpike(faction, text) {\n  return (\n    <>\n      {markCharged(faction, text)}\n      {markSpike(faction, text)}\n    </>\n  );\n}\n\nfunction warjackWeaponNames(\n  faction,\n  warjackWeapons,\n  warjackWeaponSelections,\n  weaponId\n) {\n  const weapon = Object.values(warjackWeaponSelections).find(\n    ({ pageId }) => pageId === weaponId\n  );\n  if (weapon) {\n    const { cost, page } = weapon;\n    const weaponConfig = warjackWeapons[page.split(\"#\")[0]];\n\n    return (\n      <>\n        {!weaponConfig ||\n        !weaponConfig.weapons ||\n        weaponConfig.weapons.length === 0 ? (\n          <></>\n        ) : (\n          weaponConfig.weapons.map((weapon, index) => (\n            <React.Fragment key={`weapon_selection_number_${index}`}>\n              <div className=\"model-weapons\">\n                <div>\n                  {weapon[\"Attack Type\"] === \"Melee\" ? (\n                    <img className=\"faction-melee\" alt=\" \" />\n                  ) : (\n                    <img className=\"faction-ranged\" alt=\" \" />\n                  )}\n                </div>\n                <div>\n                  <div>\n                    {weapon[\"Name\"]}\n                    {Object.keys(weapon.specialRules || {}).map(\n                      (rule, index2) => (\n                        <WeaponQuality\n                          key={`weapon_selection_number_${index}_rule_${index2}`}\n                          weaponQuality={rule}\n                        />\n                      )\n                    )}\n                  </div>\n                  <div>\n                    <span className=\"cost\">Cost {cost}</span>{\" \"}\n                    {weapon[\"Damage Type\"].join\n                      ? weapon[\"Damage Type\"].join(\" \")\n                      : weapon[\"Damage Type\"]}\n                  </div>\n                </div>\n                <div>\n                  <div>RNG</div>\n                  <div>{weapon[\"Range\"]}</div>\n                </div>\n                <div>\n                  <div>POW</div>\n                  <div>{weapon[\"POW\"]}</div>\n                </div>\n              </div>\n              {!weapon.specialRules ? (\n                <></>\n              ) : (\n                Object.entries(weapon.specialRules)\n                  .filter(([rule]) => !weaponQualities[rule])\n                  .map(([rule, text], ruleIndex) => (\n                    <div\n                      key={`weapon_selection_number_${index}_${ruleIndex}`}\n                      className=\"model-weapons-special-rules\"\n                    >\n                      <span>\n                        {markChargedOrSpike(faction, text)}\n                        {rule}\n                      </span>{\" \"}\n                      <span>- {text}</span>\n                    </div>\n                  ))\n              )}\n            </React.Fragment>\n          ))\n        )}\n        {!weaponConfig ||\n        !weaponConfig.specialRules ||\n        weaponConfig.specialRules.length === 0 ? (\n          <></>\n        ) : (\n          <>\n            {!weaponConfig.weapons || weaponConfig.weapons.length === 0 ? (\n              <div className=\"model-weapons-special-rules\">\n                <span>Cost</span> <span>- {cost}</span>\n              </div>\n            ) : (\n              <></>\n            )}\n            {Object.entries(weaponConfig.specialRules)\n              .filter(([rule]) => !weaponQualities[rule])\n              .map(([rule, text], ruleIndex) => (\n                <div\n                  key={`weapon_selection_rules_number_${ruleIndex}`}\n                  className=\"model-weapons-special-rules\"\n                >\n                  <span>\n                    {markChargedOrSpike(faction, text)}\n                    {rule}\n                  </span>{\" \"}\n                  <span>- {text}</span>\n                </div>\n              ))}\n          </>\n        )}\n      </>\n    );\n  }\n  return undefined;\n}\n\nfunction warjackWeaponNamesSubtitle(warjackWeaponSelections, weaponIds) {\n  return weaponIds.flatMap((weaponId) => {\n    const weapon = Object.values(warjackWeaponSelections).find(\n      ({ pageId }) => pageId === weaponId\n    );\n    if (weapon) {\n      return [weapon.name];\n    }\n    return [];\n  });\n}\n\nfunction parseHardpoints(hardpoints) {\n  // Parses strings of the following type: \"3 : 2 Arm, 1 Back\"\n\n  const rHardpointCount = \"\\\\s*(\\\\d+)\\\\s*\";\n  const rHardpointGroup = \"\\\\s*(\\\\d+)\\\\s*(\\\\w+)\\\\s*\";\n\n  let results = null;\n  for (let n = 1; n <= 10; n++) {\n    const regexp = new RegExp(\n      `^${rHardpointCount}:${rHardpointGroup}${repeat(\n        `,${rHardpointGroup}`,\n        n - 1\n      )}$`\n    );\n    results = regexp.exec(hardpoints);\n    if (results !== null) {\n      break;\n    }\n  }\n\n  if (results === null) {\n    return undefined;\n  }\n\n  const hardpointCount = parseInt(results[1], 10);\n\n  const hardpointNames = [];\n  for (let n = 2; n < results.length; n += 2) {\n    const groupCount = parseInt(results[n], 10);\n    const groupName = results[n + 1];\n\n    for (let i = 1; i <= groupCount; i++) {\n      hardpointNames.push(groupName);\n    }\n  }\n\n  if (hardpointCount !== hardpointNames.length) {\n    console.error(\n      \"Hardpoints do not add up!\",\n      hardpoints,\n      hardpointCount,\n      hardpointNames\n    );\n  }\n\n  return hardpointNames;\n\n  function repeat(s, n) {\n    if (n === 0) return \"\";\n    return s + repeat(s, n - 1);\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APr2+QD3+fUA//36AP///wDR5OUAhrC/AHOOvQJyibsGbpC9BnCEtwV5or4CmMLKANfr7gD///sA/vzwAPz9+wAA9vn1APr6+QDp9PcApsTWAHicuwR4h7ILfnqxEIRzrBOIcKwUg3GtE3qBshBzkLgIfqXFAr7U4AD3+voA+/39AAD8+/gA6vT2AH2vxQBphLMHgHSxFZxhnCOwXY1BsmOSYrdikW64Xo5aqVuTNoxrpBx0fLQQYomtBKfH0wD8//0AAP3//wCmxdcAZoKxB4h2rBirXJA3tWiJi6aIldWZhJHzjoKK+5iJjeurfpHDuFyLbKFinCh6ebETZ5G5BM7j6gAA0ePlAHmevAR/dbEUqFqON51ngqt7gof/YXJ1/26Chf+NoaL/YXVz/2V8eP+EfoTxrFV+f6FnniVne7EOm7HKAQCGsL8BeIexC6FloCKeUXKMXWVp/4WWmv11fYT5gYuM/Nnb2/xfbG37i5Ga92yHh/9uW2TsrVOBW4xsqRd7nMIGAHKMvQOBe7AQq1WEQW5LYNc1RU/+VmJo+d7i4P7r7Oz/9/j4/ebo6P27vcP9NkZR+z1SVv+KSWamp2OfJnaJvwoAaYW1Boh5rxKfTHhjSDlN9DdTXf5mcnX76erp//////72+vr+/////ry/wP5RXmf7NE5Y/mI8U8+nXZQ5foC4DABrjLMHjneuEppJbW0wKjf7V213/sfJyvz39vf++Pn6/vv6+v728/P98O3v/qqttPw6TVn+UjFJ2KxZkj91hrgNAGyBtQaKdbYSo0x8WjQpOO0NIzb9JC49++bn5/3/////8/Ty/f////2iqq3+Dhgi+xItOv5bMkvFq1+SNHaBtwwAcqO8AnqBshCqW5U1VixCxAAYJf9ibHn4tbO3/rKytf/v7/D9nqGk/q60vP0uQE37BB0t/4U9Yo2jbKMgdI6+CQCVwccAb42zCJVtqB2hQm1sHxcq8ipFSP8MGCD7OD9J+6qvt/sIDhz6JjNC/Bo0Pv9FHjfQsleMRH9ytBWHnsYDANrq8QB8pccCcHysEapooSiTOGJ/JBAi6AAUIP8NIzP/JzVG/wUaKv8AESD/QxowzqdPdlmXcaseanexCae40AEA////AL7U4ABkhq8Ed3i0E6NtoiaqTH1bcC5Ro0seOM5FGjDWVSM6wn84Wo6sWItFmnGsHm90rQ12mLcC4O7wAAD7+vgA9/r6AKnF1QFlkbcDZXquDpBtrhesaJsnqWCQOatdlD2tX5Q0qGqlIIJvsxVnerMKeZm4Asfe5AL//v0AAPz9/AD9/fwA////AMvl6QCZsskBe5rBBnOJuwt9f7YNdoW3DXiAtgx0j70JhZ/EBKa60AHh7vAA/f/9APv9/QB7QyxSBgSw0AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEEElEQVR42h2Ta0xTdxTA/y0diFBSQeIg6hQn02wBYYgjBhBUEmVhuMzpYJk6RBHa0tLbx720FErLq1BapHSKDyaZUyZ9Pygg5aFkwURdtumyZUP5oAy2ZCDUtvfx38Xz5ZwP53fOLyc5IEBSIBgKAgghCJEhMDnxE2jXOoFAaGMqFEPhcswdrsRG3xILvmd2tN4GY74Hb3ohxAFO4ICGAwBSJHj+bB7oDKOgVuJkNWLOKLXYxWlCXHEtiGdjs9gd1yCzcjCxeZ1EOMh0OB6B1ZVVQJD0AAgpMPd8ASA8G+BVWCI0Ymd8u8Cxwyhx5F2Su7821bn5RrmrRC9yZOqEns0qZJhTWTbAunZ5ApBrA1ZWV4Gh6y7gnbdG6BWetw2IdZ9JY9Yajf2/NndcfaVsMeFtht7FHv13U3rFALdT6tjVgjnjeBW3WPcmngLw4/0ntLadpRG7N3aKbPtaavt/QFWt8LSwGtY01MHu61dghUgIL0hRiDXplpol3yoNUvdOlGeL6dC6GECrtTFUmC1Khwwnyfk97aXn+LDV2E1KahuDmjYd8fvsM+JsZQ3e1t37GlE3wjPlon+0gtulnRLvJlQ8GA7EfEtYs2yUoxOY80q+rHr64eGj1ImzvODs3By1sLgI/SGcfDE/T3onp8mPCorw3OLjkH9affMi6kpGq53rgRLzhHdgQ7Ga81fK9ucfW8kvPkldEMrweRqmgwoEg9Ra9k1NU8e/KsezjhRTRYWVj/Ria5YKG4oGItQd0a4YjlWWm3jv7jmAn6qqoWZmHhB+v5+GQxRBENRrv5/8b2mZGrR7iP0fn6Byc079ZpTYc+VSFxug0hHawBvbUNlbsjPt0L/R29PIpD3Z+Mu/X5BrCoGAfy2Tt+6YKXZCEs5OyaQOHCy/3yV1ZjRinmgg4N9h1ks8HD3q2ZufXXKPuWE7PMOXBVxDHsru8sKl5Vfktb5+yu69S6bmFeERCSnw3Oeqju76sW2iKkckaG8eAKjIus6Ajm/BygzchC1py+k5B2FM/Dv43txCfNDmxiM4iaHd6TnE1tRsmJ5S+NiAmA+pMU+8SmkNA77RGSAWWphKZHiDSe7ZxT/ZpoxPfH8ecDbD2KQUuDsjF4YlJkFGzA6Y+sHRhxruzS8MipGtCNcceaNvnPHmMZyux6CizMpqlY3EfaPwJqurbpR+WsDrz0z95GFqcsGTrMzPJsuO1eoMYsvhNbiuxsquFdqZs38tAEASBPD7V8HVy2MMfsVAGMq1xHTJfJsuyUffuyi1ZJlklmyj1JHRo/Rt09DaCNeyHqPh6amfmfRtAcDph6DogqJwMDH+C2hrcTBQZDBcUm2PUmMj7HpkiN2EuqNFVc7IBqWT1Xfdx/jzj5e0OUEvJ8H/Q3cpHlin8poAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAED0lEQVR42h2Ta0ybdRTGD6XCuA5hZJtKRzDAZBkMgXIptIW+lDJWGiYppZUV6mq5toFQCrvAGGwT2WacE2NMFnSJJk6WjCGXaDIRZ+KiaJY5UeQ2kLaUAr1f3svfFz6cPF/O75yTPOcBHCfB5/MDQgj8PgpWxqfhmbodrMIqhuPUW0HbCkWQhVf5kvltGWO2sxuWRh/t9RJ0kX4vgJeGfSQC58IiWC68D+baaqa5VhzmqCuOcqmLYpz12AGbqiRmW41FGesk+9arpQzrna/Bs+MCkvADkBQJjqVlWJZWwZakMNih4sb6GjNft53jFK72V6iMVyq0m718ubM1j+3ScF+zqrlRG0V5zNWeD8FPEvQAtx8s3YM0zAu2a4sPOdo42U8HzwyOfHrlz09uXHUMDFzCP77dbxkfOjcz31fW7GzlHnWpT8YYyzDm1tgUwMp302BWVjE9dYIDOzQ81qu8197Xj87oDKi1+z10c/gLVNd2EZ3VX0LXrl62/XZe0uPScxIdUnbkklYXAE81ugBTXVkYoeUkTLadul7Z0IQGbg+R7d2XfX2Dt4iFxXmitlmHf/DRkEfbex011Cs25zu4CrxRcHCjRhIEVkwa6FaJoyztOYU6peSvE4JKSn62xbew9oKyWCzI6/eRq2YTOTXzmMwRivHsiir0mVr0pU+PJdnLsVCw0lbhDaLo2ZaCd3gY38mXKKn61gu40bJBu4Uoj89P7eqjmZ8pqVKNs0tlVKOk4He7npvrrikNh02ZLJjUCqN/1RS0vJGegyua2qgnT34h3G43RVtMEQRBedxu0mazUyMPx4mcMhklK06f2+ko5DkaSiLAwpEGeevF0XPNbHnWiWxrSHwGmZiWi5tMRnL3BK/XvavkV9/cpyIPJ+ChxwopFZb52GkQZm5Wi8PBLJcxtjTCKLuhMEvFz/gJYpKRprnDOzkxQY1+O4lsdgd5Z/gu9XDqezKNX44HvHIcDctzbiC9MN5aIQyB2a7zYFKK9/m1grgfGjOaWUcS7cfzJSgyloVn8crwkdEJPGT/YX/Km/lEbKoInUxP+cOq52FudVHsiloRCItj02CUVTG2VQUv+zsFRx8o2T1xcSwTRLNQxJEMlJRZjBiHUhDsfxWVpCXM/qvlVXs7BSyrmB+ydnEgYC8Ym5/fA5Mgj+lSi2LwLkHSnI6juFJ67O7pjORZUWrC89rsxB+Hpak3zYb8Yq8BY1mk/AhjuZzhef4PAEEHwuNywYveWwH/iQWBtkp2JGrCDlJdRcnOTl6u3YAVOLuEmZSBH+/UcGOt5fzQdbGCsX5/koHTy4HACUCUfy9UOw+mYJF+zzXl6aANiSjMUSOOcDaURlhlpeFbFYKQ5XdrmKv02e5nf8MuTOI++B9NGyAYlSH/2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APn69QD6+PoA///+APf//QDG09wAh6W8AHKKuwN1h7gGb4y9B3eCvgV5qcQBnsHLAN7z8QH///8A/Pb5APr6+QAA9fr2AP77+wDW6+8AjLfJAXaWvgVwjLsMY4zBEGKPwxNikcQTZYzDEmuOvA5yj74If6nFAsLb3QD3+fkA+fr6AAD///8AyeHjAGiduwNfhLkLYInEF1Sb0ilYp9FKY6vMaGKrz2xWqdRUV5zOMF6NyBpfhr8QYoi0A7LI1wD+//wAANvp7ACArMQCY4S3DGSVyx5Spc1IbKvDoYOjrN97lZb4dZOV+3ufp+h2qLu4WajKYl6byCZiicASapS5A87m6AAAi7O+AG2Otwljjs0aTqLNUWSYn85yf33/XWxx/4SIi/+Tl5n/ZWtu/253ev9tj5boTqG+cl+byyJifrYNmLTSAQBnjLEDa4zEEVCg1DZKhZm6X2xq/5KdmvlkbnL7nqir/cbO1P1bZ2z6jZua93B1e/9LdoHhUaLIUmOLxhd5nsIFAHKBtQpklcwXSZa4a0ReZfgvPUP9d4WN++nq6v7t8fL+9ff2/ufo6P6hr7L9NEJM/ERRXP9Eh6OaXZ7OI22QwAkAdIKxDV+f0x87fpuXMEVG/0RUYP2CiJP++/7+//////38/fz9/////qWutP5OW2P8PkRO/jFqesRUo9A1borCDAB1gLoOWqTXISp0j6QmMDn+gYaR/Nva3P319fX++fn6/vv6+v729fX96Ont/Z+krPs4QEj+J11qzVak0jpmkbkNAHCDtAxlnM4dOHuYixosOv8HGij9SlNb+/////7////++Pn2/f////2GjpL+CBgh/BQqM/4oYXq7W6PUMHCHvgwAZY6yCGaUyhVLl71YETdH7AkYKP+HkpX4qKyt/cfHyP/h4uT9n6Cm/qWvtvwjMUD8CCI2/jqEp4Rmmc4ebJXDCQBemrUDY4y6Dl6i1SkucImWDR8n/zxBTP8ABxr6YWdv/JWbofsABhP6NDpH/RslNf8bTWrDVKbQPmaFuhSGoMcDAJfBzgFtlr0GaYzJF1ukzTgoaYGgBhUr9gYMHv8gJS7/JjA6/wURH/8EEB3/Gkxhw0yizFBsltMdZX20Cam70QAA8vv7AJe4zwFcfrEIaY/IF1uk2S5Bj7JuI15vsRpDVNIZPVjVHlRvvTSBnIRVpNE9ZpjTHGN4uAyDnb4B5PLxAAD++/wA5ezuAIOzxgBeibsFY4G7EWOXzhpcpNYqX5/TO1uh0TxapdExYZzRHmSEwRNofbUJfZ25ANHi5AD///8AAPX5+wD9/f4A8Pr6ALvR3QCIq8cCc5a+CHGLvwprjcENZ5DBDW2JvwxwlMIIhqLDArG80gHn8fMA/f3+APv7/QAlXTSQL9Q7UgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APr5+AD2+PkA////APr/+QDC2OIAdKfIAGWLwwJ2h8QGbofCBm+ExAVfmsMCfrHGAL/e5AD///8A//n5APb9/AAA9vn3APz88wDb7vEAhbfVAGyTyAR4h7sLgoGyEI14qROPdaMUjXmsE36EuBBvib8IZ5jOAqvO4gDw+fAA/Pz9AAD+/v0A3PDyAFuh0QBifb8Hf3qvFaFsmCO4aopBuXGNYr5viW69bIlatWaQNpZzoxx1frgQXH+9BJa72AD+//wAAPT8+QCIuNYAYX3AB5h8rhi2bIc3unWIi6aIk9WSiJHzjoiQ+5aLjeuugo3DuG2GbKpykCiGfbQTXYbEBLLd6gAAxNrhAG2UwwR9fKwUtmiLN6Rpd6t8hYr/cn+G/2p7f/9qeXz/bHp6/3CDg/+DgYbxq2R5f6txnSVvd7UOgabMAQB1p8gBdoe4C6VxnyKeWnKMcHl9/1Rra/1SYGb5VWFk/FxmavxaaXD7W2Nr91lqa/9yY2rsrWF9W5N2pxdplcIGAGWKwwOEgrcQtmWLQWFJVNdYcHD+k52i+TtKUv6Yn6P/cHyE/TBCT/1MVF79SlRZ+z9VWf+GUmCmrXCZJmuIwAoAcoO+BpN+rhKjWndjQkFL9CI6QP6lqKr7z9PW//////6vtbj+jJac/nB7gv4oNkT7MkdV/mNCU8+xaZE5hIC5DABrg70HlX6mEp9Vbm0yMkb7Fio7/lNbYfz//v/+5ubm/vL09f7////9wsfN/hwtPvweN0X+WzdM2LJnjD+AgroNAG6AxAaQgLASo1t4Wi4rPO0PLD/9HjRF+11nb/1MVFr/7fL1/aalpv2ssLL+XWhy+wEhLP5bOUzFs2iTNHqCtwwAYJjFAnyEuhC2aJQ1VyxCxAMkMf8UKj74Bxco/g8iMf9YYmz9Fh4n/igzPv1ocnv7DSEv/4JFWY2udqMgYIvICQB7sMUAa4e9CKF4qh2gUW1sHBwq8gIfK/8VJTb7ESQ2+wYWJPsSIjT6Cx40/AYbJv9PLELQsGWFRId5qBV8l8QDALjc4QBmmMsCeX23EbF2lyiQSGJ/Khsn6AYVJP8FGCz/BR0v/wQbJ/8LFyX/RiQ2zqxXd1mhe6geanqxCZ2zzgEA////AKnQ4QBefr0EiHuxE6x3niapWnNbbjZJo0slO85NIjjWUio+woRBU463ZYNFoHunHnJ2qw1nksEC1uv0AAD7+/oA9fnyAJS71gFWisMDbnWyDpd4phevdZsnsGqSObJoij2ybJg0rXajIIl4qRVpe7EKZZLEArrX4gL//vkAAPn8/AD9/f0A/f/9ALTb7ACCpM0Ba5HFBmmEwAt8gbkNfYS4DX6AuwxjiMYJdpjFBJqzzwHX6vMA/f76APv7+wDj3Ax+yZru6gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEFElEQVR42h1Ta1ATZxT9EiJPYZAAQqfBBwOmtFKVACK1DiLTjjK0FDoI2OoYRBISMCa77OZNSIkJ4ZEAQaUqUxmlUCDkyavhoaU/7Cgz1sdMp3Xa/mix7Y9WIpDN7teFX/f8OOfcO/feA9ZJCgQCAQAhBEQwAO4tPAZt7W4gkUwwNcrpUBXuDW3GfNtkl75mmtqGgW/uwRYXQoLmEwBsBNYApEjw24uXoMsyCxSIh6WTO6N0TZ5Yg9TNNknd8QbUw1bjjlgMHQtHJaNMp/MR8K/6QZCkDSAkwe+/rgBE5AANdWNhesSRYJJMpPainoI+tfN8j3a8oVfpruqUenJMUu+bOtlUrJA/zLp5fQGQmwarfj+wWme3xBaVO8mCjuf2GEbbLJbBJ0Zz/yu9uYcwdl79q6f9zr1u1Yios8nBvSJ3scV1Q6z7i88A+H7pKVCgLpYedcZ3IRO5OuzmCNZqho1aDaxXyGE9jsEGXA6R5laobLX+24oOaCyYJw0XT8SYTW4GMJmdDB3ujuqQeffi9d1mEa6DpwUXyfJzNRtlZwXB0xekwWqBlKioFa1VChtgrRD/29Q4VN2JTu3EZaOh9La/CTHg07GdspGC4lL+s3NCCXX1xuDGeydLqWu3BuFllYHMPF5MfvhpNXmyrJooLD8DxZ/r79gwT7qi0RUJlIrJ0A58Jk4r6OfnH69a5eYUUoPD48Tyk+f0tSDlmJym2m1fUlKlnuLmFhIHPyihSopFj7oQe16L3Lsd4KgnrEs+E6e8YBPvzykh2O8coUrP8IOb4pWVFcq/tk7RmFz6YZniZB4NpuQUUMeLap93I45jStQVDVTIdKhRMRv3haC/Kj2z8J/4jHwy/WABcfaimDxVVgVfrW2QQ3eHyNEJF/WZUEow9rxNnSgSfteLunmtOD2BTDzIbEZdsbYmR/axIxX3Y1Lehcnc/PWwZC61Y28WrKwRk4mcdIrLe58UIioiZhcP8st07X3a+d2o0BkB2ox3gVJiD+/GfByc3yVK2pX1XzjnLZiw7zDBTsslIhLTiLhUXiAyJSsYmbQH5h3+ZLldOnZCj08l6NT2EOD79gFALtmZGtnMjj6llyuuMGo4qYf+DEnkwLDkNBiVnAG3vUHXxAx46MCphzrh7UqrejZFWj8W8dXAPGMrGC73Mqg7b2cZsRn2NdVUeotgoLq0qPZ29oGPH/L2lz7Nzy5frPmoqcMiGy3aFKsv26MVEgfzxS8vASCDQfD6tR/cuO5jNNQNh+Ci8RgrNrezXzWzz4qN5/Wg9qO2JhfPpvHt1ss9CTLRWKScFi8tPmZu5ggQdCAoGlAUARbmfwSmK07G5odhjY6oFvl0tBrxRhuwye0yoTtCq3WwBm7NMX7+6Q968iDdnAT/A22QCVwQ8htxAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEGElEQVR42h2TaUzadxjHH1BRqzZaaum66XpMPGKNCsisiCBQLQM8QCkgOA9UULStdw1qM9rOVZt0S5ulWeqS7ujadGlnZub2oml3JFs212b2MqlunohgKYIcf/7/37AvnuR58Tzf5/xAMEBAwOcHhBBgPgQL39+Df/Rd4CipJr8qL6O4VGrKOr88wqZRkv8YMMPcxL3XscGQ4QEfQMCPQQBHsDn3AuzmEbDVKsOtdZIYd50w3t0koLoMwt3OBhHV2Vgav1pfHrWiriZvXLsJXqcH8GAAAEc4bP47D/PKatgo40W667mJ3jbGoc2+fP6SRVr/33lZu32Yp/Z0svK2mjlvOfTceFvxkfDFoUuhwsGQgCcA64MXYKOcF+lqE+51dxawH43qLty8Mvz48sWRzbGxc9jlS5b1yU8Gfn5uEbe5T3LTtvRi6opYEL4x8SPAwtQDWNOpwrfqBLtdnRz2HXPNre4PR5Bx2IKaBwZRc/8ZZOg7i9oHR9EH58+8+mtANuTpKkhxVeXtnG/vIMGM/iRpe2asg3NwskM82jIwhFTNJlxep/cr3q8LqpqMQa2xFdM0Gr1ywwnU0a6zz3ZxNMFWAc2mLaOAXSQPc4cW5Ohh8hvloqfK1i7i02vX/RyxnLg6/gU6ZbbgWcUS/FiVDn9PocI4CjW62lD8VaCbS3dJS3aAXVpJCRjEu6ZNhQ2lApE7hc0jvvzmNvbo8dPQtRDx3Q8/EWNXPiM6zRYinS3AGAIlYajg/L3Ry8n3aKWx4DheFYm3Hdv1e8sRU+67fCz+MJeo0DQFt5Ota1bC4/URIR//7c+HRFIWN/gms5TQihnPXnbyi9wGaRxYeWKKN9TBs/ZcdVYOy5GQwccPsIqwmhYTLpFr0KbXj9/4+gZ+++4EUWs4hUFyLqEvZf/q6REzHUpxLNhUGrJTXxrv6ylgaYsO/xKRxET7MvJ9kW+kEgkHc5GqoQ1PTKIT6cxC3NhlxmKTs9H4ccYY6hHsX5cfjYbp/kFYqZVEBU4UJd03sNrePkB3kfflokQ6G6OmsLHoPakY9RAjEJOcGyTRMlElJ/vhWneR0NvET1zQa8PgxeR9WFYryY6GwgSsV5h2R8cYSnknxQo0OorYk4OiaNkI9mahCFoakuRkTM+2clS+PlGyQ8aPXjKPkF6D4fj8FlhD77nZWEL19RfTZ0z5mrMlGdcVjMxpKSv9SW0e/cG4IvOirYcn8veKku3VvLhVmZq89WQWIBgCwufxwOLwx6QliSDspSJvJ2EU0NBpYaq7j5vv7BEWuk+LmKiXt9/dzE10yIp2rEo15OVvp8gYIkICWBAIIgA4gYPz7hTMmTpIy7oKyrqsJMallcV5DEfjHNWS2I3K4uj5pprwRfNHpK2Z54Bt44z54X99uP/jai+vaQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APv69gD69/kA///7APf//ADG090AiaPDAHCLvAN3hbgGd4i8B3iCuQV2qsQBn8DKAN7z8QH///8A/Pb5APr6+QAA9vr3AP37+gDU7O4Ai7jHAXaXvgVzib8MZIzBEGCQxBNikcMTZ4y/EmuOvQ5vkb0IfqnFAsLb3wD3+foA+fr8AAD///8AyuDjAGmdvANehLoLX4rDF1Oc0SlUqc9KYKvOaGGrzWxUqtFUVJ3QMFyOxxpfhrwQY4ixA7LI1QD+//sAANnq7ACArMUCZIO5DGOUzB5UqNBIaqzBoX2hpt97lZj4eZOX+3eeo+hzqb24XKnMYl+bySZiiMESaZS6A87m6gAAhrW+AGmQtgljj80aUaLMUWOTm857g4T/cnmB/3F3ff9reXn/cXd5/3p+h/9rkpjoTqO+cmCczCJhfrYNmLPSAQBnjbIDa4zCEU+gzjZQiZm6a3h4/1ViZ/lXYWj7U2Jn/VdqcP1Xam36V2hq911lav9Pe4ThUKHHUmOMxBd5n8EFAHWAuQpllM0XS5i5azpSWfh6gYz9fYuO+0FQUv6mrbP+W2dx/jVESf5HV179SVRf/ERRWv9BhKGaXJ7OI2yQvwkAboK4DWCe0R9BfqCXKTtE/zpLVv29wcb+0dbX//////2Zn6T9lZ2h/l9qdf4pO0n8OUFM/jFqeMRTotA1borDDABxgLUOX6HTITF0kKQrMz3+ESg2/IGKk/3////+5OLh/vr5+f7////9p621/RgpOPsoMz7+LWFwzVSi0jpmkbwNAHKBsQxgn9AdO3mZixorOf8PKDj9OkZS+1ZgZP5manH++fr6/ZSYmv2ws7n+TFhi/AgeJ/4qYn67WaLVMHCHwAwAbYmxCGeTyRVMl79YEzZM7BQhM/8UKDb4AhUi/SAuPv9YYmv9BRId/jxDTvxjanT8BiAy/jeDpYRmmcwebJTCCQBembQDZ4m+Dl2h1ykyc42WDBYj/xIbL/8UKDr6DyI0/AYYKPsQJjn6Dhsq/Q8WI/8iVG/DUaTMPmaEuRSGoMcDAJXCzwFslb0GaYzIF1ilzzgsaYagEB4w9goSIP8MFiP/DBgp/wkUKf8JGin/Gk1lw0qfy1Bsl9QdZX2zCam70QAA8vv7AJa5zQFbfrAIao7LF1mk3C5Ajq1uKFpusSBEVdIhQlnVIE5tvTN+nYRWpc89Z5fRHGN4uAyDnb4B5PLxAAD++vsA5O3uAIOzxgBfiL0FY4G9EWOXzRpepNMqW6LOO1mizDxbo9IxYJvRHmeFuxNqfrMJfZ26ANHi5AD///8AAPP5+QD++/0A8Pr7ALrS3wCLqcYCdJa+CHGLvwprjcMNaJDCDW6Jugxulb0IiKHFArK71AHn8vMA/f7+APv7/QBXjxPRmZifdgAAAABJRU5ErkJggg==\"","import { StateShard } from \"../utils\";\nimport { put } from \"redux-saga/effects\";\n\nconst Requests = StateShard(\n  \"Requests\",\n  init,\n  { cache, expire, fetch, fetched },\n  {\n    parsePage,\n    queryCadreModels,\n    queryCadres,\n    queryRevisions,\n    queryPageIds,\n  },\n  {\n    selectCachedRequestsByPageIds,\n    selectCachedParsedPageIds,\n    selectCachedUrl,\n    selectPending,\n  }\n);\n\nexport { Requests };\n\nfunction init(state) {\n  if (!state.io) {\n    state.io = {};\n  }\n\n  state.io.requests = { cached: {}, pending: [] };\n}\n\n// Actions\n\nfunction cache(state, { url, data, queryParams }) {\n  const cached = selectCached(state);\n\n  cached[url] = { data, queryParams };\n}\n\nfunction expire(state, { url }) {\n  const cached = selectCached(state);\n\n  delete cached[url];\n}\n\nfunction fetch(state, params) {\n  const pending = selectPending(state);\n\n  if (!pending.find((request) => request.url === params.url)) {\n    pending.push(params);\n  }\n}\n\nfunction fetched(state, { url }) {\n  const pending = selectPending(state);\n\n  const index = pending.findIndex((request) => request.url === url);\n  if (index > -1) {\n    pending.splice(index, 1);\n  }\n}\n\n// Action Creators\n\nfunction* parsePage({ page, parserName }) {\n  const queryParams = { action: \"parse\", page };\n\n  yield put(\n    Requests.fetch({\n      desc: \"parsePage\",\n      parserName,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadreModels({ pageId }) {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmpageid: pageId,\n    cmtype: \"page\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadreModels\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadres() {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmtitle: \"Category:Cadre\",\n    cmtype: \"subcat\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadres\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryRevisions({ pageIds }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"revisions\",\n    pageids: pageIds.join(\"|\"),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryRevisions\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryPageIds({ pages }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"pageprops\",\n    titles: encodeURIComponent(pages.map((_) => _.text).join(\"|\")),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryPageIds\",\n      pages,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.io.requests;\n}\n\nfunction selectCached(state) {\n  const requests = select(state);\n  return requests.cached;\n}\n\nfunction selectCachedUrl(state, url) {\n  const cached = selectCached(state);\n  return cached[url];\n}\n\nfunction selectCachedRequestsByPageIds(state, pageIds) {\n  const cached = selectCached(state);\n  return Object.fromEntries(\n    Object.entries(cached).filter(\n      ([key, { data }]) =>\n        data && data.parse && pageIds.includes(data.parse.pageid)\n    )\n  );\n}\n\nfunction selectCachedParsedPageIds(state) {\n  const cached = selectCached(state);\n  return Object.values(cached)\n    .filter(({ data }) => data && data.parse)\n    .map(({ data }) => data.parse.pageid);\n}\n\nfunction selectPending(state) {\n  const requests = select(state);\n  return requests.pending;\n}\n\n// Utils\n\nfunction jsonApiRequest(queryParams) {\n  const jsonFormat = {\n    formatversion: 2,\n    format: \"json\",\n  };\n  const params = { ...queryParams, ...jsonFormat };\n\n  const queryString = Object.entries(params)\n    .map((keyValue) => keyValue.join(\"=\"))\n    .join(\"&\");\n\n  return \"https://privateerpress.wiki/api.php?\" + queryString;\n}\n","import { StateShard } from \"./utils\";\n\nconst ParserNames = StateShard(\n  \"ParserNames\",\n  init,\n  { setForPage },\n  {},\n  { selectByPage }\n);\n\nexport { ParserNames };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.parserNames = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, parserName }) {\n  const parserNames = select(state);\n  parserNames[page] = parserName;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.parserNames;\n}\n\nfunction selectByPage(state, page) {\n  const parserNames = select(state);\n  return parserNames[page];\n}\n","import { put, take } from \"redux-saga/effects\";\n\nimport { Requests } from \"../../state/io/Requests\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* cacheParserNames() {\n  while (true) {\n    const action = yield take(Requests.fetch().type);\n    const { payload } = action;\n    const { desc, queryParams, parserName } = payload;\n\n    if (desc !== \"parsePage\") {\n      continue;\n    }\n\n    const page = queryParams.page;\n\n    if (!page || !parserName) {\n      console.error(\"Could not cache parser!\", { page, parserName }, action);\n      continue;\n    }\n\n    yield put(ParserNames.setForPage({ page, parserName }));\n  }\n}\n\nexport { cacheParserNames };\n","const jsonp = (url) => {\n  return new Promise(function (resolve, reject) {\n    const callbackName = \"jsonp_callback_\" + Math.round(100000 * Math.random());\n    window[callbackName] = function (data) {\n      delete window[callbackName];\n      document.body.removeChild(script);\n      resolve(data);\n    };\n\n    const script = document.createElement(\"script\");\n    script.src =\n      url + (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"callback=\" + callbackName;\n    document.body.appendChild(script);\n  });\n};\n\nexport { jsonp };\n","/*\nThese sagas fetch and cache wiki pages.\n\nThe wiki's JSONP API is used to fetch page contents. Since we want to be\npolite, we only call the API every two seconds. This throttle is implemented in\nfetchWikiPage through an actionChannel and a call to delay.\n*/\n\nimport {\n  actionChannel,\n  call,\n  delay,\n  put,\n  select,\n  take,\n} from \"redux-saga/effects\";\nimport { FetchedWikiPage, FetchedWikiPageRevisions } from \"../../../messages\";\nimport { jsonp } from \"../jsonp\";\n\nimport { Requests } from \"../../../state/io/Requests\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { CadreModels } from \"../../../state/CadreModels\";\nimport { PageIds } from \"../../../state/PageIds\";\n\nfunction* fetchWikiPage() {\n  const wikiPageChannel = yield actionChannel(Requests.fetch().type);\n\n  while (true) {\n    const action = yield take(wikiPageChannel);\n    const { payload } = action;\n    const { desc, parserName, queryParams, url } = payload;\n\n    let request = yield select(Requests.selectCachedUrl(url));\n    let wait = false;\n    if (!request) {\n      const data = yield call(jsonp, url);\n      request = { data, queryParams };\n      wait = true;\n      yield put(Requests.cache({ url, data, queryParams }));\n    }\n    yield put(Requests.fetched({ url }));\n\n    const data = request.data;\n\n    if (desc === \"queryRevisions\") {\n      const pageRevisions = data.query.pages;\n\n      yield put(FetchedWikiPageRevisions({ pageRevisions }));\n    }\n\n    if (desc === \"queryCadres\") {\n      const categorymembers = data.query.categorymembers;\n      if (categorymembers) {\n        const cadreCategoryMembers = Object.fromEntries(\n          categorymembers.map((member) => [\n            member.pageid,\n            member.title.replace(/^Category:/, \"\"),\n          ])\n        );\n\n        yield put(CadreCategoryMembers.set({ cadreCategoryMembers }));\n      }\n    }\n\n    if (desc === \"queryCadreModels\") {\n      const { cmpageid: cadrePageId } = queryParams;\n\n      const categoryMembers = data.query.categorymembers;\n      if (categoryMembers) {\n        const cadreModels = categoryMembers.map(({ pageid, title }) => ({\n          pageId: pageid,\n          title,\n        }));\n\n        yield put(CadreModels.setForCadrePageId({ cadrePageId, cadreModels }));\n      }\n    }\n\n    if (desc === \"parsePage\") {\n      const { page } = queryParams;\n\n      if (!page) {\n        console.error(\"No page to fetch!\", action);\n        continue;\n      }\n\n      yield put(FetchedWikiPage({ page, data: data.parse, parserName }));\n    }\n\n    if (desc === \"queryPageIds\") {\n      const { pages } = payload;\n\n      const titleToPageId = Object.fromEntries(\n        data.query.pages.map(({ title, pageid }) => [title, pageid])\n      );\n\n      const pageIdByTitle = Object.fromEntries(\n        pages.map(({ text, page }) => [page.split(\"#\")[0], titleToPageId[text]])\n      );\n\n      yield put(PageIds.addPages({ pageIdByTitle }));\n    }\n\n    if (wait) {\n      const twoSecondsInMs = 2 * 1000;\n      yield delay(twoSecondsInMs);\n    }\n  }\n}\n\nexport { fetchWikiPage };\n","/*\nThese sagas make sure, cached wiki pages stay up-to-date.\n\nEach app reload triggers a RefreshWikiPages action, that starts the cache\nupdate process. The refreshWikiPages saga bulk loads revision data for all\ncached pages from the wiki API. If a page cannot be found (probably because it\nwas deleted from the wiki), it is removed from the cache. If revision\ninformation is found, it is compared with the cached revision of the page. If\nthe loaded revision is higher, the page is removed and fetched again. If the\ncached revision is higher or equal, the page is not refreshed and remains\ncached.\n*/\n\nimport { FetchedWikiPageRevisions, RefreshWikiPages } from \"../../../messages\";\nimport { all, put, take, select } from \"redux-saga/effects\";\n\nimport { Requests } from \"../../../state/io/Requests\";\nimport { ParserNames } from \"../../../state/ParserNames\";\n\nfunction* updateCache() {\n  yield all([refreshWikiPages(), refreshOutdatedWikiPages()]);\n}\n\nexport { updateCache };\n\nfunction* refreshWikiPages() {\n  yield take(RefreshWikiPages().type);\n  const parsedPageIds = yield select(Requests.selectCachedParsedPageIds());\n\n  const queryLength = 50;\n  for (let i = 0; i < parsedPageIds.length; i += queryLength) {\n    const pageIds = parsedPageIds.slice(i, i + queryLength);\n\n    yield* Requests.queryRevisions({ pageIds });\n  }\n}\n\nfunction* refreshOutdatedWikiPages() {\n  while (true) {\n    const { payload } = yield take(FetchedWikiPageRevisions().type);\n    const { pageRevisions } = payload;\n    const revInfoByPageId = Object.fromEntries(\n      pageRevisions.map((revision) => [\n        revision.pageid,\n        revision.missing\n          ? { missing: revision.missing }\n          : {\n              revid: Math.max(\n                ...revision.revisions.map((revision) => revision.revid)\n              ),\n            },\n      ])\n    );\n    const pageIds = pageRevisions.map((revision) => revision.pageid);\n\n    const requests = yield select(\n      Requests.selectCachedRequestsByPageIds(pageIds)\n    );\n\n    for (const [url, { data, queryParams }] of Object.entries(requests)) {\n      const { page } = queryParams;\n      const { parse } = data;\n\n      const revInfo = revInfoByPageId[parse.pageid];\n      if (revInfo.missing) {\n        yield put(Requests.expire({ url }));\n      } else if (parse.revid < revInfo.revid) {\n        yield put(Requests.expire({ url }));\n        const parserName = yield select(ParserNames.selectByPage(page));\n\n        yield* Requests.parsePage({ page, parserName });\n      }\n    }\n  }\n}\n","function partitionBy(slice, array) {\n  var arrays = [];\n\n  for (var i = 0; i < array.length; i += slice) {\n    arrays[arrays.length] = array.slice(i, i + slice);\n  }\n\n  return arrays;\n}\n\nexport { partitionBy };\n","import { all, put, take, select } from \"redux-saga/effects\";\n\nimport { AppSync } from \"../../../state/AppSync\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\nimport { FactionModels } from \"../../../state/FactionModels\";\nimport { Factions } from \"../../../state/Factions\";\nimport { PageIds } from \"../../../state/PageIds\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchPageIds() {\n  const cachedPageIds = yield select(PageIds.select());\n\n  if (Object.keys(cachedPageIds).length === 0) {\n    yield put(\n      AppSync.addReasons({\n        reasons: [\n          {\n            reason: \"Loading factions\",\n            description: \"Load available Warcaster factions\",\n          },\n          {\n            reason: \"Loading cyphers\",\n            description: \"Load available Cypher Codecs\",\n          },\n          {\n            reason: \"Loading wildcard models\",\n            description: \"Load available Wild Cards\",\n          },\n        ],\n      })\n    );\n\n    const [factionsSet] = yield all([\n      take(Factions.set().type),\n      take(CypherCodecs.set().type),\n      take(WildCardModels.set().type),\n    ]);\n\n    const factions = Object.keys(factionsSet.payload.factions);\n\n    yield put(\n      AppSync.addReasons({\n        reasons: factions.map((faction) => ({\n          reason: `Loading ${faction.replace(/_/g, \" \")}`,\n          description: `Used to build ${faction.replace(/_/g, \" \")} menu`,\n        })),\n      })\n    );\n\n    yield all(\n      factions.map((faction) =>\n        take(\n          (action) =>\n            action.type === FactionModels.setForPage().type &&\n            action.payload.page === faction\n        )\n      )\n    );\n\n    const factionModelPages = Object.values(\n      yield select(FactionModels.select())\n    )\n      .flat()\n      .map((_) => _.Name);\n\n    const wildCardPages = Object.values(yield select(WildCardModels.select()))\n      .flat()\n      .map((_) => _.Name)\n      .sort(({ text, page }) => [text, page])\n      .filter(\n        ({ text, page }, index, cards) =>\n          !index ||\n          (text !== cards[index - 1].text && page !== cards[index - 1].page)\n      );\n\n    const cypherPages = (yield select(CypherCodecs.select())).map(\n      (_) => _.Cypher\n    );\n\n    const pages = [...factionModelPages, ...wildCardPages, ...cypherPages].sort(\n      (_) => _.page\n    );\n    const pageSlices = partitionBy(50, pages);\n\n    yield put(\n      AppSync.addReasons({\n        reasons: pageSlices.map((_, index) => ({\n          reason: `Loading page ids ${index + 1} of ${pageSlices.length}`,\n          description:\n            \"Card lists are encoded in the URL using unique wiki page ids\",\n        })),\n      })\n    );\n\n    for (const pages of pageSlices) {\n      yield* Requests.queryPageIds({ pages });\n    }\n\n    let processedCount = 0;\n    while (yield take(PageIds.addPages().type)) {\n      processedCount += 1;\n      if (pageSlices.length === processedCount) {\n        yield put(AppSync.done());\n      }\n    }\n  }\n}\n\nexport { fetchPageIds };\n","import { all } from \"redux-saga/effects\";\nimport { fetchWikiPage } from \"./fetchWikiPage\";\nimport { updateCache } from \"./updateCache\";\nimport { fetchPageIds } from \"./fetchPageIds\";\n\nfunction* cacheWikiPages() {\n  yield all([fetchPageIds(), updateCache(), fetchWikiPage()]);\n}\n\nexport { cacheWikiPages };\n","import { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreCategoryMembers() {\n  yield* Requests.queryCadres();\n}\n\nexport { fetchCadreCategoryMembers };\n","import { take } from \"redux-saga/effects\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreModels() {\n  while (true) {\n    const {\n      payload: { cadreCategoryMembers },\n    } = yield take(CadreCategoryMembers.set().type);\n\n    const pageIds = Object.keys(cadreCategoryMembers);\n    for (const pageId of pageIds) {\n      yield* Requests.queryCadreModels({ pageId });\n    }\n  }\n}\n\nexport { fetchCadreModels };\n","/*\nThese sagas load meta data necessary for grouping models into cadres.\n\n`fetchCadreCategoryMembers` gets a list of all cadres in game, while `fetchCadreModels` fetches\nthe cadre models for a given cadre.\n*/\n\nimport { all } from \"redux-saga/effects\";\nimport { fetchCadreCategoryMembers } from \"./fetchCadreCategoryMembers\";\nimport { fetchCadreModels } from \"./fetchCadreModels\";\n\nfunction* fetchCadres() {\n  yield all([fetchCadreCategoryMembers(), fetchCadreModels()]);\n}\n\nexport { fetchCadres };\n","function cleanText(text) {\n  return text.replace(/\\n/g, \"\");\n}\n\nfunction prepareDOM(text) {\n  const doc = new DOMParser().parseFromString(text, \"text/html\");\n  doc\n    .querySelectorAll(\n      \"h1 > span[id], h2 > span[id], h3 > span[id], h4 > span[id]\"\n    )\n    .forEach((node) => {\n      node.parentNode.id = node.id;\n    });\n\n  return doc;\n}\n\nexport { cleanText, prepareDOM };\n","import { prepareDOM } from \"./utils\";\n\nconst parseCypherText = (text) => {\n  const doc = prepareDOM(text);\n\n  const type = extractLink(doc, \"Type\");\n  const pow = extractLink(doc, \"Pow\");\n  const effect = extractParagraphs(doc, \"Effect\");\n  const faction = extractLink(doc, \"Faction\");\n  const source = extractLink(doc, \"Source\");\n\n  const cypher = {\n    type,\n    pow,\n    effect,\n    faction,\n    source,\n  };\n\n  return removeUndefinedValues(cypher);\n};\n\nexport { parseCypherText };\n\nfunction extractLink(doc, id) {\n  const p = doc.querySelector(`h2#${id} ~ p`);\n  if (!p) return undefined;\n\n  const a = p.querySelector(\"a\");\n  if (!a) return { text: p.innerText };\n\n  const hrefs = a.href.split(\"title=\");\n  return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n}\n\nfunction extractParagraphs(doc, id) {\n  function helper(node, texts) {\n    switch (node.tagName) {\n      case \"P\":\n        return helper(node.nextSibling, [...texts, node.innerText.trim()]);\n      case \"H2\":\n        return texts;\n      default:\n        return helper(node.nextSibling, texts);\n    }\n  }\n\n  const node = doc.querySelector(`h2#${id} ~ p`);\n  if (!node) return undefined;\n\n  return helper(node, []);\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n","import { cleanText } from \"./utils\";\n\nfunction parseAnchorTable(table) {\n  const header = [...table.querySelectorAll(\"th\")].map((th) =>\n    cleanText(th.innerText)\n  );\n\n  const body = [...table.querySelectorAll(\"tr\")].map((tr) =>\n    [...tr.querySelectorAll(\"td\")].map((td) => {\n      const anchors = [...td.querySelectorAll(\"a\")].map(parseAnchor);\n      if (anchors.length > 0) {\n        return anchors;\n      }\n      const text = parseText(td);\n      if (text) {\n        return [{ text }];\n      }\n      return [];\n    })\n  );\n\n  return body\n    .filter((row) => row.length === header.length)\n    .map((row) =>\n      Object.fromEntries(\n        header.flatMap((title, i) => (row[i] ? [[title, row[i]]] : []))\n      )\n    );\n}\n\nfunction parseAnchor(a) {\n  const titleColon = a.title.split(\":\");\n  const hrefTitle = a.href.split(\"title=\");\n  return {\n    text: titleColon[titleColon.length - 1],\n    page: hrefTitle[hrefTitle.length - 1],\n  };\n}\n\nexport { parseAnchor, parseAnchorTable };\n\nfunction parseText(node) {\n  return cleanText(node.innerText);\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseCypherCodecsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const cypherCodecsTable = doc.querySelector(\"table.sortable\");\n  if (!cypherCodecsTable) {\n    console.error(\"parseCypherCodecsText: cypherCodecsTable not found!\");\n    return undefined;\n  }\n\n  const cypherCodecs = parseAnchorTable(cypherCodecsTable);\n  return cypherCodecs.map((cypherCodec) =>\n    Object.fromEntries(\n      Object.entries(cypherCodec).map(([key, values]) => [key, values[0]])\n    )\n  );\n};\n\nexport { parseCypherCodecsText };\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionModelsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const table = doc.querySelector(\"h1#Models ~ table\");\n  if (!table) {\n    console.error(\"parseFactionModelsText: table not found!\");\n    return undefined;\n  }\n  const models = parseAnchorTable(table);\n\n  return models.map((model) =>\n    Object.fromEntries(\n      Object.entries(model).flatMap(([key, values]) =>\n        key === \"Subtype\"\n          ? values.length > 0\n            ? [[key, values]]\n            : []\n          : [[key, values[0]]]\n      )\n    )\n  );\n};\n\nexport { parseFactionModelsText };\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const p = doc.querySelector(\"h2#Factions ~ p\");\n  const factions = Object.fromEntries(collectFactions(p, []));\n  delete factions.Wild_Card; // Wild Cards are crawled independently.\n  return factions;\n};\n\nexport { parseFactionsText };\n\nfunction collectFactions(node, factions) {\n  switch (node.tagName) {\n    case \"P\":\n      const a = node.querySelector(\"a\");\n      if (!a) {\n        console.error(\"collectFactions: a not found!\");\n        return collectFactions(node.nextSibling, factions);\n      }\n      const anchor = parseAnchor(a);\n      const faction = [anchor.page, anchor];\n      return collectFactions(node.nextSibling, [...factions, faction]);\n    case \"H2\":\n      return factions;\n    default:\n      return collectFactions(node.nextSibling, factions);\n  }\n}\n","import { parseAnchor } from \"./parsers\";\nimport { cleanText, prepareDOM } from \"./utils\";\n\nconst parseModelText = (text) => {\n  const doc = prepareDOM(text);\n\n  const storeLinks = extractStoreLinks(doc);\n  const factionAndTypes =\n    extractList(doc, \"Unit_Faction_and_Type\") ||\n    extractList(doc, \"Model_Faction_and_Type\");\n  const faction = factionAndTypes[0];\n  const types = factionAndTypes.slice(1);\n  const squadSize = extractText(doc, \"Squad_Size\");\n  const deploymentCost = extractText(doc, \"Deployment_Cost\");\n  const baseSize = extractText(doc, \"Base_Size\");\n  const health = extractText(doc, \"Health\");\n  const wildCardFactions = extractList(doc, \"Wild_Card_Factions\");\n  const weaponPoints = extractText(doc, \"Weapon_Points\");\n  const hardpoints = extractText(doc, \"Hardpoints\");\n  const specialRules = extractDefinitions(doc, \"Special_Rules\");\n  const chassisSpecialRules = extractDefinitions(doc, \"Chassis_Special_Rules\");\n  const chassisAdvantages = extractDefinitions(doc, \"Chassis_Advantages\");\n  const advantages = extractDefinitions(doc, \"Advantages\");\n  const maneuvers = extractDefinitions(doc, \"Maneuvers\");\n  const vehicleWeaponSelection = extractWeaponSelection(\n    doc,\n    \"Weapon_Selection\"\n  );\n  const cortexes = extractCortexes(doc, \"Cortexes\");\n\n  const modelStatsData = [\n    ...doc\n      .querySelector(\"h3#Unit_Stats ~ table, h3#Model_Stats ~ table\")\n      .querySelectorAll(\"tr > td\"),\n  ].map((_) => cleanText(_.innerText));\n  const modelStatsLength = modelStatsData.length / 2;\n  const modelStats = Object.fromEntries(\n    Array.from({ length: modelStatsLength }, (_, i) => i).map((i) => [\n      modelStatsData[i],\n      modelStatsData[i + modelStatsLength],\n    ])\n  );\n\n  let weaponsData = [...doc.querySelectorAll(\"h3#Weapons ~ table tr\")].map(\n    (tr) => [...tr.querySelectorAll(\"td\")]\n  );\n  let weapons = undefined;\n  if (weaponsData.length > 0) {\n    weapons = [];\n    let header = weaponsData[0].map((td) => td.innerText);\n    let weaponsList = weaponsData.slice(1);\n    for (const tds of weaponsList) {\n      if (tds.length === header.length) {\n        const stats = tds.map((td) => td.innerText);\n        const weapon = Object.fromEntries(\n          header.map((key, i) => [cleanText(key), cleanText(stats[i])])\n        );\n        weapons.push(weapon);\n      }\n      if (tds.length === 1) {\n        const previousWeapons = weapons.slice(0, weapons.length - 1);\n        const lastWeapon = weapons[weapons.length - 1];\n\n        const weapon = {\n          ...lastWeapon,\n          specialRules: parseDefinitionText(tds[0]),\n        };\n        weapons = [...previousWeapons, weapon];\n      }\n    }\n  }\n\n  function weaponDetails() {\n    const weaponDetailsTable = doc.querySelector(\"table.mw-collapsible\");\n    if (!weaponDetailsTable) return undefined;\n\n    const weaponDetailsData = [...weaponDetailsTable.querySelectorAll(\"tr\")]\n      .map((tr) => [...tr.querySelectorAll(\"td, th\")])\n      .filter((_) => _.length === 4);\n    if (!weaponDetailsData || weaponDetailsData.length === 0) return undefined;\n\n    const detailsHeader = weaponDetailsData[0].map((_) =>\n      cleanText(_.innerText)\n    );\n    return weaponDetailsData.slice(1).map((tds) =>\n      Object.fromEntries(\n        tds.map((td, i) => {\n          const a = td.querySelector(\"a\");\n          const hrefs = a ? a.href.split(\"title=\") : undefined;\n          const text = cleanText(td.innerText);\n          return [\n            detailsHeader[i],\n            a ? { text, page: hrefs[hrefs.length - 1] } : { text },\n          ];\n        })\n      )\n    );\n  }\n\n  const release = extractText(doc, \"Release\", { node: \"h1\" });\n  const lore = extractText(doc, \"Lore\", { node: \"h1\" });\n\n  const model = {\n    storeLinks,\n    faction,\n    types,\n    squadSize,\n    deploymentCost,\n    baseSize,\n    health,\n    wildCardFactions,\n    hardpoints,\n    weaponPoints,\n    modelStats,\n    specialRules,\n    weapons,\n    advantages,\n    maneuvers,\n    vehicleWeaponSelection,\n    cortexes,\n    chassisSpecialRules,\n    chassisAdvantages,\n    weaponDetails: weaponDetails(),\n    release,\n    lore,\n  };\n\n  return removeUndefinedValues(model);\n};\n\nexport { parseModelText };\n\nfunction extractStoreLinks(doc) {\n  return [...doc.querySelectorAll(\"p\")]\n    .filter((p) =>\n      [...p.querySelectorAll(\"a\")].some((a) => a.href.includes(\"store\"))\n    )\n    .map((p) => p.innerHTML.replace(/\\n/g, \"\"))\n    .flatMap((html) => html.split(\"<br>\"));\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n\nfunction extractText(doc, id, { node = \"h3\" } = {}) {\n  const p = doc.querySelector(`${node}#${id} ~ p`);\n  if (!p) return undefined;\n\n  return cleanText(p.innerText);\n}\n\nfunction extractList(doc, id) {\n  const p = doc.querySelector(`h3#${id} ~ p`);\n  if (!p) return undefined;\n\n  const as = [...p.querySelectorAll(\"a\")];\n  if (as.length === 0) return undefined;\n\n  return as.map((a) => {\n    const hrefs = a.href.split(\"title=\");\n    return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n  });\n}\n\nfunction extractWeaponSelection(doc, id) {\n  const node = doc.querySelector(`h3#${id} + p`);\n  if (!node) return undefined;\n\n  const anchors = [...node.querySelectorAll(\"a\")];\n\n  return anchors.map((a) => parseAnchor(a));\n}\n\nfunction extractCortexes(doc, id) {\n  function helper(node, cortexes) {\n    switch (node.tagName) {\n      case \"P\":\n        const cortex = node.querySelector(\"b\").innerText;\n        const definitions = parseDefinitionText(node);\n        return helper(node.nextSibling, [...cortexes, [cortex, definitions]]);\n      case \"H3\":\n        return cortexes;\n      default:\n        return helper(node.nextSibling, cortexes);\n    }\n  }\n\n  const node = doc.querySelector(`h3#${id} ~ p`);\n  if (!node) return undefined;\n\n  return Object.fromEntries(helper(node, []));\n}\n\nfunction parseDefinitionText(node) {\n  const uls = [...node.querySelectorAll(\"ul\")];\n\n  for (const ul of uls) {\n    const list = [...ul.querySelectorAll(\"li\")].map(\n      (li) => \"  \" + li.innerText\n    );\n    ul.replaceWith(list.join(\"\"));\n  }\n\n  const definitions = node.innerHTML\n    .split(\"<br>\")\n    .map((_) => _.replace(/<[^>]+>/g, \"\").trim());\n\n  const pairs = definitions.flatMap((definition) => {\n    const separator = \": \";\n    const groups = definition.split(separator).map(cleanText).map(encodeHTML);\n    if (groups.length < 2) return [];\n    const key = groups[0];\n    const val = groups.slice(1).join(separator).replace(/\\s\\s/g, \"\\n  \");\n    return [[key, val]];\n  });\n  if (pairs.length === 0) return undefined;\n\n  return Object.fromEntries(pairs);\n}\n\nfunction encodeHTML(text) {\n  const parser = new DOMParser();\n  const dom = parser.parseFromString(\n    \"<!doctype html><body>\" + text,\n    \"text/html\"\n  );\n  return dom.body.textContent;\n}\n\nfunction extractDefinitions(doc, id) {\n  const ul = doc.querySelector(`h3#${id} ~ p ~ ul`);\n  const p = doc.querySelector(`h3#${id} ~ p`);\n  if (!p) return undefined;\n\n  if (ul) p.append(ul);\n\n  return parseDefinitionText(p);\n}\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseVehicleAndWarjackWeaponText = (text) => {\n  const doc = prepareDOM(text);\n\n  const vehicleWeaponId = doc.querySelector(\"#Vehicle_Weapon\");\n  const warjackWeaponId = doc.querySelector(\"#Warjack_Weapon\");\n\n  if (vehicleWeaponId && warjackWeaponId) {\n    const vehicleWeapon = parseVehicleOrWarjackWeapon(\n      \"#Vehicle_Weapon ~ \",\n      doc\n    );\n    const warjackWeapon = parseVehicleOrWarjackWeapon(\n      \"#Warjack_Weapon ~ \",\n      doc\n    );\n\n    return { vehicleWeapon, warjackWeapon };\n  } else {\n    const vehicleOrWarjackWeapon = parseVehicleOrWarjackWeapon(\"\", doc);\n\n    return { vehicleOrWarjackWeapon };\n  }\n};\n\nexport { parseVehicleAndWarjackWeaponText };\n\nfunction parseVehicleOrWarjackWeapon(prefix, doc) {\n  let res = {};\n\n  const availableFor = [\n    ...doc.querySelectorAll(`${prefix}[id^=Available_For] + p > a`),\n  ].map(parseAnchor);\n\n  res.availableFor = availableFor;\n\n  const pointCostNode = doc.querySelector(`${prefix}[id^=Point_Cost] + p`);\n  if (pointCostNode) {\n    const pointCost = parseInt(pointCostNode.innerText);\n\n    res.pointCost = pointCost;\n  }\n\n  const locationNode = doc.querySelector(`${prefix}[id^=Location] + p`);\n  if (locationNode) {\n    const location = locationNode.innerText.replace(/\\n/g, \"\");\n\n    res.location = location;\n  }\n\n  // Good special rules example: Metaperceptor\n  const specialRulesP = doc.querySelector(`${prefix}[id^=Special_Rules] + p`);\n  if (specialRulesP) {\n    const specialRules = specialRulesP\n      ? Object.fromEntries(\n          specialRulesP.innerText\n            .replace(/\\n$/g, \"\")\n            .split(\"\\n\")\n            .map((specialRule) => specialRule.split(\": \"))\n        )\n      : {};\n\n    res.specialRules = specialRules;\n  }\n\n  // Good weapons examples:\n  // - Nova_Cannon#Warjack_Weapon (several special abilities)\n  // - Protean_Forge (several attack modes)\n  // - Assault_Rifle_%26_Bayonet (several weapons)\n  const table = doc.querySelector(`${prefix}[id^=Weapons] + table`);\n\n  if (table) {\n    const header = [...table.querySelectorAll(\"tr:first-of-type td\")].map(\n      (td) => td.innerText.replace(/\\n/g, \"\")\n    );\n\n    const weapons = [...table.querySelectorAll(\"tr:not(:first-of-type)\")]\n      .map((tr) => [...tr.querySelectorAll(\"td\")])\n      .flatMap((tr, index) =>\n        index % 2 === 0\n          ? [\n              tr.map((td) =>\n                [...td.childNodes]\n                  .map((node) =>\n                    (node.innerText || node.textContent).replace(/\\n$/g, \"\")\n                  )\n                  .filter((text) => [\" \", \"\"].indexOf(text) === -1)\n              ),\n            ]\n          : tr.map((td) => {\n              if (td.innerText === \"\") return {};\n              const ul = td.querySelector(\"ul\");\n\n              if (ul) {\n                const textNode = td.querySelector(\"ul\").previousSibling;\n                textNode.nodeValue.replace(/\\n/g, \" \");\n\n                td.querySelector(\"ul\").insertAdjacentText(\n                  \"beforebegin\",\n                  textNode.nodeValue.replace(/\\n/g, \" \") +\n                    td.querySelector(\"ul\").innerText.replace(/\\n/g, \" \")\n                );\n                textNode.remove();\n                td.querySelector(\"ul\").remove();\n              }\n\n              const specialRules = Object.fromEntries(\n                [...td.childNodes]\n                  .map((node) =>\n                    node.nodeName === \"BR\"\n                      ? \"\\n\"\n                      : node.innerText || node.textContent\n                  )\n                  .join(\"\")\n                  .replace(/\\n$/, \"\")\n                  .split(\"\\n\")\n                  .filter((text) => text !== \"\")\n                  .map((entry) => {\n                    let colonIndex = entry.indexOf(\": \");\n                    return [\n                      entry.slice(0, colonIndex),\n                      entry.slice(colonIndex + 2),\n                    ];\n                  })\n              );\n\n              if (Object.keys(specialRules).length === 0) return {};\n              return { specialRules };\n            })\n      )\n      .reduce(\n        (acc, tr, index) =>\n          index % 2 === 0\n            ? [\n                ...acc,\n                tr.reduce(\n                  (acc2, value, index2) => ({\n                    ...acc2,\n                    [header[index2]]: value.length === 1 ? value[0] : value,\n                  }),\n                  {}\n                ),\n              ]\n            : [\n                ...acc.slice(0, acc.length - 1),\n                { ...acc[acc.length - 1], ...tr },\n              ],\n        []\n      );\n    if (weapons.length > 0) {\n      res.weapons = weapons;\n    }\n  }\n\n  return res;\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseWildCardText = (text) => {\n  const doc = prepareDOM(text);\n\n  const h1OrTable = doc.querySelectorAll(\"h1, table.sortable\");\n  const factionAndModels = [];\n\n  for (let i = 0; i < h1OrTable.length; i++) {\n    if (i % 2 === 0) {\n      const h1 = h1OrTable[i];\n      if (h1.tagName !== \"H1\") {\n        console.error(\n          `parseWildCardText: expected H1, but got ${h1.tagName}!`,\n          h1\n        );\n      }\n      factionAndModels.push({ faction: h1.id });\n    } else {\n      const table = h1OrTable[i];\n      if (table.tagName !== \"TABLE\") {\n        console.error(\n          `parseWildCardText: expected TABLE, but got ${table.tagName}!`,\n          table\n        );\n      }\n      const last = factionAndModels[factionAndModels.length - 1];\n      const models = parseAnchorTable(table);\n      last.models = models.map((model) =>\n        Object.fromEntries(\n          Object.entries(model).flatMap(([key, values]) =>\n            key === \"Subtype\"\n              ? values.length > 0\n                ? [[key, values]]\n                : []\n              : [[key, values[0]]]\n          )\n        )\n      );\n    }\n  }\n\n  return factionAndModels;\n};\n\nexport { parseWildCardText };\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherText } from \"../../core/parse\";\nimport { Cyphers } from \"../../../state/Cyphers\";\n\nfunction* parseCypher({ data, page }) {\n  const cypher = parseCypherText(data.text);\n  cypher.name = { text: data.title, page };\n  yield put(Cyphers.setForPage({ page, cypher }));\n}\n\nexport { parseCypher };\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherCodecsText } from \"../../core/parse\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\n\nfunction* parseCypherCodecs({ data }) {\n  const cypherCodecs = parseCypherCodecsText(data.text);\n  yield put(CypherCodecs.set({ cypherCodecs }));\n}\n\nexport { parseCypherCodecs };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionModelsText } from \"../../core/parse\";\nimport { FactionModels } from \"../../../state/FactionModels\";\n\nfunction* parseFactionModels({ data, page }) {\n  const factionModels = parseFactionModelsText(data.text);\n  yield put(FactionModels.setForPage({ page, factionModels }));\n}\n\nexport { parseFactionModels };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionsText } from \"../../core/parse\";\nimport { Factions } from \"../../../state/Factions\";\n\nfunction* parseFactions({ data }) {\n  const factions = parseFactionsText(data.text);\n  yield put(Factions.set({ factions }));\n}\n\nexport { parseFactions };\n","import { put } from \"redux-saga/effects\";\nimport { parseModelText } from \"../../core/parse\";\nimport { Models } from \"../../../state/Models\";\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* parseModel({ data, page }) {\n  const model = parseModelText(data.text);\n  model.name = { text: data.title, page };\n\n  const cortexSelections = identifyCortexSelections(\n    model.cortexes,\n    data.categories\n  );\n\n  if (cortexSelections) {\n    model.cortexSelections = cortexSelections;\n  }\n\n  const warjackWeaponSelections = buildWarjackWeaponSelections(\n    model.weaponDetails\n  );\n\n  if (warjackWeaponSelections) {\n    model.warjackWeaponSelections = warjackWeaponSelections;\n  }\n\n  yield put(Models.setForPage({ page, model }));\n\n  let fetchPages = [];\n\n  if (cortexSelections) {\n    const cortexCategories = Object.values(cortexSelections).flatMap(\n      (advantages) =>\n        Object.values(advantages).flatMap(({ category }) => ({\n          text: category.replace(/_/g, \" \"),\n          page: category,\n        }))\n    );\n\n    fetchPages = [...fetchPages, ...cortexCategories];\n  }\n\n  if (warjackWeaponSelections) {\n    const weaponPages = Object.values(warjackWeaponSelections).map(\n      ({ name, page }) => ({ text: name, page })\n    );\n\n    fetchPages = [...fetchPages, ...weaponPages];\n  }\n\n  if (model.vehicleWeaponSelection) {\n    fetchPages = [...fetchPages, ...model.vehicleWeaponSelection];\n  }\n\n  if (fetchPages.length > 0) {\n    const pageSlices = partitionBy(50, fetchPages);\n\n    for (const pages of pageSlices) {\n      yield* Requests.queryPageIds({ pages: pages });\n    }\n  }\n}\n\nexport { parseModel };\n\nfunction buildWarjackWeaponSelections(weaponDetails) {\n  if (!weaponDetails) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    weaponDetails.map(({ Cost, Location, Weapon }) => [\n      Weapon.page,\n      {\n        cost: Cost.text,\n        location: Location.text,\n        name: Weapon.text,\n        page: Weapon.page,\n      },\n    ])\n  );\n}\n\nfunction identifyCortexSelections(cortexes, categories) {\n  if (\n    !cortexes ||\n    Object.entries(cortexes).length === 0 ||\n    !categories ||\n    Object.entries(categories).length === 0\n  ) {\n    return undefined;\n  }\n\n  const categoryTexts = categories.map(({ category }) => category);\n\n  return Object.fromEntries(\n    Object.entries(cortexes).map(([cortex, advantages]) => [\n      cortex,\n      Object.fromEntries(\n        Object.entries(advantages).map(([advantage, text]) => [\n          advantage,\n          {\n            category: `Category:${findClosestCategory(\n              advantage,\n              categoryTexts\n            )}`,\n            text,\n          },\n        ])\n      ),\n    ])\n  );\n}\n\nfunction findClosestCategory(advantage, categoryTexts) {\n  return categoryTexts.find(\n    (category) => advantage === category.replace(/^WNM_/, \"\").replace(/_/g, \" \")\n  );\n}\n","import { put, select } from \"redux-saga/effects\";\nimport { parseVehicleAndWarjackWeaponText } from \"../../core/parse\";\nimport { VehicleWeapons } from \"../../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../../state/WarjackWeapons\";\nimport { Models } from \"../../../state/Models\";\n\nfunction* parseVehicleOrWarjackWeapon({ data, page }) {\n  const { vehicleWeapon, vehicleOrWarjackWeapon, warjackWeapon } =\n    parseVehicleAndWarjackWeaponText(data.text);\n\n  if (vehicleWeapon)\n    yield put(VehicleWeapons.setForPage({ page, vehicleWeapon }));\n  if (warjackWeapon)\n    yield put(WarjackWeapons.setForPage({ page, warjackWeapon }));\n  if (vehicleOrWarjackWeapon) {\n    const models = Object.values(yield select(Models.select()));\n\n    const vehicles = models.filter(({ types }) =>\n      types.some(({ text }) => text === \"Vehicle\")\n    );\n    const warjacks = models.filter(({ types }) =>\n      types.some(({ text }) => text === \"Warjack\")\n    );\n\n    const vehicleWeapons = vehicles.flatMap((vehicle) =>\n      vehicle.vehicleWeaponSelection.map((weapon) => weapon.page)\n    );\n    const warjackWeapons = warjacks.flatMap((warjack) =>\n      !warjack.weaponDetails\n        ? []\n        : warjack.weaponDetails.map(({ Weapon }) => Weapon.page)\n    );\n\n    if (vehicleWeapons.includes(page) && warjackWeapons.includes(page)) {\n      console.error(\n        `Vehicle weapons and warjack weapons cannot both contain page ${page}!`\n      );\n    }\n\n    if (vehicleWeapons.includes(page)) {\n      yield put(\n        VehicleWeapons.setForPage({\n          page,\n          vehicleWeapon: vehicleOrWarjackWeapon,\n        })\n      );\n    }\n\n    if (warjackWeapons.includes(page)) {\n      yield put(\n        WarjackWeapons.setForPage({\n          page,\n          warjackWeapon: vehicleOrWarjackWeapon,\n        })\n      );\n    }\n  }\n}\n\nexport { parseVehicleOrWarjackWeapon };\n","import { put } from \"redux-saga/effects\";\nimport { parseWildCardText } from \"../../core/parse\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nfunction* parseWildCard({ data }) {\n  const wildCards = parseWildCardText(data.text);\n  yield put(WildCardModels.set({ wildCards }));\n}\n\nexport { parseWildCard };\n","import { parseCypher } from \"./parseCypher\";\nimport { parseCypherCodecs } from \"./parseCypherCodecs\";\nimport { parseFactionModels } from \"./parseFactionModels\";\nimport { parseFactions } from \"./parseFactions\";\nimport { parseModel } from \"./parseModel\";\nimport { parseVehicleOrWarjackWeapon } from \"./parseVehicleOrWarjackWeapon\";\nimport { parseWildCard } from \"./parseWildCard\";\n\nconst parsers = {\n  parseCypher,\n  parseCypherCodecs,\n  parseFactionModels,\n  parseFactions,\n  parseModel,\n  parseVehicleOrWarjackWeapon,\n  parseWildCard,\n};\n\nexport default parsers;\n","import { select, take } from \"redux-saga/effects\";\n\nimport { FetchedWikiPage } from \"../../messages\";\nimport parsers from \"./parsers\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* parseWikiPages() {\n  while (true) {\n    const action = yield take(FetchedWikiPage().type);\n    const { payload } = action;\n\n    let parserName = payload.parserName;\n    if (!parserName) {\n      parserName = yield select(ParserNames.selectByPage(payload.page));\n    }\n\n    if (!parserName) {\n      console.error(\"Parser name not found!\", action);\n      continue;\n    }\n\n    const parser = parsers[parserName];\n\n    if (!parser) {\n      console.error(\"Parser not found!\", action);\n      continue;\n    }\n\n    yield* parser(payload);\n  }\n}\n\nexport { parseWikiPages };\n","import { all, take } from \"redux-saga/effects\";\nimport { Factions } from \"../../state/Factions\";\nimport { Requests } from \"../../state/io/Requests\";\n\nfunction* triggerFetchWikiPages() {\n  yield all([triggerFetchFactions()]);\n}\n\nexport { triggerFetchWikiPages };\n\nfunction* triggerFetchFactions() {\n  while (true) {\n    const { payload } = yield take(Factions.set().type);\n    const { factions } = payload;\n\n    const factionPages = Object.values(factions).map((faction) => faction.page);\n\n    for (const page of factionPages) {\n      yield* Requests.parsePage({ page, parserName: \"parseFactionModels\" });\n    }\n  }\n}\n","const digitsBase62 =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\nfunction toBase62(n) {\n  if (n === 0) return \"0\";\n  var result = \"\";\n  while (n > 0) {\n    result = digitsBase62[n % digitsBase62.length] + result;\n    n = parseInt(n / digitsBase62.length, 10);\n  }\n  return result;\n}\n\nfunction fromBase62(s) {\n  var result = 0;\n  for (var i = 0; i < s.length; i++) {\n    var p = digitsBase62.indexOf(s[i]);\n    if (p < 0) return NaN;\n    result += p * Math.pow(digitsBase62.length, s.length - i - 1);\n  }\n  return result;\n}\n\nexport { fromBase62, toBase62 };\n","import { eventChannel } from \"redux-saga\";\nimport { all, put, select, take } from \"redux-saga/effects\";\nimport {\n  CardDragEnded,\n  CardDragStarted,\n  MenuItemClicked,\n} from \"../../messages\";\nimport { AppSync } from \"../../state/AppSync\";\nimport { CypherCodecs } from \"../../state/CypherCodecs\";\nimport { Dragging } from \"../../state/Dragging\";\nimport { FactionModels } from \"../../state/FactionModels\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { Lists } from \"../../state/Lists\";\nimport { Models } from \"../../state/Models\";\nimport { PageIds } from \"../../state/PageIds\";\nimport { Url } from \"../../state/Url\";\nimport { VehicleWeapons } from \"../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../state/WarjackWeapons\";\nimport { WildCardModels } from \"../../state/WildCardModels\";\nimport { toBase62, fromBase62 } from \"./base62\";\n\nfunction* ui() {\n  yield all([\n    addCard(),\n    removeCards(),\n    setDraggingFalse(),\n    setDraggingTrue(),\n    updateCards(),\n    updateUrl(),\n    parseListsFromQuery(),\n    parseListsFromQuery2(),\n    fetchCardOnShow(),\n    fetchWeaponsIfVehicleAdded(),\n    fetchWeaponsIfWarjackAdded(),\n  ]);\n}\n\nexport { ui };\n\nfunction* updateCards() {\n  while (true) {\n    const { payload } = yield take(CardDragEnded().type);\n    const { reason, source, destination } = payload;\n    if (reason === \"DROP\" && destination.droppableId.startsWith(\"cards_\")) {\n      const sourceListIndex = parseInt(\n        source.droppableId.replace(\"cards_\", \"\"),\n        10\n      );\n      const sourcePosition = source.index;\n\n      const destinationListIndex = parseInt(\n        destination.droppableId.replace(\"cards_\", \"\"),\n        10\n      );\n      const destinationPosition = destination.index;\n\n      yield put(\n        Lists.moveCard({\n          source: { listIndex: sourceListIndex, cardIndex: sourcePosition },\n          destination: {\n            listIndex: destinationListIndex,\n            cardIndex: destinationPosition,\n          },\n        })\n      );\n    }\n  }\n}\n\nfunction* removeCards() {\n  while (true) {\n    const { payload } = yield take(CardDragEnded().type);\n    const { reason, source, destination } = payload;\n    if (reason === \"DROP\" && destination.droppableId.startsWith(\"trash\")) {\n      const listIndex = parseInt(source.droppableId.replace(\"cards_\", \"\"), 10);\n      const cardIndex = source.index;\n\n      yield put(\n        Lists.removeCard({\n          source: { listIndex, cardIndex },\n        })\n      );\n    }\n  }\n}\n\nfunction* addCard() {\n  while (true) {\n    const { payload } = yield take(MenuItemClicked().type);\n    const { page } = payload;\n    const model = yield select(FactionModels.selectByPage(page));\n    const wildCard = yield select(WildCardModels.selectByPage(page));\n    const cypher = yield select(CypherCodecs.selectByPage(page));\n    if (model || wildCard || cypher) {\n      const pageId = yield select(PageIds.selectByPage(page));\n      yield put(Lists.addCard({ pageId }));\n    }\n  }\n}\n\nfunction* setDraggingTrue() {\n  while (yield take(CardDragStarted().type)) {\n    yield put(Dragging.activate());\n  }\n}\n\nfunction* setDraggingFalse() {\n  while (yield take(CardDragEnded().type)) {\n    yield put(Dragging.deactivate());\n  }\n}\n\nfunction* updateUrl() {\n  while (yield take((action) => action.type.startsWith(\"Lists.\"))) {\n    const lists = yield select(Lists.select());\n    const pageIds = lists.map(({ cards }) => cards.map((_) => _.pageId));\n\n    if (window.history && window.history.replaceState) {\n      const maxPageId = Math.max(0, ...pageIds.flat());\n      const codeLength = Math.ceil(Math.log(maxPageId + 1) / Math.log(62)) || 0;\n\n      function renderWarjackWeaponIds(warjackWeaponIds, codeLength) {\n        const ids = warjackWeaponIds || [];\n        let res = \"\";\n        for (let i = 0; i < ids.length; i++) {\n          const id = ids[i];\n          res += (id ? toBase62(id) : \"0\").padStart(codeLength, \"0\");\n        }\n        return res;\n      }\n\n      const state = lists.reduce(\n        (state, list, index) => ({\n          ...state,\n          ...(list.title ? { [`t${index}`]: list.title } : {}),\n          [`l${index}`]: list.cards.reduce(\n            (acc, card) =>\n              acc +\n              toBase62(card.pageId).padStart(codeLength, \"0\") +\n              (card.cortexIds || card.warjackWeaponIds\n                ? `(${(card.cortexIds || [])\n                    .map((id) => toBase62(id).padStart(codeLength, \"0\"))\n                    .join(\"\")},${renderWarjackWeaponIds(\n                    card.warjackWeaponIds,\n                    codeLength\n                  )})`\n                : \"\") +\n              (card.vehicleWeaponId\n                ? `[${toBase62(card.vehicleWeaponId).padStart(\n                    codeLength,\n                    \"0\"\n                  )}]`\n                : \"\"),\n            \"\"\n          ),\n        }),\n        { v: 1, e: codeLength }\n      );\n\n      const query = Object.entries(state)\n        .map(([key, value]) => `${key}=${value}`)\n        .join(\"&\");\n      const url =\n        window.location.origin + window.location.pathname + \"?\" + query;\n\n      yield put(Url.set({ url }));\n\n      window.history.replaceState(query, \"\", url);\n    }\n  }\n}\n\nfunction* parseListsFromQuery() {\n  const loadChannel = eventChannel((emitter) => {\n    window.addEventListener(\"load\", emitter);\n\n    return () => {\n      window.removeEventListener(\"load\", emitter);\n    };\n  });\n\n  while (true) {\n    yield take(loadChannel);\n\n    yield* parseLists();\n  }\n}\n\nfunction* parseListsFromQuery2() {\n  yield take(AppSync.done().type);\n\n  yield* parseLists();\n}\n\nfunction* parseLists() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlParams);\n\n  const version = params.v;\n  const exponent = parseInt(params.e, 10) || 0;\n\n  let lists = null;\n  if (version === \"1\" && exponent) {\n    const listIndexes = Object.keys(params)\n      .filter((key) => key.match(/^l[\\d]+$/))\n      .map((key) => parseInt(key.substring(1), 10))\n      .sort((a, b) => a - b);\n\n    lists = listIndexes.map((index) => ({\n      title: params[\"t\" + index] || \"\",\n      cards: parseList(exponent, params[\"l\" + index]),\n    }));\n  } else {\n    lists = yield select(Lists.select());\n  }\n\n  // If the card is either a configured warjack or a configured vehicle, its page must be\n  // fetched in order for its subtitle to be shown correctly. A warjack or vehicle can be\n  // identified by having at least one cortex id, warjack weapon id or vehicle weapon id.\n  for (const list of lists) {\n    for (const {\n      pageId,\n      cortexIds,\n      warjackWeaponIds,\n      vehicleWeaponId,\n    } of list.cards) {\n      if (cortexIds || warjackWeaponIds || vehicleWeaponId) {\n        const page = yield select(PageIds.selectPageByPageId(pageId));\n        if (page) {\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n        }\n      }\n    }\n  }\n\n  yield put(Lists.set({ lists }));\n}\n\nfunction* fetchWeaponsIfVehicleAdded() {\n  while (true) {\n    const { payload } = yield take(Models.setForPage().type);\n    if (\n      payload &&\n      payload.model &&\n      payload.model.types &&\n      payload.model.types.map((type) => type.text).includes(\"Vehicle\")\n    ) {\n      const vehicleWeaponSelection = payload.model.vehicleWeaponSelection;\n      if (vehicleWeaponSelection) {\n        for (const { page } of vehicleWeaponSelection) {\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              VehicleWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                VehicleWeapons.setForPage({\n                  page: pageWithoutTarget,\n                  vehicleWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchWeaponsIfWarjackAdded() {\n  while (true) {\n    const { payload } = yield take(Models.setForPage().type);\n    if (\n      payload &&\n      payload.model &&\n      payload.model.types &&\n      payload.model.types.map((type) => type.text).includes(\"Warjack\")\n    ) {\n      const weaponDetails = payload.model.weaponDetails;\n      if (weaponDetails) {\n        for (const { Weapon } of weaponDetails) {\n          const page = Weapon.page;\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              WarjackWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                WarjackWeapons.setForPage({\n                  page: pageWithoutTarget,\n                  warjackWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchCardOnShow() {\n  while (true) {\n    const { payload } = yield take(Lists.toggleCard().type);\n    if (payload && payload.pageId) {\n      const page = yield select(PageIds.selectPageByPageId(payload.pageId));\n      if (page) {\n        const cypher = yield select(CypherCodecs.selectByPage(page));\n        if (cypher) {\n          yield* Requests.parsePage({ page, parserName: \"parseCypher\" });\n        } else {\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n        }\n      }\n    }\n  }\n}\n\nfunction parseList(exponent, encodedList) {\n  function parseCards(cards, rest) {\n    if (rest === \"\") {\n      return cards;\n    }\n\n    const pageId = rest.slice(0, exponent);\n\n    if (rest[exponent] === \"(\") {\n      const blockEnd = rest.indexOf(\")\");\n      const delimiter = rest.indexOf(\",\");\n      if (!blockEnd || !delimiter) {\n        return [];\n      }\n\n      const block = rest.slice(exponent + 1, blockEnd);\n      const [cortexIds, warjackWeaponIds] = block.split(\",\");\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: partitionBy(exponent, cortexIds),\n            warjackWeaponIds: partitionBy(exponent, warjackWeaponIds),\n            vehicleWeaponId: [],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    if (rest[exponent] === \"[\") {\n      const blockEnd = rest.indexOf(\"]\");\n      if (!blockEnd) {\n        return [];\n      }\n\n      const vehicleWeaponId = rest.slice(exponent + 1, blockEnd);\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: [],\n            warjackWeaponIds: [],\n            vehicleWeaponId: [vehicleWeaponId],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    return parseCards(\n      [\n        ...cards,\n        { pageId, cortexIds: [], warjackWeaponIds: [], vehicleWeaponId: [] },\n      ],\n      rest.slice(exponent)\n    );\n  }\n\n  const cards = parseCards([], encodedList);\n\n  const decode = (string) => {\n    const normalizedString = string.replace(/^0+/, \"\") || \"0\";\n    if (normalizedString === \"0\") return null;\n    return parseInt(fromBase62(normalizedString), 10);\n  };\n\n  return cards\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId: decode(pageId),\n      cortexIds: cortexIds.map(decode),\n      warjackWeaponIds: warjackWeaponIds.map(decode),\n      vehicleWeaponId: vehicleWeaponId.map(decode),\n    }))\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId,\n      ...(cortexIds.length === 0 ? {} : { cortexIds }),\n      ...(warjackWeaponIds.length === 0 ? {} : { warjackWeaponIds }),\n      ...(vehicleWeaponId.length === 0\n        ? {}\n        : { vehicleWeaponId: vehicleWeaponId[0] }),\n      hidden: true,\n    }));\n}\n\nfunction partitionBy(slice, string) {\n  var strings = [];\n\n  for (let i = 0; i < string.length; i += slice) {\n    strings[strings.length] = string.slice(i, i + slice);\n  }\n\n  return strings;\n}\n","import { all, put, select } from \"redux-saga/effects\";\nimport { RefreshWikiPages } from \"../../messages\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { cacheParserNames } from \"./cacheParserNames\";\nimport { cacheWikiPages } from \"./cacheWikiPages\";\nimport { fetchCadres } from \"./fetchCadres\";\nimport { parseWikiPages } from \"./parseWikiPages\";\nimport { triggerFetchWikiPages } from \"./triggerFetchWikiPages\";\nimport { ui } from \"./ui\";\n\nfunction* processes() {\n  yield all([\n    continuePending(),\n    cacheWikiPages(),\n    parseWikiPages(),\n    triggerFetchWikiPages(),\n    cacheParserNames(),\n    ui(),\n    fetchCadres(),\n    fetchInitialData(),\n    refresh(),\n  ]);\n}\n\nexport { processes };\n\nfunction* fetchInitialData() {\n  const pages = [\n    { page: \"Warcaster\", parserName: \"parseFactions\" },\n    { page: \"Wild_Card\", parserName: \"parseWildCard\" },\n    { page: \"Cypher_Codecs\", parserName: \"parseCypherCodecs\" },\n  ];\n  for (const page of pages) {\n    yield* Requests.parsePage(page);\n  }\n}\n\nfunction* continuePending() {\n  const pending = yield select(Requests.selectPending());\n  for (const params of pending) {\n    yield put(Requests.fetch(params));\n  }\n}\n\nfunction* refresh() {\n  yield put(RefreshWikiPages());\n}\n","import { StateShard } from \"./utils\";\n\nconst Version = StateShard(\"Version\", init, {}, {}, {});\n\nexport { Version };\n\nfunction init(state) {\n  state.version = \"2023-06-04T21:13:15.000Z\";\n}\n","import { AppSync } from \"./AppSync\";\nimport { CadreCategoryMembers } from \"./CadreCategoryMembers\";\nimport { CadreModels } from \"./CadreModels\";\nimport { Cyphers } from \"./Cyphers\";\nimport { CypherCodecs } from \"./CypherCodecs\";\nimport { Dragging } from \"./Dragging\";\nimport { Factions } from \"./Factions\";\nimport { FactionModels } from \"./FactionModels\";\nimport { Lists } from \"./Lists\";\nimport { Models } from \"./Models\";\nimport { PageIds } from \"./PageIds\";\nimport { ParserNames } from \"./ParserNames\";\nimport { Requests } from \"./io/Requests\";\nimport { Url } from \"./Url\";\nimport { VehicleWeapons } from \"./VehicleWeapons\";\nimport { Version } from \"./Version\";\nimport { WarjackWeapons } from \"./WarjackWeapons\";\nimport { WildCardModels } from \"./WildCardModels\";\nimport { immer, initAll } from \"./utils\";\n\nconst objects = [\n  AppSync,\n  CadreCategoryMembers,\n  CadreModels,\n  CypherCodecs,\n  Cyphers,\n  Factions,\n  FactionModels,\n  Models,\n  PageIds,\n  ParserNames,\n  Requests,\n  Url,\n  VehicleWeapons,\n  WarjackWeapons,\n  WildCardModels,\n  // UI\n  Dragging,\n  Lists,\n  // General\n  Version,\n];\n\nconst state = initAll(...objects)({});\n\nconst dispatch = immer(({ type, payload }) => {\n  const namespaces = Object.fromEntries(\n    objects.map((group) => [group.namespace, group])\n  );\n\n  const namespace = type.substring(0, type.indexOf(\".\"));\n  if (namespace && namespaces[namespace]) {\n    return redirect({ type, payload }, namespaces[namespace]);\n  }\n  if (type === \"CH\") {\n    return (state) => {\n      const url =\n        \"https://privateerpress.wiki/api.php?action=parse&page=Particle_Blaster&formatversion=2&format=json\";\n      state.io.requests.cached[url].data.parse.revid = 0;\n    };\n  }\n  if (type === \"RE\") {\n    return (state) => {\n      state.data.cadreCategoryMembers = {};\n      state.data.cadreModels = {};\n      state.data.models = {};\n      state.data.warjackWeapons = {};\n      for (const page of Object.keys(state.data.pages)) {\n        const white_list = [\n          \"Warcaster\",\n          \"Wild_Card\",\n          \"Cypher_Codecs\",\n          \"Aeternus_Continuum\",\n          \"Empyrean\",\n          \"Iron_Star_Alliance\",\n          \"Marcher_Worlds\",\n        ];\n        if (!white_list.includes(page)) {\n          delete state.data.pages[page];\n        }\n      }\n    };\n  }\n  return (state) => state;\n});\n\nexport { dispatch, state };\n\nfunction redirect(action, obj) {\n  return (state) =>\n    immer(({ type, payload }) => {\n      const f = obj.dispatch[type] || ((state, payload) => state);\n      return (state) => f(state, payload);\n    })(state, action);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport \"./index.css\";\nimport App from \"./ui/App\";\nimport { processes } from \"./businessLogic/processes\";\nimport { dispatch, state } from \"./state\";\n\nconst saga = initSaga();\nconst store = initStore(saga);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nsaga.run(processes);\n\nfunction initStore(saga) {\n  const reset = document.location.search === \"?reset\";\n\n  const persistedState = localStorage.getItem(\"reduxState\")\n    ? JSON.parse(localStorage.getItem(\"reduxState\"))\n    : state;\n\n  const latestState =\n    !reset && new Date(persistedState.version) >= new Date(state.version)\n      ? persistedState\n      : state;\n\n  const composedEnhancers = composeWithDevTools(applyMiddleware(saga));\n  const store = createStore(dispatch, latestState, composedEnhancers);\n\n  store.subscribe(() => {\n    localStorage.setItem(\"reduxState\", JSON.stringify(store.getState()));\n  });\n\n  return store;\n}\n\nfunction initSaga() {\n  return createSagaMiddleware();\n}\n"],"sourceRoot":""}