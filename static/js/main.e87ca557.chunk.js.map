{"version":3,"sources":["ui/Aeternus_Continuum.png","ui/Fallback.png","ui/Empyrean.png","ui/Iron_Star_Alliance.png","ui/Lost_Legion.png","ui/Marcher_Worlds.png","ui/Wild_Card.png","messages.js","state/utils.js","state/AppSync.js","state/CypherCodecs.js","state/Cyphers.js","state/Dragging.js","state/FactionModels.js","state/Factions.js","state/Lists.js","state/PageIds.js","state/Url.js","state/WildCardModels.js","state/Models.js","state/VehicleWeapons.js","state/WarjackWeapons.js","state/CadreModels.js","state/CadreCategoryMembers.js","ui/App.js","state/io/Requests.js","state/ParserNames.js","businessLogic/processes/cacheParserNames.js","businessLogic/processes/jsonp.js","businessLogic/processes/cacheWikiPages/fetchWikiPage.js","state/WikiPages.js","businessLogic/processes/cacheWikiPages/updateCache.js","businessLogic/processes/partitionBy.js","businessLogic/processes/cacheWikiPages/fetchPageIds.js","businessLogic/processes/cacheWikiPages/index.js","businessLogic/processes/fetchCadres/fetchCadreCategoryMembers.js","businessLogic/processes/fetchCadres/fetchCadreModels.js","businessLogic/processes/fetchCadres/index.js","businessLogic/core/parse/utils.js","businessLogic/core/parse/parseCypherText.js","businessLogic/core/parse/parsers.js","businessLogic/core/parse/parseCypherCodecsText.js","businessLogic/core/parse/parseFactionModelsText.js","businessLogic/core/parse/parseFactionsText.js","businessLogic/core/parse/parseModelText.js","businessLogic/core/parse/parseVehicleAndWarjackWeaponText.js","businessLogic/core/parse/parseWildCardText.js","businessLogic/processes/parsers/parseCypher.js","businessLogic/processes/parsers/parseCypherCodecs.js","businessLogic/processes/parsers/parseFactionModels.js","businessLogic/processes/parsers/parseFactions.js","businessLogic/processes/parsers/parseModel.js","businessLogic/processes/parsers/parseVehicleOrWarjackWeapon.js","businessLogic/processes/parsers/parseWildCard.js","businessLogic/processes/parsers/index.js","businessLogic/processes/parseWikiPages.js","businessLogic/processes/triggerFetchWikiPages.js","businessLogic/processes/base62.js","businessLogic/processes/ui.js","businessLogic/processes/index.js","state/Version.js","state/index.js","index.js"],"names":["CardDragEnded","message","CardDragStarted","MenuItemClicked","FetchedWikiPage","FetchedWikiPageRevisions","RefreshWikiPages","type","payload","immer","f","state","action","produce","identity","StateShard","namespace","init","actions","actionCreators","selectors","dispatch","Object","fromEntries","entries","map","functionName","keys","name","args","a","pipe","fs","AppSync","data","sync","done","reasons","select","addReasons","selectDone","selectReasons","CypherCodecs","cypherCodecs","set","selectPages","codec","Cypher","page","selectByPage","find","Cyphers","cyphers","cypher","values","flat","Dragging","ui","dragging","activate","deactivate","FactionModels","factionModels","selectModelPages","models","model","Name","Factions","factions","Lists","lists","oneEmptyList","addCard","pageId","card","hidden","cards","push","addEmptyList","moveListBy","listIndex","by","length","list","splice","removeCard","source","cardIndex","removeList","setCardCortex","cortexIds","setCardVehicleWeapon","vehicleWeaponId","setCardWarjackWeapons","hardpointNameIndex","warjackWeaponId","warjackWeaponIds","setListTitle","title","toggleCard","moveCard","destination","PageIds","pageIds","addPages","pageIdByTitle","selectByPages","pages","reduce","acc","selectPageByPageId","statePageId","undefined","Url","url","WildCardModels","wildCardModels","wildCards","wildCard","faction","Models","VehicleWeapons","vehicleWeapons","vehicleWeapon","WarjackWeapons","warjackWeapons","warjackWeapon","CadreModels","cadreModels","setByCadrePageId","cadrePageId","selectCadreModelsByPageId","CadreCategoryMembers","cadreCategoryMembers","Header","Layout","Footer","Content","TextArea","Input","SubMenu","Menu","FactionImage","src","Aeternus_Continuum","alt","height","Empyrean","Iron_Star_Alliance","Lost_Legion","Marcher_Worlds","Wild_Card","Fallback","App","connect","initialized","syncReasons","sort","text","Type","Subtype","subtype","_","join","filter","flatMap","cadreModel","includes","cadre","allCadreModels","pageIdByPage","details","hardpoints","hardpointNames","parseHardpoints","cortexSelections","cortex","advantages","advantage","category","categoryId","warjackWeaponSelections","selection","vehicleWeaponSelection","Cyphers2","Faction","cadres","dragStart","event","dragEnd","menuItemClicked","stopPropagation","allMenuItemsClicked","forEach","target","value","setUrl","bookmark","document","querySelector","navigator","userAgent","match","range","createRange","selectNodeContents","window","getSelection","removeAllRanges","addRange","setSelectionRange","open","key","label","React","useState","openDrawer","setOpenDrawer","className","onDragStart","onDragEnd","droppableId","provided","ref","innerRef","droppableProps","style","animation","color","DeleteOutlined","href","placeholder","id","openKeys","onOpenChange","mode","triggerSubMenuAction","icon","gutter","xs","sm","md","lg","xl","xxl","placement","trigger","align","offset","onClick","cursor","display","paddingRight","fontSize","padding","PlusSquareOutlined","UpSquareOutlined","paddingLeft","DownSquareOutlined","span","generateListNamePlaceholder","maxLength","autoSize","onChange","Universal","i","count","size","draggableId","index","draggableProps","dragHandleProps","hoverable","Meta","avatar","width","textAlign","replace","vehicleWeaponName","cortexName","weaponIds","weaponId","weapon","pow","effect","squadSize","deploymentCost","baseSize","health","wildCardFactions","weaponPoints","modelStats","stat","specialRules","Fragment","weapons","ruleIndex","rule","colSpan","maneuvers","defaultValue","fontStyle","onSelect","Option","split","location","cortexes","advantageIndex","chassisSpecialRules","hardpointName","warjackWeaponNames","cost","warjackWeaponName","weaponDetails","release","lore","margin","SyncOutlined","spin","reason","description","Date","getFullYear","onKeyDown","factionName","visible","onClose","mask","closeIcon","MenuUnfoldOutlined","ItemGroup","shortName","slice","Item","w1","w2","j","indexOf","b","c1","c2","factionNames","justFactions","factionsPresent","types","cyperTypes","rHardpointGroup","results","n","RegExp","repeat","exec","hardpointCount","parseInt","groupCount","groupName","console","error","s","parsePage","queryCadreModels","queryCadres","queryRevisions","queryPageIds","Requests","io","requests","cached","pending","cache","selectCached","fetch","params","selectPending","request","fetched","findIndex","selectCachedUrl","parserName","queryParams","put","desc","jsonApiRequest","cmpageid","cmtype","cmlimit","cmtitle","prop","pageids","titles","encodeURIComponent","formatversion","format","keyValue","ParserNames","parserNames","setForPage","cacheParserNames","take","jsonp","Promise","resolve","reject","callbackName","Math","round","random","body","removeChild","script","createElement","appendChild","fetchWikiPage","actionChannel","wikiPageChannel","wait","call","pageRevisions","query","categorymembers","member","pageid","categoryMembers","parse","titleToPageId","delay","WikiPages","addPage","removePage","selectPageByPage","selectPagesByPageIds","selectPageIds","updateCache","refreshWikiPages","refreshOutdatedWikiPages","all","queryLength","revInfoByPageId","revision","missing","revid","max","revisions","revInfo","partitionBy","array","arrays","fetchPageIds","cachedPageIds","factionsSet","factionModelPages","wildCardPages","cypherPages","pageSlices","processedCount","cacheWikiPages","fetchCadreCategoryMembers","fetchCadreModels","fetchCadres","cleanText","prepareDOM","doc","DOMParser","parseFromString","querySelectorAll","node","parentNode","parseCypherText","removeUndefinedValues","extractLink","helper","texts","tagName","nextSibling","innerText","trim","extractParagraphs","p","hrefs","obj","Array","isArray","parseAnchorTable","table","header","th","tr","td","anchors","parseAnchor","row","titleColon","hrefTitle","parseCypherCodecsText","cypherCodecsTable","cypherCodec","parseFactionModelsText","parseFactionsText","collectFactions","anchor","parseModelText","factionAndTypes","extractList","extractText","extractDefinitions","extractWeaponSelection","definitions","parseDefinitionText","extractCortexes","modelStatsData","modelStatsLength","from","weaponsData","weaponsList","tds","stats","previousWeapons","lastWeapon","weaponDetailsTable","weaponDetailsData","detailsHeader","as","pairs","innerHTML","definition","groups","parseVehicleAndWarjackWeaponText","parseVehicleOrWarjackWeapon","vehicleOrWarjackWeapon","prefix","res","availableFor","pointCostNode","pointCost","locationNode","specialRulesP","specialRule","childNodes","textContent","textNode","previousSibling","nodeValue","insertAdjacentText","remove","nodeName","entry","colonIndex","acc2","index2","parseWildCardText","h1OrTable","factionAndModels","h1","last","parseCypher","parseCypherCodecs","parseFactionModels","parseFactions","parseModel","identifyCortexSelections","categories","buildWarjackWeaponSelections","fetchPages","cortexCategories","weaponPages","Cost","Location","Weapon","categoryTexts","findClosestCategory","vehicles","some","warjacks","vehicle","warjack","parseWildCard","parsers","parseWikiPages","parser","triggerFetchWikiPages","triggerFetchFactions","factionPages","digitsBase62","toBase62","result","updateCards","removeCards","setDraggingTrue","setDraggingFalse","updateUrl","parseListsFromQuery","parseListsFromQuery2","parseLists","fetchWeaponsIfVehicleAdded","fetchWeaponsIfWarjackAdded","fetchCardOnShow","startsWith","sourceListIndex","sourcePosition","destinationListIndex","destinationPosition","history","replaceState","renderWarjackWeaponIds","codeLength","ids","padStart","maxPageId","ceil","log","v","e","origin","pathname","loadChannel","eventChannel","emitter","addEventListener","removeEventListener","urlParams","URLSearchParams","search","version","exponent","listIndexes","substring","parseList","pageWithoutTarget","encodedList","parseCards","rest","blockEnd","delimiter","decode","string","normalizedString","NaN","fromBase62","strings","processes","fetchInitialData","continuePending","refresh","Version","objects","initAll","namespaces","group","saga","createSagaMiddleware","store","persistedState","localStorage","getItem","JSON","latestState","composedEnhancers","composeWithDevTools","applyMiddleware","createStore","subscribe","setItem","stringify","getState","initStore","ReactDOM","render","getElementById","run"],"mappings":"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","file":"static/js/main.e87ca557.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Aeternus_Continuum.d1b19d0e.png\";","export default __webpack_public_path__ + \"static/media/Fallback.1ae05c50.png\";","export default __webpack_public_path__ + \"static/media/Empyrean.4ab49225.png\";","export default __webpack_public_path__ + \"static/media/Iron_Star_Alliance.82d76402.png\";","export default __webpack_public_path__ + \"static/media/Lost_Legion.78737fb2.png\";","export default __webpack_public_path__ + \"static/media/Marcher_Worlds.61a330cf.png\";","export default __webpack_public_path__ + \"static/media/Wild_Card.3da9dbca.png\";","const CardDragEnded = message(\"CARD/DRAG_ENDED\");\nconst CardDragStarted = message(\"CARD/DRAG_STARTED\");\nconst MenuItemClicked = message(\"MENU_ITEM/CLICKED\");\n\nconst FetchedWikiPage = message(\"WIKI_PAGE/FETCHED\");\nconst FetchedWikiPageRevisions = message(\"WIKI_PAGE_REVISIONS/FETCHED\");\nconst RefreshWikiPages = message(\"WIKI_PAGES/REFRESH\");\n\nexport {\n  CardDragEnded,\n  CardDragStarted,\n  FetchedWikiPage,\n  FetchedWikiPageRevisions,\n  MenuItemClicked,\n  RefreshWikiPages,\n};\n\nfunction message(type) {\n  return (payload = {}) => ({ type, payload });\n}\n","import produce from \"immer\";\n\nconst initAll = (...objects) =>\n  pipe(...objects.map((obj) => produce(obj.init)));\n\nconst immer = (f) => (state, action) => produce(f(action) || identity)(state);\n\nconst StateShard = (namespace, init, actions, actionCreators, selectors) => ({\n  namespace,\n  init,\n  dispatch: Object.fromEntries(\n    Object.entries(actions).map(([functionName, f]) => [\n      namespace + \".\" + functionName,\n      f,\n    ])\n  ),\n  ...Object.fromEntries(\n    Object.keys(actions).map((functionName) => [\n      functionName,\n      (payload = {}) => ({ type: namespace + \".\" + functionName, payload }),\n    ])\n  ),\n  ...actionCreators,\n  ...Object.fromEntries(\n    Object.entries(selectors).map(([name, f]) => [\n      name,\n      (...args) =>\n        (state) =>\n          f(state, ...args),\n    ])\n  ),\n});\n\nexport { StateShard, immer, initAll };\n\nfunction identity(a) {\n  return a;\n}\n\nfunction pipe(...fs) {\n  return (a) => {\n    for (const f of fs) {\n      a = f(a);\n    }\n    return a;\n  };\n}\n","import { StateShard } from \"./utils\";\n\nconst AppSync = StateShard(\n  \"AppSync\",\n  init,\n  { done, addReasons },\n  {},\n  { selectDone, selectReasons }\n);\n\nexport { AppSync };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  if (!state.data.sync) {\n    state.data.sync = {};\n  }\n\n  state.data.sync.done = false;\n  state.data.sync.reasons = [];\n}\n\n// Actions\n\nfunction done(state) {\n  const sync = select(state);\n  sync.done = true;\n}\n\nfunction addReasons(state, { reasons }) {\n  const sync = select(state);\n  sync.reasons = [...sync.reasons, ...reasons];\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.sync;\n}\n\nfunction selectDone(state) {\n  const sync = select(state);\n  return sync.done;\n}\n\nfunction selectReasons(state) {\n  const sync = select(state);\n  return sync.reasons;\n}\n","import { StateShard } from \"./utils\";\n\nconst CypherCodecs = StateShard(\n  \"CypherCodecs\",\n  init,\n  { set },\n  {},\n  { select, selectPages, selectByPage }\n);\n\nexport { CypherCodecs };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cypherCodecs = [];\n}\n\n// Actions\n\nfunction set(state, { cypherCodecs }) {\n  state.data.cypherCodecs = cypherCodecs;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cypherCodecs;\n}\n\nfunction selectPages(state) {\n  const codecs = select(state);\n  return codecs.map((codec) => codec.Cypher.page);\n}\n\nfunction selectByPage(state, page) {\n  const codecs = select(state);\n  return codecs.find((codec) => codec.Cypher.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Cyphers = StateShard(\n  \"Cyphers\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { Cyphers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cyphers = {};\n}\n\n// Actions\n\nfunction set(state, { page, cypher }) {\n  const cyphers = select(state);\n  cyphers[page] = cypher;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cyphers;\n}\n\nfunction selectByPage(state, page) {\n  const cyphers = select(state);\n  return Object.values(cyphers)\n    .flat()\n    .find((cypher) => cypher.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Dragging = StateShard(\n  \"Dragging\",\n  init,\n  { activate, deactivate },\n  {},\n  { select }\n);\n\nexport { Dragging };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.dragging = false;\n}\n\n// Actions\n\nfunction activate(state) {\n  state.ui.dragging = true;\n}\n\nfunction deactivate(state) {\n  state.ui.dragging = false;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.dragging;\n}\n","import { StateShard } from \"./utils\";\n\nconst FactionModels = StateShard(\n  \"FactionModels\",\n  init,\n  { set },\n  {},\n  { select, selectModelPages, selectByPage }\n);\n\nexport { FactionModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factionModels = {};\n}\n\n// Actions\n\nfunction set(state, { page, factionModels }) {\n  const models = select(state);\n  models[page] = factionModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factionModels;\n}\n\nfunction selectModelPages(state) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .map((model) => model.Name.page);\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Factions = StateShard(\n  \"Factions\",\n  init,\n  { set },\n  {},\n  { select, selectPages }\n);\n\nexport { Factions };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factions = {};\n}\n\n// Actions\n\nfunction set(state, { factions }) {\n  state.data.factions = factions;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factions;\n}\n\nfunction selectPages(state) {\n  const factions = select(state);\n  return Object.keys(factions);\n}\n","import { StateShard } from \"./utils\";\n\nconst Lists = StateShard(\n  \"Lists\",\n  init,\n  {\n    addCard,\n    addEmptyList,\n    moveListBy,\n    removeCard,\n    removeList,\n    set,\n    setCardCortex,\n    setCardVehicleWeapon,\n    setCardWarjackWeapons,\n    setListTitle,\n    toggleCard,\n    moveCard,\n  },\n  {},\n  { select }\n);\n\nexport { Lists };\n\nconst oneEmptyList = [\n  {\n    title: \"\",\n    cards: [],\n  },\n];\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.lists = oneEmptyList;\n}\n\n// Actions\n\nfunction set(state, { lists }) {\n  state.ui.lists = lists.length > 0 ? lists : oneEmptyList;\n}\n\nfunction setListTitle(state, { listIndex, title }) {\n  const lists = select(state);\n  lists[listIndex].title = title;\n}\n\nfunction addCard(state, { pageId }) {\n  const lists = select(state);\n  const card = { pageId, hidden: true };\n  lists[0].cards.push(card);\n}\n\nfunction addEmptyList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 0, oneEmptyList[0]);\n}\n\nfunction removeCard(state, { source }) {\n  const lists = select(state);\n  lists[source.listIndex].cards.splice(source.cardIndex, 1);\n}\n\nfunction removeList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 1);\n  if (lists.length === 0) {\n    addEmptyList(state, { listIndex: 0 });\n  }\n}\n\nfunction moveListBy(state, { listIndex, by }) {\n  const lists = select(state);\n  if (\n    (by > 0 && listIndex + by < lists.length) ||\n    (by < 0 && listIndex + by >= 0)\n  ) {\n    const list = lists[listIndex];\n    lists.splice(listIndex, 1);\n    lists.splice(listIndex + by, 0, list);\n  }\n}\n\nfunction moveCard(state, { destination, source }) {\n  const lists = select(state);\n  const card = lists[source.listIndex].cards[source.cardIndex];\n  lists[source.listIndex].cards.splice(source.cardIndex, 1);\n  lists[destination.listIndex].cards.splice(destination.cardIndex, 0, card);\n}\n\nfunction toggleCard(state, { listIndex, cardIndex, pageId }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.hidden = !card.hidden;\n  }\n}\n\nfunction setCardCortex(state, { listIndex, cardIndex, pageId, cortexIds }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.cortexIds = cortexIds;\n  }\n}\n\nfunction setCardWarjackWeapons(\n  state,\n  { listIndex, cardIndex, hardpointNameIndex, pageId, warjackWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!card.warjackWeaponIds) {\n      card.warjackWeaponIds = [];\n    }\n    card.warjackWeaponIds[hardpointNameIndex] = warjackWeaponId;\n  }\n}\n\nfunction setCardVehicleWeapon(\n  state,\n  { listIndex, cardIndex, pageId, vehicleWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.vehicleWeaponId = vehicleWeaponId;\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.lists;\n}\n","import { StateShard } from \"./utils\";\n\nconst PageIds = StateShard(\n  \"PageIds\",\n  init,\n  { addPages },\n  {},\n  { select, selectByPage, selectByPages, selectPageByPageId }\n);\n\nexport { PageIds };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.pageIds = {};\n}\n\n// Actions\n\nfunction addPages(state, { pageIdByTitle }) {\n  const pageIds = select(state);\n  for (const title in pageIdByTitle) {\n    pageIds[title] = pageIdByTitle[title];\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.pageIds;\n}\n\nfunction selectByPage(state, page) {\n  const pageIds = select(state);\n  return pageIds[page];\n}\n\nfunction selectByPages(state, pages) {\n  const pageIds = select(state);\n  return pages.reduce((acc, page) => [...acc, pageIds[page]], []);\n}\n\nfunction selectPageByPageId(state, pageId) {\n  const pageIds = select(state);\n  return Object.entries(pageIds).reduce(\n    (acc, [page, statePageId]) =>\n      acc ? acc : statePageId === pageId ? page : acc,\n    undefined\n  );\n}\n","import { StateShard } from \"./utils\";\n\nconst Url = StateShard(\"Url\", init, { set }, {}, { select });\n\nexport { Url };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.url = \"\";\n}\n\n// Actions\n\nfunction set(state, { url }) {\n  state.ui.url = url;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.url;\n}\n","import { StateShard } from \"./utils\";\n\nconst WildCardModels = StateShard(\n  \"WildCardModels\",\n  init,\n  { set },\n  {},\n  { select, selectByPage, selectModelPages }\n);\n\nexport { WildCardModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.wildCardModels = {};\n}\n\n// Actions\n\nfunction set(state, { wildCards }) {\n  const models = select(state);\n  for (const wildCard of wildCards) {\n    models[wildCard.faction] = wildCard.models;\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.wildCardModels;\n}\n\nfunction selectModelPages(state) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .map((model) => model.Name.page);\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Models = StateShard(\n  \"Models\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { Models };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.models = {};\n}\n\n// Actions\n\nfunction set(state, { page, model }) {\n  const models = select(state);\n  models[page] = model;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.models;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst VehicleWeapons = StateShard(\n  \"VehicleWeapons\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { VehicleWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.vehicleWeapons = {};\n}\n\n// Actions\n\nfunction set(state, { page, vehicleWeapon }) {\n  const vehicleWeapons = select(state);\n  vehicleWeapons[page] = vehicleWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.vehicleWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const vehicleWeapons = select(state);\n  return vehicleWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst WarjackWeapons = StateShard(\n  \"WarjackWeapons\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { WarjackWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.warjackWeapons = {};\n}\n\n// Actions\n\nfunction set(state, { page, warjackWeapon }) {\n  const warjackWeapons = select(state);\n  warjackWeapons[page] = warjackWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.warjackWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const warjackWeapons = select(state);\n  return warjackWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreModels = StateShard(\n  \"CadreModels\",\n  init,\n  { set, setByCadrePageId },\n  {},\n  { select, selectCadreModelsByPageId }\n);\n\nexport { CadreModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreModels = {};\n}\n\n// Actions\n\nfunction set(state, { cadreModels }) {\n  state.data.cadreModels = cadreModels;\n}\n\nfunction setByCadrePageId(state, { cadrePageId, cadreModels }) {\n  select(state)[cadrePageId] = cadreModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreModels;\n}\n\nfunction selectCadreModelsByPageId(state, pageId) {\n  const cadreModels = select(state);\n  return cadreModels[pageId];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreCategoryMembers = StateShard(\n  \"CadreCategoryMembers\",\n  init,\n  { set },\n  {},\n  { select }\n);\n\nexport { CadreCategoryMembers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreCategoryMembers = {};\n}\n\n// Actions\n\nfunction set(state, { cadreCategoryMembers }) {\n  state.data.cadreCategoryMembers = cadreCategoryMembers;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreCategoryMembers;\n}\n","import \"./App.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Badge,\n  Card,\n  Col,\n  Drawer,\n  Input,\n  Layout,\n  Menu,\n  Row,\n  Select,\n  Tooltip,\n} from \"antd\";\nimport {\n  DeleteOutlined,\n  DownSquareOutlined,\n  MenuUnfoldOutlined,\n  PlusSquareOutlined,\n  SyncOutlined,\n  UpSquareOutlined,\n} from \"@ant-design/icons\";\nimport { DragDropContext, Draggable, Droppable } from \"react-beautiful-dnd\";\nimport Aeternus_Continuum from \"./Aeternus_Continuum.png\";\nimport Fallback from \"./Fallback.png\";\nimport Empyrean from \"./Empyrean.png\";\nimport Iron_Star_Alliance from \"./Iron_Star_Alliance.png\";\nimport Lost_Legion from \"./Lost_Legion.png\";\nimport Marcher_Worlds from \"./Marcher_Worlds.png\";\nimport Wild_Card from \"./Wild_Card.png\";\nimport { CardDragEnded, CardDragStarted, MenuItemClicked } from \"../messages\";\nimport { AppSync } from \"../state/AppSync\";\nimport { CypherCodecs } from \"../state/CypherCodecs\";\nimport { Cyphers as Cyphers2 } from \"../state/Cyphers\";\nimport { Dragging } from \"../state/Dragging\";\nimport { FactionModels } from \"../state/FactionModels\";\nimport { Factions } from \"../state/Factions\";\nimport { Lists } from \"../state/Lists\";\nimport { PageIds } from \"../state/PageIds\";\nimport { Url } from \"../state/Url\";\nimport { WildCardModels } from \"../state/WildCardModels\";\nimport { Models } from \"../state/Models\";\nimport { VehicleWeapons } from \"../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../state/WarjackWeapons\";\nimport { CadreModels } from \"../state/CadreModels\";\nimport { CadreCategoryMembers } from \"../state/CadreCategoryMembers\";\n\nconst { Header, Footer, Content } = Layout;\nconst { TextArea } = Input;\nconst { SubMenu } = Menu;\n\nfunction FactionImage({ faction }) {\n  switch (faction) {\n    case \"Aeternus_Continuum\":\n      return <img src={Aeternus_Continuum} alt={faction} height=\"35px\" />;\n    case \"Empyrean\":\n      return <img src={Empyrean} alt={faction} height=\"35px\" />;\n    case \"Iron_Star_Alliance\":\n      return <img src={Iron_Star_Alliance} alt={faction} height=\"35px\" />;\n    case \"Lost_Legion\":\n      return <img src={Lost_Legion} alt={faction} height=\"35px\" />;\n    case \"Marcher_Worlds\":\n      return <img src={Marcher_Worlds} alt={faction} height=\"35px\" />;\n    case \"Wild_Card\":\n      return <img src={Wild_Card} alt={faction} height=\"35px\" />;\n    case \"Universal\":\n      return <img src={Fallback} alt={faction} height=\"35px\" />;\n    default:\n      return <img src={Fallback} alt={faction} height=\"35px\" />;\n  }\n}\n\nfunction AppPresentation({\n  initialized,\n  syncReasons,\n  factionModels,\n  wildCardModels,\n  cypherCodecs,\n  dragging,\n  menuItemClicked,\n  allMenuItemsClicked,\n  dragEnd,\n  dragStart,\n  lists,\n  toggleCard,\n  removeList,\n  addEmptyList,\n  moveListBy,\n  setListTitle,\n  setUrl,\n  url,\n  bookmark,\n  open,\n  setCardCortex,\n  setCardWarjackWeapons,\n  setCardVehicleWeapon,\n  factions,\n  vehicleWeapons,\n  warjackWeapons,\n  cadres,\n}) {\n  const [openDrawer, setOpenDrawer] = React.useState(\"\");\n\n  const onOpenChangeDrawers = (keys) => {\n    if (keys.length > 0) {\n      const key = keys[0];\n      if (key === openDrawer) {\n        setOpenDrawer(\"\");\n      } else {\n        setOpenDrawer(keys[0]);\n      }\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <Layout>\n        <Layout>\n          <DragDropContext onDragStart={dragStart} onDragEnd={dragEnd}>\n            <Header>\n              <Droppable key={\"trash_header\"} droppableId={\"trash_header\"}>\n                {(provided) => (\n                  <div ref={provided.innerRef} {...provided.droppableProps}>\n                    {dragging ? (\n                      <div\n                        style={{\n                          animation:\n                            \"shake 0.82s cubic-bezier(.36,.07,.19,.97) both\",\n                          color: \"white\",\n                        }}\n                      >\n                        <DeleteOutlined />\n                      </div>\n                    ) : (\n                      <a className=\"logo\" href=\"/\">\n                        WARFASTER\n                      </a>\n                    )}\n                    {provided.placeholder}\n                  </div>\n                )}\n              </Droppable>\n            </Header>\n            {!initialized ? (\n              <Content>\n                <Layout>\n                  <Row>\n                    <Col xs={24} sm={12} md={12} lg={12} xl={8} xxl={8}>\n                      <div className=\"cards\" key=\"cards0\">\n                        <div style={{ cursor: \"pointer\" }} className=\"header\">\n                          <Row>\n                            <Col span={16} className=\"army-list-title\">\n                              <TextArea\n                                value={\"Setting up Warfaster\"}\n                                maxLength={30}\n                                autoSize\n                              />\n                            </Col>\n                            <Col span={8} className=\"faction-icons\">\n                              <SyncOutlined\n                                spin\n                                style={{\n                                  color: \"#d1c5b1\",\n                                  fontSize: \"23px\",\n                                  margin: \"3px 10px 0 0\",\n                                }}\n                              />\n                            </Col>\n                          </Row>\n                        </div>\n\n                        <div>\n                          {syncReasons.map(({ reason, description }, index) => (\n                            <div className=\"body\" key={`reason${index}`}>\n                              <Card hoverable className=\"card\">\n                                <Card.Meta\n                                  avatar={\n                                    <div\n                                      style={{\n                                        height: \"25px\",\n                                        width: \"35px\",\n                                        textAlign: \"center\",\n                                      }}\n                                    >\n                                      <SyncOutlined\n                                        spin\n                                        style={{\n                                          color: \"#d1c5b1\",\n                                          fontSize: \"35px\",\n                                        }}\n                                      />\n                                    </div>\n                                  }\n                                  title={\n                                    <>\n                                      <div>{reason}</div>\n                                      <div className=\"card-type\">\n                                        {description}\n                                      </div>\n                                    </>\n                                  }\n                                />\n                              </Card>\n                            </div>\n                          ))}\n                        </div>\n                        <div className=\"footer\">\n                          <Badge\n                            size=\"small\"\n                            key=\"_badge\"\n                            count={syncReasons.length}\n                            offset={[10, 5]}\n                          >\n                            Loading:\n                          </Badge>\n                        </div>\n                      </div>\n                    </Col>\n                  </Row>\n                </Layout>\n              </Content>\n            ) : (\n              <>\n                <Content>\n                  <Menu\n                    id=\"factions\"\n                    openKeys={[]}\n                    onOpenChange={onOpenChangeDrawers}\n                    mode=\"horizontal\"\n                    triggerSubMenuAction=\"click\"\n                  >\n                    {factionModels.map(([factionName, faction, models]) => (\n                      <SubMenu\n                        key={faction}\n                        icon={<FactionImage faction={faction} />}\n                      ></SubMenu>\n                    ))}\n                  </Menu>\n                </Content>\n                <Content>\n                  <Layout>\n                    <Row gutter={16}>\n                      {lists.map(({ title, cards }, listIndex) => (\n                        <Col\n                          key={`lists_col_${listIndex}`}\n                          xs={24}\n                          sm={12}\n                          md={12}\n                          lg={12}\n                          xl={8}\n                          xxl={8}\n                        >\n                          <div className=\"cards\" key={`cards${listIndex}`}>\n                            <Tooltip\n                              placement=\"top\"\n                              color=\"transparent\"\n                              trigger=\"click\"\n                              align={{ offset: [0, 17] }}\n                              title={\n                                <div className=\"ant-tooltip-inner-box\">\n                                  <div\n                                    onClick={removeList(listIndex)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      paddingRight: \"4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <DeleteOutlined />\n                                  </div>\n                                  <div\n                                    onClick={addEmptyList(listIndex)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      padding: \"0 4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <PlusSquareOutlined />\n                                  </div>\n                                  <div\n                                    onClick={moveListBy(listIndex, -1)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      padding: \"0 4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <UpSquareOutlined />\n                                  </div>\n                                  <div\n                                    onClick={moveListBy(listIndex, 1)}\n                                    style={{\n                                      cursor: \"pointer\",\n                                      display: \"inline-block\",\n                                      paddingLeft: \"4px\",\n                                      fontSize: \"1.5em\",\n                                    }}\n                                  >\n                                    <DownSquareOutlined />\n                                  </div>\n                                </div>\n                              }\n                            >\n                              <div\n                                style={{ cursor: \"pointer\" }}\n                                className=\"header\"\n                              >\n                                <Row>\n                                  <Col span={16} className=\"army-list-title\">\n                                    <TextArea\n                                      placeholder={generateListNamePlaceholder(\n                                        cards,\n                                        factions,\n                                        \"Name your list\"\n                                      )}\n                                      value={title}\n                                      maxLength={30}\n                                      autoSize\n                                      onChange={setListTitle(listIndex)}\n                                    />\n                                  </Col>\n                                  <Col span={8} className=\"faction-icons\">\n                                    {Object.entries(\n                                      cards.reduce(\n                                        (acc, card) => ({\n                                          ...acc,\n                                          ...(card.faction\n                                            ? {\n                                                [card.faction]:\n                                                  (acc[card.faction] || 0) + 1,\n                                              }\n                                            : {\n                                                Universal:\n                                                  (acc.Universal || 0) + 1,\n                                              }),\n                                        }),\n                                        {}\n                                      )\n                                    )\n                                      .sort()\n                                      .map(([faction, count], i) => (\n                                        <Badge\n                                          size=\"small\"\n                                          key={`badge${i}`}\n                                          count={count}\n                                          offset={[0, 10]}\n                                        >\n                                          <FactionImage faction={faction} />\n                                        </Badge>\n                                      ))}\n                                  </Col>\n                                </Row>\n                              </div>\n                            </Tooltip>\n\n                            <Droppable\n                              key={`cards_${listIndex}`}\n                              droppableId={`cards_${listIndex}`}\n                            >\n                              {(provided) => (\n                                <div\n                                  ref={provided.innerRef}\n                                  {...provided.droppableProps}\n                                >\n                                  {cards.map(\n                                    (\n                                      {\n                                        card,\n                                        hidden,\n                                        type,\n                                        title,\n                                        page,\n                                        pageId,\n                                        cortexIds,\n                                        vehicleWeaponId,\n                                        warjackWeaponIds,\n                                        subtype,\n                                        faction,\n                                        details,\n                                      },\n                                      cardIndex\n                                    ) => (\n                                      <Draggable\n                                        key={`${page}_${listIndex}_${cardIndex}`}\n                                        draggableId={`${page}_${listIndex}_${cardIndex}`}\n                                        index={cardIndex}\n                                      >\n                                        {(provided) => (\n                                          <div\n                                            className=\"body\"\n                                            ref={provided.innerRef}\n                                            {...provided.draggableProps}\n                                            {...provided.dragHandleProps}\n                                          >\n                                            <Card\n                                              hoverable\n                                              className={[\n                                                \"card\",\n                                                faction,\n                                                type,\n                                              ]}\n                                              onClick={toggleCard(\n                                                listIndex,\n                                                cardIndex,\n                                                pageId,\n                                                card\n                                              )}\n                                            >\n                                              <Card.Meta\n                                                avatar={\n                                                  faction ? (\n                                                    <div\n                                                      style={{\n                                                        height: \"25px\",\n                                                        width: \"35px\",\n                                                        textAlign: \"center\",\n                                                      }}\n                                                    >\n                                                      <FactionImage\n                                                        faction={faction}\n                                                      />\n                                                    </div>\n                                                  ) : (\n                                                    <FactionImage faction=\"Universal\" />\n                                                  )\n                                                }\n                                                title={\n                                                  <>\n                                                    <div>{title}</div>\n                                                    <div className=\"card-type\">\n                                                      {(faction || \"\").replace(\n                                                        /_/g,\n                                                        \" \"\n                                                      )}\n                                                      {subtype\n                                                        ? \" \" + subtype\n                                                        : \"\"}\n                                                      {type ? \" \" + type : \"\"}\n                                                    </div>\n                                                    <div>\n                                                      <span className=\"subtitle\">\n                                                        {[\n                                                          ...(!details ||\n                                                          !details.vehicleWeaponSelection ||\n                                                          !vehicleWeaponName(\n                                                            details.vehicleWeaponSelection,\n                                                            vehicleWeaponId\n                                                          )\n                                                            ? []\n                                                            : [\n                                                                vehicleWeaponName(\n                                                                  details.vehicleWeaponSelection,\n                                                                  vehicleWeaponId\n                                                                ),\n                                                              ]),\n                                                          ...(!details ||\n                                                          !details.cortexSelections ||\n                                                          !cortexName(\n                                                            details.cortexSelections,\n                                                            cortexIds\n                                                          )\n                                                            ? []\n                                                            : [\n                                                                cortexName(\n                                                                  details.cortexSelections,\n                                                                  cortexIds\n                                                                ),\n                                                              ]),\n                                                          ...(!details ||\n                                                          !details.warjackWeaponSelections ||\n                                                          !warjackWeaponIds ||\n                                                          warjackWeaponIds.length ===\n                                                            0\n                                                            ? []\n                                                            : warjackWeaponNamesSubtitle(\n                                                                details.warjackWeaponSelections,\n                                                                warjackWeaponIds\n                                                              )),\n                                                        ].join(\", \")}\n                                                      </span>\n                                                    </div>\n                                                  </>\n                                                }\n                                              />\n                                              {hidden ? (\n                                                <></>\n                                              ) : !details ? (\n                                                <div\n                                                  style={{\n                                                    margin: \"10px 0\",\n                                                    textAlign: \"center\",\n                                                  }}\n                                                >\n                                                  <SyncOutlined\n                                                    spin\n                                                    style={{ fontSize: \"23px\" }}\n                                                  />\n                                                </div>\n                                              ) : (\n                                                <div className=\"card-content\">\n                                                  {!details.pow ? (\n                                                    <></>\n                                                  ) : (\n                                                    <p>\n                                                      Pow: {details.pow.text}\n                                                    </p>\n                                                  )}\n                                                  {!details.effect ||\n                                                  details.effect.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    details.effect.map(\n                                                      (effect, index) => (\n                                                        <p\n                                                          key={`effect_${index}`}\n                                                        >\n                                                          {effect}\n                                                        </p>\n                                                      )\n                                                    )\n                                                  )}\n                                                  {!details.squadSize ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Squad Size</dt>\n                                                      <dd>\n                                                        {details.squadSize}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.deploymentCost ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>DC</dt>\n                                                      <dd>\n                                                        {details.deploymentCost}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.baseSize ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Base Size</dt>\n                                                      <dd>\n                                                        {details.baseSize}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.health ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Health</dt>\n                                                      <dd>{details.health}</dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.wildCardFactions ||\n                                                  Object.values(\n                                                    details.wildCardFactions\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Wild Card Factions</p>\n                                                      <ul>\n                                                        {Object.values(\n                                                          details.wildCardFactions\n                                                        ).map(\n                                                          ({ text }, index) => (\n                                                            <li\n                                                              key={`wild_card_faction_${index}`}\n                                                            >\n                                                              {text}\n                                                            </li>\n                                                          )\n                                                        )}\n                                                      </ul>\n                                                    </>\n                                                  )}\n                                                  {!details.hardpoints ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Hardpoints</dt>\n                                                      <dd>\n                                                        {details.hardpoints}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.weaponPoints ? (\n                                                    <></>\n                                                  ) : (\n                                                    <dl>\n                                                      <dt>Weapon Points</dt>\n                                                      <dd>\n                                                        {details.weaponPoints}\n                                                      </dd>\n                                                    </dl>\n                                                  )}\n                                                  {!details.modelStats ||\n                                                  Object.keys(\n                                                    details.modelStats\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <table>\n                                                      <thead>\n                                                        <tr>\n                                                          {Object.keys(\n                                                            details.modelStats\n                                                          ).map(\n                                                            (name, index) => (\n                                                              <th\n                                                                key={`${name}_stat_${index}`}\n                                                              >\n                                                                {name}\n                                                              </th>\n                                                            )\n                                                          )}\n                                                        </tr>\n                                                      </thead>\n                                                      <tbody>\n                                                        <tr>\n                                                          {Object.entries(\n                                                            details.modelStats\n                                                          ).map(\n                                                            (\n                                                              [name, stat],\n                                                              index\n                                                            ) => (\n                                                              <td\n                                                                key={`${name}_stat_value_${index}`}\n                                                              >\n                                                                {stat}\n                                                              </td>\n                                                            )\n                                                          )}\n                                                        </tr>\n                                                      </tbody>\n                                                    </table>\n                                                  )}\n                                                  {!details.specialRules ||\n                                                  Object.entries(\n                                                    details.specialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Special Rules</p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.specialRules\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`special_rules_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!details.weapons ||\n                                                  details.weapons.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Weapons</p>\n                                                      <table>\n                                                        <thead>\n                                                          <tr>\n                                                            <th>Name</th>\n                                                            <th>Attack Type</th>\n                                                            <th>Damage Type</th>\n                                                            <th>Range</th>\n                                                            <th>POW</th>\n                                                          </tr>\n                                                        </thead>\n                                                        <tbody>\n                                                          {details.weapons.map(\n                                                            (weapon, index) => (\n                                                              <React.Fragment\n                                                                key={`weapon_number_${index}`}\n                                                              >\n                                                                <tr>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Name\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Attack Type\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Damage Type\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Range\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"POW\"\n                                                                      ]\n                                                                    }\n                                                                  </td>\n                                                                </tr>\n                                                                {!weapon.specialRules ? (\n                                                                  <></>\n                                                                ) : (\n                                                                  Object.entries(\n                                                                    weapon.specialRules\n                                                                  ).map(\n                                                                    (\n                                                                      [\n                                                                        rule,\n                                                                        text,\n                                                                      ],\n                                                                      ruleIndex\n                                                                    ) => (\n                                                                      <tr\n                                                                        key={`weapon_number_${index}_rule_${ruleIndex}`}\n                                                                      >\n                                                                        <td colSpan=\"5\">\n                                                                          <dl>\n                                                                            <dt>\n                                                                              {\n                                                                                rule\n                                                                              }\n                                                                            </dt>\n                                                                            <dd>\n                                                                              {\n                                                                                text\n                                                                              }\n                                                                            </dd>\n                                                                          </dl>\n                                                                        </td>\n                                                                      </tr>\n                                                                    )\n                                                                  )\n                                                                )}\n                                                              </React.Fragment>\n                                                            )\n                                                          )}\n                                                        </tbody>\n                                                      </table>\n                                                    </>\n                                                  )}\n                                                  {!details.advantages ||\n                                                  Object.entries(\n                                                    details.advantages\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Advantages</p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.advantages\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`advantage_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!details.maneuvers ||\n                                                  Object.values(\n                                                    details.maneuvers\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Maneuvers</p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.maneuvers\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`advantage_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n\n                                                  {!details.vehicleWeaponSelection ||\n                                                  details.vehicleWeaponSelection\n                                                    .length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Vehicle Weapon\n                                                        Selections\n                                                      </p>\n                                                      <Select\n                                                        defaultValue={\n                                                          <span\n                                                            style={{\n                                                              color: \"gray\",\n                                                              fontStyle:\n                                                                \"italic\",\n                                                            }}\n                                                          >\n                                                            Vehicle Weapon\n                                                          </span>\n                                                        }\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardVehicleWeapon(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !vehicleWeaponId\n                                                            ? undefined\n                                                            : vehicleWeaponName(\n                                                                details.vehicleWeaponSelection,\n                                                                vehicleWeaponId\n                                                              )\n                                                        }\n                                                      >\n                                                        {details.vehicleWeaponSelection.map(\n                                                          (\n                                                            {\n                                                              text,\n                                                              page,\n                                                              pageId,\n                                                            },\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`vehicle_weapon_${index}`}\n                                                              label={pageId}\n                                                              value={text}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              <h3>{text}</h3>\n                                                              <div>\n                                                                {!vehicleWeapons[\n                                                                  page.split(\n                                                                    \"#\"\n                                                                  )[0]\n                                                                ] ? (\n                                                                  \"Weapon details missing!\"\n                                                                ) : (\n                                                                  <>\n                                                                    <div>\n                                                                      Location:{\" \"}\n                                                                      {\n                                                                        vehicleWeapons[\n                                                                          page.split(\n                                                                            \"#\"\n                                                                          )[0]\n                                                                        ]\n                                                                          .location\n                                                                      }\n                                                                    </div>\n                                                                    {!vehicleWeapons[\n                                                                      page.split(\n                                                                        \"#\"\n                                                                      )[0]\n                                                                    ]\n                                                                      .specialRules ? (\n                                                                      \"\"\n                                                                    ) : (\n                                                                      <dl>\n                                                                        {Object.entries(\n                                                                          vehicleWeapons[\n                                                                            page.split(\n                                                                              \"#\"\n                                                                            )[0]\n                                                                          ]\n                                                                            .specialRules\n                                                                        ).map(\n                                                                          (\n                                                                            [\n                                                                              name,\n                                                                              rule,\n                                                                            ],\n                                                                            index\n                                                                          ) => (\n                                                                            <React.Fragment\n                                                                              key={`special_rules_${page}_${index}`}\n                                                                            >\n                                                                              <dt>\n                                                                                {\n                                                                                  name\n                                                                                }\n                                                                              </dt>\n                                                                              <dd>\n                                                                                {\n                                                                                  rule\n                                                                                }\n                                                                              </dd>\n                                                                            </React.Fragment>\n                                                                          )\n                                                                        )}\n                                                                      </dl>\n                                                                    )}\n                                                                    {!vehicleWeapons[\n                                                                      page.split(\n                                                                        \"#\"\n                                                                      )[0]\n                                                                    ]\n                                                                      .weapons ? (\n                                                                      \"\"\n                                                                    ) : (\n                                                                      <table>\n                                                                        <thead>\n                                                                          <tr>\n                                                                            <th>\n                                                                              Name\n                                                                            </th>\n                                                                            <th>\n                                                                              Attack\n                                                                              Type\n                                                                            </th>\n                                                                            <th>\n                                                                              Damage\n                                                                              Type\n                                                                            </th>\n                                                                            <th>\n                                                                              Range\n                                                                            </th>\n                                                                            <th>\n                                                                              POW\n                                                                            </th>\n                                                                          </tr>\n                                                                        </thead>\n                                                                        <tbody>\n                                                                          {vehicleWeapons[\n                                                                            page.split(\n                                                                              \"#\"\n                                                                            )[0]\n                                                                          ].weapons.map(\n                                                                            (\n                                                                              weapon,\n                                                                              index\n                                                                            ) => (\n                                                                              <React.Fragment\n                                                                                key={`vehicle_weapons_weapon_${page}_${index}`}\n                                                                              >\n                                                                                <tr>\n                                                                                  <td>\n                                                                                    {\n                                                                                      weapon[\n                                                                                        \"Name\"\n                                                                                      ]\n                                                                                    }\n                                                                                  </td>\n                                                                                  <td>\n                                                                                    {\n                                                                                      weapon[\n                                                                                        \"Attack Type\"\n                                                                                      ]\n                                                                                    }\n                                                                                  </td>\n                                                                                  <td>\n                                                                                    {weapon[\n                                                                                      \"Damage Type\"\n                                                                                    ]\n                                                                                      .join\n                                                                                      ? weapon[\n                                                                                          \"Damage Type\"\n                                                                                        ].join(\n                                                                                          \" \"\n                                                                                        )\n                                                                                      : weapon[\n                                                                                          \"Damage Type\"\n                                                                                        ]}\n                                                                                  </td>\n                                                                                  <td>\n                                                                                    {\n                                                                                      weapon[\n                                                                                        \"Range\"\n                                                                                      ]\n                                                                                    }\n                                                                                  </td>\n                                                                                  <td>\n                                                                                    {\n                                                                                      weapon[\n                                                                                        \"POW\"\n                                                                                      ]\n                                                                                    }\n                                                                                  </td>\n                                                                                </tr>\n                                                                                {!weapon.specialRules ? (\n                                                                                  <>\n\n                                                                                  </>\n                                                                                ) : (\n                                                                                  <tr>\n                                                                                    <td colSpan=\"5\">\n                                                                                      <dl>\n                                                                                        {Object.entries(\n                                                                                          weapon.specialRules\n                                                                                        ).map(\n                                                                                          (\n                                                                                            [\n                                                                                              name,\n                                                                                              rule,\n                                                                                            ],\n                                                                                            index\n                                                                                          ) => (\n                                                                                            <React.Fragment\n                                                                                              key={`vehicle_weapons_weapon_${weapon[\"Name\"]}_special_rules_${page}_${index}`}\n                                                                                            >\n                                                                                              {\n                                                                                                <>\n                                                                                                  <dt>\n                                                                                                    {\n                                                                                                      name\n                                                                                                    }\n                                                                                                  </dt>\n                                                                                                  <dd>\n                                                                                                    {\n                                                                                                      rule\n                                                                                                    }\n                                                                                                  </dd>\n                                                                                                </>\n                                                                                              }\n                                                                                            </React.Fragment>\n                                                                                          )\n                                                                                        )}\n                                                                                      </dl>\n                                                                                    </td>\n                                                                                  </tr>\n                                                                                )}\n                                                                              </React.Fragment>\n                                                                            )\n                                                                          )}\n                                                                        </tbody>\n                                                                      </table>\n                                                                    )}\n                                                                  </>\n                                                                )}\n                                                              </div>\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </>\n                                                  )}\n\n                                                  {!details.vehicleWeaponSelection ||\n                                                  Object.values(\n                                                    details.vehicleWeaponSelection\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Vehicle Weapon Selection\n                                                      </p>\n                                                      <ol>\n                                                        {Object.values(\n                                                          details.vehicleWeaponSelection\n                                                        ).map(\n                                                          (\n                                                            { text, page },\n                                                            index\n                                                          ) => (\n                                                            <li\n                                                              key={`weapon_selection_${index}`}\n                                                            >\n                                                              <a href={page}>\n                                                                {text}\n                                                              </a>\n                                                            </li>\n                                                          )\n                                                        )}\n                                                      </ol>\n                                                    </>\n                                                  )}\n                                                  {!details.cortexes ||\n                                                  Object.entries(\n                                                    details.cortexes\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Cortex</p>\n                                                      <ol>\n                                                        {Object.entries(\n                                                          details.cortexes\n                                                        ).map(\n                                                          (\n                                                            [\n                                                              cortex,\n                                                              advantages,\n                                                            ],\n                                                            index\n                                                          ) => (\n                                                            <li\n                                                              key={`cortex_${index}`}\n                                                            >\n                                                              {cortex}\n                                                              <dl>\n                                                                {Object.entries(\n                                                                  advantages\n                                                                ).map(\n                                                                  (\n                                                                    [\n                                                                      name,\n                                                                      text,\n                                                                    ],\n                                                                    advantageIndex\n                                                                  ) => (\n                                                                    <React.Fragment\n                                                                      key={`cortex_${index}_advantage_${advantageIndex}`}\n                                                                    >\n                                                                      <dt>\n                                                                        {name}\n                                                                      </dt>\n                                                                      <dd>\n                                                                        {text}\n                                                                      </dd>\n                                                                    </React.Fragment>\n                                                                  )\n                                                                )}\n                                                              </dl>\n                                                            </li>\n                                                          )\n                                                        )}\n                                                      </ol>\n                                                    </>\n                                                  )}\n                                                  {!details.cortexSelections ||\n                                                  Object.entries(\n                                                    details.cortexSelections\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Cortex Selections</p>\n                                                      <Select\n                                                        defaultValue={\n                                                          <span\n                                                            style={{\n                                                              color: \"gray\",\n                                                              fontStyle:\n                                                                \"italic\",\n                                                            }}\n                                                          >\n                                                            Cortex\n                                                          </span>\n                                                        }\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardCortex(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !cortexIds\n                                                            ? undefined\n                                                            : cortexName(\n                                                                details.cortexSelections,\n                                                                cortexIds\n                                                              )\n                                                        }\n                                                      >\n                                                        {Object.entries(\n                                                          details.cortexSelections\n                                                        ).map(\n                                                          (\n                                                            [\n                                                              cortex,\n                                                              advantages,\n                                                            ],\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`cortex_${index}`}\n                                                              label={Object.values(\n                                                                advantages\n                                                              ).map(\n                                                                ({\n                                                                  categoryId,\n                                                                }) => categoryId\n                                                              )}\n                                                              value={cortex}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              {cortex}\n                                                              <dl>\n                                                                {Object.entries(\n                                                                  advantages\n                                                                ).map(\n                                                                  (\n                                                                    [\n                                                                      name,\n                                                                      { text },\n                                                                    ],\n                                                                    advantageIndex\n                                                                  ) => (\n                                                                    <React.Fragment\n                                                                      key={`cortex_${index}_advantage_${advantageIndex}`}\n                                                                    >\n                                                                      <dt>\n                                                                        {name}\n                                                                      </dt>\n                                                                      <dd>\n                                                                        {text}\n                                                                      </dd>\n                                                                    </React.Fragment>\n                                                                  )\n                                                                )}\n                                                              </dl>\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </>\n                                                  )}\n                                                  {!details.chassisSpecialRules ||\n                                                  Object.entries(\n                                                    details.chassisSpecialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Chassis Special Rules\n                                                      </p>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          details.chassisSpecialRules\n                                                        ).map(\n                                                          (\n                                                            [name, text],\n                                                            index\n                                                          ) => (\n                                                            <React.Fragment\n                                                              key={`advantage_${index}`}\n                                                            >\n                                                              <dt>{name}</dt>\n                                                              <dd>{text}</dd>\n                                                            </React.Fragment>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!details.hardpointNames ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>\n                                                        Warjack Weapon\n                                                        Selections\n                                                      </p>\n                                                      {details.hardpointNames.map(\n                                                        (\n                                                          hardpointName,\n                                                          hardpointNameIndex\n                                                        ) =>\n                                                          !details.warjackWeaponSelections ||\n                                                          Object.keys(\n                                                            details.warjackWeaponSelections\n                                                          ).length === 0 ? (\n                                                            <></>\n                                                          ) : (\n                                                            <div\n                                                              key={`warjack_weapon_${hardpointNameIndex}`}\n                                                            >\n                                                              <Select\n                                                                defaultValue={\n                                                                  <span\n                                                                    style={{\n                                                                      color:\n                                                                        \"gray\",\n                                                                      fontStyle:\n                                                                        \"italic\",\n                                                                    }}\n                                                                  >\n                                                                    {\n                                                                      hardpointName\n                                                                    }\n                                                                  </span>\n                                                                }\n                                                                onClick={(\n                                                                  event\n                                                                ) =>\n                                                                  event.stopPropagation()\n                                                                }\n                                                                onSelect={setCardWarjackWeapons(\n                                                                  listIndex,\n                                                                  cardIndex,\n                                                                  hardpointNameIndex,\n                                                                  pageId\n                                                                )}\n                                                                value={\n                                                                  !warjackWeaponIds ||\n                                                                  !warjackWeaponIds[\n                                                                    hardpointNameIndex\n                                                                  ]\n                                                                    ? undefined\n                                                                    : warjackWeaponNames(\n                                                                        details.warjackWeaponSelections,\n                                                                        warjackWeaponIds[\n                                                                          hardpointNameIndex\n                                                                        ]\n                                                                      )\n                                                                }\n                                                              >\n                                                                {Object.values(\n                                                                  details.warjackWeaponSelections\n                                                                )\n                                                                  .filter(\n                                                                    ({\n                                                                      location,\n                                                                    }) =>\n                                                                      location ===\n                                                                      hardpointName\n                                                                  )\n                                                                  .map(\n                                                                    (\n                                                                      {\n                                                                        name,\n                                                                        page,\n                                                                        pageId,\n                                                                        cost,\n                                                                        location,\n                                                                      },\n                                                                      index\n                                                                    ) => (\n                                                                      <Select.Option\n                                                                        key={`warjack_weapon_${hardpointNameIndex}_${index}`}\n                                                                        label={\n                                                                          pageId\n                                                                        }\n                                                                        value={\n                                                                          name\n                                                                        }\n                                                                        onClick={(\n                                                                          event\n                                                                        ) =>\n                                                                          event.stopPropagation()\n                                                                        }\n                                                                      >\n                                                                        <h3>\n                                                                          {warjackWeaponName(\n                                                                            name,\n                                                                            cost\n                                                                          )}\n                                                                        </h3>\n                                                                        <div>\n                                                                          {!warjackWeapons[\n                                                                            page.split(\n                                                                              \"#\"\n                                                                            )[0]\n                                                                          ] ? (\n                                                                            \"Weapon details missing!\"\n                                                                          ) : (\n                                                                            <>\n                                                                              <div>\n                                                                                Location:{\" \"}\n                                                                                {\n                                                                                  warjackWeapons[\n                                                                                    page.split(\n                                                                                      \"#\"\n                                                                                    )[0]\n                                                                                  ]\n                                                                                    .location\n                                                                                }\n                                                                              </div>\n                                                                              {!warjackWeapons[\n                                                                                page.split(\n                                                                                  \"#\"\n                                                                                )[0]\n                                                                              ]\n                                                                                .specialRules ? (\n                                                                                \"\"\n                                                                              ) : (\n                                                                                <dl>\n                                                                                  {Object.entries(\n                                                                                    warjackWeapons[\n                                                                                      page.split(\n                                                                                        \"#\"\n                                                                                      )[0]\n                                                                                    ]\n                                                                                      .specialRules\n                                                                                  ).map(\n                                                                                    (\n                                                                                      [\n                                                                                        name,\n                                                                                        rule,\n                                                                                      ],\n                                                                                      index\n                                                                                    ) => (\n                                                                                      <React.Fragment\n                                                                                        key={`special_rules_${page}_${index}`}\n                                                                                      >\n                                                                                        <dt>\n                                                                                          {\n                                                                                            name\n                                                                                          }\n                                                                                        </dt>\n                                                                                        <dd>\n                                                                                          {\n                                                                                            rule\n                                                                                          }\n                                                                                        </dd>\n                                                                                      </React.Fragment>\n                                                                                    )\n                                                                                  )}\n                                                                                </dl>\n                                                                              )}\n                                                                              {!warjackWeapons[\n                                                                                page.split(\n                                                                                  \"#\"\n                                                                                )[0]\n                                                                              ]\n                                                                                .weapons ? (\n                                                                                \"\"\n                                                                              ) : (\n                                                                                <table>\n                                                                                  <thead>\n                                                                                    <tr>\n                                                                                      <th>\n                                                                                        Name\n                                                                                      </th>\n                                                                                      <th>\n                                                                                        Attack\n                                                                                        Type\n                                                                                      </th>\n                                                                                      <th>\n                                                                                        Damage\n                                                                                        Type\n                                                                                      </th>\n                                                                                      <th>\n                                                                                        Range\n                                                                                      </th>\n                                                                                      <th>\n                                                                                        POW\n                                                                                      </th>\n                                                                                    </tr>\n                                                                                  </thead>\n                                                                                  <tbody>\n                                                                                    {warjackWeapons[\n                                                                                      page.split(\n                                                                                        \"#\"\n                                                                                      )[0]\n                                                                                    ].weapons.map(\n                                                                                      (\n                                                                                        weapon,\n                                                                                        index\n                                                                                      ) => (\n                                                                                        <React.Fragment\n                                                                                          key={`warjack_weapons_weapon_${page}_${index}`}\n                                                                                        >\n                                                                                          <tr>\n                                                                                            <td>\n                                                                                              {\n                                                                                                weapon[\n                                                                                                  \"Name\"\n                                                                                                ]\n                                                                                              }\n                                                                                            </td>\n                                                                                            <td>\n                                                                                              {\n                                                                                                weapon[\n                                                                                                  \"Attack Type\"\n                                                                                                ]\n                                                                                              }\n                                                                                            </td>\n                                                                                            <td>\n                                                                                              {weapon[\n                                                                                                \"Damage Type\"\n                                                                                              ]\n                                                                                                .join\n                                                                                                ? weapon[\n                                                                                                    \"Damage Type\"\n                                                                                                  ].join(\n                                                                                                    \" \"\n                                                                                                  )\n                                                                                                : weapon[\n                                                                                                    \"Damage Type\"\n                                                                                                  ]}\n                                                                                            </td>\n                                                                                            <td>\n                                                                                              {\n                                                                                                weapon[\n                                                                                                  \"Range\"\n                                                                                                ]\n                                                                                              }\n                                                                                            </td>\n                                                                                            <td>\n                                                                                              {\n                                                                                                weapon[\n                                                                                                  \"POW\"\n                                                                                                ]\n                                                                                              }\n                                                                                            </td>\n                                                                                          </tr>\n                                                                                          {!weapon.specialRules ? (\n                                                                                            <>\n\n                                                                                            </>\n                                                                                          ) : (\n                                                                                            <tr>\n                                                                                              <td colSpan=\"5\">\n                                                                                                <dl>\n                                                                                                  {Object.entries(\n                                                                                                    weapon.specialRules\n                                                                                                  ).map(\n                                                                                                    (\n                                                                                                      [\n                                                                                                        name,\n                                                                                                        rule,\n                                                                                                      ],\n                                                                                                      index\n                                                                                                    ) => (\n                                                                                                      <React.Fragment\n                                                                                                        key={`warjack_weapons_weapon_${weapon[\"Name\"]}_special_rules_${page}_${index}`}\n                                                                                                      >\n                                                                                                        {\n                                                                                                          <>\n                                                                                                            <dt>\n                                                                                                              {\n                                                                                                                name\n                                                                                                              }\n                                                                                                            </dt>\n                                                                                                            <dd>\n                                                                                                              {\n                                                                                                                rule\n                                                                                                              }\n                                                                                                            </dd>\n                                                                                                          </>\n                                                                                                        }\n                                                                                                      </React.Fragment>\n                                                                                                    )\n                                                                                                  )}\n                                                                                                </dl>\n                                                                                              </td>\n                                                                                            </tr>\n                                                                                          )}\n                                                                                        </React.Fragment>\n                                                                                      )\n                                                                                    )}\n                                                                                  </tbody>\n                                                                                </table>\n                                                                              )}\n                                                                            </>\n                                                                          )}\n                                                                        </div>\n                                                                      </Select.Option>\n                                                                    )\n                                                                  )}\n                                                              </Select>\n                                                            </div>\n                                                          )\n                                                      )}\n                                                    </>\n                                                  )}\n                                                  {!details.weaponDetails ||\n                                                  details.weaponDetails\n                                                    .length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Weapon Details</p>\n                                                      <table>\n                                                        <thead>\n                                                          <tr>\n                                                            <th>Weapon</th>\n                                                            <th>Location</th>\n                                                            <th>Cost</th>\n                                                            <th>Weapon Pack</th>\n                                                          </tr>\n                                                        </thead>\n                                                        <tbody>\n                                                          {details.weaponDetails.map(\n                                                            (weapon, index) => (\n                                                              <React.Fragment\n                                                                key={`weapon_details_number_${index}`}\n                                                              >\n                                                                <tr>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Weapon\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Location\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Cost\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                  <td>\n                                                                    {\n                                                                      weapon[\n                                                                        \"Weapon Pack\"\n                                                                      ].text\n                                                                    }\n                                                                  </td>\n                                                                </tr>\n                                                              </React.Fragment>\n                                                            )\n                                                          )}\n                                                        </tbody>\n                                                      </table>\n                                                    </>\n                                                  )}\n                                                  {!details.release ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Release</p>\n                                                      <p>{details.release}</p>\n                                                    </>\n                                                  )}\n                                                  {!details.lore ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <p>Lore</p>\n                                                      <p>{details.lore}</p>\n                                                    </>\n                                                  )}\n                                                </div>\n                                              )}\n                                            </Card>\n                                          </div>\n                                        )}\n                                      </Draggable>\n                                    )\n                                  )}\n                                  {provided.placeholder}\n                                </div>\n                              )}\n                            </Droppable>\n\n                            {cards.length > 0 ? (\n                              <div className=\"footer\">\n                                <Badge\n                                  size=\"small\"\n                                  key=\"_badge\"\n                                  count={cards.length}\n                                  offset={[10, 5]}\n                                >\n                                  Card:\n                                </Badge>\n                                {Object.entries(\n                                  cards.reduce(\n                                    (acc, card) => ({\n                                      ...acc,\n                                      [card.type]: (acc[card.type] || 0) + 1,\n                                    }),\n                                    {}\n                                  )\n                                )\n                                  .sort()\n                                  .map(([type, count], i) => (\n                                    <Badge\n                                      size=\"small\"\n                                      key={`badge${i}`}\n                                      count={count}\n                                      offset={[10, 5]}\n                                    >\n                                      {type}:\n                                    </Badge>\n                                  ))}\n                              </div>\n                            ) : (\n                              <></>\n                            )}\n                          </div>\n                        </Col>\n                      ))}\n                    </Row>\n                  </Layout>\n                </Content>\n              </>\n            )}\n            <Droppable key={\"trash_footer\"} droppableId={\"trash_footer\"}>\n              {(provided) => (\n                <div ref={provided.innerRef} {...provided.droppableProps}>\n                  {dragging ? (\n                    <>\n                      <div className=\"trash-footer\">\n                        <div\n                          style={{\n                            animation:\n                              \"shake 0.82s cubic-bezier(.36,.07,.19,.97) both\",\n                            color: \"white\",\n                          }}\n                        >\n                          <DeleteOutlined />\n                          <div style={{ display: \"none\" }}>\n                            {provided.placeholder}\n                          </div>\n                        </div>\n                      </div>\n                      <Footer>\n                        <div className=\"copyright-notice\">\n                          Images originating from the Privateer Press website\n                          are  2001\n                          <>{new Date().getFullYear()}</> Privateer Press, Inc.\n                          All Rights Reserved. Privateer Press, warcaster and\n                          their logos are trademarks of Privateer Press, Inc.\n                          Images and trademarks used without permission. This\n                          website is unofficial and is not endorsed by Privateer\n                          Press.\n                        </div>\n                      </Footer>\n                    </>\n                  ) : (\n                    <Footer>\n                      <div className=\"bookmark\">\n                        <Layout>\n                          <Row>\n                            <Col\n                              xs={24}\n                              sm={24}\n                              md={18}\n                              lg={18}\n                              xl={16}\n                              xxl={16}\n                            >\n                              <input\n                                value={url}\n                                onChange={setUrl}\n                                onKeyDown={open}\n                                onClick={bookmark}\n                              />\n                            </Col>\n                          </Row>\n                        </Layout>\n                      </div>\n                      <div className=\"copyright-notice\">\n                        Images originating from the Privateer Press website are\n                         2001\n                        <>{new Date().getFullYear()}</> Privateer Press, Inc.\n                        All Rights Reserved. Privateer Press, warcaster and\n                        their logos are trademarks of Privateer Press, Inc.\n                        Images and trademarks used without permission. This\n                        website is unofficial and is not endorsed by Privateer\n                        Press.\n                      </div>\n                    </Footer>\n                  )}\n                </div>\n              )}\n            </Droppable>\n          </DragDropContext>\n          {factionModels.map(([factionName, faction, models, cadreModels]) => (\n            <Drawer\n              key={`drawer_${faction}`}\n              visible={openDrawer === faction}\n              placement=\"right\"\n              onClose={setOpenDrawer}\n              width=\"80%\"\n              mask={false}\n              closeIcon={<MenuUnfoldOutlined />}\n            >\n              <Menu\n                id={`faction_${faction}`}\n                mode=\"inline\"\n                triggerSubMenuAction=\"click\"\n              >\n                <Menu.ItemGroup\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        models.map((model) => model.page)\n                      )}\n                    >\n                      {factionName}\n                    </div>\n                  }\n                >\n                  {models.map(({ name, page, type, subtype }) => {\n                    const shortName = name.slice(0, 40);\n\n                    return (\n                      <Menu.Item key={faction + \":\" + page} className={faction}>\n                        <span onClick={menuItemClicked(page)}>\n                          <span className=\"card\">\n                            {shortName.length === name.length ? (\n                              shortName\n                            ) : (\n                              <Tooltip placement=\"top\" title={name}>\n                                {shortName}...\n                              </Tooltip>\n                            )}\n                          </span>\n                          <span className=\"types\">\n                            {subtype ? subtype : \"\"}\n                            {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                          </span>\n                        </span>\n                      </Menu.Item>\n                    );\n                  })}\n                </Menu.ItemGroup>\n                {!cadreModels ? (\n                  <></>\n                ) : (\n                  cadreModels.map(({ cadrePageId, cadreModels }) => (\n                    <Menu.ItemGroup\n                      key={`Cadre:${cadrePageId}`}\n                      title={\n                        <div\n                          onClick={allMenuItemsClicked(\n                            cadreModels.map((model) => model.page)\n                          )}\n                        >\n                          {cadres[cadrePageId]}\n                        </div>\n                      }\n                    >\n                      {cadreModels.map(({ name, page, type, subtype }) => {\n                        const shortName = name.slice(0, 40);\n\n                        return (\n                          <Menu.Item\n                            key={faction + \":\" + page + \":cadre:\" + cadrePageId}\n                            className={faction}\n                          >\n                            <span onClick={menuItemClicked(page)}>\n                              <span className=\"card\">\n                                {shortName.length === name.length ? (\n                                  shortName\n                                ) : (\n                                  <Tooltip placement=\"top\" title={name}>\n                                    {shortName}...\n                                  </Tooltip>\n                                )}\n                              </span>\n                              <span className=\"types\">\n                                {subtype ? subtype : \"\"}\n                                {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                              </span>\n                            </span>\n                          </Menu.Item>\n                        );\n                      })}\n                    </Menu.ItemGroup>\n                  ))\n                )}\n                <Menu.ItemGroup\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        (wildCardModels[faction] || []).map(\n                          (model) => model.page\n                        )\n                      )}\n                    >\n                      Wild Cards\n                    </div>\n                  }\n                >\n                  {(wildCardModels[faction] || [])\n                    .sort((w1, w2) => (w1.type < w2.type ? -1 : 1))\n                    .map(({ name, page, type, subtype }, j) => {\n                      const shortName = name.slice(0, 40);\n\n                      return (\n                        <Menu.Item key={faction + \":\" + page}>\n                          <span onClick={menuItemClicked(page)}>\n                            <span className=\"card\">\n                              {shortName.length === name.length ? (\n                                shortName\n                              ) : (\n                                <Tooltip placement=\"top\" title={name}>\n                                  {shortName}...\n                                </Tooltip>\n                              )}\n                            </span>\n                            <span className=\"types\">\n                              {subtype ? subtype : \"\"}\n                              {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                            </span>\n                          </span>\n                        </Menu.Item>\n                      );\n                    })}\n                </Menu.ItemGroup>\n                {Object.entries(\n                  cypherCodecs\n                    .filter(\n                      (cypher) =>\n                        [factionName, \"Universal\"].indexOf(\n                          cypher.Faction.text\n                        ) !== -1\n                    )\n                    .reduce(\n                      (acc, cypher) => ({\n                        ...acc,\n                        [cypher.Faction.text]: [\n                          ...(acc[cypher.Faction.text] || []),\n                          cypher,\n                        ],\n                      }),\n                      {}\n                    )\n                )\n                  .sort(([a], [b]) =>\n                    a === \"Universal\" ? 1 : b === \"Universal\" ? -1 : 1\n                  )\n                  .map(([faction, cyphers]) => (\n                    <Menu.ItemGroup\n                      title={\n                        <div\n                          onClick={allMenuItemsClicked(\n                            cyphers\n                              .sort((c1, c2) =>\n                                c1.Type.text < c2.Type.text ? -1 : 1\n                              )\n                              .map(({ Cypher }) => Cypher.page)\n                          )}\n                        >\n                          {`${faction} Cyphers`}\n                        </div>\n                      }\n                      key={faction}\n                    >\n                      {cyphers\n                        .sort((c1, c2) =>\n                          c1.Type.text < c2.Type.text ? -1 : 1\n                        )\n                        .map(({ Cypher, Type }) => (\n                          <Menu.Item\n                            key={\":\" + Cypher.page}\n                            className={Type.text}\n                          >\n                            <span onClick={menuItemClicked(Cypher.page)}>\n                              <span className=\"card\">{Cypher.text}</span>\n                              <span className=\"types\">{Type.text}</span>\n                            </span>\n                          </Menu.Item>\n                        ))}\n                    </Menu.ItemGroup>\n                  ))}\n              </Menu>\n            </Drawer>\n          ))}\n          <Drawer\n            key=\"drawer_cyphers\"\n            visible={openDrawer === \"cypher_codecs\"}\n            placement=\"right\"\n            onClose={setOpenDrawer}\n            width=\"80%\"\n            mask={false}\n            closeIcon={<MenuUnfoldOutlined />}\n          >\n            <Menu\n              id={`faction_cyphers`}\n              mode=\"inline\"\n              triggerSubMenuAction=\"click\"\n            >\n              {Object.entries(\n                cypherCodecs.reduce(\n                  (acc, cypher) => ({\n                    ...acc,\n                    [cypher.Faction.text]: [\n                      ...(acc[cypher.Faction.text] || []),\n                      cypher,\n                    ],\n                  }),\n                  {}\n                )\n              )\n                .sort()\n                .map(([faction, cyphers]) => (\n                  <Menu.ItemGroup title={`${faction} Cyphers`} key={faction}>\n                    {cyphers\n                      .sort((c1, c2) => (c1.Type.text < c2.Type.text ? -1 : 1))\n                      .map(({ Cypher, Type }) => (\n                        <Menu.Item\n                          key={\":\" + Cypher.page}\n                          className={Type.text}\n                        >\n                          <span onClick={menuItemClicked(Cypher.page)}>\n                            <span className=\"card\">{Cypher.text}</span>\n                            <span className=\"types\">{Type.text}</span>\n                          </span>\n                        </Menu.Item>\n                      ))}\n                  </Menu.ItemGroup>\n                ))}\n            </Menu>\n          </Drawer>\n        </Layout>\n      </Layout>\n    </div>\n  );\n}\n\nconst App = connect(\n  (state) => ({\n    initialized: AppSync.selectDone()(state),\n    syncReasons: AppSync.selectReasons()(state),\n    factionModels: Object.entries(FactionModels.select()(state))\n      .sort()\n      .map(([faction, models]) => [\n        Factions.select()(state)[faction].text,\n        faction,\n        models\n          .map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          }))\n          .filter(\n            (model) =>\n              !Object.values(CadreModels.select()(state))\n                .flatMap((models) =>\n                  models.map((cadreModel) => cadreModel.title)\n                )\n                .includes(model.name)\n          ),\n        Object.entries(CadreModels.select()(state)).flatMap(\n          ([cadrePageId, cadreModels]) => {\n            const cadre = cadreModels.map((model) => model.title);\n            const allCadreModels = models\n              .filter((model) => cadre.includes(model.Name.text))\n              .map((model) => ({\n                name: model.Name.text,\n                page: model.Name.page,\n                type: model.Type.text,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n              }));\n\n            if (allCadreModels.length === cadreModels.length)\n              return [{ cadrePageId, cadreModels: allCadreModels }];\n\n            return [];\n          }\n        ),\n      ]),\n    wildCardModels: Object.fromEntries(\n      Object.entries(WildCardModels.select()(state))\n        .sort()\n        .map(([faction, models]) => [\n          faction,\n          models.map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          })),\n        ])\n    ),\n    cypherCodecs: CypherCodecs.select()(state),\n    lists: Lists.select()(state).map(({ title, cards }) => ({\n      title,\n      cards: cards.flatMap(\n        ({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId, hidden }) => {\n          const pageIdByPage = PageIds.select()(state);\n\n          const page =\n            Object.entries(pageIdByPage)\n              .filter(([_, id]) => id === pageId)\n              .map(([page, _]) => page)[0] || \"\";\n\n          const model = Object.entries(FactionModels.select()(state))\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const wildCard = Object.entries(WildCardModels.select()(state))\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const cypher = CypherCodecs.select()(state).find(\n            ({ Cypher }) => Cypher.page === page\n          );\n\n          if (model) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: model.Type.text,\n                title: model.Name.text,\n                page: model.Name.page,\n                pageId,\n                cortexIds,\n                warjackWeaponIds,\n                vehicleWeaponId,\n                faction: model.faction,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                ...(!details\n                  ? {}\n                  : {\n                      details: {\n                        ...details,\n                        ...(!details.hardpoints\n                          ? {}\n                          : {\n                              hardpointNames: parseHardpoints(\n                                details.hardpoints\n                              ),\n                            }),\n                        ...(!details.cortexSelections\n                          ? {}\n                          : {\n                              cortexSelections: Object.fromEntries(\n                                Object.entries(details.cortexSelections).map(\n                                  ([cortex, advantages]) => [\n                                    cortex,\n                                    Object.fromEntries(\n                                      Object.entries(advantages).map(\n                                        ([advantage, { text, category }]) => [\n                                          advantage,\n                                          {\n                                            text,\n                                            categoryId: pageIdByPage[category],\n                                          },\n                                        ]\n                                      )\n                                    ),\n                                  ]\n                                )\n                              ),\n                            }),\n                        ...(!details.warjackWeaponSelections\n                          ? {}\n                          : {\n                              warjackWeaponSelections: Object.fromEntries(\n                                Object.entries(\n                                  details.warjackWeaponSelections\n                                ).map(([page, selection]) => [\n                                  page,\n                                  { ...selection, pageId: pageIdByPage[page] },\n                                ])\n                              ),\n                            }),\n                        ...(!details.vehicleWeaponSelection\n                          ? {}\n                          : {\n                              vehicleWeaponSelection:\n                                details.vehicleWeaponSelection.map(\n                                  ({ text, page }) => ({\n                                    text,\n                                    page,\n                                    pageId: pageIdByPage[page],\n                                  })\n                                ),\n                            }),\n                      },\n                    }),\n              },\n            ];\n          }\n\n          if (wildCard) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: wildCard.Type.text,\n                title: wildCard.Name.text,\n                page: wildCard.Name.page,\n                pageId,\n                faction: \"Wild_Card\",\n                ...(wildCard.Subtype\n                  ? { subtype: wildCard.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                details,\n              },\n            ];\n          }\n\n          if (cypher) {\n            const details = Cyphers2.selectByPage(page)(state);\n            return [\n              {\n                card: \"cypher\",\n                hidden,\n                type: cypher.Type.text,\n                title: cypher.Cypher.text,\n                page: cypher.Cypher.page,\n                pageId,\n                ...(cypher.Faction.text === \"Universal\"\n                  ? { faction: \"Universal\" }\n                  : { faction: cypher.Faction.page }),\n                details,\n              },\n            ];\n          }\n\n          return [];\n        }\n      ),\n    })),\n    dragging: Dragging.select()(state),\n    url: Url.select()(state),\n    factions: Factions.select()(state),\n    vehicleWeapons: VehicleWeapons.select()(state),\n    warjackWeapons: WarjackWeapons.select()(state),\n    cadres: CadreCategoryMembers.select()(state),\n  }),\n  (dispatch) => ({\n    toggleCard: (listIndex, cardIndex, pageId, card) => {\n      return () =>\n        dispatch(Lists.toggleCard({ listIndex, cardIndex, pageId, card }));\n    },\n    dragStart: (event) => dispatch(CardDragStarted(event)),\n    dragEnd: (event) => dispatch(CardDragEnded(event)),\n    menuItemClicked: (page) => (event) => {\n      dispatch(MenuItemClicked({ page }));\n      event.stopPropagation();\n    },\n    allMenuItemsClicked: (pages) => (event) => {\n      pages.forEach((page) => dispatch(MenuItemClicked({ page })));\n      event.stopPropagation();\n    },\n    removeList: (listIndex) => () => dispatch(Lists.removeList({ listIndex })),\n    addEmptyList: (listIndex) => () =>\n      dispatch(Lists.addEmptyList({ listIndex })),\n    moveListBy: (listIndex, by) => () =>\n      dispatch(Lists.moveListBy({ listIndex, by })),\n    setListTitle: (listIndex) => (event) =>\n      dispatch(Lists.setListTitle({ listIndex, title: event.target.value })),\n    setUrl: (event) => dispatch(Url.set({ url: event.target.value })),\n    bookmark: () => {\n      const bookmark = document.querySelector(\".bookmark input\");\n      if (bookmark) {\n        if (navigator.userAgent.match(/ipad|iphone/i)) {\n          const range = document.createRange();\n          range.selectNodeContents(bookmark);\n\n          const selection = window.getSelection();\n          selection.removeAllRanges();\n          selection.addRange(range);\n          bookmark.setSelectionRange(0, 999999);\n        } else {\n          bookmark.select();\n        }\n      }\n    },\n    open: (event) => {\n      if (event.key === \"Enter\") {\n        const url = document.querySelector(\".bookmark input\").value;\n        if (url) window.open(url, \"_self\");\n      }\n    },\n    setCardCortex:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardCortex({\n            listIndex,\n            cardIndex,\n            pageId,\n            cortexIds: label,\n          })\n        ),\n    setCardWarjackWeapons:\n      (listIndex, cardIndex, hardpointNameIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardWarjackWeapons({\n            listIndex,\n            cardIndex,\n            hardpointNameIndex,\n            pageId,\n            warjackWeaponId: label,\n          })\n        ),\n    setCardVehicleWeapon:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardVehicleWeapon({\n            listIndex,\n            cardIndex,\n            pageId,\n            vehicleWeaponId: label,\n          })\n        ),\n  })\n)(AppPresentation);\n\nexport default App;\n\nfunction generateListNamePlaceholder(cards, factionNames, defaultValue) {\n  const factions = cards.map((card) => card.faction);\n  if (factions.length === 0) return defaultValue;\n\n  const justFactions = factions.filter(\n    (faction) => [\"Universal\", \"Wild_Card\"].indexOf(faction) === -1\n  );\n  if (justFactions.length === 0) {\n    const justCyphers = factions.filter((faction) => faction === \"Universal\");\n    if (justCyphers.length === factions.length) return \"Universal Cyphers\";\n\n    return defaultValue;\n  }\n\n  const factionsPresent = justFactions.reduce(\n    (acc, faction) => ({ ...acc, [faction]: true }),\n    {}\n  );\n  if (Object.keys(factionsPresent).length > 1) return \"Several factions\";\n\n  const factionName = factionNames[Object.keys(factionsPresent)[0]].text;\n  if (factionName) {\n    const types = cards.map((card) => card.type);\n\n    const cyperTypes = [\"Fury\", \"Geometric\", \"Harmonic\", \"Overdrive\"];\n    const noCyphers = types.filter((type) => cyperTypes.indexOf(type) === -1);\n    if (noCyphers.length === types.length) return factionName + \" Models\";\n\n    const justCyphers = types.filter((type) => cyperTypes.indexOf(type) > -1);\n    if (justCyphers.length === types.length) return factionName + \" Cyphers\";\n\n    return factionName;\n  }\n\n  return defaultValue;\n}\n\nfunction cortexName(cortexSelections, cortexIds) {\n  return (Object.entries(cortexSelections).find(\n    ([cortex, advantages]) =>\n      Object.values(advantages)\n        .map((advantage) => advantage.categoryId)\n        .join(\"\") === (cortexIds || []).join(\"\")\n  ) || [undefined])[0];\n}\n\nfunction vehicleWeaponName(vehicleWeaponSelection, vehicleWeaponId) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n  if (!vehicleWeapon) return undefined;\n  return vehicleWeapon.text;\n}\n\nfunction warjackWeaponNames(warjackWeaponSelections, weaponId) {\n  const weapon = Object.values(warjackWeaponSelections).find(\n    ({ pageId }) => pageId === weaponId\n  );\n  if (weapon) {\n    return warjackWeaponName(weapon.name, weapon.cost);\n  }\n  return weaponId;\n}\n\nfunction warjackWeaponNamesSubtitle(warjackWeaponSelections, weaponIds) {\n  return weaponIds.flatMap((weaponId) => {\n    const weapon = Object.values(warjackWeaponSelections).find(\n      ({ pageId }) => pageId === weaponId\n    );\n    if (weapon) {\n      return [weapon.name];\n    }\n    return [];\n  });\n}\n\nfunction warjackWeaponName(name, cost) {\n  return `${name} (cost ${cost})`;\n}\n\nfunction parseHardpoints(hardpoints) {\n  // Parses strings of the following type: \"3 : 2 Arm, 1 Back\"\n\n  const rHardpointCount = \"\\\\s*(\\\\d+)\\\\s*\";\n  const rHardpointGroup = \"\\\\s*(\\\\d+)\\\\s*(\\\\w+)\\\\s*\";\n\n  let results = null;\n  for (let n = 1; n <= 10; n++) {\n    const regexp = new RegExp(\n      `^${rHardpointCount}:${rHardpointGroup}${repeat(\n        `,${rHardpointGroup}`,\n        n - 1\n      )}$`\n    );\n    results = regexp.exec(hardpoints);\n    if (results !== null) {\n      break;\n    }\n  }\n\n  if (results === null) {\n    return undefined;\n  }\n\n  const hardpointCount = parseInt(results[1], 10);\n\n  const hardpointNames = [];\n  for (let n = 2; n < results.length; n += 2) {\n    const groupCount = parseInt(results[n], 10);\n    const groupName = results[n + 1];\n\n    for (let i = 1; i <= groupCount; i++) {\n      hardpointNames.push(groupName);\n    }\n  }\n\n  if (hardpointCount !== hardpointNames.length) {\n    console.error(\n      \"Hardpoints do not add up!\",\n      hardpoints,\n      hardpointCount,\n      hardpointNames\n    );\n  }\n\n  return hardpointNames;\n\n  function repeat(s, n) {\n    if (n === 0) return \"\";\n    return s + repeat(s, n - 1);\n  }\n}\n","import { StateShard } from \"../utils\";\nimport { put } from \"redux-saga/effects\";\n\nconst Requests = StateShard(\n  \"Requests\",\n  init,\n  { cache, fetch, fetched },\n  {\n    parsePage,\n    queryCadreModels,\n    queryCadres,\n    queryRevisions,\n    queryPageIds,\n  },\n  { selectCachedUrl, selectPending }\n);\n\nexport { Requests };\n\nfunction init(state) {\n  if (!state.io) {\n    state.io = {};\n  }\n\n  state.io.requests = { cached: {}, pending: [] };\n}\n\n// Actions\n\nfunction cache(state, { url, data }) {\n  const cached = selectCached(state);\n  cached[url] = data;\n}\n\nfunction fetch(state, params) {\n  const pending = selectPending(state);\n\n  if (!pending.find((request) => request.url === params.url)) {\n    pending.push(params);\n  }\n}\n\nfunction fetched(state, { url }) {\n  const pending = selectPending(state);\n  const index = pending.findIndex((request) => request.url === url);\n\n  if (index > -1) {\n    pending.splice(index, 1);\n  }\n}\n\n// Action Creators\n\nfunction* parsePage({ page, parserName }) {\n  const queryParams = { action: \"parse\", page };\n\n  yield put(\n    Requests.fetch({\n      desc: \"parsePage\",\n      parserName,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadreModels({ pageId }) {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmpageid: pageId,\n    cmtype: \"page\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadreModels\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadres() {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmtitle: \"Category:Cadre\",\n    cmtype: \"subcat\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadres\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryRevisions({ pageIds }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"revisions\",\n    pageids: pageIds.join(\"|\"),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryRevisions\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryPageIds({ pages }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"pageprops\",\n    titles: encodeURIComponent(pages.map((_) => _.text).join(\"|\")),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryPageIds\",\n      pages,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.io.requests;\n}\n\nfunction selectCached(state) {\n  const requests = select(state);\n  return requests.cached;\n}\n\nfunction selectCachedUrl(state, url) {\n  const cached = selectCached(state);\n  return cached[url];\n}\n\nfunction selectPending(state) {\n  const requests = select(state);\n  return requests.pending;\n}\n\n// Utils\n\nfunction jsonApiRequest(queryParams) {\n  const jsonFormat = {\n    formatversion: 2,\n    format: \"json\",\n  };\n  const params = { ...queryParams, ...jsonFormat };\n\n  const queryString = Object.entries(params)\n    .map((keyValue) => keyValue.join(\"=\"))\n    .join(\"&\");\n\n  return \"https://privateerpress.wiki/api.php?\" + queryString;\n}\n","import { StateShard } from \"./utils\";\n\nconst ParserNames = StateShard(\n  \"ParserNames\",\n  init,\n  { setForPage },\n  {},\n  { selectByPage }\n);\n\nexport { ParserNames };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.parserNames = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, parserName }) {\n  const parserNames = select(state);\n  parserNames[page] = parserName;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.parserNames;\n}\n\nfunction selectByPage(state, page) {\n  const parserNames = select(state);\n  return parserNames[page];\n}\n","import { put, take } from \"redux-saga/effects\";\n\nimport { Requests } from \"../../state/io/Requests\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* cacheParserNames() {\n  while (true) {\n    const action = yield take(Requests.fetch().type);\n    const { payload } = action;\n    const { desc, queryParams, parserName } = payload;\n\n    if (desc !== \"parsePage\") {\n      continue;\n    }\n\n    const page = queryParams.page;\n\n    if (!page || !parserName) {\n      console.error(\"Could not cache parser!\", { page, parserName }, action);\n      continue;\n    }\n\n    yield put(ParserNames.setForPage({ page, parserName }));\n  }\n}\n\nexport { cacheParserNames };\n","const jsonp = (url) => {\n  return new Promise(function (resolve, reject) {\n    const callbackName = \"jsonp_callback_\" + Math.round(100000 * Math.random());\n    window[callbackName] = function (data) {\n      delete window[callbackName];\n      document.body.removeChild(script);\n      resolve(data);\n    };\n\n    const script = document.createElement(\"script\");\n    script.src =\n      url + (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"callback=\" + callbackName;\n    document.body.appendChild(script);\n  });\n};\n\nexport { jsonp };\n","/*\nThese sagas fetch and cache wiki pages.\n\nThe wiki's JSONP API is used to fetch page contents. Since we want to be\npolite, we only call the API every two seconds. This throttle is implemented in\nfetchWikiPage through an actionChannel and a call to delay.\n*/\n\nimport {\n  actionChannel,\n  call,\n  delay,\n  put,\n  select,\n  take,\n} from \"redux-saga/effects\";\nimport { FetchedWikiPage, FetchedWikiPageRevisions } from \"../../../messages\";\nimport { jsonp } from \"../jsonp\";\n\nimport { Requests } from \"../../../state/io/Requests\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { CadreModels } from \"../../../state/CadreModels\";\nimport { PageIds } from \"../../../state/PageIds\";\n\nfunction* fetchWikiPage() {\n  const wikiPageChannel = yield actionChannel(Requests.fetch().type);\n\n  while (true) {\n    const action = yield take(wikiPageChannel);\n    const { payload } = action;\n    const { desc, parserName, queryParams, url } = payload;\n\n    let data = yield select(Requests.selectCachedUrl(url));\n    let wait = false;\n    if (!data) {\n      data = yield call(jsonp, url);\n      wait = true;\n      yield put(Requests.cache({ url, data }));\n    }\n    yield put(Requests.fetched({ url }));\n\n    if (desc === \"queryRevisions\") {\n      const pageRevisions = data.query.pages;\n\n      yield put(FetchedWikiPageRevisions({ pageRevisions }));\n    }\n\n    if (desc === \"queryCadres\") {\n      const categorymembers = data.query.categorymembers;\n      if (categorymembers) {\n        const cadreCategoryMembers = Object.fromEntries(\n          categorymembers.map((member) => [\n            member.pageid,\n            member.title.replace(/^Category:/, \"\"),\n          ])\n        );\n\n        yield put(CadreCategoryMembers.set({ cadreCategoryMembers }));\n      }\n    }\n\n    if (desc === \"queryCadreModels\") {\n      const { cmpageid: cadrePageId } = queryParams;\n\n      const categoryMembers = data.query.categorymembers;\n      if (categoryMembers) {\n        const cadreModels = categoryMembers.map(({ pageid, title }) => ({\n          pageId: pageid,\n          title,\n        }));\n\n        yield put(CadreModels.setByCadrePageId({ cadrePageId, cadreModels }));\n      }\n    }\n\n    if (desc === \"parsePage\") {\n      const { page } = queryParams;\n\n      if (!page) {\n        console.error(\"No page to fetch!\", action);\n        continue;\n      }\n\n      yield put(FetchedWikiPage({ page, data: data.parse, parserName }));\n    }\n\n    if (desc === \"queryPageIds\") {\n      const { pages } = payload;\n\n      const titleToPageId = Object.fromEntries(\n        data.query.pages.map(({ title, pageid }) => [title, pageid])\n      );\n\n      const pageIdByTitle = Object.fromEntries(\n        pages.map(({ text, page }) => [page.split(\"#\")[0], titleToPageId[text]])\n      );\n\n      yield put(PageIds.addPages({ pageIdByTitle }));\n    }\n\n    if (wait) {\n      const twoSecondsInMs = 2 * 1000;\n      yield delay(twoSecondsInMs);\n    }\n  }\n}\n\nexport { fetchWikiPage };\n","import { StateShard } from \"./utils\";\n\nconst WikiPages = StateShard(\n  \"WikiPages\",\n  init,\n  { addPage, removePage },\n  {},\n  {\n    selectPageByPage,\n    selectPagesByPageIds,\n    selectPageIds,\n  }\n);\n\nexport { WikiPages };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.pages = {};\n}\n\n// Actions\n\nfunction addPage(state, { page, data }) {\n  const pages = select(state);\n  if (!data.page) data.page = page;\n  pages[page] = data;\n}\n\nfunction removePage(state, { page }) {\n  const pages = select(state);\n  delete pages[page];\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.pages;\n}\n\nfunction selectPageByPage(state, page) {\n  const pages = select(state);\n  return pages[page];\n}\n\nfunction selectPagesByPageIds(state, pageIds) {\n  const pages = select(state);\n  return Object.values(pages).filter((page) => pageIds.includes(page.pageid));\n}\n\nfunction selectPageIds(state) {\n  const pages = select(state);\n  return Object.values(pages).map((page) => page.pageid);\n}\n","/*\nThese sagas make sure, cached wiki pages stay up-to-date.\n\nEach app reload triggers a RefreshWikiPages action, that starts the cache\nupdate process. The refreshWikiPages saga bulk loads revision data for all\ncached pages from the wiki API. If a page cannot be found (probably because it\nwas deleted from the wiki), it is removed from the cache. If revision\ninformation is found, it is compared with the cached revision of the page. If\nthe loaded revision is higher, the page is removed and fetched again. If the\ncached revision is higher or equal, the page is not refreshed and remains\ncached.\n*/\n\nimport { FetchedWikiPageRevisions, RefreshWikiPages } from \"../../../messages\";\nimport { all, put, take, select } from \"redux-saga/effects\";\n\nimport { WikiPages } from \"../../../state/WikiPages\";\nimport { Requests } from \"../../../state/io/Requests\";\nimport { ParserNames } from \"../../../state/ParserNames\";\n\nfunction* updateCache() {\n  yield all([refreshWikiPages(), refreshOutdatedWikiPages()]);\n}\n\nexport { updateCache };\n\nfunction* refreshWikiPages() {\n  yield take(RefreshWikiPages().type);\n  const pageIds = yield select(WikiPages.selectPageIds());\n\n  const queryLength = 50;\n  for (let i = 0; i < pageIds.length; i += queryLength) {\n    yield* Requests.queryRevisions({\n      pageIds: pageIds.slice(i, i + queryLength),\n    });\n  }\n}\n\nfunction* refreshOutdatedWikiPages() {\n  while (true) {\n    const { payload } = yield take(FetchedWikiPageRevisions().type);\n    const { pageRevisions } = payload;\n    const revInfoByPageId = Object.fromEntries(\n      pageRevisions.map((revision) => [\n        revision.pageid,\n        revision.missing\n          ? { missing: revision.missing }\n          : {\n              revid: Math.max(\n                ...revision.revisions.map((revision) => revision.revid)\n              ),\n            },\n      ])\n    );\n    const pageIds = pageRevisions.map((revision) => revision.pageid);\n\n    const pages = yield select(WikiPages.selectPagesByPageIds(pageIds));\n    for (const page of pages) {\n      const revInfo = revInfoByPageId[page.pageid];\n      if (revInfo.missing) {\n        yield put(WikiPages.removePage({ page: page.page }));\n      } else if (page.revid < revInfo.revid) {\n        yield put(WikiPages.removePage({ page: page.page }));\n        const parserName = yield select(ParserNames.selectByPage(page.page));\n        yield* Requests.parsePage({\n          page: page.page,\n          parserName, // TODO: Test if this works\n        });\n      }\n    }\n  }\n}\n","function partitionBy(slice, array) {\n  var arrays = [];\n\n  for (var i = 0; i < array.length; i += slice) {\n    arrays[arrays.length] = array.slice(i, i + slice);\n  }\n\n  return arrays;\n}\n\nexport { partitionBy };\n","import { all, put, take, select } from \"redux-saga/effects\";\n\nimport { AppSync } from \"../../../state/AppSync\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\nimport { FactionModels } from \"../../../state/FactionModels\";\nimport { Factions } from \"../../../state/Factions\";\nimport { PageIds } from \"../../../state/PageIds\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchPageIds() {\n  const cachedPageIds = yield select(PageIds.select());\n\n  if (Object.keys(cachedPageIds).length === 0) {\n    yield put(\n      AppSync.addReasons({\n        reasons: [\n          {\n            reason: \"Loading factions\",\n            description: \"Load available Warcaster factions\",\n          },\n          {\n            reason: \"Loading cyphers\",\n            description: \"Load available Cypher Codecs\",\n          },\n          {\n            reason: \"Loading wildcard models\",\n            description: \"Load available Wild Cards\",\n          },\n        ],\n      })\n    );\n\n    const [factionsSet] = yield all([\n      take(Factions.set().type),\n      take(CypherCodecs.set().type),\n      take(WildCardModels.set().type),\n    ]);\n\n    const factions = Object.keys(factionsSet.payload.factions);\n\n    yield put(\n      AppSync.addReasons({\n        reasons: factions.map((faction) => ({\n          reason: `Loading ${faction.replace(/_/g, \" \")}`,\n          description: `Used to build ${faction.replace(/_/g, \" \")} menu`,\n        })),\n      })\n    );\n\n    yield all(\n      factions.map((faction) =>\n        take(\n          (action) =>\n            action.type === FactionModels.set().type &&\n            action.payload.page === faction\n        )\n      )\n    );\n\n    const factionModelPages = Object.values(\n      yield select(FactionModels.select())\n    )\n      .flat()\n      .map((_) => _.Name);\n\n    const wildCardPages = Object.values(yield select(WildCardModels.select()))\n      .flat()\n      .map((_) => _.Name)\n      .sort(({ text, page }) => [text, page])\n      .filter(\n        ({ text, page }, index, cards) =>\n          !index ||\n          (text !== cards[index - 1].text && page !== cards[index - 1].page)\n      );\n\n    const cypherPages = (yield select(CypherCodecs.select())).map(\n      (_) => _.Cypher\n    );\n\n    const pages = [...factionModelPages, ...wildCardPages, ...cypherPages].sort(\n      (_) => _.page\n    );\n    const pageSlices = partitionBy(50, pages);\n\n    yield put(\n      AppSync.addReasons({\n        reasons: pageSlices.map((_, index) => ({\n          reason: `Loading page ids ${index + 1} of ${pageSlices.length}`,\n          description:\n            \"Card lists are encoded in the URL using unique wiki page ids\",\n        })),\n      })\n    );\n\n    for (const pages of pageSlices) {\n      yield* Requests.queryPageIds({ pages });\n    }\n\n    let processedCount = 0;\n    while (yield take(PageIds.addPages().type)) {\n      processedCount += 1;\n      if (pageSlices.length === processedCount) {\n        yield put(AppSync.done());\n      }\n    }\n  }\n}\n\nexport { fetchPageIds };\n","import { all } from \"redux-saga/effects\";\nimport { fetchWikiPage } from \"./fetchWikiPage\";\nimport { updateCache } from \"./updateCache\";\nimport { fetchPageIds } from \"./fetchPageIds\";\n\nfunction* cacheWikiPages() {\n  yield all([fetchPageIds(), updateCache(), fetchWikiPage()]);\n}\n\nexport { cacheWikiPages };\n","import { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreCategoryMembers() {\n  yield* Requests.queryCadres();\n}\n\nexport { fetchCadreCategoryMembers };\n","import { take } from \"redux-saga/effects\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreModels() {\n  while (true) {\n    const {\n      payload: { cadreCategoryMembers },\n    } = yield take(CadreCategoryMembers.set().type);\n\n    const pageIds = Object.keys(cadreCategoryMembers);\n    for (const pageId of pageIds) {\n      yield* Requests.queryCadreModels({ pageId });\n    }\n  }\n}\n\nexport { fetchCadreModels };\n","/*\nThese sagas load meta data necessary for grouping models into cadres.\n\n`fetchCadreCategoryMembers` gets a list of all cadres in game, while `fetchCadreModels` fetches\nthe cadre models for a given cadre.\n*/\n\nimport { all } from \"redux-saga/effects\";\nimport { fetchCadreCategoryMembers } from \"./fetchCadreCategoryMembers\";\nimport { fetchCadreModels } from \"./fetchCadreModels\";\n\nfunction* fetchCadres() {\n  yield all([fetchCadreCategoryMembers(), fetchCadreModels()]);\n}\n\nexport { fetchCadres };\n","function cleanText(text) {\n  return text.replace(/\\n/g, \"\");\n}\n\nfunction prepareDOM(text) {\n  const doc = new DOMParser().parseFromString(text, \"text/html\");\n  doc\n    .querySelectorAll(\n      \"h1 > span[id], h2 > span[id], h3 > span[id], h4 > span[id]\"\n    )\n    .forEach((node) => {\n      node.parentNode.id = node.id;\n    });\n\n  return doc;\n}\n\nexport { cleanText, prepareDOM };\n","import { prepareDOM } from \"./utils\";\n\nconst parseCypherText = (text) => {\n  const doc = prepareDOM(text);\n\n  const type = extractLink(doc, \"Type\");\n  const pow = extractLink(doc, \"Pow\");\n  const effect = extractParagraphs(doc, \"Effect\");\n  const faction = extractLink(doc, \"Faction\");\n  const source = extractLink(doc, \"Source\");\n\n  const cypher = {\n    type,\n    pow,\n    effect,\n    faction,\n    source,\n  };\n\n  return removeUndefinedValues(cypher);\n};\n\nexport { parseCypherText };\n\nfunction extractLink(doc, id) {\n  const p = doc.querySelector(`h2#${id} ~ p`);\n  if (!p) return undefined;\n\n  const a = p.querySelector(\"a\");\n  if (!a) return { text: p.innerText };\n\n  const hrefs = a.href.split(\"title=\");\n  return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n}\n\nfunction extractParagraphs(doc, id) {\n  function helper(node, texts) {\n    switch (node.tagName) {\n      case \"P\":\n        return helper(node.nextSibling, [...texts, node.innerText.trim()]);\n      case \"H2\":\n        return texts;\n      default:\n        return helper(node.nextSibling, texts);\n    }\n  }\n\n  const node = doc.querySelector(`h2#${id} ~ p`);\n  if (!node) return undefined;\n\n  return helper(node, []);\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n","import { cleanText } from \"./utils\";\n\nfunction parseAnchorTable(table) {\n  const header = [...table.querySelectorAll(\"th\")].map((th) =>\n    cleanText(th.innerText)\n  );\n\n  const body = [...table.querySelectorAll(\"tr\")].map((tr) =>\n    [...tr.querySelectorAll(\"td\")].map((td) => {\n      const anchors = [...td.querySelectorAll(\"a\")].map(parseAnchor);\n      if (anchors.length > 0) {\n        return anchors;\n      }\n      const text = parseText(td);\n      if (text) {\n        return [{ text }];\n      }\n      return [];\n    })\n  );\n\n  return body\n    .filter((row) => row.length === header.length)\n    .map((row) =>\n      Object.fromEntries(\n        header.flatMap((title, i) => (row[i] ? [[title, row[i]]] : []))\n      )\n    );\n}\n\nfunction parseAnchor(a) {\n  const titleColon = a.title.split(\":\");\n  const hrefTitle = a.href.split(\"title=\");\n  return {\n    text: titleColon[titleColon.length - 1],\n    page: hrefTitle[hrefTitle.length - 1],\n  };\n}\n\nexport { parseAnchor, parseAnchorTable };\n\nfunction parseText(node) {\n  return cleanText(node.innerText);\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseCypherCodecsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const cypherCodecsTable = doc.querySelector(\"table.sortable\");\n  if (!cypherCodecsTable) {\n    console.error(\"parseCypherCodecsText: cypherCodecsTable not found!\");\n    return undefined;\n  }\n\n  const cypherCodecs = parseAnchorTable(cypherCodecsTable);\n  return cypherCodecs.map((cypherCodec) =>\n    Object.fromEntries(\n      Object.entries(cypherCodec).map(([key, values]) => [key, values[0]])\n    )\n  );\n};\n\nexport { parseCypherCodecsText };\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionModelsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const table = doc.querySelector(\"h1#Models ~ table\");\n  if (!table) {\n    console.error(\"parseFactionModelsText: table not found!\");\n    return undefined;\n  }\n  const models = parseAnchorTable(table);\n\n  return models.map((model) =>\n    Object.fromEntries(\n      Object.entries(model).flatMap(([key, values]) =>\n        key === \"Subtype\"\n          ? values.length > 0\n            ? [[key, values]]\n            : []\n          : [[key, values[0]]]\n      )\n    )\n  );\n};\n\nexport { parseFactionModelsText };\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const p = doc.querySelector(\"h2#Factions ~ p\");\n  const factions = Object.fromEntries(collectFactions(p, []));\n  delete factions.Wild_Card; // Wild Cards are crawled independently.\n  return factions;\n};\n\nexport { parseFactionsText };\n\nfunction collectFactions(node, factions) {\n  switch (node.tagName) {\n    case \"P\":\n      const a = node.querySelector(\"a\");\n      if (!a) {\n        console.error(\"collectFactions: a not found!\");\n        return collectFactions(node.nextSibling, factions);\n      }\n      const anchor = parseAnchor(a);\n      const faction = [anchor.page, anchor];\n      return collectFactions(node.nextSibling, [...factions, faction]);\n    case \"H2\":\n      return factions;\n    default:\n      return collectFactions(node.nextSibling, factions);\n  }\n}\n","import { parseAnchor } from \"./parsers\";\nimport { cleanText, prepareDOM } from \"./utils\";\n\nconst parseModelText = (text) => {\n  const doc = prepareDOM(text);\n\n  const factionAndTypes =\n    extractList(doc, \"Unit_Faction_and_Type\") ||\n    extractList(doc, \"Model_Faction_and_Type\");\n  const faction = factionAndTypes[0];\n  const types = factionAndTypes.slice(1);\n  const squadSize = extractText(doc, \"Squad_Size\");\n  const deploymentCost = extractText(doc, \"Deployment_Cost\");\n  const baseSize = extractText(doc, \"Base_Size\");\n  const health = extractText(doc, \"Health\");\n  const wildCardFactions = extractList(doc, \"Wild_Card_Factions\");\n  const weaponPoints = extractText(doc, \"Weapon_Points\");\n  const hardpoints = extractText(doc, \"Hardpoints\");\n  const specialRules = extractDefinitions(doc, \"Special_Rules\");\n  const chassisSpecialRules = extractDefinitions(doc, \"Chassis_Special_Rules\");\n  const advantages = extractDefinitions(doc, \"Advantages\");\n  const maneuvers = extractDefinitions(doc, \"Maneuvers\");\n  const vehicleWeaponSelection = extractWeaponSelection(\n    doc,\n    \"Weapon_Selection\"\n  );\n  const cortexes = extractCortexes(doc, \"Cortexes\");\n\n  const modelStatsData = [\n    ...doc\n      .querySelector(\"h3#Unit_Stats ~ table, h3#Model_Stats ~ table\")\n      .querySelectorAll(\"tr > td\"),\n  ].map((_) => cleanText(_.innerText));\n  const modelStatsLength = modelStatsData.length / 2;\n  const modelStats = Object.fromEntries(\n    Array.from({ length: modelStatsLength }, (_, i) => i).map((i) => [\n      modelStatsData[i],\n      modelStatsData[i + modelStatsLength],\n    ])\n  );\n\n  let weaponsData = [...doc.querySelectorAll(\"h3#Weapons ~ table tr\")].map(\n    (tr) => [...tr.querySelectorAll(\"td\")]\n  );\n  let weapons = undefined;\n  if (weaponsData.length > 0) {\n    weapons = [];\n    let header = weaponsData[0].map((td) => td.innerText);\n    let weaponsList = weaponsData.slice(1);\n    for (const tds of weaponsList) {\n      if (tds.length === header.length) {\n        const stats = tds.map((td) => td.innerText);\n        const weapon = Object.fromEntries(\n          header.map((key, i) => [cleanText(key), cleanText(stats[i])])\n        );\n        weapons.push(weapon);\n      }\n      if (tds.length === 1) {\n        const previousWeapons = weapons.slice(0, weapons.length - 1);\n        const lastWeapon = weapons[weapons.length - 1];\n\n        const weapon = {\n          ...lastWeapon,\n          specialRules: parseDefinitionText(tds[0]),\n        };\n        weapons = [...previousWeapons, weapon];\n      }\n    }\n  }\n\n  function weaponDetails() {\n    const weaponDetailsTable = doc.querySelector(\"table.mw-collapsible\");\n    if (!weaponDetailsTable) return undefined;\n\n    const weaponDetailsData = [...weaponDetailsTable.querySelectorAll(\"tr\")]\n      .map((tr) => [...tr.querySelectorAll(\"td, th\")])\n      .filter((_) => _.length === 4);\n    if (!weaponDetailsData || weaponDetailsData.length === 0) return undefined;\n\n    const detailsHeader = weaponDetailsData[0].map((_) =>\n      cleanText(_.innerText)\n    );\n    return weaponDetailsData.slice(1).map((tds) =>\n      Object.fromEntries(\n        tds.map((td, i) => {\n          const a = td.querySelector(\"a\");\n          const hrefs = a ? a.href.split(\"title=\") : undefined;\n          const text = cleanText(td.innerText);\n          return [\n            detailsHeader[i],\n            a ? { text, page: hrefs[hrefs.length - 1] } : { text },\n          ];\n        })\n      )\n    );\n  }\n\n  const release = extractText(doc, \"Release\", { node: \"h1\" });\n  const lore = extractText(doc, \"Lore\", { node: \"h1\" });\n\n  const model = {\n    faction,\n    types,\n    squadSize,\n    deploymentCost,\n    baseSize,\n    health,\n    wildCardFactions,\n    hardpoints,\n    weaponPoints,\n    modelStats,\n    specialRules,\n    weapons,\n    advantages,\n    maneuvers,\n    vehicleWeaponSelection,\n    cortexes,\n    chassisSpecialRules,\n    weaponDetails: weaponDetails(),\n    release,\n    lore,\n  };\n\n  return removeUndefinedValues(model);\n};\n\nexport { parseModelText };\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n\nfunction extractText(doc, id, { node = \"h3\" } = {}) {\n  const p = doc.querySelector(`${node}#${id} ~ p`);\n  if (!p) return undefined;\n\n  return cleanText(p.innerText);\n}\n\nfunction extractList(doc, id) {\n  const p = doc.querySelector(`h3#${id} ~ p`);\n  if (!p) return undefined;\n\n  const as = [...p.querySelectorAll(\"a\")];\n  if (as.length === 0) return undefined;\n\n  return as.map((a) => {\n    const hrefs = a.href.split(\"title=\");\n    return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n  });\n}\n\nfunction extractWeaponSelection(doc, id) {\n  const node = doc.querySelector(`h3#${id} + p`);\n  if (!node) return undefined;\n\n  const anchors = [...node.querySelectorAll(\"a\")];\n\n  return anchors.map((a) => parseAnchor(a));\n}\n\nfunction extractCortexes(doc, id) {\n  function helper(node, cortexes) {\n    switch (node.tagName) {\n      case \"P\":\n        const cortex = node.querySelector(\"b\").innerText;\n        const definitions = parseDefinitionText(node);\n        return helper(node.nextSibling, [...cortexes, [cortex, definitions]]);\n      case \"H3\":\n        return cortexes;\n      default:\n        return helper(node.nextSibling, cortexes);\n    }\n  }\n\n  const node = doc.querySelector(`h3#${id} ~ p`);\n  if (!node) return undefined;\n\n  return Object.fromEntries(helper(node, []));\n}\n\nfunction parseDefinitionText(node) {\n  const definitions = node.innerHTML\n    .split(\"<br>\")\n    .map((_) => _.replace(/<[^>]+>/g, \"\").trim());\n\n  const pairs = definitions.flatMap((definition) => {\n    const separator = \": \";\n    const groups = definition.split(separator).map(cleanText);\n    if (groups.length < 2) return [];\n    const key = groups[0];\n    const val = groups.slice(1).join(separator);\n    return [[key, val]];\n  });\n  if (pairs.length === 0) return undefined;\n\n  return Object.fromEntries(pairs);\n}\n\nfunction extractDefinitions(doc, id) {\n  const p = doc.querySelector(`h3#${id} ~ p`);\n  if (!p) return undefined;\n\n  return parseDefinitionText(p);\n}\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseVehicleAndWarjackWeaponText = (text) => {\n  const doc = prepareDOM(text);\n\n  const vehicleWeaponId = doc.querySelector(\"#Vehicle_Weapon\");\n  const warjackWeaponId = doc.querySelector(\"#Warjack_Weapon\");\n\n  if (vehicleWeaponId && warjackWeaponId) {\n    const vehicleWeapon = parseVehicleOrWarjackWeapon(\n      \"#Vehicle_Weapon ~ \",\n      doc\n    );\n    const warjackWeapon = parseVehicleOrWarjackWeapon(\n      \"#Warjack_Weapon ~ \",\n      doc\n    );\n\n    return { vehicleWeapon, warjackWeapon };\n  } else {\n    const vehicleOrWarjackWeapon = parseVehicleOrWarjackWeapon(\"\", doc);\n\n    return { vehicleOrWarjackWeapon };\n  }\n};\n\nexport { parseVehicleAndWarjackWeaponText };\n\nfunction parseVehicleOrWarjackWeapon(prefix, doc) {\n  let res = {};\n\n  const availableFor = [\n    ...doc.querySelectorAll(`${prefix}[id^=Available_For] + p > a`),\n  ].map(parseAnchor);\n\n  res.availableFor = availableFor;\n\n  const pointCostNode = doc.querySelector(`${prefix}[id^=Point_Cost] + p`);\n  if (pointCostNode) {\n    const pointCost = parseInt(pointCostNode.innerText);\n\n    res.pointCost = pointCost;\n  }\n\n  const locationNode = doc.querySelector(`${prefix}[id^=Location] + p`);\n  if (locationNode) {\n    const location = locationNode.innerText.replace(/\\n/g, \"\");\n\n    res.location = location;\n  }\n\n  // Good special rules example: Metaperceptor\n  const specialRulesP = doc.querySelector(`${prefix}[id^=Special_Rules] + p`);\n  if (specialRulesP) {\n    const specialRules = specialRulesP\n      ? Object.fromEntries(\n          specialRulesP.innerText\n            .replace(/\\n$/g, \"\")\n            .split(\"\\n\")\n            .map((specialRule) => specialRule.split(\": \"))\n        )\n      : {};\n\n    res.specialRules = specialRules;\n  }\n\n  // Good weapons examples:\n  // - Nova_Cannon#Warjack_Weapon (several special abilities)\n  // - Protean_Forge (several attack modes)\n  // - Assault_Rifle_%26_Bayonet (several weapons)\n  const table = doc.querySelector(`${prefix}[id^=Weapons] + table`);\n\n  if (table) {\n    const header = [...table.querySelectorAll(\"tr:first-of-type td\")].map(\n      (td) => td.innerText.replace(/\\n/g, \"\")\n    );\n\n    const weapons = [...table.querySelectorAll(\"tr:not(:first-of-type)\")]\n      .map((tr) => [...tr.querySelectorAll(\"td\")])\n      .flatMap((tr, index) =>\n        index % 2 === 0\n          ? [\n              tr.map((td) =>\n                [...td.childNodes]\n                  .map((node) =>\n                    (node.innerText || node.textContent).replace(/\\n$/g, \"\")\n                  )\n                  .filter((text) => [\" \", \"\"].indexOf(text) === -1)\n              ),\n            ]\n          : tr.map((td) => {\n              if (td.innerText === \"\") return {};\n              const ul = td.querySelector(\"ul\");\n\n              if (ul) {\n                const textNode = td.querySelector(\"ul\").previousSibling;\n                textNode.nodeValue.replace(/\\n/g, \" \");\n\n                td.querySelector(\"ul\").insertAdjacentText(\n                  \"beforebegin\",\n                  textNode.nodeValue.replace(/\\n/g, \" \") +\n                    td.querySelector(\"ul\").innerText.replace(/\\n/g, \" \")\n                );\n                textNode.remove();\n                td.querySelector(\"ul\").remove();\n              }\n\n              const specialRules = Object.fromEntries(\n                [...td.childNodes]\n                  .map((node) =>\n                    node.nodeName === \"BR\"\n                      ? \"\\n\"\n                      : node.innerText || node.textContent\n                  )\n                  .join(\"\")\n                  .replace(/\\n$/, \"\")\n                  .split(\"\\n\")\n                  .filter((text) => text !== \"\")\n                  .map((entry) => {\n                    let colonIndex = entry.indexOf(\": \");\n                    return [\n                      entry.slice(0, colonIndex),\n                      entry.slice(colonIndex + 2),\n                    ];\n                  })\n              );\n\n              if (Object.keys(specialRules).length === 0) return {};\n              return { specialRules };\n            })\n      )\n      .reduce(\n        (acc, tr, index) =>\n          index % 2 === 0\n            ? [\n                ...acc,\n                tr.reduce(\n                  (acc2, value, index2) => ({\n                    ...acc2,\n                    [header[index2]]: value.length === 1 ? value[0] : value,\n                  }),\n                  {}\n                ),\n              ]\n            : [\n                ...acc.slice(0, acc.length - 1),\n                { ...acc[acc.length - 1], ...tr },\n              ],\n        []\n      );\n    if (weapons.length > 0) {\n      res.weapons = weapons;\n    }\n  }\n\n  return res;\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseWildCardText = (text) => {\n  const doc = prepareDOM(text);\n\n  const h1OrTable = doc.querySelectorAll(\"h1, table.sortable\");\n  const factionAndModels = [];\n\n  for (let i = 0; i < h1OrTable.length; i++) {\n    if (i % 2 === 0) {\n      const h1 = h1OrTable[i];\n      if (h1.tagName !== \"H1\") {\n        console.error(\n          `parseWildCardText: expected H1, but got ${h1.tagName}!`,\n          h1\n        );\n      }\n      factionAndModels.push({ faction: h1.id });\n    } else {\n      const table = h1OrTable[i];\n      if (table.tagName !== \"TABLE\") {\n        console.error(\n          `parseWildCardText: expected TABLE, but got ${table.tagName}!`,\n          table\n        );\n      }\n      const last = factionAndModels[factionAndModels.length - 1];\n      const models = parseAnchorTable(table);\n      last.models = models.map((model) =>\n        Object.fromEntries(\n          Object.entries(model).flatMap(([key, values]) =>\n            key === \"Subtype\"\n              ? values.length > 0\n                ? [[key, values]]\n                : []\n              : [[key, values[0]]]\n          )\n        )\n      );\n    }\n  }\n\n  return factionAndModels;\n};\n\nexport { parseWildCardText };\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherText } from \"../../core/parse\";\nimport { Cyphers } from \"../../../state/Cyphers\";\n\nfunction* parseCypher({ data, page }) {\n  const cypher = parseCypherText(data.text);\n  cypher.name = { text: data.title, page };\n  yield put(Cyphers.set({ page, cypher }));\n}\n\nexport { parseCypher };\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherCodecsText } from \"../../core/parse\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\n\nfunction* parseCypherCodecs({ data }) {\n  const cypherCodecs = parseCypherCodecsText(data.text);\n  yield put(CypherCodecs.set({ cypherCodecs }));\n}\n\nexport { parseCypherCodecs };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionModelsText } from \"../../core/parse\";\nimport { FactionModels } from \"../../../state/FactionModels\";\n\nfunction* parseFactionModels({ data, page }) {\n  const factionModels = parseFactionModelsText(data.text);\n  yield put(FactionModels.set({ page, factionModels }));\n}\n\nexport { parseFactionModels };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionsText } from \"../../core/parse\";\nimport { Factions } from \"../../../state/Factions\";\n\nfunction* parseFactions({ data }) {\n  const factions = parseFactionsText(data.text);\n  yield put(Factions.set({ factions }));\n}\n\nexport { parseFactions };\n","import { put } from \"redux-saga/effects\";\nimport { parseModelText } from \"../../core/parse\";\nimport { Models } from \"../../../state/Models\";\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* parseModel({ data, page }) {\n  const model = parseModelText(data.text);\n  model.name = { text: data.title, page };\n\n  const cortexSelections = identifyCortexSelections(\n    model.cortexes,\n    data.categories\n  );\n\n  if (cortexSelections) {\n    model.cortexSelections = cortexSelections;\n  }\n\n  const warjackWeaponSelections = buildWarjackWeaponSelections(\n    model.weaponDetails\n  );\n\n  if (warjackWeaponSelections) {\n    model.warjackWeaponSelections = warjackWeaponSelections;\n  }\n\n  yield put(Models.set({ page, model }));\n\n  let fetchPages = [];\n\n  if (cortexSelections) {\n    const cortexCategories = Object.values(cortexSelections).flatMap(\n      (advantages) =>\n        Object.values(advantages).flatMap(({ category }) => ({\n          text: category.replace(/_/g, \" \"),\n          page: category,\n        }))\n    );\n\n    fetchPages = [...fetchPages, ...cortexCategories];\n  }\n\n  if (warjackWeaponSelections) {\n    const weaponPages = Object.values(warjackWeaponSelections).map(\n      ({ name, page }) => ({ text: name, page })\n    );\n\n    fetchPages = [...fetchPages, ...weaponPages];\n  }\n\n  if (model.vehicleWeaponSelection) {\n    fetchPages = [...fetchPages, ...model.vehicleWeaponSelection];\n  }\n\n  if (fetchPages.length > 0) {\n    const pageSlices = partitionBy(50, fetchPages);\n\n    for (const pages of pageSlices) {\n      yield* Requests.queryPageIds({ pages: pages });\n    }\n  }\n}\n\nexport { parseModel };\n\nfunction buildWarjackWeaponSelections(weaponDetails) {\n  if (!weaponDetails) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    weaponDetails.map(({ Cost, Location, Weapon }) => [\n      Weapon.page,\n      {\n        cost: Cost.text,\n        location: Location.text,\n        name: Weapon.text,\n        page: Weapon.page,\n      },\n    ])\n  );\n}\n\nfunction identifyCortexSelections(cortexes, categories) {\n  if (\n    !cortexes ||\n    Object.entries(cortexes).length === 0 ||\n    !categories ||\n    Object.entries(categories).length === 0\n  ) {\n    return undefined;\n  }\n\n  const categoryTexts = categories.map(({ category }) => category);\n\n  return Object.fromEntries(\n    Object.entries(cortexes).map(([cortex, advantages]) => [\n      cortex,\n      Object.fromEntries(\n        Object.entries(advantages).map(([advantage, text]) => [\n          advantage,\n          {\n            category: `Category:${findClosestCategory(\n              advantage,\n              categoryTexts\n            )}`,\n            text,\n          },\n        ])\n      ),\n    ])\n  );\n}\n\nfunction findClosestCategory(advantage, categoryTexts) {\n  return categoryTexts.find(\n    (category) => advantage === category.replace(/^WNM_/, \"\").replace(/_/g, \" \")\n  );\n}\n","import { put, select } from \"redux-saga/effects\";\nimport { parseVehicleAndWarjackWeaponText } from \"../../core/parse\";\nimport { VehicleWeapons } from \"../../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../../state/WarjackWeapons\";\nimport { Models } from \"../../../state/Models\";\n\nfunction* parseVehicleOrWarjackWeapon({ data, page }) {\n  const { vehicleWeapon, vehicleOrWarjackWeapon, warjackWeapon } =\n    parseVehicleAndWarjackWeaponText(data.text);\n\n  if (vehicleWeapon) yield put(VehicleWeapons.set({ page, vehicleWeapon }));\n  if (warjackWeapon) yield put(WarjackWeapons.set({ page, warjackWeapon }));\n  if (vehicleOrWarjackWeapon) {\n    const models = Object.values(yield select(Models.select()));\n\n    const vehicles = models.filter(({ types }) =>\n      types.some(({ text }) => text === \"Vehicle\")\n    );\n    const warjacks = models.filter(({ types }) =>\n      types.some(({ text }) => text === \"Warjack\")\n    );\n\n    const vehicleWeapons = vehicles.flatMap((vehicle) =>\n      vehicle.vehicleWeaponSelection.map((weapon) => weapon.page)\n    );\n    const warjackWeapons = warjacks.flatMap((warjack) =>\n      !warjack.weaponDetails\n        ? []\n        : warjack.weaponDetails.map(({ Weapon }) => Weapon.page)\n    );\n\n    if (vehicleWeapons.includes(page) && warjackWeapons.includes(page)) {\n      console.error(\n        `Vehicle weapons and warjack weapons cannot both contain page ${page}!`\n      );\n    }\n\n    if (vehicleWeapons.includes(page)) {\n      yield put(\n        VehicleWeapons.set({ page, vehicleWeapon: vehicleOrWarjackWeapon })\n      );\n    }\n\n    if (warjackWeapons.includes(page)) {\n      yield put(\n        WarjackWeapons.set({ page, warjackWeapon: vehicleOrWarjackWeapon })\n      );\n    }\n  }\n}\n\nexport { parseVehicleOrWarjackWeapon };\n","import { put } from \"redux-saga/effects\";\nimport { parseWildCardText } from \"../../core/parse\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nfunction* parseWildCard({ data }) {\n  const wildCards = parseWildCardText(data.text);\n  yield put(WildCardModels.set({ wildCards }));\n}\n\nexport { parseWildCard };\n","import { parseCypher } from \"./parseCypher\";\nimport { parseCypherCodecs } from \"./parseCypherCodecs\";\nimport { parseFactionModels } from \"./parseFactionModels\";\nimport { parseFactions } from \"./parseFactions\";\nimport { parseModel } from \"./parseModel\";\nimport { parseVehicleOrWarjackWeapon } from \"./parseVehicleOrWarjackWeapon\";\nimport { parseWildCard } from \"./parseWildCard\";\n\nconst parsers = {\n  parseCypher,\n  parseCypherCodecs,\n  parseFactionModels,\n  parseFactions,\n  parseModel,\n  parseVehicleOrWarjackWeapon,\n  parseWildCard,\n};\n\nexport default parsers;\n","import { select, take } from \"redux-saga/effects\";\n\nimport { FetchedWikiPage } from \"../../messages\";\nimport parsers from \"./parsers\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* parseWikiPages() {\n  while (true) {\n    const action = yield take(FetchedWikiPage().type);\n    const { payload } = action;\n\n    let parserName = payload.parserName;\n    if (!parserName) {\n      parserName = yield select(ParserNames.selectByPage(payload.page));\n    }\n\n    if (!parserName) {\n      console.error(\"Parser name not found!\", action);\n      continue;\n    }\n\n    const parser = parsers[parserName];\n\n    if (!parser) {\n      console.error(\"Parser not found!\", action);\n      continue;\n    }\n\n    yield* parser(payload);\n  }\n}\n\nexport { parseWikiPages };\n","import { all, take } from \"redux-saga/effects\";\nimport { Factions } from \"../../state/Factions\";\nimport { Requests } from \"../../state/io/Requests\";\n\nfunction* triggerFetchWikiPages() {\n  yield all([triggerFetchFactions()]);\n}\n\nexport { triggerFetchWikiPages };\n\nfunction* triggerFetchFactions() {\n  while (true) {\n    const { payload } = yield take(Factions.set().type);\n    const { factions } = payload;\n\n    const factionPages = Object.values(factions).map((faction) => faction.page);\n\n    for (const page of factionPages) {\n      yield* Requests.parsePage({ page, parserName: \"parseFactionModels\" });\n    }\n  }\n}\n","const digitsBase62 =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\nfunction toBase62(n) {\n  if (n === 0) return \"0\";\n  var result = \"\";\n  while (n > 0) {\n    result = digitsBase62[n % digitsBase62.length] + result;\n    n = parseInt(n / digitsBase62.length, 10);\n  }\n  return result;\n}\n\nfunction fromBase62(s) {\n  var result = 0;\n  for (var i = 0; i < s.length; i++) {\n    var p = digitsBase62.indexOf(s[i]);\n    if (p < 0) return NaN;\n    result += p * Math.pow(digitsBase62.length, s.length - i - 1);\n  }\n  return result;\n}\n\nexport { fromBase62, toBase62 };\n","import { eventChannel } from \"redux-saga\";\nimport { all, put, select, take } from \"redux-saga/effects\";\nimport {\n  CardDragEnded,\n  CardDragStarted,\n  MenuItemClicked,\n} from \"../../messages\";\nimport { AppSync } from \"../../state/AppSync\";\nimport { CypherCodecs } from \"../../state/CypherCodecs\";\nimport { Dragging } from \"../../state/Dragging\";\nimport { FactionModels } from \"../../state/FactionModels\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { Lists } from \"../../state/Lists\";\nimport { PageIds } from \"../../state/PageIds\";\nimport { Url } from \"../../state/Url\";\nimport { VehicleWeapons } from \"../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../state/WarjackWeapons\";\nimport { WildCardModels } from \"../../state/WildCardModels\";\nimport { toBase62, fromBase62 } from \"./base62\";\n\nfunction* ui() {\n  yield all([\n    addCard(),\n    removeCards(),\n    setDraggingFalse(),\n    setDraggingTrue(),\n    updateCards(),\n    updateUrl(),\n    parseListsFromQuery(),\n    parseListsFromQuery2(),\n    fetchCardOnShow(),\n    fetchWeaponsIfVehicleAdded(),\n    fetchWeaponsIfWarjackAdded(),\n  ]);\n}\n\nexport { ui };\n\nfunction* updateCards() {\n  while (true) {\n    const { payload } = yield take(CardDragEnded().type);\n    const { reason, source, destination } = payload;\n    if (reason === \"DROP\" && destination.droppableId.startsWith(\"cards_\")) {\n      const sourceListIndex = parseInt(\n        source.droppableId.replace(\"cards_\", \"\"),\n        10\n      );\n      const sourcePosition = source.index;\n\n      const destinationListIndex = parseInt(\n        destination.droppableId.replace(\"cards_\", \"\"),\n        10\n      );\n      const destinationPosition = destination.index;\n\n      yield put(\n        Lists.moveCard({\n          source: { listIndex: sourceListIndex, cardIndex: sourcePosition },\n          destination: {\n            listIndex: destinationListIndex,\n            cardIndex: destinationPosition,\n          },\n        })\n      );\n    }\n  }\n}\n\nfunction* removeCards() {\n  while (true) {\n    const { payload } = yield take(CardDragEnded().type);\n    const { reason, source, destination } = payload;\n    if (reason === \"DROP\" && destination.droppableId.startsWith(\"trash\")) {\n      const listIndex = parseInt(source.droppableId.replace(\"cards_\", \"\"), 10);\n      const cardIndex = source.index;\n\n      yield put(\n        Lists.removeCard({\n          source: { listIndex, cardIndex },\n        })\n      );\n    }\n  }\n}\n\nfunction* addCard() {\n  while (true) {\n    const { payload } = yield take(MenuItemClicked().type);\n    const { page } = payload;\n    const model = yield select(FactionModels.selectByPage(page));\n    const wildCard = yield select(WildCardModels.selectByPage(page));\n    const cypher = yield select(CypherCodecs.selectByPage(page));\n    if (model || wildCard || cypher) {\n      const pageId = yield select(PageIds.selectByPage(page));\n      yield put(Lists.addCard({ pageId }));\n    }\n  }\n}\n\nfunction* setDraggingTrue() {\n  while (yield take(CardDragStarted().type)) {\n    yield put(Dragging.activate());\n  }\n}\n\nfunction* setDraggingFalse() {\n  while (yield take(CardDragEnded().type)) {\n    yield put(Dragging.deactivate());\n  }\n}\n\nfunction* updateUrl() {\n  while (yield take((action) => action.type.startsWith(\"Lists.\"))) {\n    const lists = yield select(Lists.select());\n    const pageIds = lists.map(({ cards }) => cards.map((_) => _.pageId));\n\n    if (window.history && window.history.replaceState) {\n      const maxPageId = Math.max(0, ...pageIds.flat());\n      const codeLength = Math.ceil(Math.log(maxPageId + 1) / Math.log(62)) || 0;\n\n      function renderWarjackWeaponIds(warjackWeaponIds, codeLength) {\n        const ids = warjackWeaponIds || [];\n        let res = \"\";\n        for (let i = 0; i < ids.length; i++) {\n          const id = ids[i];\n          res += (id ? toBase62(id) : \"0\").padStart(codeLength, \"0\");\n        }\n        return res;\n      }\n\n      const state = lists.reduce(\n        (state, list, index) => ({\n          ...state,\n          ...(list.title ? { [`t${index}`]: list.title } : {}),\n          [`l${index}`]: list.cards.reduce(\n            (acc, card) =>\n              acc +\n              toBase62(card.pageId).padStart(codeLength, \"0\") +\n              (card.cortexIds || card.warjackWeaponIds\n                ? `(${(card.cortexIds || [])\n                    .map((id) => toBase62(id).padStart(codeLength, \"0\"))\n                    .join(\"\")},${renderWarjackWeaponIds(\n                    card.warjackWeaponIds,\n                    codeLength\n                  )})`\n                : \"\") +\n              (card.vehicleWeaponId\n                ? `[${toBase62(card.vehicleWeaponId).padStart(\n                    codeLength,\n                    \"0\"\n                  )}]`\n                : \"\"),\n            \"\"\n          ),\n        }),\n        { v: 1, e: codeLength }\n      );\n\n      const query = Object.entries(state)\n        .map(([key, value]) => `${key}=${value}`)\n        .join(\"&\");\n      const url =\n        window.location.origin + window.location.pathname + \"?\" + query;\n\n      yield put(Url.set({ url }));\n\n      window.history.replaceState(query, \"\", url);\n    }\n  }\n}\n\nfunction* parseListsFromQuery() {\n  const loadChannel = eventChannel((emitter) => {\n    window.addEventListener(\"load\", emitter);\n\n    return () => {\n      window.removeEventListener(\"load\", emitter);\n    };\n  });\n\n  while (true) {\n    yield take(loadChannel);\n\n    yield* parseLists();\n  }\n}\n\nfunction* parseListsFromQuery2() {\n  yield take(AppSync.done().type);\n\n  yield* parseLists();\n}\n\nfunction* parseLists() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlParams);\n\n  const version = params.v;\n  const exponent = parseInt(params.e, 10) || 0;\n\n  let lists = null;\n  if (version === \"1\" && exponent) {\n    const listIndexes = Object.keys(params)\n      .filter((key) => key.match(/^l[\\d]+$/))\n      .map((key) => parseInt(key.substring(1), 10))\n      .sort((a, b) => a - b);\n\n    lists = listIndexes.map((index) => ({\n      title: params[\"t\" + index] || \"\",\n      cards: parseList(exponent, params[\"l\" + index]),\n    }));\n  } else {\n    lists = yield select(Lists.select());\n  }\n\n  // If the card is either a configured warjack or a configured vehicle, its page must be\n  // fetched in order for its subtitle to be shown correctly. A warjack or vehicle can be\n  // identified by having at least one cortex id, warjack weapon id or vehicle weapon id.\n  for (const list of lists) {\n    for (const {\n      pageId,\n      cortexIds,\n      warjackWeaponIds,\n      vehicleWeaponId,\n    } of list.cards) {\n      if (cortexIds || warjackWeaponIds || vehicleWeaponId) {\n        const page = yield select(PageIds.selectPageByPageId(pageId));\n        if (page) {\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n        }\n      }\n    }\n  }\n\n  yield put(Lists.set({ lists }));\n}\n\nfunction* fetchWeaponsIfVehicleAdded() {\n  while (true) {\n    const { payload } = yield take(\"Models.set\");\n    if (\n      payload &&\n      payload.model &&\n      payload.model.types &&\n      payload.model.types.map((type) => type.text).includes(\"Vehicle\")\n    ) {\n      const vehicleWeaponSelection = payload.model.vehicleWeaponSelection;\n      if (vehicleWeaponSelection) {\n        for (const { page } of vehicleWeaponSelection) {\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              VehicleWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                VehicleWeapons.set({\n                  page: pageWithoutTarget,\n                  vehicleWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchWeaponsIfWarjackAdded() {\n  while (true) {\n    const { payload } = yield take(\"Models.set\");\n    if (\n      payload &&\n      payload.model &&\n      payload.model.types &&\n      payload.model.types.map((type) => type.text).includes(\"Warjack\")\n    ) {\n      const weaponDetails = payload.model.weaponDetails;\n      if (weaponDetails) {\n        for (const { Weapon } of weaponDetails) {\n          const page = Weapon.page;\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              WarjackWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                WarjackWeapons.set({\n                  page: pageWithoutTarget,\n                  warjackWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchCardOnShow() {\n  while (true) {\n    const { payload } = yield take(\"Lists.toggleCard\");\n    if (payload && payload.pageId) {\n      const page = yield select(PageIds.selectPageByPageId(payload.pageId));\n      if (page) {\n        const cypher = yield select(CypherCodecs.selectByPage(page));\n        if (cypher) {\n          yield* Requests.parsePage({ page, parserName: \"parseCypher\" });\n        } else {\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n        }\n      }\n    }\n  }\n}\n\nfunction parseList(exponent, encodedList) {\n  function parseCards(cards, rest) {\n    if (rest === \"\") {\n      return cards;\n    }\n\n    const pageId = rest.slice(0, exponent);\n\n    if (rest[exponent] === \"(\") {\n      const blockEnd = rest.indexOf(\")\");\n      const delimiter = rest.indexOf(\",\");\n      if (!blockEnd || !delimiter) {\n        return [];\n      }\n\n      const block = rest.slice(exponent + 1, blockEnd);\n      const [cortexIds, warjackWeaponIds] = block.split(\",\");\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: partitionBy(exponent, cortexIds),\n            warjackWeaponIds: partitionBy(exponent, warjackWeaponIds),\n            vehicleWeaponId: [],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    if (rest[exponent] === \"[\") {\n      const blockEnd = rest.indexOf(\"]\");\n      if (!blockEnd) {\n        return [];\n      }\n\n      const vehicleWeaponId = rest.slice(exponent + 1, blockEnd);\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: [],\n            warjackWeaponIds: [],\n            vehicleWeaponId: [vehicleWeaponId],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    return parseCards(\n      [\n        ...cards,\n        { pageId, cortexIds: [], warjackWeaponIds: [], vehicleWeaponId: [] },\n      ],\n      rest.slice(exponent)\n    );\n  }\n\n  const cards = parseCards([], encodedList);\n\n  const decode = (string) => {\n    const normalizedString = string.replace(/^0+/, \"\") || \"0\";\n    if (normalizedString === \"0\") return null;\n    return parseInt(fromBase62(normalizedString), 10);\n  };\n\n  return cards\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId: decode(pageId),\n      cortexIds: cortexIds.map(decode),\n      warjackWeaponIds: warjackWeaponIds.map(decode),\n      vehicleWeaponId: vehicleWeaponId.map(decode),\n    }))\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId,\n      ...(cortexIds.length === 0 ? {} : { cortexIds }),\n      ...(warjackWeaponIds.length === 0 ? {} : { warjackWeaponIds }),\n      ...(vehicleWeaponId.length === 0\n        ? {}\n        : { vehicleWeaponId: vehicleWeaponId[0] }),\n      hidden: true,\n    }));\n}\n\nfunction partitionBy(slice, string) {\n  var strings = [];\n\n  for (let i = 0; i < string.length; i += slice) {\n    strings[strings.length] = string.slice(i, i + slice);\n  }\n\n  return strings;\n}\n","import { all, put, select } from \"redux-saga/effects\";\nimport { RefreshWikiPages } from \"../../messages\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { cacheParserNames } from \"./cacheParserNames\";\nimport { cacheWikiPages } from \"./cacheWikiPages\";\nimport { fetchCadres } from \"./fetchCadres\";\nimport { parseWikiPages } from \"./parseWikiPages\";\nimport { triggerFetchWikiPages } from \"./triggerFetchWikiPages\";\nimport { ui } from \"./ui\";\n\nfunction* processes() {\n  yield all([\n    continuePending(),\n    cacheWikiPages(),\n    parseWikiPages(),\n    triggerFetchWikiPages(),\n    cacheParserNames(),\n    ui(),\n    fetchCadres(),\n    fetchInitialData(),\n    refresh(),\n  ]);\n}\n\nexport { processes };\n\nfunction* fetchInitialData() {\n  const pages = [\n    { page: \"Warcaster\", parserName: \"parseFactions\" },\n    { page: \"Wild_Card\", parserName: \"parseWildCard\" },\n    { page: \"Cypher_Codecs\", parserName: \"parseCypherCodecs\" },\n  ];\n  for (const page of pages) {\n    yield* Requests.parsePage(page);\n  }\n}\n\nfunction* continuePending() {\n  const pending = yield select(Requests.selectPending());\n  for (const params of pending) {\n    yield put(Requests.fetch(params));\n  }\n}\n\nfunction* refresh() {\n  yield put(RefreshWikiPages());\n}\n","import { StateShard } from \"./utils\";\n\nconst Version = StateShard(\"Version\", init, {}, {}, {});\n\nexport { Version };\n\nfunction init(state) {\n  state.version = \"2023-06-04T12:56:00.000Z\";\n}\n","import { AppSync } from \"./AppSync\";\nimport { CadreCategoryMembers } from \"./CadreCategoryMembers\";\nimport { CadreModels } from \"./CadreModels\";\nimport { Cyphers } from \"./Cyphers\";\nimport { CypherCodecs } from \"./CypherCodecs\";\nimport { Dragging } from \"./Dragging\";\nimport { Factions } from \"./Factions\";\nimport { FactionModels } from \"./FactionModels\";\nimport { Lists } from \"./Lists\";\nimport { Models } from \"./Models\";\nimport { PageIds } from \"./PageIds\";\nimport { ParserNames } from \"./ParserNames\";\nimport { Requests } from \"./io/Requests\";\nimport { Url } from \"./Url\";\nimport { VehicleWeapons } from \"./VehicleWeapons\";\nimport { Version } from \"./Version\";\nimport { WarjackWeapons } from \"./WarjackWeapons\";\nimport { WikiPages } from \"./WikiPages\";\nimport { WildCardModels } from \"./WildCardModels\";\nimport { immer, initAll } from \"./utils\";\n\nconst objects = [\n  AppSync,\n  CadreCategoryMembers,\n  CadreModels,\n  CypherCodecs,\n  Cyphers,\n  Factions,\n  FactionModels,\n  Models,\n  PageIds,\n  ParserNames,\n  Requests,\n  Url,\n  VehicleWeapons,\n  WarjackWeapons,\n  WildCardModels,\n  WikiPages,\n  // UI\n  Dragging,\n  Lists,\n  // General\n  Version,\n];\n\nconst state = initAll(...objects)({});\n\nconst dispatch = immer(({ type, payload }) => {\n  const namespaces = Object.fromEntries(\n    objects.map((group) => [group.namespace, group])\n  );\n\n  const namespace = type.substring(0, type.indexOf(\".\"));\n  if (namespace && namespaces[namespace]) {\n    return redirect({ type, payload }, namespaces[namespace]);\n  }\n  if (type === \"RE\") {\n    return (state) => {\n      state.data.cadreCategoryMembers = {};\n      state.data.cadreModels = {};\n      state.data.models = {};\n      state.data.warjackWeapons = {};\n      for (const page of Object.keys(state.data.pages)) {\n        const white_list = [\n          \"Warcaster\",\n          \"Wild_Card\",\n          \"Cypher_Codecs\",\n          \"Aeternus_Continuum\",\n          \"Empyrean\",\n          \"Iron_Star_Alliance\",\n          \"Marcher_Worlds\",\n        ];\n        if (!white_list.includes(page)) {\n          delete state.data.pages[page];\n        }\n      }\n    };\n  }\n  return (state) => state;\n});\n\nexport { dispatch, state };\n\nfunction redirect(action, obj) {\n  return (state) =>\n    immer(({ type, payload }) => {\n      const f = obj.dispatch[type] || ((state, payload) => state);\n      return (state) => f(state, payload);\n    })(state, action);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport \"./index.css\";\nimport App from \"./ui/App\";\nimport { processes } from \"./businessLogic/processes\";\nimport { dispatch, state } from \"./state\";\n\nconst saga = initSaga();\nconst store = initStore(saga);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nsaga.run(processes);\n\nfunction initStore(saga) {\n  const persistedState = localStorage.getItem(\"reduxState\")\n    ? JSON.parse(localStorage.getItem(\"reduxState\"))\n    : state;\n\n  const latestState =\n    new Date(persistedState.version) >= new Date(state.version)\n      ? persistedState\n      : state;\n\n  const composedEnhancers = composeWithDevTools(applyMiddleware(saga));\n  const store = createStore(dispatch, latestState, composedEnhancers);\n\n  store.subscribe(() => {\n    localStorage.setItem(\"reduxState\", JSON.stringify(store.getState()));\n  });\n\n  return store;\n}\n\nfunction initSaga() {\n  return createSagaMiddleware();\n}\n"],"sourceRoot":""}