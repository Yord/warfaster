{"version":3,"sources":["ui/img/advantages/Compound_Armor.png","ui/img/advantages/Flight.png","ui/img/advantages/Pathfinder.png","ui/img/advantages/Revelator.png","ui/img/advantages/Stealth.png","ui/img/advantages/Weapon_Expert.png","ui/img/factions/Aeternus_Continuum.png","ui/img/factions/Fallback.png","ui/img/factions/Empyrean.png","ui/img/factions/Iron_Star_Alliance.png","ui/img/factions/Lost_Legion.png","ui/img/factions/Marcher_Worlds.png","ui/img/factions/Wild_Card.png","ui/img/faction_icons/Wild_Card_Charged.png","ui/img/faction_icons/Wild_Card_Spike.png","ui/img/weapon_qualities/Blast_Weapon.png","ui/img/weapon_qualities/Corrosion.png","ui/img/weapon_qualities/Fire.png","ui/img/weapon_qualities/Lock_Down.png","ui/img/weapon_qualities/Repulsor.png","ui/img/weapon_qualities/Spray_Weapon.png","ui/img/weapon_qualities/Strafe.png","ui/img/weapon_qualities/System_Failure.png","messages.js","state/utils.js","state/AppSync.js","state/CypherCodecs.js","state/Cyphers.js","state/EditMode.js","state/FactionModels.js","state/Factions.js","state/Lists.js","state/PageIds.js","state/ToggleSections.js","state/Url.js","state/WildCardModels.js","state/Models.js","state/VehicleWeapons.js","state/WarjackWeapons.js","state/CadreModels.js","state/CadreCategoryMembers.js","state/ListIndex.js","ui/App.js","ui/img/faction_icons/Aeternus_Continuum_Spike.png","ui/img/faction_icons/Empyrean_Spike.png","ui/img/faction_icons/Iron_Star_Alliance_Spike.png","ui/img/faction_icons/Marcher_Worlds_Spike.png","ui/img/faction_icons/Aeternus_Continuum_Charged.png","ui/img/faction_icons/Empyrean_Charged.png","ui/img/faction_icons/Iron_Star_Alliance_Charged.png","ui/img/faction_icons/Marcher_Worlds_Charged.png","state/io/Requests.js","state/ParserNames.js","businessLogic/processes/cacheParserNames.js","businessLogic/processes/jsonp.js","businessLogic/processes/cacheWikiPages/fetchWikiPage.js","businessLogic/processes/cacheWikiPages/updateCache.js","businessLogic/processes/partitionBy.js","businessLogic/processes/cacheWikiPages/fetchPageIds.js","businessLogic/processes/cacheWikiPages/index.js","businessLogic/processes/fetchCadres/fetchCadreCategoryMembers.js","businessLogic/processes/fetchCadres/fetchCadreModels.js","businessLogic/processes/fetchCadres/index.js","businessLogic/core/parse/utils.js","businessLogic/core/parse/parseCypherText.js","businessLogic/core/parse/parsers.js","businessLogic/core/parse/parseCypherCodecsText.js","businessLogic/core/parse/parseFactionModelsText.js","businessLogic/core/parse/parseFactionsText.js","businessLogic/core/parse/parseModelText.js","businessLogic/core/parse/parseVehicleAndWarjackWeaponText.js","businessLogic/core/parse/parseWildCardText.js","businessLogic/processes/parsers/parseModel.js","businessLogic/processes/parsers/index.js","businessLogic/processes/parsers/parseCypher.js","businessLogic/processes/parsers/parseCypherCodecs.js","businessLogic/processes/parsers/parseFactionModels.js","businessLogic/processes/parsers/parseFactions.js","businessLogic/processes/parsers/parseVehicleOrWarjackWeapon.js","businessLogic/processes/parsers/parseWildCard.js","businessLogic/processes/parseWikiPages.js","businessLogic/processes/triggerFetchWikiPages.js","businessLogic/processes/base62.js","businessLogic/processes/ui.js","businessLogic/processes/index.js","state/Version.js","state/index.js","index.js"],"names":["MenuItemClicked","message","FetchedWikiPage","FetchedWikiPageRevisions","RefreshWikiPages","type","payload","arguments","length","undefined","immer","f","state","action","produce","identity","StateShard","namespace","init","actions","actionCreators","selectors","_objectSpread","dispatch","Object","fromEntries","entries","map","_ref","_ref2","_slicedToArray","functionName","keys","_ref3","_ref4","name","_len2","args","Array","_key2","apply","concat","a","pipe","_len3","fs","_key3","_i","_fs","AppSync","data","sync","done","select","selectDone","CypherCodecs","cypherCodecs","set","selectByPage","page","find","codec","Cypher","Cyphers","cyphers","setForPage","cypher","values","flat","EditMode","ui","editMode","toggle","FactionModels","factionModels","models","model","Name","Factions","factions","Lists","lists","oneEmptyList","addCard","listIndex","pageId","card","hidden","cards","push","addEmptyList","moveListBy","_ref7","by","list","splice","removeCard","_ref5","cardIndex","removeList","_ref6","setCardCortex","_ref10","cortexIds","setCardVehicleWeapon","_ref12","vehicleWeaponId","setCardWarjackWeapons","_ref11","hardpointNameIndex","warjackWeaponId","warjackWeaponIds","setListTitle","title","toggleCard","_ref9","moveCard","_ref8","up","newCardIndex","newList","PageIds","pageIds","addPages","pageIdByTitle","selectPageByPageId","reduce","acc","statePageId","ToggleSections","toggleSections","section","showSection","selectSection","Url","url","WildCardModels","wildCardModels","_step","wildCards","_iterator","_createForOfIteratorHelper","s","n","wildCard","value","faction","err","e","Models","VehicleWeapons","vehicleWeapons","vehicleWeapon","WarjackWeapons","warjackWeapons","warjackWeapon","CadreModels","cadreModels","setForCadrePageId","cadrePageId","selectCadreModelsByPageId","CadreCategoryMembers","cadreCategoryMembers","ListIndex","Header","Layout","Footer","Content","TextArea","Input","SubMenu","Menu","factionImages","Aeternus_Continuum","AeternusContinuum","Empyrean","Iron_Star_Alliance","IronStarAlliance","Lost_Legion","LostLegion","Marcher_Worlds","MarcherWorlds","Wild_Card","WildCard","Universal","Fallback","FactionImage","style","_ref$height","height","src","_jsx","alt","spikes","WildCardSpike","Spike","style2","_ref2$height","marginTop","chargedImages","WildCardCharged","Charged","_ref3$height","advantageImages","CompoundArmor","Flight","Pathfinder","Revelator","Stealth","WeaponExpert","AdvantageImage","advantage","text","_ref4$height","Tooltip","placement","trigger","children","className","onClick","event","stopPropagation","weaponQualities","BlastWeapon","Corrosion","Fire","LockDown","Repulsor","SprayWeapon","Strafe","SystemFailure","WeaponQuality","weaponQuality","_ref5$height","_Fragment","App","connect","initialized","sort","_ref67","_ref68","Type","Subtype","subtype","_","join","filter","flatMap","cadreModel","includes","_ref69","_ref70","cadre","allCadreModels","_ref71","_ref72","_ref73","_ref74","pageIdByPage","_ref75","_ref76","_ref77","_ref78","_ref79","_ref80","_ref81","_ref82","_ref83","_ref84","_ref85","details","coreStats","hardpoints","hardpointNames","parseHardpoints","cortexSelections","_ref86","_ref87","cortex","advantages","_ref88","_ref89","_ref89$","category","categoryId","warjackWeaponSelections","_ref90","_ref91","selection","split","vehicleWeaponSelection","_ref92","Faction","factionsPageByText","_ref93","cadres","toggledSections","toggleSection","menuItemClicked","allMenuItemsClicked","pages","forEach","moveCardByOne","target","setUrl","bookmark","document","querySelector","navigator","userAgent","match","range","createRange","selectNodeContents","window","getSelection","removeAllRanges","addRange","setSelectionRange","open","key","_ref94","label","_ref95","_ref96","toggleEditMode","updateTargetList","_React$useState","React","useState","_React$useState2","openDrawer","setOpenDrawer","_jsxs","href","Affix","id","openKeys","onOpenChange","mode","triggerSubMenuAction","icon","CheckSquareOutlined","fontSize","FormOutlined","marginLeft","paddingTop","Row","gutter","Col","xs","sm","md","lg","xl","xxl","color","cursor","textAlign","PlusSquareOutlined","span","placeholder","generateListNamePlaceholder","maxLength","autoSize","onChange","CaretUpOutlined","marginRight","CaretDownOutlined","DeleteOutlined","_defineProperty","i","count","Badge","size","offset","_ref13","weaponIds","Card","hoverable","Meta","avatar","width","deploymentCost","display","alignItems","flex","replace","_toConsumableArray","vehicleWeaponName","cortexName","weaponId","weapon","_ref133","storeLinks","linkText","index","Fragment","dangerouslySetInnerHTML","__html","coreStatsIndex","cardName","modelStats","_ref14","_ref15","stat","Select","suffixIcon","defaultValue","onSelect","getPopupContainer","querySelectorAll","Option","_ref16","_ref17","_ref18","_ref19","_ref21","_ref22","_ref23","rule","_ref25","advantageIndex","_ref26","markChargedOrSpike","weaponPoints","hardpointName","warjackWeaponNames","_ref27","location","_ref28","cost","vehicleWeaponName2","_ref29","weapons","specialRules","_ref30","index2","_ref31","_ref32","_ref34","ruleIndex","_ref35","textWithIcons","Tag","texts","_ref36","RegExp","string","_string$split","description","wildCardFactions","_ref37","baseSize","health","HeartFilled","squadSize","TeamOutlined","_ref38","_ref39","chassisAdvantages","_ref40","_ref41","_ref42","_ref43","chassisSpecialRules","_ref44","_ref45","maneuvers","_ref46","_ref47","factionAttachment","attachment","wildCardAttachment","_ref48","_ref49","attachments","release","lore","pow","effect","margin","SyncOutlined","spin","_ref50","_ref51","onKeyDown","Date","getFullYear","_ref52","_ref53","factionName","Drawer","visible","onClose","mask","closeIcon","MenuUnfoldOutlined","ItemGroup","options","_ref54","_ref55","shortName","slice","Item","_ref56","_ref57","w1","w2","_ref58","j","indexOf","_ref59","_ref60","b","_ref63","_ref64","c1","c2","_ref65","_ref66","factionNames","justFactions","factionsPresent","types","cyperTypes","_ref97","_ref98","_ref99","_ref100","weaponConfig","pointCost","_ref101","_ref102","_ref103","_ref105","_ref106","_ref107","_ref109","_ref110","markCharged","markSpike","_ref111","_ref112","_ref113","_ref114","_ref116","_ref117","_ref118","_ref120","_ref121","_ref122","_string$split3","_ref123","_ref125","_ref126","_ref127","_ref129","_ref131","_ref132","rHardpointGroup","results","repeat","exec","hardpointCount","parseInt","groupCount","groupName","console","error","queryCadres","Requests","io","requests","cached","pending","cache","queryParams","selectCached","expire","fetch","params","selectPending","request","fetched","findIndex","parsePage","parserName","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","put","desc","jsonApiRequest","stop","queryCadreModels","_callee2","_context2","cmpageid","cmtype","cmlimit","queryRevisions","_callee3","_context4","prop","pageids","queryPageIds","_callee4","_context5","titles","encodeURIComponent","selectCachedRequestsByPageIds","parse","pageid","selectCachedParsedPageIds","selectCachedUrl","_context3","cmtitle","_marked","formatversion","format","keyValue","ParserNames","parserNames","cacheParserNames","take","sent","abrupt","jsonp","Promise","resolve","reject","callbackName","Math","round","random","body","removeChild","script","createElement","appendChild","fetchWikiPage","wikiPageChannel","_loop","actionChannel","wait","_data","pageRevisions","categorymembers","categoryMembers","titleToPageId","call","query","member","delay","delegateYield","t0","updateCache","_marked2","refreshWikiPages","_marked3","refreshOutdatedWikiPages","all","parsedPageIds","queryLength","_yield$take","revInfoByPageId","_Object$entries","_Object$entries$_i","_Object$entries$_i$","revInfo","revision","missing","revid","max","revisions","partitionBy","array","arrays","fetchPageIds","cachedPageIds","_yield$all","_yield$all2","factionsSet","factionModelPages","wildCardPages","cypherPages","pageSlices","_pages","processedCount","t1","t2","t3","t5","finish","cacheWikiPages","fetchCadreCategoryMembers","fetchCadreModels","_pageIds","fetchCadres","cleanText","prepareDOM","doc","DOMParser","parseFromString","node","parentNode","parseCypherText","extractLink","helper","tagName","nextSibling","innerText","trim","extractParagraphs","removeUndefinedValues","source","p","hrefs","obj","isArray","parseAnchorTable","table","header","th","tr","td","anchors","parseAnchor","row","titleColon","hrefTitle","parseCypherCodecsText","cypherCodecsTable","cypherCodec","parseFactionModelsText","parseFactionsText","collectFactions","anchor","parseModelText","some","innerHTML","html","extractStoreLinks","extractText","contents","cardIndexes","el","nodeName","position","indexes","outerHTML","cardNameElement","factionAndTypes","extractList","extractDefinitions","extractWeaponSelection","cortexes","definitions","parseDefinitionText","extractCortexes","modelStatsData","modelStatsLength","from","as","extractFactionAttachment","tables","childNodes","nodeValue","extractWildCardAttachment","weaponsData","weaponsList","tds","stats","previousWeapons","lastWeapon","weaponDetails","weaponDetailsTable","weaponDetailsData","detailsHeader","_ref5$node","_step2","uls","_iterator2","ul","li","replaceWith","pairs","definition","groups","encodeHTML","textContent","append","parseVehicleAndWarjackWeaponText","parseVehicleOrWarjackWeapon","vehicleOrWarjackWeapon","prefix","res","availableFor","pointCostNode","locationNode","specialRulesP","acc2","parseWildCardText","h1OrTable","factionAndModels","h1","last","buildWarjackWeaponSelections","Cost","Location","Weapon","identifyCortexSelections","categories","categoryTexts","findClosestCategory","parsers","parseCypher","parseCypherCodecs","parseFactionModels","parseFactions","parseModel","coreStat","fetchPages","_coreStat","cortexCategories","weaponPages","_iterator3","_step3","_parseVehicleAndWarja","vehicles","warjacks","vehicle","warjack","parseWildCard","parseWikiPages","parser","triggerFetchWikiPages","triggerFetchFactions","factionPages","digitsBase62","toBase62","result","updateUrl","_marked4","parseListsFromQuery","_marked5","parseListsFromQuery2","_marked6","parseLists","_marked7","fetchWeaponsIfVehicleAdded","_marked8","fetchWeaponsIfWarjackAdded","_marked9","fetchCardOnShow","renderWarjackWeaponIds","maxPageId","codeLength","history","replaceState","ids","padStart","ceil","log","v","origin","pathname","startsWith","loadChannel","eventChannel","emitter","addEventListener","removeEventListener","_context6","urlParams","version","exponent","listIndexes","_step2$value","_context7","URLSearchParams","search","substring","parseList","_yield$take2","pageWithoutTarget","_context8","_yield$take3","_iterator4","_step4","_context9","_yield$take4","_context10","encodedList","parseCards","rest","blockEnd","delimiter","_block$split","_block$split2","decode","normalizedString","NaN","fromBase62","strings","processes","fetchInitialData","continuePending","refresh","Version","objects","_len","_key","initAll","namespaces","group","saga","createSagaMiddleware","store","reset","persistedState","localStorage","getItem","JSON","latestState","composedEnhancers","composeWithDevTools","applyMiddleware","createStore","subscribe","setItem","stringify","getState","initStore","ReactDOM","render","Provider","getElementById","run"],"mappings":"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","file":"static/js/main.f96ee31e.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/Compound_Armor.159c8ed1.png\";","export default __webpack_public_path__ + \"static/media/Flight.ee1b66b2.png\";","export default __webpack_public_path__ + \"static/media/Pathfinder.658c0371.png\";","export default __webpack_public_path__ + \"static/media/Revelator.f9be1ca4.png\";","export default __webpack_public_path__ + \"static/media/Stealth.d0dbe094.png\";","export default __webpack_public_path__ + \"static/media/Weapon_Expert.e15642e8.png\";","export default __webpack_public_path__ + \"static/media/Aeternus_Continuum.d1b19d0e.png\";","export default __webpack_public_path__ + \"static/media/Fallback.1ae05c50.png\";","export default __webpack_public_path__ + \"static/media/Empyrean.4ab49225.png\";","export default __webpack_public_path__ + \"static/media/Iron_Star_Alliance.82d76402.png\";","export default __webpack_public_path__ + \"static/media/Lost_Legion.78737fb2.png\";","export default __webpack_public_path__ + \"static/media/Marcher_Worlds.61a330cf.png\";","export default __webpack_public_path__ + \"static/media/Wild_Card.3da9dbca.png\";","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEGUlEQVR42h2TaUzTdxjHfy1YLnHlKs4BmzgOryxMJiC6ioJzmzO6gQgNW+wmRykt5erBvyct/ffiaAtUGKwBIVB6FzTGMQfMLCabLEHdsiMZWaJLnC9ErvI/fqu+eJLPi+eTfJ88+YIgRoCN9U0AIQTb20Ewd2cZGPQB0NbopKrEszSlcCY0t3c08aaonVoX+Pb2vVe7EGIAwzcB2NrcAiSBgZW/nwJz900gFXrCNchMTGe7h65FXAmodDoRRTwJGrGPLmtxRwoFTmrA+zNYW3sOcBwHAJIkWFn5Bwj404BX64xAEV9Sl3JyX7/JXjRkGWUP9X/Ds5mHKq2o/WiP3JGiEnnpHPZU+PDQPCBIAoDVFxvA2nsrJE9G9Khv7Lbqx/IGrw0Y+gcHH+q7+150dvViBkvPU9vg8OKA2c61akaztTJ/Ard2Knxh4SEA83eXgbRtJhyV+BMtqD2vU6ublqh1kC9VQo5YDutEClgvkcMmhQoiOvS5SW+UW9CJDDHPs0uvd1GAHvVT1JJATK/akS5DlEaeSAov1/KIz9icYOmVqzirmotX1TVhl6u5m5c49ZDd2PSfSd3N6pW7k8UtPhporg+EoYiLbtHZikrLr/xaVccnrSPjweNny0jbyCgUtHcQOUXniY8ufU6cLa3CTl9gwQaeYOIaOpHZ3uiPBhLxTZpR5YrXIOiX75+5uJZ19CQ5NunElpYfhb4FSc+NW6Sxf5gUtKvIrLwS7EjxBfJiGWupD7UXaBDfTiAUeiK61e54haij4VDBaSzxYD75aSUbfyk/fvyYXF1bJ0NMLPz4E/nGO0w8JbeY/OCT8t+sJjtTIXbHAknrLK1LMRuPSk2VWbmFz+IOFBLp75ZgX1TziXOlLPhsdZ2YGJ8gnF4fWVnXjO1IOUh+eL7irtkwmquWhhLwudepapGfbjOOv1d05twPMamHIePQya2I3dkkfW8OLGdzCUZaNpmde4KoaZZir6XlwJqrDSZbl/etlnp/FNCgU0DU4og0a12pMqGCu2fv/tWIPfthfGY+FpeRh9EYGRh9X+529JtH8ChGOjx26uNfzPq+Yj3iSupAAmFgbu4eEDY6qMpWf9ywYTy7lcuXp2Yc/peW+DaMZGTD6NcPQBojxMmZMOcY875Waayw6J1pzZzpqNGRRcqrYsz4lwDnK0e4VjaTYDNOZmplelZpWcVYfiHzfl7B8UdMZvFCLbuuy6IbKjHrvGmyNlesuNFP/euPJwBgWBCsb6yB4a/nKdya6TARz7WrT+lLHjE6swZ0YwU2w/UT/YaJ3MHQzTrpVFIr1xEtFripi98/oEIYKhOOY+AlkCQOFu48AEbUR5E0u2kSvjumE/HFqoSeWHW7f2crJxDVgXjD7cPfUf78/UnICQICw8H/Di4IlwZqb7gAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAED0lEQVR42iVTa0ybZRh9W7oyxkWubpkbIlOYmk0ITGQGChkjxCiiCSFsxiUUxyhtoS0tpfQGpaU3LgVKO0bLpckg0HspVoeMreoMS4bROGfU4LZk3DQRxtrC1+97/cAfT86f55zn5Dw5IIQGwd7eHoAQgnAYAf47PwO1xg2YnBmiUOQlC/lesoh/61ATa4ooV1vBNwv3D3YP9lEUgOABGQGPHz8DfbpbQNziISmEzmi5wBqvEtmS8ElWCB1JHQJnfBvPdpjLthFnXctgZyf4vwCGKz198gxwGqcBnWaPlAvdKTrp1Cmj1lxsGpyoGdGPMq/3j1zSK0ff7RVPnpDxPfE0qo1kGrkNUCwMwIsXQTDQPw/o9Y7I/k7fMb3KnDdsvKExmE2/KHUDz9s1GqR7SLc5PGL2G/rG6Hq55bRS4kmi11lJfv9DAH649wi0tXpIcpE72aAcy+tRDczwOzohlcmCbEkn1JknIJXTDL9o4cI2dddWr6pXMqicfkPAnI3TaDwEoFZ5CDKRM3pQZkvvlMi01VfroGrAgHLFsl2Zpjv8218r4dqGJkStNwbZHTJ4hdb4d5+i//KA1H6Uz3WSAYfpjlAKvfG6LlPxZ9Srv2aXfIBV1TJ2V548xTY2NyAeMrq6uo5+ffcemldagRSWV0IGi3XzumoyQ9ToOoKn7iXr2p2JcpGa+n5J+c6F8mqMxuIj6xub+KcgFtrdw/bxtv97rPJKHXK+rAL7qKp6eVA1lq9s88QAHtcd2S93JEpbFYyM7EKk5hoLW1q6Hw4Egjh5FwuHw1goEED/3drGbB5fuKCsGisq++SRUTtOkfLtsUDM9ZF1UhfuQHspM5fyz0tp76CnsgqQ1bU1dN9CKBTYR3TKaseij7+OJLz9Hnbh46rvjGpLbqfQFQPYTCuxQzAXP6SZPFdS9um3IDEN1jD5obk5H+b2+uDW9nPUPGbB3F/No2eLKxDy8TOw4VpTt6nblcZpcEcBlXIGtDa7DhsUzpMSnoyenH52O7egFMa9/BqSS/kQsbq/RMgJr+y9mUMJnzhDgVn5JT8a1cYStciR0i5yRYD5hSXAY1uJ7S3uhBvam6fZjBZJyquZa4S4NJiYmg3fyrkADx1Lh4TYkzDrXNEDjayvWq+2pXLpjijL6CLhoBTe2WVQXztN6hL7koZ7rBlqafflqsrPLXn5hQ9yss8/LKKU3qVR63uGtMaLerU9VcKbiRVwnMSVP9cB3kAUBIIBYBpZINDrnBF8hjNuqN19dFzjyhzSTuQbesYLhrWW3NGe2TQVbpvLsB8RsD1Ev/8nIp4tOGgUBjGAwjC4s4hXuWuO0NLsIAsa7dEKkTtW3GqNVbQ5Yng0T1SHcJY0bl4k/PH7Ku4c5+DH/wODKCpYmfBgCwAAAABJRU5ErkJggg==\"","export default __webpack_public_path__ + \"static/media/Blast_Weapon.91876b57.png\";","export default __webpack_public_path__ + \"static/media/Corrosion.d848b926.png\";","export default __webpack_public_path__ + \"static/media/Fire.678cd613.png\";","export default __webpack_public_path__ + \"static/media/Lock_Down.22e3867d.png\";","export default __webpack_public_path__ + \"static/media/Repulsor.d174ca78.png\";","export default __webpack_public_path__ + \"static/media/Spray_Weapon.7d0ffad2.png\";","export default __webpack_public_path__ + \"static/media/Strafe.4aaa8fd7.png\";","export default __webpack_public_path__ + \"static/media/System_Failure.0aea5e20.png\";","const CardDragEnded = message(\"CARD/DRAG_ENDED\");\nconst CardDragStarted = message(\"CARD/DRAG_STARTED\");\nconst MenuItemClicked = message(\"MENU_ITEM/CLICKED\");\n\nconst FetchedWikiPage = message(\"WIKI_PAGE/FETCHED\");\nconst FetchedWikiPageRevisions = message(\"WIKI_PAGE_REVISIONS/FETCHED\");\nconst RefreshWikiPages = message(\"WIKI_PAGES/REFRESH\");\n\nexport {\n  CardDragEnded,\n  CardDragStarted,\n  FetchedWikiPage,\n  FetchedWikiPageRevisions,\n  MenuItemClicked,\n  RefreshWikiPages,\n};\n\nfunction message(type) {\n  return (payload = {}) => ({ type, payload });\n}\n","import produce from \"immer\";\n\nconst initAll = (...objects) =>\n  pipe(...objects.map((obj) => produce(obj.init)));\n\nconst immer = (f) => (state, action) => produce(f(action) || identity)(state);\n\nconst StateShard = (namespace, init, actions, actionCreators, selectors) => ({\n  namespace,\n  init,\n  dispatch: Object.fromEntries(\n    Object.entries(actions).map(([functionName, f]) => [\n      namespace + \".\" + functionName,\n      f,\n    ])\n  ),\n  ...Object.fromEntries(\n    Object.keys(actions).map((functionName) => [\n      functionName,\n      (payload = {}) => ({ type: namespace + \".\" + functionName, payload }),\n    ])\n  ),\n  ...actionCreators,\n  ...Object.fromEntries(\n    Object.entries(selectors).map(([name, f]) => [\n      name,\n      (...args) =>\n        (state) =>\n          f(state, ...args),\n    ])\n  ),\n});\n\nexport { StateShard, immer, initAll };\n\nfunction identity(a) {\n  return a;\n}\n\nfunction pipe(...fs) {\n  return (a) => {\n    for (const f of fs) {\n      a = f(a);\n    }\n    return a;\n  };\n}\n","import { StateShard } from \"./utils\";\n\nconst AppSync = StateShard(\"AppSync\", init, { done }, {}, { selectDone });\n\nexport { AppSync };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  if (!state.data.sync) {\n    state.data.sync = {};\n  }\n\n  state.data.sync.done = false;\n}\n\n// Actions\n\nfunction done(state) {\n  const sync = select(state);\n  sync.done = true;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.sync;\n}\n\nfunction selectDone(state) {\n  const sync = select(state);\n  return sync.done;\n}\n","import { StateShard } from \"./utils\";\n\nconst CypherCodecs = StateShard(\n  \"CypherCodecs\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { CypherCodecs };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cypherCodecs = [];\n}\n\n// Actions\n\nfunction set(state, { cypherCodecs }) {\n  state.data.cypherCodecs = cypherCodecs;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cypherCodecs;\n}\n\nfunction selectByPage(state, page) {\n  const codecs = select(state);\n  return codecs.find((codec) => codec.Cypher.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Cyphers = StateShard(\n  \"Cyphers\",\n  init,\n  { setForPage },\n  {},\n  { selectByPage }\n);\n\nexport { Cyphers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cyphers = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, cypher }) {\n  const cyphers = select(state);\n  cyphers[page] = cypher;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cyphers;\n}\n\nfunction selectByPage(state, page) {\n  const cyphers = select(state);\n  return Object.values(cyphers)\n    .flat()\n    .find((cypher) => cypher.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst EditMode = StateShard(\"EditMode\", init, { toggle }, {}, { select });\n\nexport { EditMode };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.editMode = false;\n}\n\n// Actions\n\nfunction toggle(state) {\n  const editMode = select(state);\n  state.ui.editMode = !editMode;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.editMode;\n}\n","import { StateShard } from \"./utils\";\n\nconst FactionModels = StateShard(\n  \"FactionModels\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { FactionModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factionModels = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, factionModels }) {\n  const models = select(state);\n  models[page] = factionModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factionModels;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Factions = StateShard(\"Factions\", init, { set }, {}, { select });\n\nexport { Factions };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.factions = {};\n}\n\n// Actions\n\nfunction set(state, { factions }) {\n  state.data.factions = factions;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.factions;\n}\n","import { StateShard } from \"./utils\";\n\nconst Lists = StateShard(\n  \"Lists\",\n  init,\n  {\n    addCard,\n    addEmptyList,\n    moveListBy,\n    removeCard,\n    removeList,\n    set,\n    setCardCortex,\n    setCardVehicleWeapon,\n    setCardWarjackWeapons,\n    setListTitle,\n    toggleCard,\n    moveCard,\n  },\n  {},\n  { select }\n);\n\nexport { Lists };\n\nconst oneEmptyList = [\n  {\n    title: \"\",\n    cards: [],\n  },\n];\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.lists = oneEmptyList;\n}\n\n// Actions\n\nfunction set(state, { lists }) {\n  state.ui.lists = lists.length > 0 ? lists : oneEmptyList;\n}\n\nfunction setListTitle(state, { listIndex, title }) {\n  const lists = select(state);\n  lists[listIndex].title = title;\n}\n\nfunction addCard(state, { listIndex, pageId }) {\n  const lists = select(state);\n  const card = { pageId, hidden: true };\n  lists[listIndex].cards.push(card);\n}\n\nfunction addEmptyList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 0, oneEmptyList[0]);\n}\n\nfunction removeCard(state, { listIndex, cardIndex }) {\n  const lists = select(state);\n  lists[listIndex].cards.splice(cardIndex, 1);\n}\n\nfunction removeList(state, { listIndex }) {\n  const lists = select(state);\n  lists.splice(listIndex, 1);\n  if (lists.length === 0) {\n    addEmptyList(state, { listIndex: 0 });\n  }\n}\n\nfunction moveListBy(state, { listIndex, by }) {\n  const lists = select(state);\n  if (\n    (by > 0 && listIndex + by < lists.length) ||\n    (by < 0 && listIndex + by >= 0)\n  ) {\n    const list = lists[listIndex];\n    lists.splice(listIndex, 1);\n    lists.splice(listIndex + by, 0, list);\n  }\n}\n\nfunction moveCard(state, { listIndex, cardIndex, up }) {\n  const lists = select(state);\n  const list = lists[listIndex];\n  const card = list.cards[cardIndex];\n\n  const newCardIndex = cardIndex + (up ? -1 : 1);\n  if (newCardIndex >= 0 && newCardIndex < list.cards.length) {\n    list.cards.splice(cardIndex, 1);\n    list.cards.splice(newCardIndex, 0, card);\n  } else if (newCardIndex === -1 && listIndex > 0) {\n    const newList = lists[listIndex - 1];\n    list.cards.splice(cardIndex, 1);\n    newList.cards.push(card);\n  } else if (\n    newCardIndex === list.cards.length &&\n    listIndex < lists.length - 1\n  ) {\n    const newList = lists[listIndex + 1];\n    list.cards.splice(cardIndex, 1);\n    newList.cards.splice(0, 0, card);\n  }\n}\n\nfunction toggleCard(state, { listIndex, cardIndex, pageId }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    card.hidden = !card.hidden;\n  }\n}\n\nfunction setCardCortex(state, { listIndex, cardIndex, pageId, cortexIds }) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n\n  if (!pageId) {\n    delete card.cortexIds;\n  } else {\n    if (card.pageId === pageId) {\n      card.cortexIds = cortexIds;\n    }\n  }\n}\n\nfunction setCardWarjackWeapons(\n  state,\n  { listIndex, cardIndex, hardpointNameIndex, pageId, warjackWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!card.warjackWeaponIds) {\n      card.warjackWeaponIds = [];\n    }\n    if (!warjackWeaponId) {\n      delete card.warjackWeaponIds[hardpointNameIndex];\n    } else {\n      card.warjackWeaponIds[hardpointNameIndex] = warjackWeaponId;\n    }\n  }\n}\n\nfunction setCardVehicleWeapon(\n  state,\n  { listIndex, cardIndex, pageId, vehicleWeaponId }\n) {\n  const lists = select(state);\n  const card = lists[listIndex].cards[cardIndex];\n  if (card.pageId === pageId) {\n    if (!vehicleWeaponId) {\n      delete card.vehicleWeaponId;\n    } else {\n      card.vehicleWeaponId = vehicleWeaponId;\n    }\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.lists;\n}\n","import { StateShard } from \"./utils\";\n\nconst PageIds = StateShard(\n  \"PageIds\",\n  init,\n  { addPages },\n  {},\n  { select, selectByPage, selectPageByPageId }\n);\n\nexport { PageIds };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.pageIds = {};\n}\n\n// Actions\n\nfunction addPages(state, { pageIdByTitle }) {\n  const pageIds = select(state);\n  for (const title in pageIdByTitle) {\n    pageIds[title] = pageIdByTitle[title];\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.pageIds;\n}\n\nfunction selectByPage(state, page) {\n  const pageIds = select(state);\n  return pageIds[page];\n}\n\nfunction selectPageByPageId(state, pageId) {\n  const pageIds = select(state);\n  return Object.entries(pageIds).reduce(\n    (acc, [page, statePageId]) =>\n      acc ? acc : statePageId === pageId ? page : acc,\n    undefined\n  );\n}\n","import { StateShard } from \"./utils\";\n\nconst ToggleSections = StateShard(\n  \"ToggleSections\",\n  init,\n  { toggle },\n  {},\n  { select }\n);\n\nexport { ToggleSections };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.toggleSections = {};\n}\n\n// Actions\n\nfunction toggle(state, { section }) {\n  const toggleSections = select(state);\n  const showSection = selectSection(state, section);\n  toggleSections[section] = !showSection;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.toggleSections;\n}\n\nfunction selectSection(state, section) {\n  const toggleSections = select(state);\n  return toggleSections[section];\n}\n","import { StateShard } from \"./utils\";\n\nconst Url = StateShard(\"Url\", init, { set }, {}, { select });\n\nexport { Url };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.url = \"\";\n}\n\n// Actions\n\nfunction set(state, { url }) {\n  state.ui.url = url;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.url;\n}\n","import { StateShard } from \"./utils\";\n\nconst WildCardModels = StateShard(\n  \"WildCardModels\",\n  init,\n  { set },\n  {},\n  { select, selectByPage }\n);\n\nexport { WildCardModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.wildCardModels = {};\n}\n\n// Actions\n\nfunction set(state, { wildCards }) {\n  const models = select(state);\n  for (const wildCard of wildCards) {\n    models[wildCard.faction] = wildCard.models;\n  }\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.wildCardModels;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.Name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst Models = StateShard(\n  \"Models\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { Models };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.models = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, model }) {\n  const models = select(state);\n  models[page] = model;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.models;\n}\n\nfunction selectByPage(state, page) {\n  const models = select(state);\n  return Object.values(models)\n    .flat()\n    .find((model) => model.name.page === page);\n}\n","import { StateShard } from \"./utils\";\n\nconst VehicleWeapons = StateShard(\n  \"VehicleWeapons\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { VehicleWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.vehicleWeapons = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, vehicleWeapon }) {\n  const vehicleWeapons = select(state);\n  vehicleWeapons[page] = vehicleWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.vehicleWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const vehicleWeapons = select(state);\n  return vehicleWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst WarjackWeapons = StateShard(\n  \"WarjackWeapons\",\n  init,\n  { setForPage },\n  {},\n  { select, selectByPage }\n);\n\nexport { WarjackWeapons };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.warjackWeapons = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, warjackWeapon }) {\n  const warjackWeapons = select(state);\n  warjackWeapons[page] = warjackWeapon;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.warjackWeapons;\n}\n\nfunction selectByPage(state, page) {\n  const warjackWeapons = select(state);\n  return warjackWeapons[page];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreModels = StateShard(\n  \"CadreModels\",\n  init,\n  { set, setForCadrePageId },\n  {},\n  { select, selectCadreModelsByPageId }\n);\n\nexport { CadreModels };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreModels = {};\n}\n\n// Actions\n\nfunction set(state, { cadreModels }) {\n  state.data.cadreModels = cadreModels;\n}\n\nfunction setForCadrePageId(state, { cadrePageId, cadreModels }) {\n  select(state)[cadrePageId] = cadreModels;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreModels;\n}\n\nfunction selectCadreModelsByPageId(state, pageId) {\n  const cadreModels = select(state);\n  return cadreModels[pageId];\n}\n","import { StateShard } from \"./utils\";\n\nconst CadreCategoryMembers = StateShard(\n  \"CadreCategoryMembers\",\n  init,\n  { set },\n  {},\n  { select }\n);\n\nexport { CadreCategoryMembers };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.cadreCategoryMembers = {};\n}\n\n// Actions\n\nfunction set(state, { cadreCategoryMembers }) {\n  state.data.cadreCategoryMembers = cadreCategoryMembers;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.cadreCategoryMembers;\n}\n","import { StateShard } from \"./utils\";\n\nconst ListIndex = StateShard(\"ListIndex\", init, { set }, {}, { select });\n\nexport { ListIndex };\n\nfunction init(state) {\n  if (!state.ui) {\n    state.ui = {};\n  }\n\n  state.ui.listIndex = 0;\n}\n\n// Actions\n\nfunction set(state, { listIndex }) {\n  state.ui.listIndex = listIndex;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.ui.listIndex;\n}\n","import \"./App.css\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  Affix,\n  Badge,\n  Card,\n  Col,\n  Drawer,\n  Input,\n  Layout,\n  Menu,\n  Row,\n  Select,\n  Tooltip,\n} from \"antd\";\nimport {\n  CaretDownOutlined,\n  CaretUpOutlined,\n  CheckSquareOutlined,\n  DeleteOutlined,\n  FormOutlined,\n  HeartFilled,\n  MenuUnfoldOutlined,\n  PlusSquareOutlined,\n  SyncOutlined,\n  TeamOutlined,\n} from \"@ant-design/icons\";\nimport CompoundArmor from \"./img/advantages/Compound_Armor.png\";\nimport Flight from \"./img/advantages/Flight.png\";\nimport Pathfinder from \"./img/advantages/Pathfinder.png\";\nimport Revelator from \"./img/advantages/Revelator.png\";\nimport Stealth from \"./img/advantages/Stealth.png\";\nimport WeaponExpert from \"./img/advantages/Weapon_Expert.png\";\nimport AeternusContinuum from \"./img/factions/Aeternus_Continuum.png\";\nimport Fallback from \"./img/factions/Fallback.png\";\nimport Empyrean from \"./img/factions/Empyrean.png\";\nimport IronStarAlliance from \"./img/factions/Iron_Star_Alliance.png\";\nimport LostLegion from \"./img/factions/Lost_Legion.png\";\nimport MarcherWorlds from \"./img/factions/Marcher_Worlds.png\";\nimport WildCard from \"./img/factions/Wild_Card.png\";\nimport AeternusContinuumCharged from \"./img/faction_icons/Aeternus_Continuum_Charged.png\";\nimport AeternusContinuumSpike from \"./img/faction_icons/Aeternus_Continuum_Spike.png\";\nimport EmpyreanCharged from \"./img/faction_icons/Empyrean_Charged.png\";\nimport EmpyreanSpike from \"./img/faction_icons/Empyrean_Spike.png\";\nimport IronStarAllianceCharged from \"./img/faction_icons/Iron_Star_Alliance_Charged.png\";\nimport IronStarAllianceSpike from \"./img/faction_icons/Iron_Star_Alliance_Spike.png\";\nimport MarcherWorldsCharged from \"./img/faction_icons/Marcher_Worlds_Charged.png\";\nimport MarcherWorldsSpike from \"./img/faction_icons/Marcher_Worlds_Spike.png\";\nimport WildCardCharged from \"./img/faction_icons/Wild_Card_Charged.png\";\nimport WildCardSpike from \"./img/faction_icons/Wild_Card_Spike.png\";\nimport BlastWeapon from \"./img/weapon_qualities/Blast_Weapon.png\";\nimport Corrosion from \"./img/weapon_qualities/Corrosion.png\";\nimport Fire from \"./img/weapon_qualities/Fire.png\";\nimport LockDown from \"./img/weapon_qualities/Lock_Down.png\";\nimport Repulsor from \"./img/weapon_qualities/Repulsor.png\";\nimport SprayWeapon from \"./img/weapon_qualities/Spray_Weapon.png\";\nimport Strafe from \"./img/weapon_qualities/Strafe.png\";\nimport SystemFailure from \"./img/weapon_qualities/System_Failure.png\";\nimport { MenuItemClicked } from \"../messages\";\nimport { AppSync } from \"../state/AppSync\";\nimport { CypherCodecs } from \"../state/CypherCodecs\";\nimport { Cyphers } from \"../state/Cyphers\";\nimport { EditMode } from \"../state/EditMode\";\nimport { FactionModels } from \"../state/FactionModels\";\nimport { Factions } from \"../state/Factions\";\nimport { Lists } from \"../state/Lists\";\nimport { PageIds } from \"../state/PageIds\";\nimport { ToggleSections } from \"../state/ToggleSections\";\nimport { Url } from \"../state/Url\";\nimport { WildCardModels } from \"../state/WildCardModels\";\nimport { Models } from \"../state/Models\";\nimport { VehicleWeapons } from \"../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../state/WarjackWeapons\";\nimport { CadreModels } from \"../state/CadreModels\";\nimport { CadreCategoryMembers } from \"../state/CadreCategoryMembers\";\nimport { ListIndex } from \"../state/ListIndex\";\n\nconst { Header, Footer, Content } = Layout;\nconst { TextArea } = Input;\nconst { SubMenu } = Menu;\n\nconst factionImages = {\n  Aeternus_Continuum: AeternusContinuum,\n  Empyrean,\n  Iron_Star_Alliance: IronStarAlliance,\n  Lost_Legion: LostLegion,\n  Marcher_Worlds: MarcherWorlds,\n  Wild_Card: WildCard,\n  Universal: Fallback,\n};\n\nfunction FactionImage({ faction, style, height = \"35px\" }) {\n  const src = factionImages[faction] || Fallback;\n  return <img src={src} height={height} alt={faction} style={style} />;\n}\n\nconst spikes = {\n  Aeternus_Continuum: AeternusContinuumSpike,\n  Empyrean: EmpyreanSpike,\n  Iron_Star_Alliance: IronStarAllianceSpike,\n  Marcher_Worlds: MarcherWorldsSpike,\n  Wild_Card: WildCardSpike,\n};\n\nfunction Spike({ faction, style: style2, height = \"18px\" }) {\n  const style = { ...style2, marginTop: \"-4px\" };\n  const src = spikes[faction] || WildCardSpike;\n  return <img src={src} height={height} alt={faction} style={style} />;\n}\n\nconst chargedImages = {\n  Aeternus_Continuum: AeternusContinuumCharged,\n  Empyrean: EmpyreanCharged,\n  Iron_Star_Alliance: IronStarAllianceCharged,\n  Marcher_Worlds: MarcherWorldsCharged,\n  Wild_Card: WildCardCharged,\n};\n\nfunction Charged({ faction, style: style2, height = \"18px\" }) {\n  const style = { ...style2, marginTop: \"-4px\" };\n  const src = chargedImages[faction] || WildCardCharged;\n  return <img src={src} height={height} alt={faction} style={style} />;\n}\n\nconst advantageImages = {\n  \"Compound Armor\": CompoundArmor,\n  Flight,\n  Pathfinder,\n  Revelator,\n  Stealth,\n  \"Weapon Expert\": WeaponExpert,\n};\n\nfunction AdvantageImage({ title: advantage, text, style, height = \"30px\" }) {\n  const src = advantageImages[advantage];\n\n  if (src) {\n    return (\n      <Tooltip\n        key={`${advantage}_tooltip`}\n        placement=\"top\"\n        title={`${advantage} - ${text}`}\n        trigger=\"click\"\n      >\n        <img\n          src={advantageImages[advantage]}\n          className=\"metallic-img\"\n          alt={advantage}\n          height={height}\n          style={style}\n          onClick={(event) => event.stopPropagation()}\n        />\n      </Tooltip>\n    );\n  }\n\n  return <div className=\"metallic-circle\"></div>;\n}\n\nconst weaponQualities = {\n  \"Blast Weapon\": BlastWeapon,\n  Corrosion,\n  Fire,\n  \"Lock Down\": LockDown,\n  Repulsor,\n  \"Spray Weapon\": SprayWeapon,\n  Strafe,\n  \"System Failure\": SystemFailure,\n};\n\nfunction WeaponQuality({ title: weaponQuality, text, style, height = \"16px\" }) {\n  const src = weaponQualities[weaponQuality];\n\n  if (src) {\n    return (\n      <Tooltip\n        key={`${weaponQuality}_tooltip`}\n        placement=\"top\"\n        title={`${weaponQuality} - ${text}`}\n        trigger=\"click\"\n      >\n        <img\n          src={src}\n          className=\"metallic-img-tiny\"\n          alt={weaponQuality}\n          height={height}\n          style={style}\n          onClick={(event) => event.stopPropagation()}\n        />\n      </Tooltip>\n    );\n  }\n\n  return <></>;\n}\n\nfunction AppPresentation({\n  initialized,\n  factionModels,\n  wildCardModels,\n  cypherCodecs,\n  menuItemClicked,\n  allMenuItemsClicked,\n  lists,\n  toggleCard,\n  removeList,\n  removeCard,\n  addEmptyList,\n  moveListBy,\n  moveCardByOne,\n  setListTitle,\n  setUrl,\n  url,\n  bookmark,\n  open,\n  setCardCortex,\n  setCardWarjackWeapons,\n  setCardVehicleWeapon,\n  factions,\n  factionsPageByText,\n  vehicleWeapons,\n  warjackWeapons,\n  cadres,\n  editMode,\n  toggleEditMode,\n  toggledSections,\n  toggleSection,\n  updateTargetList,\n}) {\n  const [openDrawer, setOpenDrawer] = React.useState(\"\");\n\n  const onOpenChangeDrawers = (keys) => {\n    if (keys.length > 0) {\n      const key = keys[0];\n      if (key === openDrawer) {\n        setOpenDrawer(\"\");\n      } else {\n        setOpenDrawer(keys[0]);\n      }\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <Layout>\n        <Layout>\n          <Header>\n            <div>\n              <a className=\"logo\" href=\"/\">\n                WARFASTER\n              </a>\n            </div>\n          </Header>\n          {!initialized ? (\n            <Content>\n              <Layout>\n                <Row>\n                  <Col xs={24} sm={12} md={12} lg={12} xl={8} xxl={8}>\n                    <div className=\"cards\" key=\"cards0\">\n                      <div style={{ cursor: \"pointer\" }} className=\"header\">\n                        <Row>\n                          <Col span={16} className=\"army-list-title\">\n                            <TextArea\n                              value={\"Setting up Warfaster\"}\n                              maxLength={30}\n                              autoSize\n                            />\n                          </Col>\n                          <Col span={8} className=\"faction-icons\">\n                            <SyncOutlined\n                              spin\n                              style={{\n                                color: \"#d1c5b1\",\n                                fontSize: \"23px\",\n                                margin: \"3px 10px 0 0\",\n                              }}\n                            />\n                          </Col>\n                        </Row>\n                      </div>\n\n                      <div>\n                        <div className=\"body\">\n                          <Card hoverable className=\"card\">\n                            <Card.Meta\n                              avatar={\n                                <div\n                                  style={{\n                                    height: \"25px\",\n                                    marginRight: \"12px\",\n                                    textAlign: \"center\",\n                                    width: \"35px\",\n                                  }}\n                                >\n                                  <SyncOutlined\n                                    spin\n                                    style={{\n                                      color: \"#d1c5b1\",\n                                      fontSize: \"35px\",\n                                    }}\n                                  />\n                                </div>\n                              }\n                              title={\n                                <>\n                                  <div>Fetching data, please wait</div>\n                                  <div className=\"card-type\">\n                                    This may take up to 20 seconds\n                                  </div>\n                                </>\n                              }\n                            />\n                          </Card>\n                        </div>\n                      </div>\n                      <div className=\"footer\"></div>\n                    </div>\n                  </Col>\n                </Row>\n              </Layout>\n            </Content>\n          ) : (\n            <>\n              <Affix>\n                <Content>\n                  <Menu\n                    id=\"factions\"\n                    openKeys={[]}\n                    onOpenChange={onOpenChangeDrawers}\n                    mode=\"horizontal\"\n                    triggerSubMenuAction=\"click\"\n                  >\n                    {factionModels.map(([factionName, faction, models]) => (\n                      <SubMenu\n                        key={faction}\n                        icon={<FactionImage faction={faction} />}\n                      ></SubMenu>\n                    ))}\n                    <SubMenu\n                      className=\"edit\"\n                      key=\"edit\"\n                      icon={\n                        editMode ? (\n                          <CheckSquareOutlined\n                            onClick={toggleEditMode}\n                            style={{ fontSize: \"30px\" }}\n                          />\n                        ) : (\n                          <FormOutlined\n                            onClick={toggleEditMode}\n                            style={{ fontSize: \"30px\" }}\n                          />\n                        )\n                      }\n                      style={{\n                        marginLeft: \"20px\",\n                        paddingTop: \"5px !important\",\n                      }}\n                    ></SubMenu>\n                  </Menu>\n                </Content>\n              </Affix>\n              <Content>\n                <Layout>\n                  <Row gutter={16}>\n                    {lists.map(({ title, cards }, listIndex) => (\n                      <Col\n                        key={`lists_col_${listIndex}`}\n                        xs={24}\n                        sm={12}\n                        md={12}\n                        lg={12}\n                        xl={8}\n                        xxl={8}\n                      >\n                        <>\n                          {!editMode ? (\n                            <></>\n                          ) : (\n                            <div\n                              key={`add_list_top${listIndex}`}\n                              style={{\n                                color: \"white\",\n                                cursor: \"pointer\",\n                                textAlign: \"center\",\n                              }}\n                            >\n                              <span onClick={addEmptyList(listIndex)}>\n                                <PlusSquareOutlined /> Add list\n                              </span>\n                            </div>\n                          )}\n                          <div className=\"cards\" key={`cards${listIndex}`}>\n                            <div\n                              style={{ cursor: \"pointer\" }}\n                              className=\"header\"\n                            >\n                              <Row>\n                                <Col span={16} className=\"army-list-title\">\n                                  <TextArea\n                                    placeholder={generateListNamePlaceholder(\n                                      cards,\n                                      factions,\n                                      \"Name your list\"\n                                    )}\n                                    value={title}\n                                    maxLength={30}\n                                    autoSize\n                                    onChange={setListTitle(listIndex)}\n                                  />\n                                </Col>\n                                <Col span={8} className=\"faction-icons\">\n                                  {editMode ? (\n                                    <>\n                                      <CaretUpOutlined\n                                        style={{\n                                          fontSize: \"18px\",\n                                          color: \"white\",\n                                          marginRight: \"16px\",\n                                          marginTop: \"6px\",\n                                        }}\n                                        onClick={moveListBy(listIndex, -1)}\n                                      />\n                                      <CaretDownOutlined\n                                        style={{\n                                          fontSize: \"18px\",\n                                          color: \"white\",\n                                          marginRight: \"16px\",\n                                          marginTop: \"6px\",\n                                        }}\n                                        onClick={moveListBy(listIndex, 1)}\n                                      />\n                                      <DeleteOutlined\n                                        style={{\n                                          fontSize: \"18px\",\n                                          color: \"white\",\n                                          marginRight: \"16px\",\n                                          marginTop: \"6px\",\n                                        }}\n                                        onClick={removeList(listIndex)}\n                                      />\n                                    </>\n                                  ) : (\n                                    Object.entries(\n                                      cards.reduce(\n                                        (acc, card) => ({\n                                          ...acc,\n                                          ...(card.faction\n                                            ? {\n                                                [card.faction]:\n                                                  (acc[card.faction] || 0) + 1,\n                                              }\n                                            : {\n                                                Universal:\n                                                  (acc.Universal || 0) + 1,\n                                              }),\n                                        }),\n                                        {}\n                                      )\n                                    )\n                                      .sort()\n                                      .map(([faction, count], i) => (\n                                        <Badge\n                                          size=\"small\"\n                                          key={`badge${i}`}\n                                          count={count}\n                                          offset={[0, 10]}\n                                        >\n                                          <FactionImage faction={faction} />\n                                        </Badge>\n                                      ))\n                                  )}\n                                </Col>\n                              </Row>\n                            </div>\n\n                            <div key={`cards_${listIndex}`}>\n                              {cards.map(\n                                (\n                                  {\n                                    card,\n                                    hidden,\n                                    type,\n                                    title,\n                                    page,\n                                    pageId,\n                                    cortexIds,\n                                    vehicleWeaponId,\n                                    warjackWeaponIds,\n                                    subtype,\n                                    faction,\n                                    details,\n                                  },\n                                  cardIndex\n                                ) => (\n                                  <div\n                                    className=\"body\"\n                                    key={`${page}_${listIndex}_${cardIndex}`}\n                                  >\n                                    <Card\n                                      hoverable\n                                      className={[\"card\", faction, type]}\n                                    >\n                                      <Card.Meta\n                                        onClick={\n                                          editMode\n                                            ? null\n                                            : toggleCard(\n                                                listIndex,\n                                                cardIndex,\n                                                pageId,\n                                                card\n                                              )\n                                        }\n                                        avatar={\n                                          editMode ? (\n                                            <div\n                                              style={{\n                                                height: \"25px\",\n                                                width: \"35px\",\n                                                textAlign: \"center\",\n                                              }}\n                                            >\n                                              <CaretUpOutlined\n                                                onClick={moveCardByOne(\n                                                  listIndex,\n                                                  cardIndex,\n                                                  true\n                                                )}\n                                                style={{ fontSize: \"18px\" }}\n                                              />\n                                              <CaretDownOutlined\n                                                onClick={moveCardByOne(\n                                                  listIndex,\n                                                  cardIndex,\n                                                  false\n                                                )}\n                                                style={{ fontSize: \"18px\" }}\n                                              />\n                                            </div>\n                                          ) : faction ? (\n                                            <div\n                                              style={{\n                                                height: \"25px\",\n                                                width: \"35px\",\n                                                textAlign: \"center\",\n                                                marginRight: \"12px\",\n                                              }}\n                                            >\n                                              {!details ||\n                                              !details.coreStats ||\n                                              details.coreStats.length === 0 ||\n                                              !details.coreStats[0]\n                                                .deploymentCost ? (\n                                                <FactionImage\n                                                  faction={faction}\n                                                />\n                                              ) : (\n                                                <>\n                                                  <FactionImage\n                                                    faction={faction}\n                                                    height=\"23px\"\n                                                  />\n                                                  <div className=\"deployment-cost\">\n                                                    DC{\" \"}\n                                                    {\n                                                      details.coreStats[0]\n                                                        .deploymentCost\n                                                    }\n                                                  </div>\n                                                </>\n                                              )}\n                                            </div>\n                                          ) : (\n                                            <div\n                                              style={{\n                                                marginRight: \"12px\",\n                                              }}\n                                            >\n                                              <FactionImage faction=\"Universal\" />\n                                            </div>\n                                          )\n                                        }\n                                        title={\n                                          <div\n                                            style={{\n                                              display: \"flex\",\n                                              alignItems: \"center\",\n                                              marginRight: \"8px\",\n                                            }}\n                                          >\n                                            <div style={{ flex: 100 }}>\n                                              <div>{title}</div>\n                                              <div className=\"card-type\">\n                                                {(faction || \"\").replace(\n                                                  /_/g,\n                                                  \" \"\n                                                )}\n                                                {subtype ? \" \" + subtype : \"\"}\n                                                {type ? \" \" + type : \"\"}\n                                              </div>\n                                              <div>\n                                                <span className=\"subtitle\">\n                                                  {[\n                                                    ...(!details ||\n                                                    !details.coreStats ||\n                                                    !details.coreStats[0]\n                                                      .vehicleWeaponSelection ||\n                                                    !vehicleWeaponName(\n                                                      details.coreStats[0]\n                                                        .vehicleWeaponSelection,\n                                                      vehicleWeaponId\n                                                    )\n                                                      ? []\n                                                      : [\n                                                          vehicleWeaponName(\n                                                            details.coreStats[0]\n                                                              .vehicleWeaponSelection,\n                                                            vehicleWeaponId\n                                                          ),\n                                                        ]),\n                                                    ...(!details ||\n                                                    !details.coreStats ||\n                                                    details.coreStats.length ===\n                                                      0 ||\n                                                    !details.coreStats[0]\n                                                      .cortexSelections ||\n                                                    !cortexName(\n                                                      details.coreStats[0]\n                                                        .cortexSelections,\n                                                      cortexIds\n                                                    )\n                                                      ? []\n                                                      : [\n                                                          cortexName(\n                                                            details.coreStats[0]\n                                                              .cortexSelections,\n                                                            cortexIds\n                                                          ),\n                                                        ]),\n                                                    ...(!details ||\n                                                    !details.coreStats ||\n                                                    details.coreStats.length ===\n                                                      0 ||\n                                                    !details.coreStats[0]\n                                                      .warjackWeaponSelections ||\n                                                    !warjackWeaponIds ||\n                                                    warjackWeaponIds.length ===\n                                                      0\n                                                      ? []\n                                                      : warjackWeaponNamesSubtitle(\n                                                          details.coreStats[0]\n                                                            .warjackWeaponSelections,\n                                                          warjackWeaponIds\n                                                        )),\n                                                  ].join(\", \")}\n                                                </span>\n                                              </div>\n                                            </div>\n                                            {!editMode ? (\n                                              <></>\n                                            ) : (\n                                              <div style={{ flex: 1 }}>\n                                                <DeleteOutlined\n                                                  style={{\n                                                    fontSize: \"18px\",\n                                                  }}\n                                                  onClick={removeCard(\n                                                    listIndex,\n                                                    cardIndex\n                                                  )}\n                                                />\n                                              </div>\n                                            )}\n                                          </div>\n                                        }\n                                      />\n                                      {hidden || editMode ? (\n                                        <></>\n                                      ) : !details ? (\n                                        <div\n                                          style={{\n                                            margin: \"10px 0\",\n                                            textAlign: \"center\",\n                                          }}\n                                        >\n                                          <SyncOutlined\n                                            spin\n                                            style={{ fontSize: \"23px\" }}\n                                          />\n                                        </div>\n                                      ) : (\n                                        <div className=\"card-content\">\n                                          {!details.storeLinks ||\n                                          details.storeLinks.length === 0 ? (\n                                            <></>\n                                          ) : (\n                                            <div className=\"special-rules\">\n                                              <span\n                                                onClick={toggleSection(\n                                                  \"privateer press store\"\n                                                )}\n                                              >\n                                                Privateer Press Store\n                                              </span>{\" \"}\n                                              <span>\n                                                -{\" \"}\n                                                {toggledSections[\n                                                  \"privateer press store\"\n                                                ]\n                                                  ? \"Click to expand\"\n                                                  : details.storeLinks.map(\n                                                      (linkText, index) => (\n                                                        <React.Fragment\n                                                          key={`store_link_${listIndex}_${cardIndex}_${index}`}\n                                                        >\n                                                          <span\n                                                            dangerouslySetInnerHTML={{\n                                                              __html: linkText,\n                                                            }}\n                                                          />\n                                                          {index ===\n                                                          details.storeLinks\n                                                            .length -\n                                                            1 ? (\n                                                            <></>\n                                                          ) : (\n                                                            <> </>\n                                                          )}\n                                                        </React.Fragment>\n                                                      )\n                                                    )}\n                                              </span>\n                                            </div>\n                                          )}\n                                          {!details ||\n                                          !details.coreStats ||\n                                          details.coreStats.length === 0 ? (\n                                            <></>\n                                          ) : (\n                                            details.coreStats.map(\n                                              (coreStats, coreStatsIndex) => (\n                                                <React.Fragment\n                                                  key={`core_stats_${coreStatsIndex}`}\n                                                >\n                                                  {!coreStats.cardName ? (\n                                                    <></>\n                                                  ) : (\n                                                    <h3>\n                                                      {coreStats.cardName}\n                                                    </h3>\n                                                  )}\n                                                  {!coreStats.modelStats ||\n                                                  Object.keys(\n                                                    coreStats.modelStats\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"model-stats\">\n                                                      {Object.entries(\n                                                        coreStats.modelStats\n                                                      ).map(\n                                                        (\n                                                          [name, stat],\n                                                          index\n                                                        ) => (\n                                                          <div\n                                                            key={`${name}_stat`}\n                                                          >\n                                                            <div>{name}</div>\n                                                            <div>{stat}</div>\n                                                          </div>\n                                                        )\n                                                      )}\n                                                    </div>\n                                                  )}\n                                                  {!coreStats.cortexSelections ||\n                                                  Object.entries(\n                                                    coreStats.cortexSelections\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <Select\n                                                        suffixIcon={\n                                                          <CaretDownOutlined />\n                                                        }\n                                                        className=\"select-warjack-cortex\"\n                                                        defaultValue=\"none\"\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardCortex(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !cortexIds\n                                                            ? \"none\"\n                                                            : cortexName(\n                                                                coreStats.cortexSelections,\n                                                                cortexIds\n                                                              )\n                                                        }\n                                                        getPopupContainer={() =>\n                                                          document.querySelectorAll(\n                                                            \".card\"\n                                                          )[cardIndex]\n                                                        }\n                                                      >\n                                                        <Select.Option\n                                                          key={\"cortex_-1\"}\n                                                          label={undefined}\n                                                          value=\"none\"\n                                                          onClick={(event) =>\n                                                            event.stopPropagation()\n                                                          }\n                                                        >\n                                                          <div>\n                                                            <h3>\n                                                              Select Cortex\n                                                            </h3>\n                                                          </div>\n                                                        </Select.Option>\n                                                        {Object.entries(\n                                                          coreStats.cortexSelections\n                                                        ).map(\n                                                          (\n                                                            [\n                                                              cortex,\n                                                              advantages,\n                                                            ],\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`cortex_${index}`}\n                                                              label={Object.values(\n                                                                advantages\n                                                              ).map(\n                                                                ({\n                                                                  categoryId,\n                                                                }) => categoryId\n                                                              )}\n                                                              value={cortex}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              <h3>{cortex}</h3>\n                                                              <div className=\"card-icons\">\n                                                                {!advantages ? (\n                                                                  <></>\n                                                                ) : (\n                                                                  Object.entries(\n                                                                    advantages\n                                                                  )\n                                                                    .filter(\n                                                                      ([\n                                                                        name,\n                                                                      ]) =>\n                                                                        advantageImages[\n                                                                          name\n                                                                        ]\n                                                                    )\n                                                                    .map(\n                                                                      (\n                                                                        [\n                                                                          name,\n                                                                          {\n                                                                            text,\n                                                                          },\n                                                                        ],\n                                                                        index\n                                                                      ) => (\n                                                                        <AdvantageImage\n                                                                          key={`advantage_${index}`}\n                                                                          title={\n                                                                            name\n                                                                          }\n                                                                          text={\n                                                                            text\n                                                                          }\n                                                                        />\n                                                                      )\n                                                                    )\n                                                                )}\n                                                              </div>\n                                                              {Object.entries(\n                                                                advantages\n                                                              )\n                                                                .filter(\n                                                                  ([rule]) =>\n                                                                    !advantageImages[\n                                                                      rule\n                                                                    ]\n                                                                )\n                                                                .map(\n                                                                  (\n                                                                    [\n                                                                      rule,\n                                                                      { text },\n                                                                    ],\n                                                                    advantageIndex\n                                                                  ) => (\n                                                                    <div\n                                                                      key={`cortex_${index}_advantage_${advantageIndex}`}\n                                                                      className=\"model-cortex-special-rules\"\n                                                                    >\n                                                                      <span\n                                                                        onClick={toggleSection(\n                                                                          rule\n                                                                        )}\n                                                                      >\n                                                                        {markChargedOrSpike(\n                                                                          faction,\n                                                                          text\n                                                                        )}\n                                                                        {rule}\n                                                                      </span>{\" \"}\n                                                                      <span>\n                                                                        -{\" \"}\n                                                                        {toggledSections[\n                                                                          rule\n                                                                        ]\n                                                                          ? \"Click to expand\"\n                                                                          : text}\n                                                                      </span>\n                                                                    </div>\n                                                                  )\n                                                                )}\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </>\n                                                  )}\n                                                  {!coreStats.weaponPoints ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"special-rules\">\n                                                      <span>Weapon Points</span>{\" \"}\n                                                      <span>\n                                                        -{\" \"}\n                                                        {coreStats.weaponPoints}\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                  {!coreStats.hardpointNames ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      {coreStats.hardpointNames.map(\n                                                        (\n                                                          hardpointName,\n                                                          hardpointNameIndex\n                                                        ) =>\n                                                          !coreStats.warjackWeaponSelections ||\n                                                          Object.keys(\n                                                            coreStats.warjackWeaponSelections\n                                                          ).length === 0 ? (\n                                                            <></>\n                                                          ) : (\n                                                            <div\n                                                              key={`warjack_weapon_${hardpointNameIndex}`}\n                                                            >\n                                                              <Select\n                                                                suffixIcon={\n                                                                  <CaretDownOutlined />\n                                                                }\n                                                                className=\"select-warjack-weapon\"\n                                                                defaultValue=\"none\"\n                                                                onClick={(\n                                                                  event\n                                                                ) =>\n                                                                  event.stopPropagation()\n                                                                }\n                                                                onSelect={setCardWarjackWeapons(\n                                                                  listIndex,\n                                                                  cardIndex,\n                                                                  hardpointNameIndex,\n                                                                  pageId\n                                                                )}\n                                                                value={\n                                                                  !warjackWeaponIds ||\n                                                                  !warjackWeaponIds[\n                                                                    hardpointNameIndex\n                                                                  ]\n                                                                    ? \"none\"\n                                                                    : warjackWeaponNames(\n                                                                        faction,\n                                                                        warjackWeapons,\n                                                                        coreStats.warjackWeaponSelections,\n                                                                        warjackWeaponIds[\n                                                                          hardpointNameIndex\n                                                                        ],\n                                                                        toggleSection,\n                                                                        toggledSections\n                                                                      )\n                                                                }\n                                                                getPopupContainer={() =>\n                                                                  document.querySelectorAll(\n                                                                    \".card\"\n                                                                  )[cardIndex]\n                                                                }\n                                                              >\n                                                                <Select.Option\n                                                                  key={`warjack_weapon_${hardpointNameIndex}_-1`}\n                                                                  label={\n                                                                    undefined\n                                                                  }\n                                                                  value=\"none\"\n                                                                  onClick={(\n                                                                    event\n                                                                  ) =>\n                                                                    event.stopPropagation()\n                                                                  }\n                                                                >\n                                                                  <div\n                                                                    className=\"model-weapons\"\n                                                                    style={{\n                                                                      height:\n                                                                        \"52px\",\n                                                                    }}\n                                                                  ></div>\n                                                                </Select.Option>\n                                                                {Object.values(\n                                                                  coreStats.warjackWeaponSelections\n                                                                )\n                                                                  .filter(\n                                                                    ({\n                                                                      location,\n                                                                    }) =>\n                                                                      location ===\n                                                                      hardpointName\n                                                                  )\n                                                                  .map(\n                                                                    (\n                                                                      {\n                                                                        name,\n                                                                        page,\n                                                                        pageId,\n                                                                        cost,\n                                                                        location,\n                                                                      },\n                                                                      index\n                                                                    ) => (\n                                                                      <Select.Option\n                                                                        key={`warjack_weapon_${hardpointNameIndex}_${index}`}\n                                                                        label={\n                                                                          pageId\n                                                                        }\n                                                                        value={\n                                                                          name\n                                                                        }\n                                                                        onClick={(\n                                                                          event\n                                                                        ) =>\n                                                                          event.stopPropagation()\n                                                                        }\n                                                                      >\n                                                                        <>\n                                                                          {warjackWeaponNames(\n                                                                            faction,\n                                                                            warjackWeapons,\n                                                                            coreStats.warjackWeaponSelections,\n                                                                            pageId,\n                                                                            toggleSection,\n                                                                            toggledSections\n                                                                          )}\n                                                                        </>\n                                                                      </Select.Option>\n                                                                    )\n                                                                  )}\n                                                              </Select>\n                                                            </div>\n                                                          )\n                                                      )}\n                                                    </>\n                                                  )}\n                                                  {!coreStats.vehicleWeaponSelection ||\n                                                  coreStats\n                                                    .vehicleWeaponSelection\n                                                    .length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div key=\"vehicle_weapon_selection\">\n                                                      <Select\n                                                        suffixIcon={\n                                                          <CaretDownOutlined />\n                                                        }\n                                                        className=\"select-warjack-weapon\"\n                                                        defaultValue=\"none\"\n                                                        onClick={(event) =>\n                                                          event.stopPropagation()\n                                                        }\n                                                        onSelect={setCardVehicleWeapon(\n                                                          listIndex,\n                                                          cardIndex,\n                                                          pageId\n                                                        )}\n                                                        value={\n                                                          !vehicleWeaponId ||\n                                                          !coreStats ||\n                                                          !coreStats.vehicleWeaponSelection\n                                                            ? \"none\"\n                                                            : vehicleWeaponName2(\n                                                                faction,\n                                                                vehicleWeapons,\n                                                                coreStats.vehicleWeaponSelection,\n                                                                vehicleWeaponId,\n                                                                toggleSection,\n                                                                toggledSections\n                                                              )\n                                                        }\n                                                        getPopupContainer={() =>\n                                                          document.querySelectorAll(\n                                                            \".card\"\n                                                          )[cardIndex]\n                                                        }\n                                                      >\n                                                        <Select.Option\n                                                          key={\n                                                            \"vehicle_weapon_selection_-1\"\n                                                          }\n                                                          label={undefined}\n                                                          value=\"none\"\n                                                          onClick={(event) =>\n                                                            event.stopPropagation()\n                                                          }\n                                                        >\n                                                          <div\n                                                            className=\"model-weapons\"\n                                                            style={{\n                                                              height: \"52px\",\n                                                            }}\n                                                          ></div>\n                                                        </Select.Option>\n                                                        {coreStats.vehicleWeaponSelection.map(\n                                                          (\n                                                            {\n                                                              text,\n                                                              page,\n                                                              pageId,\n                                                            },\n                                                            index\n                                                          ) => (\n                                                            <Select.Option\n                                                              key={`vehicle_weapon_selection_${index}`}\n                                                              label={pageId}\n                                                              value={text}\n                                                              onClick={(\n                                                                event\n                                                              ) =>\n                                                                event.stopPropagation()\n                                                              }\n                                                            >\n                                                              {vehicleWeaponName2(\n                                                                faction,\n                                                                vehicleWeapons,\n                                                                coreStats.vehicleWeaponSelection,\n                                                                pageId,\n                                                                toggleSection,\n                                                                toggledSections\n                                                              )}\n                                                            </Select.Option>\n                                                          )\n                                                        )}\n                                                      </Select>\n                                                    </div>\n                                                  )}\n                                                  {!coreStats.weapons ||\n                                                  coreStats.weapons.length ===\n                                                    0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    coreStats.weapons.map(\n                                                      (weapon, index) => (\n                                                        <React.Fragment\n                                                          key={`weapon_number_${index}`}\n                                                        >\n                                                          <div className=\"model-weapons\">\n                                                            <div>\n                                                              {weapon[\n                                                                \"Attack Type\"\n                                                              ] === \"Melee\" ? (\n                                                                <img\n                                                                  className=\"faction-melee\"\n                                                                  alt=\" \"\n                                                                />\n                                                              ) : (\n                                                                <img\n                                                                  className=\"faction-ranged\"\n                                                                  alt=\" \"\n                                                                />\n                                                              )}\n                                                            </div>\n                                                            <div>\n                                                              <div>\n                                                                {weapon[\"Name\"]}\n                                                                {Object.entries(\n                                                                  weapon.specialRules ||\n                                                                    {}\n                                                                ).map(\n                                                                  (\n                                                                    [\n                                                                      rule,\n                                                                      text,\n                                                                    ],\n                                                                    index2\n                                                                  ) => (\n                                                                    <WeaponQuality\n                                                                      key={`weapon_number_${index}_rule_${index2}`}\n                                                                      title={\n                                                                        rule\n                                                                      }\n                                                                      text={\n                                                                        text\n                                                                      }\n                                                                    />\n                                                                  )\n                                                                )}\n                                                              </div>\n                                                              <div>\n                                                                {\n                                                                  weapon[\n                                                                    \"Damage Type\"\n                                                                  ]\n                                                                }\n                                                              </div>\n                                                            </div>\n                                                            <div>\n                                                              <div>RNG</div>\n                                                              <div>\n                                                                {\n                                                                  weapon[\n                                                                    \"Range\"\n                                                                  ]\n                                                                }\n                                                              </div>\n                                                            </div>\n                                                            <div>\n                                                              <div>POW</div>\n                                                              <div>\n                                                                {weapon[\"POW\"]}\n                                                              </div>\n                                                            </div>\n                                                          </div>\n                                                          {!weapon.specialRules ? (\n                                                            <></>\n                                                          ) : (\n                                                            Object.entries(\n                                                              weapon.specialRules\n                                                            )\n                                                              .filter(\n                                                                ([rule]) =>\n                                                                  !weaponQualities[\n                                                                    rule\n                                                                  ]\n                                                              )\n                                                              .map(\n                                                                (\n                                                                  [rule, text],\n                                                                  ruleIndex\n                                                                ) => {\n                                                                  const textWithIcons =\n                                                                    [\n                                                                      ...Object.keys(\n                                                                        weaponQualities\n                                                                      ).map(\n                                                                        (\n                                                                          title\n                                                                        ) => ({\n                                                                          title,\n                                                                          Tag: WeaponQuality,\n                                                                        })\n                                                                      ),\n                                                                      ...Object.keys(\n                                                                        advantageImages\n                                                                      ).map(\n                                                                        (\n                                                                          title\n                                                                        ) => ({\n                                                                          title,\n                                                                          Tag: AdvantageImage,\n                                                                        })\n                                                                      ),\n                                                                    ].reduce(\n                                                                      (\n                                                                        texts,\n                                                                        {\n                                                                          title,\n                                                                          Tag,\n                                                                        }\n                                                                      ) =>\n                                                                        texts.flatMap(\n                                                                          (\n                                                                            text,\n                                                                            index2\n                                                                          ) => {\n                                                                            if (\n                                                                              typeof text !==\n                                                                              \"string\"\n                                                                            )\n                                                                              return text;\n\n                                                                            return text\n                                                                              .split(\n                                                                                new RegExp(\n                                                                                  `(\\\\s.\\\\s${title}:\\\\s.+[\\\\n]*)`,\n                                                                                  \"g\"\n                                                                                )\n                                                                              )\n                                                                              .flatMap(\n                                                                                (\n                                                                                  string,\n                                                                                  index\n                                                                                ) => {\n                                                                                  if (\n                                                                                    string.match(\n                                                                                      new RegExp(\n                                                                                        `(${title}:\\\\s.+[\\\\n]*)`\n                                                                                      )\n                                                                                    )\n                                                                                  ) {\n                                                                                    const [\n                                                                                      ,\n                                                                                      ,\n                                                                                      description,\n                                                                                    ] =\n                                                                                      string.split(\n                                                                                        new RegExp(\n                                                                                          `(${title}:\\\\s|\\\\n)`,\n                                                                                          \"g\"\n                                                                                        )\n                                                                                      );\n                                                                                    return [\n                                                                                      ` • ${title}: `,\n                                                                                      <Tag\n                                                                                        key={`${index}_${index2}`}\n                                                                                        title={\n                                                                                          title\n                                                                                        }\n                                                                                        text={\n                                                                                          description\n                                                                                        }\n                                                                                        height=\"16px\"\n                                                                                      />,\n                                                                                      \"\\n\",\n                                                                                    ];\n                                                                                  }\n\n                                                                                  return string;\n                                                                                }\n                                                                              );\n                                                                          }\n                                                                        ),\n                                                                      [text]\n                                                                    );\n\n                                                                  return (\n                                                                    <div\n                                                                      key={`weapon_number_${index}_${ruleIndex}`}\n                                                                      className=\"model-weapons-special-rules\"\n                                                                    >\n                                                                      <span\n                                                                        onClick={toggleSection(\n                                                                          rule\n                                                                        )}\n                                                                      >\n                                                                        {markChargedOrSpike(\n                                                                          faction,\n                                                                          text\n                                                                        )}\n                                                                        {rule}\n                                                                      </span>{\" \"}\n                                                                      <span>\n                                                                        -{\" \"}\n                                                                        {toggledSections[\n                                                                          rule\n                                                                        ]\n                                                                          ? \"Click to expand\"\n                                                                          : textWithIcons}\n                                                                      </span>\n                                                                    </div>\n                                                                  );\n                                                                }\n                                                              )\n                                                          )}\n                                                        </React.Fragment>\n                                                      )\n                                                    )\n                                                  )}\n                                                  <div className=\"card-icons\">\n                                                    {!coreStats.wildCardFactions ||\n                                                    Object.values(\n                                                      coreStats.wildCardFactions\n                                                    ).length === 0 ? (\n                                                      <></>\n                                                    ) : (\n                                                      Object.values(\n                                                        coreStats.wildCardFactions\n                                                      ).map(\n                                                        ({ page }, index) => (\n                                                          <Tooltip\n                                                            key={`wild_card_faction_${index}_tooltip`}\n                                                            placement=\"top\"\n                                                            title=\"Wild card faction\"\n                                                            trigger=\"click\"\n                                                          >\n                                                            <FactionImage\n                                                              key={`wild_card_faction_${index}`}\n                                                              faction={page}\n                                                              height=\"30px\"\n                                                              style={{\n                                                                filter:\n                                                                  \"drop-shadow(0px 3px 6px hsl(200,100%,25%))\",\n                                                              }}\n                                                            />\n                                                          </Tooltip>\n                                                        )\n                                                      )\n                                                    )}\n                                                    {!coreStats.baseSize ? (\n                                                      <></>\n                                                    ) : (\n                                                      <Tooltip\n                                                        key=\"base_size_tooltip\"\n                                                        placement=\"top\"\n                                                        title={`Base size - ${coreStats.baseSize}`}\n                                                        trigger=\"click\"\n                                                      >\n                                                        <div className=\"metallic-circle\">\n                                                          {coreStats.baseSize.replace(\n                                                            \" mm\",\n                                                            \"\"\n                                                          )}\n                                                        </div>\n                                                      </Tooltip>\n                                                    )}\n                                                    {!coreStats.health ? (\n                                                      <></>\n                                                    ) : (\n                                                      <Tooltip\n                                                        key=\"hp_tooltip\"\n                                                        placement=\"top\"\n                                                        title={`Health - ${coreStats.health}`}\n                                                        trigger=\"click\"\n                                                      >\n                                                        <div className=\"metallic-circle\">\n                                                          <HeartFilled\n                                                            style={{\n                                                              fontSize: \"0.8em\",\n                                                            }}\n                                                          />\n                                                          {coreStats.health}\n                                                        </div>\n                                                      </Tooltip>\n                                                    )}\n                                                    {!coreStats.squadSize ? (\n                                                      <></>\n                                                    ) : (\n                                                      <Tooltip\n                                                        key=\"squad_size_tooltip\"\n                                                        placement=\"top\"\n                                                        title={`Squad size - ${coreStats.squadSize}`}\n                                                        trigger=\"click\"\n                                                      >\n                                                        <div className=\"metallic-circle\">\n                                                          <TeamOutlined\n                                                            style={{\n                                                              fontSize: \"0.8em\",\n                                                            }}\n                                                          />\n                                                          {coreStats.squadSize}\n                                                        </div>\n                                                      </Tooltip>\n                                                    )}\n                                                    {!coreStats.advantages ||\n                                                    Object.entries(\n                                                      coreStats.advantages\n                                                    ).length === 0 ? (\n                                                      <></>\n                                                    ) : (\n                                                      Object.entries(\n                                                        coreStats.advantages\n                                                      ).map(\n                                                        (\n                                                          [name, text],\n                                                          index\n                                                        ) => (\n                                                          <AdvantageImage\n                                                            key={`advantage_${index}`}\n                                                            title={name}\n                                                            text={text}\n                                                          />\n                                                        )\n                                                      )\n                                                    )}\n                                                    {!coreStats.chassisAdvantages ||\n                                                    Object.entries(\n                                                      coreStats.chassisAdvantages\n                                                    ).length === 0 ? (\n                                                      <></>\n                                                    ) : (\n                                                      Object.entries(\n                                                        coreStats.chassisAdvantages\n                                                      ).map(\n                                                        (\n                                                          [name, text],\n                                                          index\n                                                        ) => (\n                                                          <AdvantageImage\n                                                            key={`advantage_${index}`}\n                                                            title={name}\n                                                            text={text}\n                                                          />\n                                                        )\n                                                      )\n                                                    )}\n                                                  </div>\n                                                  {!coreStats.specialRules ||\n                                                  Object.entries(\n                                                    coreStats.specialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    Object.entries(\n                                                      coreStats.specialRules\n                                                    ).map(\n                                                      ([rule, text], index) => (\n                                                        <div\n                                                          key={`special_rules_${index}`}\n                                                          className=\"special-rules\"\n                                                        >\n                                                          <span\n                                                            onClick={toggleSection(\n                                                              rule\n                                                            )}\n                                                          >\n                                                            {markChargedOrSpike(\n                                                              faction,\n                                                              text\n                                                            )}\n                                                            {rule}\n                                                          </span>{\" \"}\n                                                          <span>\n                                                            -{\" \"}\n                                                            {toggledSections[\n                                                              rule\n                                                            ]\n                                                              ? \"Click to expand\"\n                                                              : text}\n                                                          </span>\n                                                        </div>\n                                                      )\n                                                    )\n                                                  )}\n                                                  {!coreStats.chassisSpecialRules ||\n                                                  Object.entries(\n                                                    coreStats.chassisSpecialRules\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    Object.entries(\n                                                      coreStats.chassisSpecialRules\n                                                    ).map(\n                                                      ([rule, text], index) => (\n                                                        <div\n                                                          key={`chassis_special_rules_${index}`}\n                                                          className=\"special-rules\"\n                                                        >\n                                                          <span\n                                                            onClick={toggleSection(\n                                                              rule\n                                                            )}\n                                                          >\n                                                            {markChargedOrSpike(\n                                                              faction,\n                                                              text\n                                                            )}\n                                                            {rule}\n                                                          </span>{\" \"}\n                                                          <span>\n                                                            -{\" \"}\n                                                            {toggledSections[\n                                                              rule\n                                                            ]\n                                                              ? \"Click to expand\"\n                                                              : text}\n                                                          </span>\n                                                        </div>\n                                                      )\n                                                    )\n                                                  )}\n                                                  {!coreStats.maneuvers ||\n                                                  Object.values(\n                                                    coreStats.maneuvers\n                                                  ).length === 0 ? (\n                                                    <></>\n                                                  ) : (\n                                                    <>\n                                                      <h3>Maneuvers</h3>\n                                                      <dl>\n                                                        {Object.entries(\n                                                          coreStats.maneuvers\n                                                        ).map(\n                                                          (\n                                                            [rule, text],\n                                                            index\n                                                          ) => (\n                                                            <div\n                                                              key={`maneuvers_advantage_${index}`}\n                                                              className=\"special-rules\"\n                                                            >\n                                                              <span\n                                                                onClick={toggleSection(\n                                                                  rule\n                                                                )}\n                                                              >\n                                                                {markChargedOrSpike(\n                                                                  faction,\n                                                                  text\n                                                                )}\n                                                                {rule}\n                                                              </span>{\" \"}\n                                                              <span>\n                                                                -{\" \"}\n                                                                {toggledSections[\n                                                                  rule\n                                                                ]\n                                                                  ? \"Click to expand\"\n                                                                  : text}\n                                                              </span>\n                                                            </div>\n                                                          )\n                                                        )}\n                                                      </dl>\n                                                    </>\n                                                  )}\n                                                  {!coreStats.factionAttachment ? (\n                                                    <></>\n                                                  ) : (\n                                                    <div className=\"special-rules\">\n                                                      <span\n                                                        onClick={toggleSection(\n                                                          \"factionAttachment\"\n                                                        )}\n                                                      >\n                                                        <FactionImage\n                                                          faction={faction}\n                                                          height=\"18px\"\n                                                        />{\" \"}\n                                                        Attachment\n                                                      </span>\n                                                      <span>\n                                                        {\" \"}\n                                                        -{\" \"}\n                                                        {toggledSections[\n                                                          \"factionAttachment\"\n                                                        ]\n                                                          ? \"Click to expand\"\n                                                          : coreStats.factionAttachment\n                                                              .map(\n                                                                (attachment) =>\n                                                                  attachment.text\n                                                              )\n                                                              .join(\", \")}\n                                                      </span>\n                                                    </div>\n                                                  )}\n                                                  {!coreStats.wildCardAttachment ? (\n                                                    <></>\n                                                  ) : (\n                                                    Object.entries(\n                                                      coreStats.wildCardAttachment\n                                                    ).map(\n                                                      ([\n                                                        faction,\n                                                        attachments,\n                                                      ]) => (\n                                                        <div className=\"special-rules\">\n                                                          <span\n                                                            onClick={toggleSection(\n                                                              `wildCardAttachment ${faction}`\n                                                            )}\n                                                          >\n                                                            <FactionImage\n                                                              faction={\n                                                                factionsPageByText[\n                                                                  faction\n                                                                ]\n                                                              }\n                                                              height=\"18px\"\n                                                            />{\" \"}\n                                                            Attachment\n                                                          </span>\n                                                          <span>\n                                                            {\" \"}\n                                                            -{\" \"}\n                                                            {toggledSections[\n                                                              `wildCardAttachment ${faction}`\n                                                            ]\n                                                              ? \"Click to expand\"\n                                                              : attachments\n                                                                  .map(\n                                                                    (\n                                                                      attachment\n                                                                    ) =>\n                                                                      attachment.text\n                                                                  )\n                                                                  .join(\", \")}\n                                                          </span>\n                                                        </div>\n                                                      )\n                                                    )\n                                                  )}\n                                                </React.Fragment>\n                                              )\n                                            )\n                                          )}\n\n                                          {!details.release ? (\n                                            <></>\n                                          ) : (\n                                            <div className=\"special-rules\">\n                                              <span\n                                                onClick={toggleSection(\n                                                  \"release\"\n                                                )}\n                                              >\n                                                Release\n                                              </span>{\" \"}\n                                              <span>\n                                                -{\" \"}\n                                                {toggledSections[\"release\"]\n                                                  ? \"Click to expand\"\n                                                  : details.release}\n                                              </span>\n                                            </div>\n                                          )}\n                                          {!details.lore ? (\n                                            <></>\n                                          ) : (\n                                            <div className=\"special-rules\">\n                                              <span\n                                                onClick={toggleSection(\"lore\")}\n                                              >\n                                                Lore\n                                              </span>{\" \"}\n                                              <span>\n                                                -{\" \"}\n                                                {toggledSections[\"lore\"]\n                                                  ? \"Click to expand\"\n                                                  : details.lore}\n                                              </span>\n                                            </div>\n                                          )}\n                                          {!details.pow ? (\n                                            <></>\n                                          ) : (\n                                            <div className=\"special-rules\">\n                                              <span>Pow</span>{\" \"}\n                                              <span>- {details.pow.text}</span>\n                                            </div>\n                                          )}\n                                          {!details.effect ||\n                                          details.effect.length === 0 ? (\n                                            <></>\n                                          ) : (\n                                            details.effect.map(\n                                              (effect, index) => (\n                                                <p\n                                                  className=\"cypher-effect\"\n                                                  key={`cypher_effect_${listIndex}_${cardIndex}_${index}`}\n                                                >\n                                                  {effect}\n                                                </p>\n                                              )\n                                            )\n                                          )}\n                                        </div>\n                                      )}\n                                    </Card>\n                                  </div>\n                                )\n                              )}\n                            </div>\n\n                            {cards.length > 0 ? (\n                              <div className=\"footer\">\n                                <Badge\n                                  size=\"small\"\n                                  key=\"_badge\"\n                                  count={cards.length}\n                                  offset={[10, 5]}\n                                >\n                                  Card:\n                                </Badge>\n                                {Object.entries(\n                                  cards.reduce(\n                                    (acc, card) => ({\n                                      ...acc,\n                                      [card.type]: (acc[card.type] || 0) + 1,\n                                    }),\n                                    {}\n                                  )\n                                )\n                                  .sort()\n                                  .map(([type, count], i) => (\n                                    <Badge\n                                      size=\"small\"\n                                      key={`badge${i}`}\n                                      count={count}\n                                      offset={[10, 5]}\n                                    >\n                                      {type}:\n                                    </Badge>\n                                  ))}\n                              </div>\n                            ) : (\n                              <></>\n                            )}\n                          </div>\n                          {!editMode || listIndex !== lists.length - 1 ? (\n                            <></>\n                          ) : (\n                            <div\n                              key={`add_list_bottom${listIndex + 1}`}\n                              style={{\n                                color: \"white\",\n                                cursor: \"pointer\",\n                                textAlign: \"center\",\n                              }}\n                            >\n                              <span onClick={addEmptyList(listIndex + 1)}>\n                                <PlusSquareOutlined /> Add list\n                              </span>\n                            </div>\n                          )}\n                        </>\n                      </Col>\n                    ))}\n                  </Row>\n                </Layout>\n              </Content>\n            </>\n          )}\n\n          <div>\n            <Footer>\n              <div className=\"bookmark\">\n                <Layout>\n                  <Row>\n                    <Col xs={24} sm={24} md={18} lg={18} xl={16} xxl={16}>\n                      <input\n                        value={url}\n                        onChange={setUrl}\n                        onKeyDown={open}\n                        onClick={bookmark}\n                      />\n                    </Col>\n                  </Row>\n                </Layout>\n              </div>\n              <div className=\"copyright-notice\">\n                Images originating from the Privateer Press website are © 2001—\n                <>{new Date().getFullYear()}</> Privateer Press, Inc. All Rights\n                Reserved. Privateer Press, warcaster and their logos are\n                trademarks of Privateer Press, Inc. Images and trademarks used\n                without permission. This website is unofficial and is not\n                endorsed by Privateer Press.\n              </div>\n            </Footer>\n          </div>\n\n          {factionModels.map(([factionName, faction, models, cadreModels]) => (\n            <Drawer\n              key={`drawer_${faction}`}\n              visible={openDrawer === faction}\n              placement=\"right\"\n              onClose={setOpenDrawer}\n              width=\"80%\"\n              mask={false}\n              closeIcon={<MenuUnfoldOutlined />}\n            >\n              <Menu\n                id={`faction_${faction}`}\n                mode=\"inline\"\n                triggerSubMenuAction=\"click\"\n              >\n                <Menu.ItemGroup\n                  title={\n                    <Select\n                      defaultValue={0}\n                      onChange={(event) => updateTargetList(event)}\n                      options={lists.map(({ title, cards }, index) => ({\n                        value: index,\n                        label: `${index + 1} - ${\n                          title ||\n                          generateListNamePlaceholder(\n                            cards,\n                            factions,\n                            \"Name your list\"\n                          )\n                        }`,\n                      }))}\n                    />\n                  }\n                />\n                <Menu.ItemGroup\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        models.map((model) => model.page)\n                      )}\n                    >\n                      {factionName}\n                    </div>\n                  }\n                >\n                  {models.map(({ name, page, type, subtype }) => {\n                    const shortName = name.slice(0, 40);\n\n                    return (\n                      <Menu.Item key={faction + \":\" + page} className={faction}>\n                        <span onClick={menuItemClicked(page)}>\n                          <span className=\"card\">\n                            {shortName.length === name.length ? (\n                              shortName\n                            ) : (\n                              <Tooltip placement=\"top\" title={name}>\n                                {shortName}...\n                              </Tooltip>\n                            )}\n                          </span>\n                          <span className=\"types\">\n                            {subtype ? subtype : \"\"}\n                            {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                          </span>\n                        </span>\n                      </Menu.Item>\n                    );\n                  })}\n                </Menu.ItemGroup>\n                {!cadreModels ? (\n                  <></>\n                ) : (\n                  cadreModels.map(({ cadrePageId, cadreModels }) => (\n                    <Menu.ItemGroup\n                      key={`Cadre:${cadrePageId}`}\n                      title={\n                        <div\n                          onClick={allMenuItemsClicked(\n                            cadreModels.map((model) => model.page)\n                          )}\n                        >\n                          {cadres[cadrePageId]}\n                        </div>\n                      }\n                    >\n                      {cadreModels.map(({ name, page, type, subtype }) => {\n                        const shortName = name.slice(0, 40);\n\n                        return (\n                          <Menu.Item\n                            key={faction + \":\" + page + \":cadre:\" + cadrePageId}\n                            className={faction}\n                          >\n                            <span onClick={menuItemClicked(page)}>\n                              <span className=\"card\">\n                                {shortName.length === name.length ? (\n                                  shortName\n                                ) : (\n                                  <Tooltip placement=\"top\" title={name}>\n                                    {shortName}...\n                                  </Tooltip>\n                                )}\n                              </span>\n                              <span className=\"types\">\n                                {subtype ? subtype : \"\"}\n                                {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                              </span>\n                            </span>\n                          </Menu.Item>\n                        );\n                      })}\n                    </Menu.ItemGroup>\n                  ))\n                )}\n                <Menu.ItemGroup\n                  title={\n                    <div\n                      onClick={allMenuItemsClicked(\n                        (wildCardModels[faction] || []).map(\n                          (model) => model.page\n                        )\n                      )}\n                    >\n                      Wild Cards\n                    </div>\n                  }\n                >\n                  {(wildCardModels[faction] || [])\n                    .sort((w1, w2) => (w1.type < w2.type ? -1 : 1))\n                    .map(({ name, page, type, subtype }, j) => {\n                      const shortName = name.slice(0, 40);\n\n                      return (\n                        <Menu.Item key={faction + \":\" + page}>\n                          <span onClick={menuItemClicked(page)}>\n                            <span className=\"card\">\n                              {shortName.length === name.length ? (\n                                shortName\n                              ) : (\n                                <Tooltip placement=\"top\" title={name}>\n                                  {shortName}...\n                                </Tooltip>\n                              )}\n                            </span>\n                            <span className=\"types\">\n                              {subtype ? subtype : \"\"}\n                              {type ? (subtype ? \" \" : \"\") + type : \"\"}\n                            </span>\n                          </span>\n                        </Menu.Item>\n                      );\n                    })}\n                </Menu.ItemGroup>\n                {Object.entries(\n                  cypherCodecs\n                    .filter(\n                      (cypher) =>\n                        [factionName, \"Universal\"].indexOf(\n                          cypher.Faction.text\n                        ) !== -1\n                    )\n                    .reduce(\n                      (acc, cypher) => ({\n                        ...acc,\n                        [cypher.Faction.text]: [\n                          ...(acc[cypher.Faction.text] || []),\n                          cypher,\n                        ],\n                      }),\n                      {}\n                    )\n                )\n                  .sort(([a], [b]) =>\n                    a === \"Universal\" ? 1 : b === \"Universal\" ? -1 : 1\n                  )\n                  .map(([faction, cyphers]) => (\n                    <Menu.ItemGroup\n                      title={\n                        <div\n                          onClick={allMenuItemsClicked(\n                            cyphers\n                              .sort((c1, c2) =>\n                                c1.Type.text < c2.Type.text ? -1 : 1\n                              )\n                              .map(({ Cypher }) => Cypher.page)\n                          )}\n                        >\n                          {`${faction} Cyphers`}\n                        </div>\n                      }\n                      key={faction}\n                    >\n                      {cyphers\n                        .sort((c1, c2) =>\n                          c1.Type.text < c2.Type.text ? -1 : 1\n                        )\n                        .map(({ Cypher, Type }) => (\n                          <Menu.Item\n                            key={\":\" + Cypher.page}\n                            className={Type.text}\n                          >\n                            <span onClick={menuItemClicked(Cypher.page)}>\n                              <span className=\"card\">{Cypher.text}</span>\n                              <span className=\"types\">{Type.text}</span>\n                            </span>\n                          </Menu.Item>\n                        ))}\n                    </Menu.ItemGroup>\n                  ))}\n              </Menu>\n            </Drawer>\n          ))}\n        </Layout>\n      </Layout>\n    </div>\n  );\n}\n\nconst App = connect(\n  (state) => ({\n    initialized: AppSync.selectDone()(state),\n    factionModels: Object.entries(FactionModels.select()(state))\n      .sort()\n      .map(([faction, models]) => [\n        Factions.select()(state)[faction].text,\n        faction,\n        models\n          .map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          }))\n          .filter(\n            (model) =>\n              !Object.values(CadreModels.select()(state))\n                .flatMap((models) =>\n                  models.map((cadreModel) => cadreModel.title)\n                )\n                .includes(model.name)\n          ),\n        Object.entries(CadreModels.select()(state)).flatMap(\n          ([cadrePageId, cadreModels]) => {\n            const cadre = cadreModels.map((model) => model.title);\n            const allCadreModels = models\n              .filter((model) => cadre.includes(model.Name.text))\n              .map((model) => ({\n                name: model.Name.text,\n                page: model.Name.page,\n                type: model.Type.text,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n              }));\n\n            if (allCadreModels.length === cadreModels.length)\n              return [{ cadrePageId, cadreModels: allCadreModels }];\n\n            return [];\n          }\n        ),\n      ]),\n    wildCardModels: Object.fromEntries(\n      Object.entries(WildCardModels.select()(state))\n        .sort()\n        .map(([faction, models]) => [\n          faction,\n          models.map((model) => ({\n            name: model.Name.text,\n            page: model.Name.page,\n            type: model.Type.text,\n            ...(model.Subtype\n              ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n              : {}),\n          })),\n        ])\n    ),\n    cypherCodecs: CypherCodecs.select()(state),\n    lists: Lists.select()(state).map(({ title, cards }) => ({\n      title,\n      cards: cards.flatMap(\n        ({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId, hidden }) => {\n          const pageIdByPage = PageIds.select()(state);\n\n          const page =\n            Object.entries(pageIdByPage)\n              .filter(([_, id]) => id === pageId)\n              .map(([page, _]) => page)[0] || \"\";\n\n          const model = Object.entries(FactionModels.select()(state))\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const wildCard = Object.entries(WildCardModels.select()(state))\n            .flatMap(([faction, models]) =>\n              models.map((model) => ({ ...model, faction }))\n            )\n            .find(({ Name }) => Name.page === page);\n          const cypher = CypherCodecs.select()(state).find(\n            ({ Cypher }) => Cypher.page === page\n          );\n\n          if (model) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: model.Type.text,\n                title: model.Name.text,\n                page: model.Name.page,\n                pageId,\n                cortexIds,\n                warjackWeaponIds,\n                vehicleWeaponId,\n                faction: model.faction,\n                ...(model.Subtype\n                  ? { subtype: model.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                ...(!details\n                  ? {}\n                  : {\n                      details: {\n                        ...details,\n                        ...(!details.coreStats\n                          ? {}\n                          : {\n                              coreStats: details.coreStats.map((coreStats) => ({\n                                ...coreStats,\n                                ...(!coreStats.hardpoints\n                                  ? {}\n                                  : {\n                                      hardpointNames: parseHardpoints(\n                                        coreStats.hardpoints\n                                      ),\n                                    }),\n                                ...(!coreStats.cortexSelections\n                                  ? {}\n                                  : {\n                                      cortexSelections: Object.fromEntries(\n                                        Object.entries(\n                                          coreStats.cortexSelections\n                                        ).map(([cortex, advantages]) => [\n                                          cortex,\n                                          Object.fromEntries(\n                                            Object.entries(advantages).map(\n                                              ([\n                                                advantage,\n                                                { text, category },\n                                              ]) => [\n                                                advantage,\n                                                {\n                                                  text,\n                                                  categoryId:\n                                                    pageIdByPage[category],\n                                                },\n                                              ]\n                                            )\n                                          ),\n                                        ])\n                                      ),\n                                    }),\n                                ...(!coreStats.warjackWeaponSelections\n                                  ? {}\n                                  : {\n                                      warjackWeaponSelections:\n                                        Object.fromEntries(\n                                          Object.entries(\n                                            coreStats.warjackWeaponSelections\n                                          ).map(([page, selection]) => [\n                                            page.split(\"#\")[0],\n                                            {\n                                              ...selection,\n                                              pageId:\n                                                pageIdByPage[\n                                                  page.split(\"#\")[0]\n                                                ],\n                                            },\n                                          ])\n                                        ),\n                                    }),\n                                ...(!coreStats.vehicleWeaponSelection\n                                  ? {}\n                                  : {\n                                      vehicleWeaponSelection:\n                                        coreStats.vehicleWeaponSelection.map(\n                                          ({ text, page }) => ({\n                                            text,\n                                            page: page.split(\"#\")[0],\n                                            pageId:\n                                              pageIdByPage[page.split(\"#\")[0]],\n                                          })\n                                        ),\n                                    }),\n                              })),\n                            }),\n                      },\n                    }),\n              },\n            ];\n          }\n\n          if (wildCard) {\n            const details = Models.selectByPage(page)(state);\n            return [\n              {\n                card: \"model\",\n                hidden,\n                type: wildCard.Type.text,\n                title: wildCard.Name.text,\n                page: wildCard.Name.page,\n                pageId,\n                faction: \"Wild_Card\",\n                ...(wildCard.Subtype\n                  ? { subtype: wildCard.Subtype.map((_) => _.text).join(\" \") }\n                  : {}),\n                details,\n              },\n            ];\n          }\n\n          if (cypher) {\n            const details = Cyphers.selectByPage(page)(state);\n            return [\n              {\n                card: \"cypher\",\n                hidden,\n                type: cypher.Type.text,\n                title: cypher.Cypher.text,\n                page: cypher.Cypher.page,\n                pageId,\n                ...(cypher.Faction.text === \"Universal\"\n                  ? { faction: \"Universal\" }\n                  : { faction: cypher.Faction.page }),\n                details,\n              },\n            ];\n          }\n\n          return [];\n        }\n      ),\n    })),\n    url: Url.select()(state),\n    factions: Factions.select()(state),\n    factionsPageByText: Object.fromEntries(\n      Object.values(Factions.select()(state)).map(({ text, page }) => [\n        text,\n        page,\n      ])\n    ),\n    vehicleWeapons: VehicleWeapons.select()(state),\n    warjackWeapons: WarjackWeapons.select()(state),\n    cadres: CadreCategoryMembers.select()(state),\n    editMode: EditMode.select()(state),\n    toggledSections: ToggleSections.select()(state),\n  }),\n  (dispatch) => ({\n    toggleCard: (listIndex, cardIndex, pageId, card) => () =>\n      dispatch(Lists.toggleCard({ listIndex, cardIndex, pageId, card })),\n    toggleSection: (section) => () =>\n      dispatch(ToggleSections.toggle({ section })),\n    menuItemClicked: (page) => (event) => {\n      dispatch(MenuItemClicked({ page }));\n      event.stopPropagation();\n    },\n    allMenuItemsClicked: (pages) => (event) => {\n      pages.forEach((page) => dispatch(MenuItemClicked({ page })));\n      event.stopPropagation();\n    },\n    removeList: (listIndex) => () => dispatch(Lists.removeList({ listIndex })),\n    removeCard: (listIndex, cardIndex) => () =>\n      dispatch(\n        Lists.removeCard({\n          listIndex,\n          cardIndex,\n        })\n      ),\n    addEmptyList: (listIndex) => () =>\n      dispatch(Lists.addEmptyList({ listIndex })),\n    moveListBy: (listIndex, by) => () =>\n      dispatch(Lists.moveListBy({ listIndex, by })),\n    moveCardByOne: (listIndex, cardIndex, up) => () =>\n      dispatch(Lists.moveCard({ listIndex, cardIndex, up })),\n    setListTitle: (listIndex) => (event) =>\n      dispatch(Lists.setListTitle({ listIndex, title: event.target.value })),\n    setUrl: (event) => dispatch(Url.set({ url: event.target.value })),\n    bookmark: () => {\n      const bookmark = document.querySelector(\".bookmark input\");\n      if (bookmark) {\n        if (navigator.userAgent.match(/ipad|iphone/i)) {\n          const range = document.createRange();\n          range.selectNodeContents(bookmark);\n\n          const selection = window.getSelection();\n          selection.removeAllRanges();\n          selection.addRange(range);\n          bookmark.setSelectionRange(0, 999999);\n        } else {\n          bookmark.select();\n        }\n      }\n    },\n    open: (event) => {\n      if (event.key === \"Enter\") {\n        const url = document.querySelector(\".bookmark input\").value;\n        if (url) window.open(url, \"_self\");\n      }\n    },\n    setCardCortex:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardCortex({\n            listIndex,\n            cardIndex,\n            pageId,\n            cortexIds: label,\n          })\n        ),\n    setCardWarjackWeapons:\n      (listIndex, cardIndex, hardpointNameIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardWarjackWeapons({\n            listIndex,\n            cardIndex,\n            hardpointNameIndex,\n            pageId,\n            warjackWeaponId: label,\n          })\n        ),\n    setCardVehicleWeapon:\n      (listIndex, cardIndex, pageId) =>\n      (_, { label }) =>\n        dispatch(\n          Lists.setCardVehicleWeapon({\n            listIndex,\n            cardIndex,\n            pageId,\n            vehicleWeaponId: label,\n          })\n        ),\n    toggleEditMode: () => dispatch(EditMode.toggle()),\n    updateTargetList: (listIndex) => dispatch(ListIndex.set({ listIndex })),\n  })\n)(AppPresentation);\n\nexport default App;\n\nfunction generateListNamePlaceholder(cards, factionNames, defaultValue) {\n  const factions = cards.map((card) => card.faction);\n  if (factions.length === 0) return defaultValue;\n\n  const justFactions = factions.filter(\n    (faction) => [\"Universal\", \"Wild_Card\"].indexOf(faction) === -1\n  );\n  if (justFactions.length === 0) {\n    const justCyphers = factions.filter((faction) => faction === \"Universal\");\n    if (justCyphers.length === factions.length) return \"Universal Cyphers\";\n\n    return defaultValue;\n  }\n\n  const factionsPresent = justFactions.reduce(\n    (acc, faction) => ({ ...acc, [faction]: true }),\n    {}\n  );\n  if (Object.keys(factionsPresent).length > 1) return \"Several factions\";\n\n  const factionName = factionNames[Object.keys(factionsPresent)[0]].text;\n  if (factionName) {\n    const types = cards.map((card) => card.type);\n\n    const cyperTypes = [\"Fury\", \"Geometric\", \"Harmonic\", \"Overdrive\"];\n    const noCyphers = types.filter((type) => cyperTypes.indexOf(type) === -1);\n    if (noCyphers.length === types.length) return factionName + \" Models\";\n\n    const justCyphers = types.filter((type) => cyperTypes.indexOf(type) > -1);\n    if (justCyphers.length === types.length) return factionName + \" Cyphers\";\n\n    return factionName;\n  }\n\n  return defaultValue;\n}\n\nfunction cortexName(cortexSelections, cortexIds) {\n  return (Object.entries(cortexSelections).find(\n    ([cortex, advantages]) =>\n      Object.values(advantages)\n        .map((advantage) => advantage.categoryId)\n        .join(\"\") === (cortexIds || []).join(\"\")\n  ) || [undefined])[0];\n}\n\nfunction vehicleWeaponName(vehicleWeaponSelection, vehicleWeaponId) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n  if (!vehicleWeapon) return undefined;\n  return vehicleWeapon.text;\n}\n\nfunction vehicleWeaponName2(\n  faction,\n  vehicleWeapons,\n  vehicleWeaponSelection,\n  vehicleWeaponId,\n  toggleSection,\n  toggledSections\n) {\n  const vehicleWeapon = vehicleWeaponSelection.find(\n    ({ pageId }) => pageId === vehicleWeaponId\n  );\n\n  if (vehicleWeapon) {\n    const { page } = vehicleWeapon;\n    const weaponConfig = vehicleWeapons[page.split(\"#\")[0]];\n    if (weaponConfig) {\n      const { pointCost: cost } = weaponConfig;\n\n      return (\n        <>\n          {!weaponConfig ||\n          !weaponConfig.weapons ||\n          weaponConfig.weapons.length === 0 ? (\n            <></>\n          ) : (\n            weaponConfig.weapons.map((weapon, index) => (\n              <React.Fragment key={`vehicle_weapon_selection_number_${index}`}>\n                <div className=\"model-weapons\">\n                  <div>\n                    {weapon[\"Attack Type\"] === \"Melee\" ? (\n                      <img className=\"faction-melee\" alt=\" \" />\n                    ) : (\n                      <img className=\"faction-ranged\" alt=\" \" />\n                    )}\n                  </div>\n                  <div>\n                    <div>\n                      {weapon[\"Name\"]}\n                      {Object.entries(weapon.specialRules || {}).map(\n                        ([rule, text], index2) => (\n                          <WeaponQuality\n                            key={`vehicle_weapon_selection_number_${index}_rule_${index2}`}\n                            title={rule}\n                            text={text}\n                          />\n                        )\n                      )}\n                    </div>\n                    <div>\n                      <span className=\"cost\">Cost {cost}</span>{\" \"}\n                      {weapon[\"Damage Type\"].join\n                        ? weapon[\"Damage Type\"].join(\" \")\n                        : weapon[\"Damage Type\"]}\n                    </div>\n                  </div>\n                  <div>\n                    <div>RNG</div>\n                    <div>{weapon[\"Range\"]}</div>\n                  </div>\n                  <div>\n                    <div>POW</div>\n                    <div>{weapon[\"POW\"]}</div>\n                  </div>\n                </div>\n                {!weapon.specialRules ? (\n                  <></>\n                ) : (\n                  Object.entries(weapon.specialRules)\n                    .filter(([rule]) => !weaponQualities[rule])\n                    .map(([rule, text], ruleIndex) => (\n                      <div\n                        key={`vehicle_weapon_selection_number_${index}_${ruleIndex}`}\n                        className=\"model-weapons-special-rules\"\n                      >\n                        <span onClick={toggleSection(rule)}>\n                          {markChargedOrSpike(faction, text)}\n                          {rule}\n                        </span>{\" \"}\n                        <span>\n                          - {toggledSections[rule] ? \"Click to expand\" : text}\n                        </span>\n                      </div>\n                    ))\n                )}\n              </React.Fragment>\n            ))\n          )}\n          {!weaponConfig ||\n          !weaponConfig.specialRules ||\n          weaponConfig.specialRules.length === 0 ? (\n            <></>\n          ) : (\n            <>\n              {!weaponConfig.weapons || weaponConfig.weapons.length === 0 ? (\n                <div className=\"model-weapons-special-rules\">\n                  <span>Cost</span> <span>- {cost}</span>\n                </div>\n              ) : (\n                <></>\n              )}\n              {Object.entries(weaponConfig.specialRules)\n                .filter(([rule]) => !weaponQualities[rule])\n                .map(([rule, text], ruleIndex) => (\n                  <div\n                    key={`vehicle_weapon_selection_rules_number_${ruleIndex}`}\n                    className=\"model-weapons-special-rules\"\n                  >\n                    <span>\n                      {markChargedOrSpike(faction, text)}\n                      {rule}\n                    </span>{\" \"}\n                    <span>- {text}</span>\n                  </div>\n                ))}\n            </>\n          )}\n        </>\n      );\n    }\n    return undefined;\n  }\n  return undefined;\n}\n\nfunction markCharged(faction, text) {\n  return text.includes(\"charged\") ? (\n    <>\n      <Charged faction={faction} />{\" \"}\n    </>\n  ) : (\n    <></>\n  );\n}\n\nfunction markSpike(faction, text) {\n  return text.includes(\"spike\") ? (\n    <>\n      <Spike faction={faction} />{\" \"}\n    </>\n  ) : (\n    <></>\n  );\n}\n\nfunction markChargedOrSpike(faction, text) {\n  return (\n    <>\n      {markCharged(faction, text)}\n      {markSpike(faction, text)}\n    </>\n  );\n}\n\nfunction warjackWeaponNames(\n  faction,\n  warjackWeapons,\n  warjackWeaponSelections,\n  weaponId,\n  toggleSection,\n  toggledSections\n) {\n  const weapon = Object.values(warjackWeaponSelections).find(\n    ({ pageId }) => pageId === weaponId\n  );\n  if (weapon) {\n    const { cost, page } = weapon;\n    const weaponConfig = warjackWeapons[page.split(\"#\")[0]];\n\n    return (\n      <>\n        {!weaponConfig ||\n        !weaponConfig.weapons ||\n        weaponConfig.weapons.length === 0 ? (\n          <></>\n        ) : (\n          weaponConfig.weapons.map((weapon, index) => (\n            <React.Fragment key={`weapon_selection_number_${index}`}>\n              <div className=\"model-weapons\">\n                <div>\n                  {weapon[\"Attack Type\"] === \"Melee\" ? (\n                    <img className=\"faction-melee\" alt=\" \" />\n                  ) : (\n                    <img className=\"faction-ranged\" alt=\" \" />\n                  )}\n                </div>\n                <div>\n                  <div>\n                    {weapon[\"Name\"]}\n                    {Object.entries(weapon.specialRules || {}).map(\n                      ([rule, text], index2) => (\n                        <WeaponQuality\n                          key={`weapon_selection_number_${index}_rule_${index2}`}\n                          title={rule}\n                          text={text}\n                        />\n                      )\n                    )}\n                  </div>\n                  <div>\n                    <span className=\"cost\">Cost {cost}</span>{\" \"}\n                    {weapon[\"Damage Type\"].join\n                      ? weapon[\"Damage Type\"].join(\" \")\n                      : weapon[\"Damage Type\"]}\n                  </div>\n                </div>\n                <div>\n                  <div>RNG</div>\n                  <div>{weapon[\"Range\"]}</div>\n                </div>\n                <div>\n                  <div>POW</div>\n                  <div>{weapon[\"POW\"]}</div>\n                </div>\n              </div>\n              {!weapon.specialRules ? (\n                <></>\n              ) : (\n                <>\n                  <div className=\"card-icons\">\n                    {Object.entries(weapon.specialRules)\n                      .filter(([name]) => advantageImages[name])\n                      .map(([name, text], index) => (\n                        <AdvantageImage\n                          key={`advantage_${index}`}\n                          title={name}\n                          text={text}\n                        />\n                      ))}\n                  </div>\n                  {Object.entries(weapon.specialRules)\n                    .filter(\n                      ([name]) =>\n                        !advantageImages[name] && !weaponQualities[name]\n                    )\n                    .map(([rule, text], index) => {\n                      const textWithIcons = [\n                        ...Object.keys(weaponQualities).map((title) => ({\n                          title,\n                          Tag: WeaponQuality,\n                        })),\n                        ...Object.keys(advantageImages).map((title) => ({\n                          title,\n                          Tag: AdvantageImage,\n                        })),\n                      ].reduce(\n                        (texts, { title, Tag }) =>\n                          texts.flatMap((text, index2) => {\n                            if (typeof text !== \"string\") return text;\n\n                            return text\n                              .split(\n                                new RegExp(`(\\\\s.\\\\s${title}:\\\\s.+[\\\\n]*)`, \"g\")\n                              )\n                              .flatMap((string, index) => {\n                                if (\n                                  string.match(\n                                    new RegExp(`(${title}:\\\\s.+[\\\\n]*)`)\n                                  )\n                                ) {\n                                  const [, , description] = string.split(\n                                    new RegExp(`(${title}:\\\\s|\\\\n)`, \"g\")\n                                  );\n                                  return [\n                                    ` • ${title}: `,\n                                    <Tag\n                                      key={`${index}_${index2}`}\n                                      title={title}\n                                      text={description}\n                                      height=\"16px\"\n                                    />,\n                                    \"\\n\",\n                                  ];\n                                }\n\n                                return string;\n                              });\n                          }),\n                        [text]\n                      );\n\n                      return (\n                        <div\n                          key={`weapon_selection_number_${index}_${index}`}\n                          className=\"model-weapons-special-rules\"\n                        >\n                          <span onClick={toggleSection(rule)}>\n                            {markChargedOrSpike(faction, text)}\n                            {rule}\n                          </span>{\" \"}\n                          <span>\n                            -{\" \"}\n                            {toggledSections[rule]\n                              ? \"Click to expand\"\n                              : textWithIcons}\n                          </span>\n                        </div>\n                      );\n                    })}\n                </>\n              )}\n            </React.Fragment>\n          ))\n        )}\n        {!weaponConfig ||\n        !weaponConfig.specialRules ||\n        weaponConfig.specialRules.length === 0 ? (\n          <></>\n        ) : (\n          <>\n            {!weaponConfig.weapons || weaponConfig.weapons.length === 0 ? (\n              <div className=\"model-weapons-special-rules\">\n                <span>Cost</span> <span>- {cost}</span>\n              </div>\n            ) : (\n              <></>\n            )}\n            <div className=\"card-icons\">\n              {Object.entries(weaponConfig.specialRules)\n                .filter(([name]) => advantageImages[name])\n                .map(([name, text], index) => (\n                  <AdvantageImage\n                    key={`advantage_${index}`}\n                    title={name}\n                    text={text}\n                  />\n                ))}\n            </div>\n            {Object.entries(weaponConfig.specialRules)\n              .filter(([rule]) => !weaponQualities[rule])\n              .filter(([name]) => !advantageImages[name])\n              .map(([rule, text], ruleIndex) => (\n                <div\n                  key={`weapon_selection_rules_number_${ruleIndex}`}\n                  className=\"model-weapons-special-rules\"\n                >\n                  <span onClick={toggleSection(rule)}>\n                    {markChargedOrSpike(faction, text)}\n                    {rule}\n                  </span>{\" \"}\n                  <span>\n                    - {toggledSections[rule] ? \"Click to expand\" : text}\n                  </span>\n                </div>\n              ))}\n          </>\n        )}\n      </>\n    );\n  }\n  return undefined;\n}\n\nfunction warjackWeaponNamesSubtitle(warjackWeaponSelections, weaponIds) {\n  return weaponIds.flatMap((weaponId) => {\n    const weapon = Object.values(warjackWeaponSelections).find(\n      ({ pageId }) => pageId === weaponId\n    );\n    if (weapon) {\n      return [weapon.name];\n    }\n    return [];\n  });\n}\n\nfunction parseHardpoints(hardpoints) {\n  // Parses strings of the following type: \"3 : 2 Arm, 1 Back\"\n\n  const rHardpointCount = \"\\\\s*(\\\\d+)\\\\s*\";\n  const rHardpointGroup = \"\\\\s*(\\\\d+)\\\\s*(\\\\w+)\\\\s*\";\n\n  let results = null;\n  for (let n = 1; n <= 10; n++) {\n    const regexp = new RegExp(\n      `^${rHardpointCount}:${rHardpointGroup}${repeat(\n        `,${rHardpointGroup}`,\n        n - 1\n      )}$`\n    );\n    results = regexp.exec(hardpoints);\n    if (results !== null) {\n      break;\n    }\n  }\n\n  if (results === null) {\n    return undefined;\n  }\n\n  const hardpointCount = parseInt(results[1], 10);\n\n  const hardpointNames = [];\n  for (let n = 2; n < results.length; n += 2) {\n    const groupCount = parseInt(results[n], 10);\n    const groupName = results[n + 1];\n\n    for (let i = 1; i <= groupCount; i++) {\n      hardpointNames.push(groupName);\n    }\n  }\n\n  if (hardpointCount !== hardpointNames.length) {\n    console.error(\n      \"Hardpoints do not add up!\",\n      hardpoints,\n      hardpointCount,\n      hardpointNames\n    );\n  }\n\n  return hardpointNames;\n\n  function repeat(s, n) {\n    if (n === 0) return \"\";\n    return s + repeat(s, n - 1);\n  }\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APr2+QD3+fUA//36AP///wDR5OUAhrC/AHOOvQJyibsGbpC9BnCEtwV5or4CmMLKANfr7gD///sA/vzwAPz9+wAA9vn1APr6+QDp9PcApsTWAHicuwR4h7ILfnqxEIRzrBOIcKwUg3GtE3qBshBzkLgIfqXFAr7U4AD3+voA+/39AAD8+/gA6vT2AH2vxQBphLMHgHSxFZxhnCOwXY1BsmOSYrdikW64Xo5aqVuTNoxrpBx0fLQQYomtBKfH0wD8//0AAP3//wCmxdcAZoKxB4h2rBirXJA3tWiJi6aIldWZhJHzjoKK+5iJjeurfpHDuFyLbKFinCh6ebETZ5G5BM7j6gAA0ePlAHmevAR/dbEUqFqON51ngqt7gof/YXJ1/26Chf+NoaL/YXVz/2V8eP+EfoTxrFV+f6FnniVne7EOm7HKAQCGsL8BeIexC6FloCKeUXKMXWVp/4WWmv11fYT5gYuM/Nnb2/xfbG37i5Ga92yHh/9uW2TsrVOBW4xsqRd7nMIGAHKMvQOBe7AQq1WEQW5LYNc1RU/+VmJo+d7i4P7r7Oz/9/j4/ebo6P27vcP9NkZR+z1SVv+KSWamp2OfJnaJvwoAaYW1Boh5rxKfTHhjSDlN9DdTXf5mcnX76erp//////72+vr+/////ry/wP5RXmf7NE5Y/mI8U8+nXZQ5foC4DABrjLMHjneuEppJbW0wKjf7V213/sfJyvz39vf++Pn6/vv6+v728/P98O3v/qqttPw6TVn+UjFJ2KxZkj91hrgNAGyBtQaKdbYSo0x8WjQpOO0NIzb9JC49++bn5/3/////8/Ty/f////2iqq3+Dhgi+xItOv5bMkvFq1+SNHaBtwwAcqO8AnqBshCqW5U1VixCxAAYJf9ibHn4tbO3/rKytf/v7/D9nqGk/q60vP0uQE37BB0t/4U9Yo2jbKMgdI6+CQCVwccAb42zCJVtqB2hQm1sHxcq8ipFSP8MGCD7OD9J+6qvt/sIDhz6JjNC/Bo0Pv9FHjfQsleMRH9ytBWHnsYDANrq8QB8pccCcHysEapooSiTOGJ/JBAi6AAUIP8NIzP/JzVG/wUaKv8AESD/QxowzqdPdlmXcaseanexCae40AEA////AL7U4ABkhq8Ed3i0E6NtoiaqTH1bcC5Ro0seOM5FGjDWVSM6wn84Wo6sWItFmnGsHm90rQ12mLcC4O7wAAD7+vgA9/r6AKnF1QFlkbcDZXquDpBtrhesaJsnqWCQOatdlD2tX5Q0qGqlIIJvsxVnerMKeZm4Asfe5AL//v0AAPz9/AD9/fwA////AMvl6QCZsskBe5rBBnOJuwt9f7YNdoW3DXiAtgx0j70JhZ/EBKa60AHh7vAA/f/9APv9/QB7QyxSBgSw0AAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEEElEQVR42h2Ta0xTdxTA/y0diFBSQeIg6hQn02wBYYgjBhBUEmVhuMzpYJk6RBHa0tLbx720FErLq1BapHSKDyaZUyZ9Pygg5aFkwURdtumyZUP5oAy2ZCDUtvfx38Xz5ZwP53fOLyc5IEBSIBgKAgghCJEhMDnxE2jXOoFAaGMqFEPhcswdrsRG3xILvmd2tN4GY74Hb3ohxAFO4ICGAwBSJHj+bB7oDKOgVuJkNWLOKLXYxWlCXHEtiGdjs9gd1yCzcjCxeZ1EOMh0OB6B1ZVVQJD0AAgpMPd8ASA8G+BVWCI0Ymd8u8Cxwyhx5F2Su7821bn5RrmrRC9yZOqEns0qZJhTWTbAunZ5ApBrA1ZWV4Gh6y7gnbdG6BWetw2IdZ9JY9Yajf2/NndcfaVsMeFtht7FHv13U3rFALdT6tjVgjnjeBW3WPcmngLw4/0ntLadpRG7N3aKbPtaavt/QFWt8LSwGtY01MHu61dghUgIL0hRiDXplpol3yoNUvdOlGeL6dC6GECrtTFUmC1Khwwnyfk97aXn+LDV2E1KahuDmjYd8fvsM+JsZQ3e1t37GlE3wjPlon+0gtulnRLvJlQ8GA7EfEtYs2yUoxOY80q+rHr64eGj1ImzvODs3By1sLgI/SGcfDE/T3onp8mPCorw3OLjkH9affMi6kpGq53rgRLzhHdgQ7Ga81fK9ucfW8kvPkldEMrweRqmgwoEg9Ra9k1NU8e/KsezjhRTRYWVj/Ria5YKG4oGItQd0a4YjlWWm3jv7jmAn6qqoWZmHhB+v5+GQxRBENRrv5/8b2mZGrR7iP0fn6Byc079ZpTYc+VSFxug0hHawBvbUNlbsjPt0L/R29PIpD3Z+Mu/X5BrCoGAfy2Tt+6YKXZCEs5OyaQOHCy/3yV1ZjRinmgg4N9h1ks8HD3q2ZufXXKPuWE7PMOXBVxDHsru8sKl5Vfktb5+yu69S6bmFeERCSnw3Oeqju76sW2iKkckaG8eAKjIus6Ajm/BygzchC1py+k5B2FM/Dv43txCfNDmxiM4iaHd6TnE1tRsmJ5S+NiAmA+pMU+8SmkNA77RGSAWWphKZHiDSe7ZxT/ZpoxPfH8ecDbD2KQUuDsjF4YlJkFGzA6Y+sHRhxruzS8MipGtCNcceaNvnPHmMZyux6CizMpqlY3EfaPwJqurbpR+WsDrz0z95GFqcsGTrMzPJsuO1eoMYsvhNbiuxsquFdqZs38tAEASBPD7V8HVy2MMfsVAGMq1xHTJfJsuyUffuyi1ZJlklmyj1JHRo/Rt09DaCNeyHqPh6amfmfRtAcDph6DogqJwMDH+C2hrcTBQZDBcUm2PUmMj7HpkiN2EuqNFVc7IBqWT1Xfdx/jzj5e0OUEvJ8H/Q3cpHlin8poAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAED0lEQVR42h2Ta0ybdRTGD6XCuA5hZJtKRzDAZBkMgXIptIW+lDJWGiYppZUV6mq5toFQCrvAGGwT2WacE2NMFnSJJk6WjCGXaDIRZ+KiaJY5UeQ2kLaUAr1f3svfFz6cPF/O75yTPOcBHCfB5/MDQgj8PgpWxqfhmbodrMIqhuPUW0HbCkWQhVf5kvltGWO2sxuWRh/t9RJ0kX4vgJeGfSQC58IiWC68D+baaqa5VhzmqCuOcqmLYpz12AGbqiRmW41FGesk+9arpQzrna/Bs+MCkvADkBQJjqVlWJZWwZakMNih4sb6GjNft53jFK72V6iMVyq0m718ubM1j+3ScF+zqrlRG0V5zNWeD8FPEvQAtx8s3YM0zAu2a4sPOdo42U8HzwyOfHrlz09uXHUMDFzCP77dbxkfOjcz31fW7GzlHnWpT8YYyzDm1tgUwMp302BWVjE9dYIDOzQ81qu8197Xj87oDKi1+z10c/gLVNd2EZ3VX0LXrl62/XZe0uPScxIdUnbkklYXAE81ugBTXVkYoeUkTLadul7Z0IQGbg+R7d2XfX2Dt4iFxXmitlmHf/DRkEfbex011Cs25zu4CrxRcHCjRhIEVkwa6FaJoyztOYU6peSvE4JKSn62xbew9oKyWCzI6/eRq2YTOTXzmMwRivHsiir0mVr0pU+PJdnLsVCw0lbhDaLo2ZaCd3gY38mXKKn61gu40bJBu4Uoj89P7eqjmZ8pqVKNs0tlVKOk4He7npvrrikNh02ZLJjUCqN/1RS0vJGegyua2qgnT34h3G43RVtMEQRBedxu0mazUyMPx4mcMhklK06f2+ko5DkaSiLAwpEGeevF0XPNbHnWiWxrSHwGmZiWi5tMRnL3BK/XvavkV9/cpyIPJ+ChxwopFZb52GkQZm5Wi8PBLJcxtjTCKLuhMEvFz/gJYpKRprnDOzkxQY1+O4lsdgd5Z/gu9XDqezKNX44HvHIcDctzbiC9MN5aIQyB2a7zYFKK9/m1grgfGjOaWUcS7cfzJSgyloVn8crwkdEJPGT/YX/Km/lEbKoInUxP+cOq52FudVHsiloRCItj02CUVTG2VQUv+zsFRx8o2T1xcSwTRLNQxJEMlJRZjBiHUhDsfxWVpCXM/qvlVXs7BSyrmB+ydnEgYC8Ym5/fA5Mgj+lSi2LwLkHSnI6juFJ67O7pjORZUWrC89rsxB+Hpak3zYb8Yq8BY1mk/AhjuZzhef4PAEEHwuNywYveWwH/iQWBtkp2JGrCDlJdRcnOTl6u3YAVOLuEmZSBH+/UcGOt5fzQdbGCsX5/koHTy4HACUCUfy9UOw+mYJF+zzXl6aANiSjMUSOOcDaURlhlpeFbFYKQ5XdrmKv02e5nf8MuTOI++B9NGyAYlSH/2QAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APn69QD6+PoA///+APf//QDG09wAh6W8AHKKuwN1h7gGb4y9B3eCvgV5qcQBnsHLAN7z8QH///8A/Pb5APr6+QAA9fr2AP77+wDW6+8AjLfJAXaWvgVwjLsMY4zBEGKPwxNikcQTZYzDEmuOvA5yj74If6nFAsLb3QD3+fkA+fr6AAD///8AyeHjAGiduwNfhLkLYInEF1Sb0ilYp9FKY6vMaGKrz2xWqdRUV5zOMF6NyBpfhr8QYoi0A7LI1wD+//wAANvp7ACArMQCY4S3DGSVyx5Spc1IbKvDoYOjrN97lZb4dZOV+3ufp+h2qLu4WajKYl6byCZiicASapS5A87m6AAAi7O+AG2Otwljjs0aTqLNUWSYn85yf33/XWxx/4SIi/+Tl5n/ZWtu/253ev9tj5boTqG+cl+byyJifrYNmLTSAQBnjLEDa4zEEVCg1DZKhZm6X2xq/5KdmvlkbnL7nqir/cbO1P1bZ2z6jZua93B1e/9LdoHhUaLIUmOLxhd5nsIFAHKBtQpklcwXSZa4a0ReZfgvPUP9d4WN++nq6v7t8fL+9ff2/ufo6P6hr7L9NEJM/ERRXP9Eh6OaXZ7OI22QwAkAdIKxDV+f0x87fpuXMEVG/0RUYP2CiJP++/7+//////38/fz9/////qWutP5OW2P8PkRO/jFqesRUo9A1borCDAB1gLoOWqTXISp0j6QmMDn+gYaR/Nva3P319fX++fn6/vv6+v729fX96Ont/Z+krPs4QEj+J11qzVak0jpmkbkNAHCDtAxlnM4dOHuYixosOv8HGij9SlNb+/////7////++Pn2/f////2GjpL+CBgh/BQqM/4oYXq7W6PUMHCHvgwAZY6yCGaUyhVLl71YETdH7AkYKP+HkpX4qKyt/cfHyP/h4uT9n6Cm/qWvtvwjMUD8CCI2/jqEp4Rmmc4ebJXDCQBemrUDY4y6Dl6i1SkucImWDR8n/zxBTP8ABxr6YWdv/JWbofsABhP6NDpH/RslNf8bTWrDVKbQPmaFuhSGoMcDAJfBzgFtlr0GaYzJF1ukzTgoaYGgBhUr9gYMHv8gJS7/JjA6/wURH/8EEB3/Gkxhw0yizFBsltMdZX20Cam70QAA8vv7AJe4zwFcfrEIaY/IF1uk2S5Bj7JuI15vsRpDVNIZPVjVHlRvvTSBnIRVpNE9ZpjTHGN4uAyDnb4B5PLxAAD++/wA5ezuAIOzxgBeibsFY4G7EWOXzhpcpNYqX5/TO1uh0TxapdExYZzRHmSEwRNofbUJfZ25ANHi5AD///8AAPX5+wD9/f4A8Pr6ALvR3QCIq8cCc5a+CHGLvwprjcENZ5DBDW2JvwxwlMIIhqLDArG80gHn8fMA/f3+APv7/QAlXTSQL9Q7UgAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APr5+AD2+PkA////APr/+QDC2OIAdKfIAGWLwwJ2h8QGbofCBm+ExAVfmsMCfrHGAL/e5AD///8A//n5APb9/AAA9vn3APz88wDb7vEAhbfVAGyTyAR4h7sLgoGyEI14qROPdaMUjXmsE36EuBBvib8IZ5jOAqvO4gDw+fAA/Pz9AAD+/v0A3PDyAFuh0QBifb8Hf3qvFaFsmCO4aopBuXGNYr5viW69bIlatWaQNpZzoxx1frgQXH+9BJa72AD+//wAAPT8+QCIuNYAYX3AB5h8rhi2bIc3unWIi6aIk9WSiJHzjoiQ+5aLjeuugo3DuG2GbKpykCiGfbQTXYbEBLLd6gAAxNrhAG2UwwR9fKwUtmiLN6Rpd6t8hYr/cn+G/2p7f/9qeXz/bHp6/3CDg/+DgYbxq2R5f6txnSVvd7UOgabMAQB1p8gBdoe4C6VxnyKeWnKMcHl9/1Rra/1SYGb5VWFk/FxmavxaaXD7W2Nr91lqa/9yY2rsrWF9W5N2pxdplcIGAGWKwwOEgrcQtmWLQWFJVNdYcHD+k52i+TtKUv6Yn6P/cHyE/TBCT/1MVF79SlRZ+z9VWf+GUmCmrXCZJmuIwAoAcoO+BpN+rhKjWndjQkFL9CI6QP6lqKr7z9PW//////6vtbj+jJac/nB7gv4oNkT7MkdV/mNCU8+xaZE5hIC5DABrg70HlX6mEp9Vbm0yMkb7Fio7/lNbYfz//v/+5ubm/vL09f7////9wsfN/hwtPvweN0X+WzdM2LJnjD+AgroNAG6AxAaQgLASo1t4Wi4rPO0PLD/9HjRF+11nb/1MVFr/7fL1/aalpv2ssLL+XWhy+wEhLP5bOUzFs2iTNHqCtwwAYJjFAnyEuhC2aJQ1VyxCxAMkMf8UKj74Bxco/g8iMf9YYmz9Fh4n/igzPv1ocnv7DSEv/4JFWY2udqMgYIvICQB7sMUAa4e9CKF4qh2gUW1sHBwq8gIfK/8VJTb7ESQ2+wYWJPsSIjT6Cx40/AYbJv9PLELQsGWFRId5qBV8l8QDALjc4QBmmMsCeX23EbF2lyiQSGJ/Khsn6AYVJP8FGCz/BR0v/wQbJ/8LFyX/RiQ2zqxXd1mhe6geanqxCZ2zzgEA////AKnQ4QBefr0EiHuxE6x3niapWnNbbjZJo0slO85NIjjWUio+woRBU463ZYNFoHunHnJ2qw1nksEC1uv0AAD7+/oA9fnyAJS71gFWisMDbnWyDpd4phevdZsnsGqSObJoij2ybJg0rXajIIl4qRVpe7EKZZLEArrX4gL//vkAAPn8/AD9/f0A/f/9ALTb7ACCpM0Ba5HFBmmEwAt8gbkNfYS4DX6AuwxjiMYJdpjFBJqzzwHX6vMA/f76APv7+wDj3Ax+yZru6gAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEFElEQVR42h1Ta1ATZxT9EiJPYZAAQqfBBwOmtFKVACK1DiLTjjK0FDoI2OoYRBISMCa77OZNSIkJ4ZEAQaUqUxmlUCDkyavhoaU/7Cgz1sdMp3Xa/mix7Y9WIpDN7teFX/f8OOfcO/feA9ZJCgQCAQAhBEQwAO4tPAZt7W4gkUwwNcrpUBXuDW3GfNtkl75mmtqGgW/uwRYXQoLmEwBsBNYApEjw24uXoMsyCxSIh6WTO6N0TZ5Yg9TNNknd8QbUw1bjjlgMHQtHJaNMp/MR8K/6QZCkDSAkwe+/rgBE5AANdWNhesSRYJJMpPainoI+tfN8j3a8oVfpruqUenJMUu+bOtlUrJA/zLp5fQGQmwarfj+wWme3xBaVO8mCjuf2GEbbLJbBJ0Zz/yu9uYcwdl79q6f9zr1u1Yios8nBvSJ3scV1Q6z7i88A+H7pKVCgLpYedcZ3IRO5OuzmCNZqho1aDaxXyGE9jsEGXA6R5laobLX+24oOaCyYJw0XT8SYTW4GMJmdDB3ujuqQeffi9d1mEa6DpwUXyfJzNRtlZwXB0xekwWqBlKioFa1VChtgrRD/29Q4VN2JTu3EZaOh9La/CTHg07GdspGC4lL+s3NCCXX1xuDGeydLqWu3BuFllYHMPF5MfvhpNXmyrJooLD8DxZ/r79gwT7qi0RUJlIrJ0A58Jk4r6OfnH69a5eYUUoPD48Tyk+f0tSDlmJym2m1fUlKlnuLmFhIHPyihSopFj7oQe16L3Lsd4KgnrEs+E6e8YBPvzykh2O8coUrP8IOb4pWVFcq/tk7RmFz6YZniZB4NpuQUUMeLap93I45jStQVDVTIdKhRMRv3haC/Kj2z8J/4jHwy/WABcfaimDxVVgVfrW2QQ3eHyNEJF/WZUEow9rxNnSgSfteLunmtOD2BTDzIbEZdsbYmR/axIxX3Y1Lehcnc/PWwZC61Y28WrKwRk4mcdIrLe58UIioiZhcP8st07X3a+d2o0BkB2ox3gVJiD+/GfByc3yVK2pX1XzjnLZiw7zDBTsslIhLTiLhUXiAyJSsYmbQH5h3+ZLldOnZCj08l6NT2EOD79gFALtmZGtnMjj6llyuuMGo4qYf+DEnkwLDkNBiVnAG3vUHXxAx46MCphzrh7UqrejZFWj8W8dXAPGMrGC73Mqg7b2cZsRn2NdVUeotgoLq0qPZ29oGPH/L2lz7Nzy5frPmoqcMiGy3aFKsv26MVEgfzxS8vASCDQfD6tR/cuO5jNNQNh+Ci8RgrNrezXzWzz4qN5/Wg9qO2JhfPpvHt1ss9CTLRWKScFi8tPmZu5ggQdCAoGlAUARbmfwSmK07G5odhjY6oFvl0tBrxRhuwye0yoTtCq3WwBm7NMX7+6Q968iDdnAT/A22QCVwQ8htxAAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEGElEQVR42h2TaUzadxjHH1BRqzZaaum66XpMPGKNCsisiCBQLQM8QCkgOA9UULStdw1qM9rOVZt0S5ulWeqS7ujadGlnZub2oml3JFs212b2MqlunohgKYIcf/7/37AvnuR58Tzf5/xAMEBAwOcHhBBgPgQL39+Df/Rd4CipJr8qL6O4VGrKOr88wqZRkv8YMMPcxL3XscGQ4QEfQMCPQQBHsDn3AuzmEbDVKsOtdZIYd50w3t0koLoMwt3OBhHV2Vgav1pfHrWiriZvXLsJXqcH8GAAAEc4bP47D/PKatgo40W667mJ3jbGoc2+fP6SRVr/33lZu32Yp/Z0svK2mjlvOfTceFvxkfDFoUuhwsGQgCcA64MXYKOcF+lqE+51dxawH43qLty8Mvz48sWRzbGxc9jlS5b1yU8Gfn5uEbe5T3LTtvRi6opYEL4x8SPAwtQDWNOpwrfqBLtdnRz2HXPNre4PR5Bx2IKaBwZRc/8ZZOg7i9oHR9EH58+8+mtANuTpKkhxVeXtnG/vIMGM/iRpe2asg3NwskM82jIwhFTNJlxep/cr3q8LqpqMQa2xFdM0Gr1ywwnU0a6zz3ZxNMFWAc2mLaOAXSQPc4cW5Ohh8hvloqfK1i7i02vX/RyxnLg6/gU6ZbbgWcUS/FiVDn9PocI4CjW62lD8VaCbS3dJS3aAXVpJCRjEu6ZNhQ2lApE7hc0jvvzmNvbo8dPQtRDx3Q8/EWNXPiM6zRYinS3AGAIlYajg/L3Ry8n3aKWx4DheFYm3Hdv1e8sRU+67fCz+MJeo0DQFt5Ota1bC4/URIR//7c+HRFIWN/gms5TQihnPXnbyi9wGaRxYeWKKN9TBs/ZcdVYOy5GQwccPsIqwmhYTLpFr0KbXj9/4+gZ+++4EUWs4hUFyLqEvZf/q6REzHUpxLNhUGrJTXxrv6ylgaYsO/xKRxET7MvJ9kW+kEgkHc5GqoQ1PTKIT6cxC3NhlxmKTs9H4ccYY6hHsX5cfjYbp/kFYqZVEBU4UJd03sNrePkB3kfflokQ6G6OmsLHoPakY9RAjEJOcGyTRMlElJ/vhWneR0NvET1zQa8PgxeR9WFYryY6GwgSsV5h2R8cYSnknxQo0OorYk4OiaNkI9mahCFoakuRkTM+2clS+PlGyQ8aPXjKPkF6D4fj8FlhD77nZWEL19RfTZ0z5mrMlGdcVjMxpKSv9SW0e/cG4IvOirYcn8veKku3VvLhVmZq89WQWIBgCwufxwOLwx6QliSDspSJvJ2EU0NBpYaq7j5vv7BEWuk+LmKiXt9/dzE10yIp2rEo15OVvp8gYIkICWBAIIgA4gYPz7hTMmTpIy7oKyrqsJMallcV5DEfjHNWS2I3K4uj5pprwRfNHpK2Z54Bt44z54X99uP/jai+vaQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAEG0lEQVR42gEQBO/7APv69gD69/kA///7APf//ADG090AiaPDAHCLvAN3hbgGd4i8B3iCuQV2qsQBn8DKAN7z8QH///8A/Pb5APr6+QAA9vr3AP37+gDU7O4Ai7jHAXaXvgVzib8MZIzBEGCQxBNikcMTZ4y/EmuOvQ5vkb0IfqnFAsLb3wD3+foA+fr8AAD///8AyuDjAGmdvANehLoLX4rDF1Oc0SlUqc9KYKvOaGGrzWxUqtFUVJ3QMFyOxxpfhrwQY4ixA7LI1QD+//sAANnq7ACArMUCZIO5DGOUzB5UqNBIaqzBoX2hpt97lZj4eZOX+3eeo+hzqb24XKnMYl+bySZiiMESaZS6A87m6gAAhrW+AGmQtgljj80aUaLMUWOTm857g4T/cnmB/3F3ff9reXn/cXd5/3p+h/9rkpjoTqO+cmCczCJhfrYNmLPSAQBnjbIDa4zCEU+gzjZQiZm6a3h4/1ViZ/lXYWj7U2Jn/VdqcP1Xam36V2hq911lav9Pe4ThUKHHUmOMxBd5n8EFAHWAuQpllM0XS5i5azpSWfh6gYz9fYuO+0FQUv6mrbP+W2dx/jVESf5HV179SVRf/ERRWv9BhKGaXJ7OI2yQvwkAboK4DWCe0R9BfqCXKTtE/zpLVv29wcb+0dbX//////2Zn6T9lZ2h/l9qdf4pO0n8OUFM/jFqeMRTotA1borDDABxgLUOX6HTITF0kKQrMz3+ESg2/IGKk/3////+5OLh/vr5+f7////9p621/RgpOPsoMz7+LWFwzVSi0jpmkbwNAHKBsQxgn9AdO3mZixorOf8PKDj9OkZS+1ZgZP5manH++fr6/ZSYmv2ws7n+TFhi/AgeJ/4qYn67WaLVMHCHwAwAbYmxCGeTyRVMl79YEzZM7BQhM/8UKDb4AhUi/SAuPv9YYmv9BRId/jxDTvxjanT8BiAy/jeDpYRmmcwebJTCCQBembQDZ4m+Dl2h1ykyc42WDBYj/xIbL/8UKDr6DyI0/AYYKPsQJjn6Dhsq/Q8WI/8iVG/DUaTMPmaEuRSGoMcDAJXCzwFslb0GaYzIF1ilzzgsaYagEB4w9goSIP8MFiP/DBgp/wkUKf8JGin/Gk1lw0qfy1Bsl9QdZX2zCam70QAA8vv7AJa5zQFbfrAIao7LF1mk3C5Ajq1uKFpusSBEVdIhQlnVIE5tvTN+nYRWpc89Z5fRHGN4uAyDnb4B5PLxAAD++vsA5O3uAIOzxgBfiL0FY4G9EWOXzRpepNMqW6LOO1mizDxbo9IxYJvRHmeFuxNqfrMJfZ26ANHi5AD///8AAPP5+QD++/0A8Pr7ALrS3wCLqcYCdJa+CHGLvwprjcMNaJDCDW6Jugxulb0IiKHFArK71AHn8vMA/f7+APv7/QBXjxPRmZifdgAAAABJRU5ErkJggg==\"","import { StateShard } from \"../utils\";\nimport { put } from \"redux-saga/effects\";\n\nconst Requests = StateShard(\n  \"Requests\",\n  init,\n  { cache, expire, fetch, fetched },\n  {\n    parsePage,\n    queryCadreModels,\n    queryCadres,\n    queryRevisions,\n    queryPageIds,\n  },\n  {\n    selectCachedRequestsByPageIds,\n    selectCachedParsedPageIds,\n    selectCachedUrl,\n    selectPending,\n  }\n);\n\nexport { Requests };\n\nfunction init(state) {\n  if (!state.io) {\n    state.io = {};\n  }\n\n  state.io.requests = { cached: {}, pending: [] };\n}\n\n// Actions\n\nfunction cache(state, { url, data, queryParams }) {\n  const cached = selectCached(state);\n\n  cached[url] = { data, queryParams };\n}\n\nfunction expire(state, { url }) {\n  const cached = selectCached(state);\n\n  delete cached[url];\n}\n\nfunction fetch(state, params) {\n  const pending = selectPending(state);\n\n  if (!pending.find((request) => request.url === params.url)) {\n    pending.push(params);\n  }\n}\n\nfunction fetched(state, { url }) {\n  const pending = selectPending(state);\n\n  const index = pending.findIndex((request) => request.url === url);\n  if (index > -1) {\n    pending.splice(index, 1);\n  }\n}\n\n// Action Creators\n\nfunction* parsePage({ page, parserName }) {\n  const queryParams = { action: \"parse\", page };\n\n  yield put(\n    Requests.fetch({\n      desc: \"parsePage\",\n      parserName,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadreModels({ pageId }) {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmpageid: pageId,\n    cmtype: \"page\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadreModels\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryCadres() {\n  const queryParams = {\n    action: \"query\",\n    list: \"categorymembers\",\n    cmtitle: \"Category:Cadre\",\n    cmtype: \"subcat\",\n    cmlimit: \"max\",\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryCadres\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryRevisions({ pageIds }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"revisions\",\n    pageids: pageIds.join(\"|\"),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryRevisions\",\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\nfunction* queryPageIds({ pages }) {\n  const queryParams = {\n    action: \"query\",\n    prop: \"pageprops\",\n    titles: encodeURIComponent(pages.map((_) => _.text).join(\"|\")),\n  };\n\n  yield put(\n    Requests.fetch({\n      desc: \"queryPageIds\",\n      pages,\n      queryParams,\n      url: jsonApiRequest(queryParams),\n    })\n  );\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.io.requests;\n}\n\nfunction selectCached(state) {\n  const requests = select(state);\n  return requests.cached;\n}\n\nfunction selectCachedUrl(state, url) {\n  const cached = selectCached(state);\n  return cached[url];\n}\n\nfunction selectCachedRequestsByPageIds(state, pageIds) {\n  const cached = selectCached(state);\n  return Object.fromEntries(\n    Object.entries(cached).filter(\n      ([key, { data }]) =>\n        data && data.parse && pageIds.includes(data.parse.pageid)\n    )\n  );\n}\n\nfunction selectCachedParsedPageIds(state) {\n  const cached = selectCached(state);\n  return Object.values(cached)\n    .filter(({ data }) => data && data.parse)\n    .map(({ data }) => data.parse.pageid);\n}\n\nfunction selectPending(state) {\n  const requests = select(state);\n  return requests.pending;\n}\n\n// Utils\n\nfunction jsonApiRequest(queryParams) {\n  const jsonFormat = {\n    formatversion: 2,\n    format: \"json\",\n  };\n  const params = { ...queryParams, ...jsonFormat };\n\n  const queryString = Object.entries(params)\n    .map((keyValue) => keyValue.join(\"=\"))\n    .join(\"&\");\n\n  return \"https://privateerpress.wiki/api.php?\" + queryString;\n}\n","import { StateShard } from \"./utils\";\n\nconst ParserNames = StateShard(\n  \"ParserNames\",\n  init,\n  { setForPage },\n  {},\n  { selectByPage }\n);\n\nexport { ParserNames };\n\nfunction init(state) {\n  if (!state.data) {\n    state.data = {};\n  }\n\n  state.data.parserNames = {};\n}\n\n// Actions\n\nfunction setForPage(state, { page, parserName }) {\n  const parserNames = select(state);\n  parserNames[page] = parserName;\n}\n\n// Selectors\n\nfunction select(state) {\n  return state.data.parserNames;\n}\n\nfunction selectByPage(state, page) {\n  const parserNames = select(state);\n  return parserNames[page];\n}\n","import { put, take } from \"redux-saga/effects\";\n\nimport { Requests } from \"../../state/io/Requests\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* cacheParserNames() {\n  while (true) {\n    const action = yield take(Requests.fetch().type);\n    const { payload } = action;\n    const { desc, queryParams, parserName } = payload;\n\n    if (desc !== \"parsePage\") {\n      continue;\n    }\n\n    const page = queryParams.page;\n\n    if (!page || !parserName) {\n      console.error(\"Could not cache parser!\", { page, parserName }, action);\n      continue;\n    }\n\n    yield put(ParserNames.setForPage({ page, parserName }));\n  }\n}\n\nexport { cacheParserNames };\n","const jsonp = (url) => {\n  return new Promise(function (resolve, reject) {\n    const callbackName = \"jsonp_callback_\" + Math.round(100000 * Math.random());\n    window[callbackName] = function (data) {\n      delete window[callbackName];\n      document.body.removeChild(script);\n      resolve(data);\n    };\n\n    const script = document.createElement(\"script\");\n    script.src =\n      url + (url.indexOf(\"?\") >= 0 ? \"&\" : \"?\") + \"callback=\" + callbackName;\n    document.body.appendChild(script);\n  });\n};\n\nexport { jsonp };\n","/*\nThese sagas fetch and cache wiki pages.\n\nThe wiki's JSONP API is used to fetch page contents. Since we want to be\npolite, we only call the API every two seconds. This throttle is implemented in\nfetchWikiPage through an actionChannel and a call to delay.\n*/\n\nimport {\n  actionChannel,\n  call,\n  delay,\n  put,\n  select,\n  take,\n} from \"redux-saga/effects\";\nimport { FetchedWikiPage, FetchedWikiPageRevisions } from \"../../../messages\";\nimport { jsonp } from \"../jsonp\";\n\nimport { Requests } from \"../../../state/io/Requests\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { CadreModels } from \"../../../state/CadreModels\";\nimport { PageIds } from \"../../../state/PageIds\";\n\nfunction* fetchWikiPage() {\n  const wikiPageChannel = yield actionChannel(Requests.fetch().type);\n\n  while (true) {\n    const action = yield take(wikiPageChannel);\n    const { payload } = action;\n    const { desc, parserName, queryParams, url } = payload;\n\n    let request = yield select(Requests.selectCachedUrl(url));\n    let wait = false;\n    if (!request) {\n      const data = yield call(jsonp, url);\n      request = { data, queryParams };\n      wait = true;\n      yield put(Requests.cache({ url, data, queryParams }));\n    }\n    yield put(Requests.fetched({ url }));\n\n    const data = request.data;\n\n    if (desc === \"queryRevisions\") {\n      const pageRevisions = data.query.pages;\n\n      yield put(FetchedWikiPageRevisions({ pageRevisions }));\n    }\n\n    if (desc === \"queryCadres\") {\n      const categorymembers = data.query.categorymembers;\n      if (categorymembers) {\n        const cadreCategoryMembers = Object.fromEntries(\n          categorymembers.map((member) => [\n            member.pageid,\n            member.title.replace(/^Category:/, \"\"),\n          ])\n        );\n\n        yield put(CadreCategoryMembers.set({ cadreCategoryMembers }));\n      }\n    }\n\n    if (desc === \"queryCadreModels\") {\n      const { cmpageid: cadrePageId } = queryParams;\n\n      const categoryMembers = data.query.categorymembers;\n      if (categoryMembers) {\n        const cadreModels = categoryMembers.map(({ pageid, title }) => ({\n          pageId: pageid,\n          title,\n        }));\n\n        yield put(CadreModels.setForCadrePageId({ cadrePageId, cadreModels }));\n      }\n    }\n\n    if (desc === \"parsePage\") {\n      const { page } = queryParams;\n\n      if (!page) {\n        console.error(\"No page to fetch!\", action);\n        continue;\n      }\n\n      yield put(FetchedWikiPage({ page, data: data.parse, parserName }));\n    }\n\n    if (desc === \"queryPageIds\") {\n      const { pages } = payload;\n\n      const titleToPageId = Object.fromEntries(\n        data.query.pages.map(({ title, pageid }) => [title, pageid])\n      );\n\n      const pageIdByTitle = Object.fromEntries(\n        pages.map(({ text, page }) => [page.split(\"#\")[0], titleToPageId[text]])\n      );\n\n      yield put(PageIds.addPages({ pageIdByTitle }));\n    }\n\n    if (wait) {\n      const twoSecondsInMs = 2 * 1000;\n      yield delay(twoSecondsInMs);\n    }\n  }\n}\n\nexport { fetchWikiPage };\n","/*\nThese sagas make sure, cached wiki pages stay up-to-date.\n\nEach app reload triggers a RefreshWikiPages action, that starts the cache\nupdate process. The refreshWikiPages saga bulk loads revision data for all\ncached pages from the wiki API. If a page cannot be found (probably because it\nwas deleted from the wiki), it is removed from the cache. If revision\ninformation is found, it is compared with the cached revision of the page. If\nthe loaded revision is higher, the page is removed and fetched again. If the\ncached revision is higher or equal, the page is not refreshed and remains\ncached.\n*/\n\nimport { FetchedWikiPageRevisions, RefreshWikiPages } from \"../../../messages\";\nimport { all, put, take, select } from \"redux-saga/effects\";\n\nimport { Requests } from \"../../../state/io/Requests\";\nimport { ParserNames } from \"../../../state/ParserNames\";\n\nfunction* updateCache() {\n  yield all([refreshWikiPages(), refreshOutdatedWikiPages()]);\n}\n\nexport { updateCache };\n\nfunction* refreshWikiPages() {\n  yield take(RefreshWikiPages().type);\n  const parsedPageIds = yield select(Requests.selectCachedParsedPageIds());\n\n  const queryLength = 50;\n  for (let i = 0; i < parsedPageIds.length; i += queryLength) {\n    const pageIds = parsedPageIds.slice(i, i + queryLength);\n\n    yield* Requests.queryRevisions({ pageIds });\n  }\n}\n\nfunction* refreshOutdatedWikiPages() {\n  while (true) {\n    const { payload } = yield take(FetchedWikiPageRevisions().type);\n    const { pageRevisions } = payload;\n    const revInfoByPageId = Object.fromEntries(\n      pageRevisions.map((revision) => [\n        revision.pageid,\n        revision.missing\n          ? { missing: revision.missing }\n          : {\n              revid: Math.max(\n                ...revision.revisions.map((revision) => revision.revid)\n              ),\n            },\n      ])\n    );\n    const pageIds = pageRevisions.map((revision) => revision.pageid);\n\n    const requests = yield select(\n      Requests.selectCachedRequestsByPageIds(pageIds)\n    );\n\n    for (const [url, { data, queryParams }] of Object.entries(requests)) {\n      const { page } = queryParams;\n      const { parse } = data;\n\n      const revInfo = revInfoByPageId[parse.pageid];\n      if (revInfo.missing) {\n        yield put(Requests.expire({ url }));\n      } else if (parse.revid < revInfo.revid) {\n        yield put(Requests.expire({ url }));\n        const parserName = yield select(ParserNames.selectByPage(page));\n\n        yield* Requests.parsePage({ page, parserName });\n      }\n    }\n  }\n}\n","function partitionBy(slice, array) {\n  var arrays = [];\n\n  for (var i = 0; i < array.length; i += slice) {\n    arrays[arrays.length] = array.slice(i, i + slice);\n  }\n\n  return arrays;\n}\n\nexport { partitionBy };\n","import { all, put, take, select } from \"redux-saga/effects\";\n\nimport { AppSync } from \"../../../state/AppSync\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\nimport { FactionModels } from \"../../../state/FactionModels\";\nimport { Factions } from \"../../../state/Factions\";\nimport { PageIds } from \"../../../state/PageIds\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchPageIds() {\n  const cachedPageIds = yield select(PageIds.select());\n\n  if (Object.keys(cachedPageIds).length === 0) {\n    const [factionsSet] = yield all([\n      take(Factions.set().type),\n      take(CypherCodecs.set().type),\n      take(WildCardModels.set().type),\n    ]);\n\n    const factions = Object.keys(factionsSet.payload.factions);\n\n    yield all(\n      factions.map((faction) =>\n        take(\n          (action) =>\n            action.type === FactionModels.setForPage().type &&\n            action.payload.page === faction\n        )\n      )\n    );\n\n    const factionModelPages = Object.values(\n      yield select(FactionModels.select())\n    )\n      .flat()\n      .map((_) => _.Name);\n\n    const wildCardPages = Object.values(yield select(WildCardModels.select()))\n      .flat()\n      .map((_) => _.Name)\n      .sort(({ text, page }) => [text, page])\n      .filter(\n        ({ text, page }, index, cards) =>\n          !index ||\n          (text !== cards[index - 1].text && page !== cards[index - 1].page)\n      );\n\n    const cypherPages = (yield select(CypherCodecs.select())).map(\n      (_) => _.Cypher\n    );\n\n    const pages = [...factionModelPages, ...wildCardPages, ...cypherPages].sort(\n      (_) => _.page\n    );\n    const pageSlices = partitionBy(50, pages);\n\n    for (const pages of pageSlices) {\n      yield* Requests.queryPageIds({ pages });\n    }\n\n    let processedCount = 0;\n    while (yield take(PageIds.addPages().type)) {\n      processedCount += 1;\n      if (pageSlices.length === processedCount) {\n        yield put(AppSync.done());\n      }\n    }\n  }\n}\n\nexport { fetchPageIds };\n","import { all } from \"redux-saga/effects\";\nimport { fetchWikiPage } from \"./fetchWikiPage\";\nimport { updateCache } from \"./updateCache\";\nimport { fetchPageIds } from \"./fetchPageIds\";\n\nfunction* cacheWikiPages() {\n  yield all([fetchPageIds(), updateCache(), fetchWikiPage()]);\n}\n\nexport { cacheWikiPages };\n","import { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreCategoryMembers() {\n  yield* Requests.queryCadres();\n}\n\nexport { fetchCadreCategoryMembers };\n","import { take } from \"redux-saga/effects\";\nimport { CadreCategoryMembers } from \"../../../state/CadreCategoryMembers\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* fetchCadreModels() {\n  while (true) {\n    const {\n      payload: { cadreCategoryMembers },\n    } = yield take(CadreCategoryMembers.set().type);\n\n    const pageIds = Object.keys(cadreCategoryMembers);\n    for (const pageId of pageIds) {\n      yield* Requests.queryCadreModels({ pageId });\n    }\n  }\n}\n\nexport { fetchCadreModels };\n","/*\nThese sagas load meta data necessary for grouping models into cadres.\n\n`fetchCadreCategoryMembers` gets a list of all cadres in game, while `fetchCadreModels` fetches\nthe cadre models for a given cadre.\n*/\n\nimport { all } from \"redux-saga/effects\";\nimport { fetchCadreCategoryMembers } from \"./fetchCadreCategoryMembers\";\nimport { fetchCadreModels } from \"./fetchCadreModels\";\n\nfunction* fetchCadres() {\n  yield all([fetchCadreCategoryMembers(), fetchCadreModels()]);\n}\n\nexport { fetchCadres };\n","function cleanText(text) {\n  return text.replace(/\\n/g, \"\");\n}\n\nfunction prepareDOM(text) {\n  const doc = new DOMParser().parseFromString(text, \"text/html\");\n  doc\n    .querySelectorAll(\n      \"h1 > span[id], h2 > span[id], h3 > span[id], h4 > span[id]\"\n    )\n    .forEach((node) => {\n      node.parentNode.id = node.id;\n    });\n\n  return doc;\n}\n\nexport { cleanText, prepareDOM };\n","import { prepareDOM } from \"./utils\";\n\nconst parseCypherText = (text) => {\n  const doc = prepareDOM(text);\n\n  const type = extractLink(doc, \"Type\");\n  const pow = extractLink(doc, \"Pow\");\n  const effect = extractParagraphs(doc, \"Effect\");\n  const faction = extractLink(doc, \"Faction\");\n  const source = extractLink(doc, \"Source\");\n\n  const cypher = {\n    type,\n    pow,\n    effect,\n    faction,\n    source,\n  };\n\n  return removeUndefinedValues(cypher);\n};\n\nexport { parseCypherText };\n\nfunction extractLink(doc, id) {\n  const p = doc.querySelector(`h2#${id} ~ p`);\n  if (!p) return undefined;\n\n  const a = p.querySelector(\"a\");\n  if (!a) return { text: p.innerText };\n\n  const hrefs = a.href.split(\"title=\");\n  return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n}\n\nfunction extractParagraphs(doc, id) {\n  function helper(node, texts) {\n    switch (node.tagName) {\n      case \"P\":\n        return helper(node.nextSibling, [...texts, node.innerText.trim()]);\n      case \"H2\":\n        return texts;\n      default:\n        return helper(node.nextSibling, texts);\n    }\n  }\n\n  const node = doc.querySelector(`h2#${id} ~ p`);\n  if (!node) return undefined;\n\n  return helper(node, []);\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n","import { cleanText } from \"./utils\";\n\nfunction parseAnchorTable(table) {\n  const header = [...table.querySelectorAll(\"th\")].map((th) =>\n    cleanText(th.innerText)\n  );\n\n  const body = [...table.querySelectorAll(\"tr\")].map((tr) =>\n    [...tr.querySelectorAll(\"td\")].map((td) => {\n      const anchors = [...td.querySelectorAll(\"a\")].map(parseAnchor);\n      if (anchors.length > 0) {\n        return anchors;\n      }\n      const text = parseText(td);\n      if (text) {\n        return [{ text }];\n      }\n      return [];\n    })\n  );\n\n  return body\n    .filter((row) => row.length === header.length)\n    .map((row) =>\n      Object.fromEntries(\n        header.flatMap((title, i) => (row[i] ? [[title, row[i]]] : []))\n      )\n    );\n}\n\nfunction parseAnchor(a) {\n  const titleColon = a.title.split(\":\");\n  const hrefTitle = a.href.split(\"title=\");\n  return {\n    text: titleColon[titleColon.length - 1],\n    page: hrefTitle[hrefTitle.length - 1],\n  };\n}\n\nexport { parseAnchor, parseAnchorTable };\n\nfunction parseText(node) {\n  return cleanText(node.innerText);\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseCypherCodecsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const cypherCodecsTable = doc.querySelector(\"table.sortable\");\n  if (!cypherCodecsTable) {\n    console.error(\"parseCypherCodecsText: cypherCodecsTable not found!\");\n    return undefined;\n  }\n\n  const cypherCodecs = parseAnchorTable(cypherCodecsTable);\n  return cypherCodecs.map((cypherCodec) =>\n    Object.fromEntries(\n      Object.entries(cypherCodec).map(([key, values]) => [key, values[0]])\n    )\n  );\n};\n\nexport { parseCypherCodecsText };\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionModelsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const table = doc.querySelector(\"h1#Models ~ table\");\n  if (!table) {\n    console.error(\"parseFactionModelsText: table not found!\");\n    return undefined;\n  }\n  const models = parseAnchorTable(table);\n\n  return models.map((model) =>\n    Object.fromEntries(\n      Object.entries(model).flatMap(([key, values]) =>\n        key === \"Subtype\"\n          ? values.length > 0\n            ? [[key, values]]\n            : []\n          : [[key, values[0]]]\n      )\n    )\n  );\n};\n\nexport { parseFactionModelsText };\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseFactionsText = (text) => {\n  const doc = prepareDOM(text);\n\n  const p = doc.querySelector(\"h2#Factions ~ p\");\n  const factions = Object.fromEntries(collectFactions(p, []));\n  delete factions.Wild_Card; // Wild Cards are crawled independently.\n  return factions;\n};\n\nexport { parseFactionsText };\n\nfunction collectFactions(node, factions) {\n  switch (node.tagName) {\n    case \"P\":\n      const a = node.querySelector(\"a\");\n      if (!a) {\n        console.error(\"collectFactions: a not found!\");\n        return collectFactions(node.nextSibling, factions);\n      }\n      const anchor = parseAnchor(a);\n      const faction = [anchor.page, anchor];\n      return collectFactions(node.nextSibling, [...factions, faction]);\n    case \"H2\":\n      return factions;\n    default:\n      return collectFactions(node.nextSibling, factions);\n  }\n}\n","import { parseAnchor } from \"./parsers\";\nimport { cleanText, prepareDOM } from \"./utils\";\n\nconst parseModelText = (text) => {\n  const doc = prepareDOM(text);\n\n  const storeLinks = extractStoreLinks(doc);\n  const release = extractText(doc, \"Release\", { node: \"h1\" });\n  const lore = extractText(doc, \"Lore\", { node: \"h1\" });\n\n  const contents = [...doc.querySelectorAll(\".mw-parser-output > *\")];\n\n  // In cases where a model has more than a single card (see Phaetheon),\n  // h2s are used to seperate stats. Pages with a single card don't use h2s.\n  const cardIndexes = contents.flatMap((el, index) =>\n    el.nodeName === \"H2\" ? [index] : []\n  );\n\n  const docs =\n    cardIndexes.length === 0\n      ? [doc]\n      : cardIndexes.map((position, index, indexes) =>\n          prepareDOM(\n            contents\n              .slice(position, indexes[index + 1])\n              .map((_) => _.outerHTML)\n              .join()\n          )\n        );\n\n  const coreStats = docs.map((doc) => {\n    const cardNameElement = doc.querySelector(\"h2[id] > span\");\n    const cardName = cardNameElement ? cardNameElement.innerText : undefined;\n\n    const factionAndTypes =\n      extractList(doc, \"Unit_Faction_and_Type\") ||\n      extractList(doc, \"Model_Faction_and_Type\");\n    const faction = factionAndTypes[0];\n    const types = factionAndTypes.slice(1);\n    const squadSize =\n      extractText(doc, \"Squad_Size\") || extractText(doc, \"Model_Count\");\n    const deploymentCost = extractText(doc, \"Deployment_Cost\");\n    const baseSize = extractText(doc, \"Base_Size\");\n    const health = extractText(doc, \"Health\");\n    const wildCardFactions = extractList(doc, \"Wild_Card_Factions\");\n    const weaponPoints = extractText(doc, \"Weapon_Points\");\n    const hardpoints = extractText(doc, \"Hardpoints\");\n    const specialRules = extractDefinitions(doc, \"Special_Rules\");\n    const chassisSpecialRules = extractDefinitions(\n      doc,\n      \"Chassis_Special_Rules\"\n    );\n    const chassisAdvantages = extractDefinitions(doc, \"Chassis_Advantages\");\n    const advantages = extractDefinitions(doc, \"Advantages\");\n    const maneuvers = extractDefinitions(doc, \"Maneuvers\");\n    const vehicleWeaponSelection = extractWeaponSelection(\n      doc,\n      \"Weapon_Selection\"\n    );\n    const cortexes = extractCortexes(doc, \"Cortexes\");\n\n    const modelStatsData = [\n      ...doc\n        .querySelector(\n          \"h3[id^=Unit_Stats] ~ table, h3[id^=Model_Stats] ~ table\"\n        )\n        .querySelectorAll(\"tr > td\"),\n    ].map((_) => cleanText(_.innerText));\n    const modelStatsLength = modelStatsData.length / 2;\n    const modelStats = Object.fromEntries(\n      Array.from({ length: modelStatsLength }, (_, i) => i).map((i) => [\n        modelStatsData[i],\n        modelStatsData[i + modelStatsLength],\n      ])\n    );\n\n    const factionAttachment = extractFactionAttachment(doc);\n    const wildCardAttachment = extractWildCardAttachment(doc);\n\n    let weaponsData = [\n      ...doc.querySelectorAll(\"h3[id^=Weapons] ~ table tr\"),\n    ].map((tr) => [...tr.querySelectorAll(\"td\")]);\n    let weapons = undefined;\n    if (weaponsData.length > 0) {\n      weapons = [];\n      let header = weaponsData[0].map((td) => td.innerText);\n      let weaponsList = weaponsData.slice(1);\n      for (const tds of weaponsList) {\n        if (tds.length === header.length) {\n          const stats = tds.map((td) => td.innerText);\n          const weapon = Object.fromEntries(\n            header.map((key, i) => [cleanText(key), cleanText(stats[i])])\n          );\n          weapons.push(weapon);\n        }\n        if (tds.length === 1) {\n          const previousWeapons = weapons.slice(0, weapons.length - 1);\n          const lastWeapon = weapons[weapons.length - 1];\n\n          const weapon = {\n            ...lastWeapon,\n            specialRules: parseDefinitionText(tds[0]),\n          };\n          weapons = [...previousWeapons, weapon];\n        }\n      }\n    }\n\n    function weaponDetails() {\n      const weaponDetailsTable = doc.querySelector(\"table.mw-collapsible\");\n      if (!weaponDetailsTable) return undefined;\n\n      const weaponDetailsData = [...weaponDetailsTable.querySelectorAll(\"tr\")]\n        .map((tr) => [...tr.querySelectorAll(\"td, th\")])\n        .filter((_) => _.length === 4);\n      if (!weaponDetailsData || weaponDetailsData.length === 0)\n        return undefined;\n\n      const detailsHeader = weaponDetailsData[0].map((_) =>\n        cleanText(_.innerText)\n      );\n      return weaponDetailsData.slice(1).map((tds) =>\n        Object.fromEntries(\n          tds.map((td, i) => {\n            const a = td.querySelector(\"a\");\n            const hrefs = a ? a.href.split(\"title=\") : undefined;\n            const text = cleanText(td.innerText);\n            return [\n              detailsHeader[i],\n              a ? { text, page: hrefs[hrefs.length - 1] } : { text },\n            ];\n          })\n        )\n      );\n    }\n\n    return {\n      ...(cardName ? { cardName } : {}),\n      faction,\n      types,\n      squadSize,\n      deploymentCost,\n      baseSize,\n      health,\n      wildCardFactions,\n      hardpoints,\n      weaponPoints,\n      modelStats,\n      factionAttachment,\n      wildCardAttachment,\n      specialRules,\n      weapons,\n      advantages,\n      maneuvers,\n      vehicleWeaponSelection,\n      cortexes,\n      chassisSpecialRules,\n      chassisAdvantages,\n      weaponDetails: weaponDetails(),\n    };\n  });\n\n  const model = {\n    storeLinks,\n    coreStats,\n    release,\n    lore,\n  };\n\n  return removeUndefinedValues(model);\n};\n\nexport { parseModelText, parseDefinitionText };\n\nfunction extractStoreLinks(doc) {\n  return [...doc.querySelectorAll(\"p\")]\n    .filter((p) =>\n      [...p.querySelectorAll(\"a\")].some((a) => a.href.includes(\"store\"))\n    )\n    .map((p) => p.innerHTML.replace(/\\n/g, \"\"))\n    .flatMap((html) => html.split(\"<br>\"));\n}\n\nfunction removeUndefinedValues(obj) {\n  if (Array.isArray(obj)) return obj.map(removeUndefinedValues);\n  if (typeof obj !== \"object\") return obj;\n\n  return Object.fromEntries(\n    Object.entries(obj)\n      .filter(([key, value]) => typeof value !== \"undefined\")\n      .map(([key, value]) => [key, removeUndefinedValues(value)])\n  );\n}\n\nfunction extractText(doc, id, { node = \"h3\" } = {}) {\n  const p = doc.querySelector(`${node}[id^=${id}] ~ p`);\n  if (!p) return undefined;\n\n  return cleanText(p.innerText);\n}\n\nfunction extractList(doc, id) {\n  const p = doc.querySelector(`h3[id^=${id}] ~ p`);\n  if (!p) return undefined;\n\n  const as = [...p.querySelectorAll(\"a\")];\n  if (as.length === 0) return undefined;\n\n  return as.map((a) => {\n    const hrefs = a.href.split(\"title=\");\n    return { text: a.innerText, page: hrefs[hrefs.length - 1] };\n  });\n}\n\nfunction extractWeaponSelection(doc, id) {\n  const node = doc.querySelector(`h3[id^=${id}] + p`);\n  if (!node) return undefined;\n\n  const anchors = [...node.querySelectorAll(\"a\")];\n\n  return anchors.map((a) => parseAnchor(a));\n}\n\nfunction extractCortexes(doc, id) {\n  function helper(node, cortexes) {\n    switch (node.tagName) {\n      case \"P\":\n        const cortex = node.querySelector(\"b\").innerText;\n        const definitions = parseDefinitionText(node);\n        return helper(node.nextSibling, [...cortexes, [cortex, definitions]]);\n      case \"H3\":\n        return cortexes;\n      default:\n        return helper(node.nextSibling, cortexes);\n    }\n  }\n\n  const node = doc.querySelector(`h3[id^=${id}] ~ p`);\n  if (!node) return undefined;\n\n  return Object.fromEntries(helper(node, []));\n}\n\nfunction parseDefinitionText(node) {\n  const uls = [...node.querySelectorAll(\"ul\")];\n\n  for (const ul of uls) {\n    const list = [...ul.querySelectorAll(\"li\")].map(\n      (li) => \" • \" + li.innerText\n    );\n    ul.replaceWith(list.join(\"\"));\n  }\n\n  const definitions = node.innerHTML\n    .split(\"<br>\")\n    .map((_) => _.replace(/<[^>]+>/g, \"\").trim());\n\n  const pairs = definitions.flatMap((definition) => {\n    const separator = \": \";\n    const groups = definition.split(separator).map(cleanText).map(encodeHTML);\n    if (groups.length < 2) return [];\n    const key = groups[0];\n    const val = groups.slice(1).join(separator).replace(/\\s•\\s/g, \"\\n • \");\n    return [[key, val]];\n  });\n  if (pairs.length === 0) return undefined;\n\n  return Object.fromEntries(pairs);\n}\n\nfunction encodeHTML(text) {\n  const parser = new DOMParser();\n  const dom = parser.parseFromString(\n    \"<!doctype html><body>\" + text,\n    \"text/html\"\n  );\n  return dom.body.textContent;\n}\n\nfunction extractDefinitions(doc, id) {\n  const ul = doc.querySelector(`h3[id^='${id}'] ~ p ~ ul`);\n  const p = doc.querySelector(`h3[id^='${id}'] ~ p`);\n  if (!p) return undefined;\n\n  if (ul) p.append(ul);\n\n  return parseDefinitionText(p);\n}\n\nfunction extractFactionAttachment(doc) {\n  const p = doc.querySelector(\"h3[id^=Attachment] + p\");\n  if (p) {\n    const as = p.querySelectorAll(\"a\");\n    if (as) {\n      return [...as].map(parseAnchor);\n    }\n  }\n\n  return undefined;\n}\n\nfunction extractWildCardAttachment(doc) {\n  const table = doc.querySelector(\"h3[id^=Attachment] + table\");\n  if (table) {\n    const tables = [...doc.querySelectorAll(\"h3[id^=Attachment] ~ *\")].reduce(\n      ({ tables, stop }, el) =>\n        stop\n          ? { tables, stop }\n          : el.nodeName === \"TABLE\"\n          ? { tables: [...tables, el], stop }\n          : { tables, stop: true },\n      { tables: [], stop: false }\n    ).tables;\n\n    const attachments = Object.fromEntries(\n      tables.map((table) => {\n        const factionName = table\n          .querySelector(\"caption\")\n          .childNodes[0].nodeValue.replace(/\\n/g, \"\");\n        return [\n          factionName === \"Empyreans\" ? \"Empyrean\" : factionName,\n          [...table.querySelectorAll(\"td > a\")].map(parseAnchor),\n        ];\n      })\n    );\n\n    return attachments;\n  }\n\n  return undefined;\n}\n","import { parseAnchor } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\nimport { parseDefinitionText } from \"./parseModelText\";\n\nconst parseVehicleAndWarjackWeaponText = (text) => {\n  const doc = prepareDOM(text);\n\n  const vehicleWeaponId = doc.querySelector(\"#Vehicle_Weapon\");\n  const warjackWeaponId = doc.querySelector(\"#Warjack_Weapon\");\n\n  if (vehicleWeaponId && warjackWeaponId) {\n    const vehicleWeapon = parseVehicleOrWarjackWeapon(\n      \"#Vehicle_Weapon ~ \",\n      doc\n    );\n    const warjackWeapon = parseVehicleOrWarjackWeapon(\n      \"#Warjack_Weapon ~ \",\n      doc\n    );\n\n    return { vehicleWeapon, warjackWeapon };\n  } else {\n    const vehicleOrWarjackWeapon = parseVehicleOrWarjackWeapon(\"\", doc);\n\n    return { vehicleOrWarjackWeapon };\n  }\n};\n\nexport { parseVehicleAndWarjackWeaponText };\n\nfunction parseVehicleOrWarjackWeapon(prefix, doc) {\n  let res = {};\n\n  const availableFor = [\n    ...doc.querySelectorAll(`${prefix}[id^=Available_For] + p > a`),\n  ].map(parseAnchor);\n\n  res.availableFor = availableFor;\n\n  const pointCostNode = doc.querySelector(`${prefix}[id^=Point_Cost] + p`);\n  if (pointCostNode) {\n    const pointCost = parseInt(pointCostNode.innerText);\n\n    res.pointCost = pointCost;\n  }\n\n  const locationNode = doc.querySelector(`${prefix}[id^=Location] + p`);\n  if (locationNode) {\n    const location = locationNode.innerText.replace(/\\n/g, \"\");\n\n    res.location = location;\n  }\n\n  // Good special rules example: Metaperceptor\n  const specialRulesP = doc.querySelector(`${prefix}[id^=Special_Rules] + p`);\n  if (specialRulesP) {\n    res.specialRules = parseDefinitionText(specialRulesP);\n  }\n\n  // Good weapons examples:\n  // - Nova_Cannon#Warjack_Weapon (several special abilities)\n  // - Protean_Forge (several attack modes)\n  // - Assault_Rifle_%26_Bayonet (several weapons)\n  const table = doc.querySelector(`${prefix}[id^=Weapons] + table`);\n\n  if (table) {\n    const header = [...table.querySelectorAll(\"tr:first-of-type td\")].map(\n      (td) => td.innerText.replace(/\\n/g, \"\")\n    );\n\n    const weapons = [...table.querySelectorAll(\"tr:not(:first-of-type)\")]\n      .map((tr) => [...tr.querySelectorAll(\"td\")])\n      .flatMap((tr, index) =>\n        index % 2 === 0\n          ? [\n              tr.map((td) =>\n                [...td.childNodes]\n                  .map((node) =>\n                    (node.innerText || node.textContent).replace(/\\n$/g, \"\")\n                  )\n                  .filter((text) => [\" \", \"\"].indexOf(text) === -1)\n              ),\n            ]\n          : tr.map((td) => {\n              const specialRules = parseDefinitionText(td);\n\n              if (!specialRules || Object.keys(specialRules).length === 0)\n                return {};\n              return { specialRules };\n            })\n      )\n      .reduce(\n        (acc, tr, index) =>\n          index % 2 === 0\n            ? [\n                ...acc,\n                tr.reduce(\n                  (acc2, value, index2) => ({\n                    ...acc2,\n                    [header[index2]]: value.length === 1 ? value[0] : value,\n                  }),\n                  {}\n                ),\n              ]\n            : [\n                ...acc.slice(0, acc.length - 1),\n                { ...acc[acc.length - 1], ...tr },\n              ],\n        []\n      );\n    if (weapons.length > 0) {\n      res.weapons = weapons;\n    }\n  }\n\n  return res;\n}\n","import { parseAnchorTable } from \"./parsers\";\nimport { prepareDOM } from \"./utils\";\n\nconst parseWildCardText = (text) => {\n  const doc = prepareDOM(text);\n\n  const h1OrTable = doc.querySelectorAll(\"h1, table.sortable\");\n  const factionAndModels = [];\n\n  for (let i = 0; i < h1OrTable.length; i++) {\n    if (i % 2 === 0) {\n      const h1 = h1OrTable[i];\n      if (h1.tagName !== \"H1\") {\n        console.error(\n          `parseWildCardText: expected H1, but got ${h1.tagName}!`,\n          h1\n        );\n      }\n      factionAndModels.push({ faction: h1.id });\n    } else {\n      const table = h1OrTable[i];\n      if (table.tagName !== \"TABLE\") {\n        console.error(\n          `parseWildCardText: expected TABLE, but got ${table.tagName}!`,\n          table\n        );\n      }\n      const last = factionAndModels[factionAndModels.length - 1];\n      const models = parseAnchorTable(table);\n      last.models = models.map((model) =>\n        Object.fromEntries(\n          Object.entries(model).flatMap(([key, values]) =>\n            key === \"Subtype\"\n              ? values.length > 0\n                ? [[key, values]]\n                : []\n              : [[key, values[0]]]\n          )\n        )\n      );\n    }\n  }\n\n  return factionAndModels;\n};\n\nexport { parseWildCardText };\n","import { put } from \"redux-saga/effects\";\nimport { parseModelText } from \"../../core/parse\";\nimport { Models } from \"../../../state/Models\";\nimport { partitionBy } from \"../partitionBy\";\nimport { Requests } from \"../../../state/io/Requests\";\n\nfunction* parseModel({ data, page }) {\n  const model = parseModelText(data.text);\n  model.name = { text: data.title, page };\n\n  const coreStats = model.coreStats;\n\n  for (const coreStat of coreStats) {\n    const cortexSelections = identifyCortexSelections(\n      coreStat.cortexes,\n      data.categories\n    );\n\n    if (cortexSelections) {\n      coreStat.cortexSelections = cortexSelections;\n    }\n\n    const warjackWeaponSelections = buildWarjackWeaponSelections(\n      coreStat.weaponDetails\n    );\n\n    if (warjackWeaponSelections) {\n      coreStat.warjackWeaponSelections = warjackWeaponSelections;\n    }\n  }\n\n  yield put(Models.setForPage({ page, model }));\n\n  let fetchPages = [];\n\n  for (const coreStat of coreStats) {\n    if (coreStat.cortexSelections) {\n      const cortexCategories = Object.values(coreStat.cortexSelections).flatMap(\n        (advantages) =>\n          Object.values(advantages).flatMap(({ category }) => ({\n            text: category.replace(/_/g, \" \"),\n            page: category,\n          }))\n      );\n\n      fetchPages = [...fetchPages, ...cortexCategories];\n    }\n\n    if (coreStat.warjackWeaponSelections) {\n      const weaponPages = Object.values(coreStat.warjackWeaponSelections).map(\n        ({ name, page }) => ({ text: name, page })\n      );\n\n      fetchPages = [...fetchPages, ...weaponPages];\n    }\n\n    if (coreStat.vehicleWeaponSelection) {\n      fetchPages = [...fetchPages, ...coreStat.vehicleWeaponSelection];\n    }\n\n    if (fetchPages.length > 0) {\n      const pageSlices = partitionBy(50, fetchPages);\n\n      for (const pages of pageSlices) {\n        yield* Requests.queryPageIds({ pages: pages });\n      }\n    }\n  }\n}\n\nexport { parseModel };\n\nfunction buildWarjackWeaponSelections(weaponDetails) {\n  if (!weaponDetails) {\n    return undefined;\n  }\n\n  return Object.fromEntries(\n    weaponDetails.map(({ Cost, Location, Weapon }) => [\n      Weapon.page,\n      {\n        cost: Cost.text,\n        location: Location.text,\n        name: Weapon.text,\n        page: Weapon.page,\n      },\n    ])\n  );\n}\n\nfunction identifyCortexSelections(cortexes, categories) {\n  if (\n    !cortexes ||\n    Object.entries(cortexes).length === 0 ||\n    !categories ||\n    Object.entries(categories).length === 0\n  ) {\n    return undefined;\n  }\n\n  const categoryTexts = categories.map(({ category }) => category);\n\n  return Object.fromEntries(\n    Object.entries(cortexes).map(([cortex, advantages]) => [\n      cortex,\n      Object.fromEntries(\n        Object.entries(advantages).map(([advantage, text]) => [\n          advantage,\n          {\n            category: `Category:${findClosestCategory(\n              advantage,\n              categoryTexts\n            )}`,\n            text,\n          },\n        ])\n      ),\n    ])\n  );\n}\n\nfunction findClosestCategory(advantage, categoryTexts) {\n  return categoryTexts.find(\n    (category) => advantage === category.replace(/^WNM_/, \"\").replace(/_/g, \" \")\n  );\n}\n","import { parseCypher } from \"./parseCypher\";\nimport { parseCypherCodecs } from \"./parseCypherCodecs\";\nimport { parseFactionModels } from \"./parseFactionModels\";\nimport { parseFactions } from \"./parseFactions\";\nimport { parseModel } from \"./parseModel\";\nimport { parseVehicleOrWarjackWeapon } from \"./parseVehicleOrWarjackWeapon\";\nimport { parseWildCard } from \"./parseWildCard\";\n\nconst parsers = {\n  parseCypher,\n  parseCypherCodecs,\n  parseFactionModels,\n  parseFactions,\n  parseModel,\n  parseVehicleOrWarjackWeapon,\n  parseWildCard,\n};\n\nexport default parsers;\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherText } from \"../../core/parse\";\nimport { Cyphers } from \"../../../state/Cyphers\";\n\nfunction* parseCypher({ data, page }) {\n  const cypher = parseCypherText(data.text);\n  cypher.name = { text: data.title, page };\n  yield put(Cyphers.setForPage({ page, cypher }));\n}\n\nexport { parseCypher };\n","import { put } from \"redux-saga/effects\";\nimport { parseCypherCodecsText } from \"../../core/parse\";\nimport { CypherCodecs } from \"../../../state/CypherCodecs\";\n\nfunction* parseCypherCodecs({ data }) {\n  const cypherCodecs = parseCypherCodecsText(data.text);\n  yield put(CypherCodecs.set({ cypherCodecs }));\n}\n\nexport { parseCypherCodecs };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionModelsText } from \"../../core/parse\";\nimport { FactionModels } from \"../../../state/FactionModels\";\n\nfunction* parseFactionModels({ data, page }) {\n  const factionModels = parseFactionModelsText(data.text);\n  yield put(FactionModels.setForPage({ page, factionModels }));\n}\n\nexport { parseFactionModels };\n","import { put } from \"redux-saga/effects\";\nimport { parseFactionsText } from \"../../core/parse\";\nimport { Factions } from \"../../../state/Factions\";\n\nfunction* parseFactions({ data }) {\n  const factions = parseFactionsText(data.text);\n  yield put(Factions.set({ factions }));\n}\n\nexport { parseFactions };\n","import { put, select } from \"redux-saga/effects\";\nimport { parseVehicleAndWarjackWeaponText } from \"../../core/parse\";\nimport { VehicleWeapons } from \"../../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../../state/WarjackWeapons\";\nimport { Models } from \"../../../state/Models\";\n\nfunction* parseVehicleOrWarjackWeapon({ data, page }) {\n  const { vehicleWeapon, vehicleOrWarjackWeapon, warjackWeapon } =\n    parseVehicleAndWarjackWeaponText(data.text);\n\n  if (vehicleWeapon)\n    yield put(VehicleWeapons.setForPage({ page, vehicleWeapon }));\n  if (warjackWeapon)\n    yield put(WarjackWeapons.setForPage({ page, warjackWeapon }));\n  if (vehicleOrWarjackWeapon) {\n    const models = Object.values(yield select(Models.select()));\n\n    const vehicles = models.filter((model) =>\n      model.coreStats[0].types.some(({ text }) => text === \"Vehicle\")\n    );\n    const warjacks = models.filter((model) =>\n      model.coreStats[0].types.some(({ text }) => text === \"Warjack\")\n    );\n\n    const vehicleWeapons = vehicles.flatMap((vehicle) =>\n      vehicle.coreStats[0].vehicleWeaponSelection.map((weapon) => weapon.page)\n    );\n    const warjackWeapons = warjacks.flatMap((warjack) =>\n      !warjack.coreStats[0].weaponDetails\n        ? []\n        : warjack.coreStats[0].weaponDetails.map(({ Weapon }) => Weapon.page)\n    );\n\n    if (vehicleWeapons.includes(page) && warjackWeapons.includes(page)) {\n      console.error(\n        `Vehicle weapons and warjack weapons cannot both contain page ${page}!`\n      );\n    }\n\n    if (vehicleWeapons.includes(page)) {\n      yield put(\n        VehicleWeapons.setForPage({\n          page,\n          vehicleWeapon: vehicleOrWarjackWeapon,\n        })\n      );\n    }\n\n    if (warjackWeapons.includes(page)) {\n      yield put(\n        WarjackWeapons.setForPage({\n          page,\n          warjackWeapon: vehicleOrWarjackWeapon,\n        })\n      );\n    }\n  }\n}\n\nexport { parseVehicleOrWarjackWeapon };\n","import { put } from \"redux-saga/effects\";\nimport { parseWildCardText } from \"../../core/parse\";\nimport { WildCardModels } from \"../../../state/WildCardModels\";\n\nfunction* parseWildCard({ data }) {\n  const wildCards = parseWildCardText(data.text);\n  yield put(WildCardModels.set({ wildCards }));\n}\n\nexport { parseWildCard };\n","import { select, take } from \"redux-saga/effects\";\n\nimport { FetchedWikiPage } from \"../../messages\";\nimport parsers from \"./parsers\";\nimport { ParserNames } from \"../../state/ParserNames\";\n\nfunction* parseWikiPages() {\n  while (true) {\n    const action = yield take(FetchedWikiPage().type);\n    const { payload } = action;\n\n    let parserName = payload.parserName;\n    if (!parserName) {\n      parserName = yield select(ParserNames.selectByPage(payload.page));\n    }\n\n    if (!parserName) {\n      console.error(\"Parser name not found!\", action);\n      continue;\n    }\n\n    const parser = parsers[parserName];\n\n    if (!parser) {\n      console.error(\"Parser not found!\", action);\n      continue;\n    }\n\n    yield* parser(payload);\n  }\n}\n\nexport { parseWikiPages };\n","import { all, take } from \"redux-saga/effects\";\nimport { Factions } from \"../../state/Factions\";\nimport { Requests } from \"../../state/io/Requests\";\n\nfunction* triggerFetchWikiPages() {\n  yield all([triggerFetchFactions()]);\n}\n\nexport { triggerFetchWikiPages };\n\nfunction* triggerFetchFactions() {\n  while (true) {\n    const { payload } = yield take(Factions.set().type);\n    const { factions } = payload;\n\n    const factionPages = Object.values(factions).map((faction) => faction.page);\n\n    for (const page of factionPages) {\n      yield* Requests.parsePage({ page, parserName: \"parseFactionModels\" });\n    }\n  }\n}\n","const digitsBase62 =\n  \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n\nfunction toBase62(n) {\n  if (n === 0) return \"0\";\n  var result = \"\";\n  while (n > 0) {\n    result = digitsBase62[n % digitsBase62.length] + result;\n    n = parseInt(n / digitsBase62.length, 10);\n  }\n  return result;\n}\n\nfunction fromBase62(s) {\n  var result = 0;\n  for (var i = 0; i < s.length; i++) {\n    var p = digitsBase62.indexOf(s[i]);\n    if (p < 0) return NaN;\n    result += p * Math.pow(digitsBase62.length, s.length - i - 1);\n  }\n  return result;\n}\n\nexport { fromBase62, toBase62 };\n","import { eventChannel } from \"redux-saga\";\nimport { all, put, select, take } from \"redux-saga/effects\";\nimport { MenuItemClicked } from \"../../messages\";\nimport { AppSync } from \"../../state/AppSync\";\nimport { CypherCodecs } from \"../../state/CypherCodecs\";\nimport { FactionModels } from \"../../state/FactionModels\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { Lists } from \"../../state/Lists\";\nimport { Models } from \"../../state/Models\";\nimport { PageIds } from \"../../state/PageIds\";\nimport { Url } from \"../../state/Url\";\nimport { VehicleWeapons } from \"../../state/VehicleWeapons\";\nimport { WarjackWeapons } from \"../../state/WarjackWeapons\";\nimport { WildCardModels } from \"../../state/WildCardModels\";\nimport { toBase62, fromBase62 } from \"./base62\";\nimport { ListIndex } from \"../../state/ListIndex\";\n\nfunction* ui() {\n  yield all([\n    addCard(),\n    updateUrl(),\n    parseListsFromQuery(),\n    parseListsFromQuery2(),\n    fetchCardOnShow(),\n    fetchWeaponsIfVehicleAdded(),\n    fetchWeaponsIfWarjackAdded(),\n  ]);\n}\n\nexport { ui };\n\nfunction* addCard() {\n  while (true) {\n    const { payload } = yield take(MenuItemClicked().type);\n    const { page } = payload;\n    const model = yield select(FactionModels.selectByPage(page));\n    const wildCard = yield select(WildCardModels.selectByPage(page));\n    const cypher = yield select(CypherCodecs.selectByPage(page));\n    if (model || wildCard || cypher) {\n      const pageId = yield select(PageIds.selectByPage(page));\n      const listIndex = yield select(ListIndex.select());\n      yield put(Lists.addCard({ listIndex, pageId }));\n    }\n  }\n}\n\nfunction* updateUrl() {\n  while (yield take((action) => action.type.startsWith(\"Lists.\"))) {\n    const lists = yield select(Lists.select());\n    const pageIds = lists.map(({ cards }) => cards.map((_) => _.pageId));\n\n    if (window.history && window.history.replaceState) {\n      const maxPageId = Math.max(0, ...pageIds.flat());\n      const codeLength = Math.ceil(Math.log(maxPageId + 1) / Math.log(62)) || 0;\n\n      function renderWarjackWeaponIds(warjackWeaponIds, codeLength) {\n        const ids = warjackWeaponIds || [];\n        let res = \"\";\n        for (let i = 0; i < ids.length; i++) {\n          const id = ids[i];\n          res += (id ? toBase62(id) : \"0\").padStart(codeLength, \"0\");\n        }\n        return res;\n      }\n\n      const state = lists.reduce(\n        (state, list, index) => ({\n          ...state,\n          ...(list.title ? { [`t${index}`]: list.title } : {}),\n          [`l${index}`]: list.cards.reduce(\n            (acc, card) =>\n              acc +\n              toBase62(card.pageId).padStart(codeLength, \"0\") +\n              (card.cortexIds || card.warjackWeaponIds\n                ? `(${(card.cortexIds || [])\n                    .map((id) => toBase62(id).padStart(codeLength, \"0\"))\n                    .join(\"\")},${renderWarjackWeaponIds(\n                    card.warjackWeaponIds,\n                    codeLength\n                  )})`\n                : \"\") +\n              (card.vehicleWeaponId\n                ? `[${toBase62(card.vehicleWeaponId).padStart(\n                    codeLength,\n                    \"0\"\n                  )}]`\n                : \"\"),\n            \"\"\n          ),\n        }),\n        { v: 1, e: codeLength }\n      );\n\n      const query = Object.entries(state)\n        .map(([key, value]) => `${key}=${value}`)\n        .join(\"&\");\n      const url =\n        window.location.origin + window.location.pathname + \"?\" + query;\n\n      yield put(Url.set({ url }));\n\n      window.history.replaceState(query, \"\", url);\n    }\n  }\n}\n\nfunction* parseListsFromQuery() {\n  const loadChannel = eventChannel((emitter) => {\n    window.addEventListener(\"load\", emitter);\n\n    return () => {\n      window.removeEventListener(\"load\", emitter);\n    };\n  });\n\n  while (true) {\n    yield take(loadChannel);\n\n    yield* parseLists();\n  }\n}\n\nfunction* parseListsFromQuery2() {\n  yield take(AppSync.done().type);\n\n  yield* parseLists();\n}\n\nfunction* parseLists() {\n  const urlParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlParams);\n\n  const version = params.v;\n  const exponent = parseInt(params.e, 10) || 0;\n\n  let lists = null;\n  if (version === \"1\" && exponent) {\n    const listIndexes = Object.keys(params)\n      .filter((key) => key.match(/^l[\\d]+$/))\n      .map((key) => parseInt(key.substring(1), 10))\n      .sort((a, b) => a - b);\n\n    lists = listIndexes.map((index) => ({\n      title: params[\"t\" + index] || \"\",\n      cards: parseList(exponent, params[\"l\" + index]),\n    }));\n  } else {\n    lists = yield select(Lists.select());\n  }\n\n  // If the card is either a configured warjack or a configured vehicle, its page must be\n  // fetched in order for its subtitle to be shown correctly. A warjack or vehicle can be\n  // identified by having at least one cortex id, warjack weapon id or vehicle weapon id.\n  for (const list of lists) {\n    for (const {\n      pageId,\n      cortexIds,\n      warjackWeaponIds,\n      vehicleWeaponId,\n    } of list.cards) {\n      if (cortexIds || warjackWeaponIds || vehicleWeaponId) {\n        const page = yield select(PageIds.selectPageByPageId(pageId));\n        if (page) {\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n        }\n      }\n    }\n  }\n\n  yield put(Lists.set({ lists }));\n}\n\nfunction* fetchWeaponsIfVehicleAdded() {\n  while (true) {\n    const { payload } = yield take(Models.setForPage().type);\n    if (\n      payload &&\n      payload.model &&\n      payload.model.coreStats &&\n      payload.model.coreStats.length > 0 &&\n      payload.model.coreStats[0].types &&\n      payload.model.coreStats[0].types\n        .map((type) => type.text)\n        .includes(\"Vehicle\")\n    ) {\n      const vehicleWeaponSelection =\n        payload.model.coreStats[0].vehicleWeaponSelection;\n      if (vehicleWeaponSelection) {\n        for (const { page } of vehicleWeaponSelection) {\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              VehicleWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                VehicleWeapons.setForPage({\n                  page: pageWithoutTarget,\n                  vehicleWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchWeaponsIfWarjackAdded() {\n  while (true) {\n    const { payload } = yield take(Models.setForPage().type);\n    if (\n      payload &&\n      payload.model &&\n      payload.model.coreStats &&\n      payload.model.coreStats.length > 0 &&\n      payload.model.coreStats[0].types &&\n      payload.model.coreStats[0].types\n        .map((type) => type.text)\n        .includes(\"Warjack\")\n    ) {\n      const weaponDetails = payload.model.coreStats[0].weaponDetails;\n      if (weaponDetails) {\n        for (const { Weapon } of weaponDetails) {\n          const page = Weapon.page;\n          if (page) {\n            const pageWithoutTarget = page.split(\"#\")[0];\n            const weapon = yield select(\n              WarjackWeapons.selectByPage(pageWithoutTarget)\n            );\n            if (!weapon) {\n              yield put(\n                WarjackWeapons.setForPage({\n                  page: pageWithoutTarget,\n                  warjackWeapon: {},\n                })\n              );\n            }\n            yield* Requests.parsePage({\n              page: pageWithoutTarget,\n              parserName: \"parseVehicleOrWarjackWeapon\",\n            });\n          }\n        }\n      }\n    }\n  }\n}\n\nfunction* fetchCardOnShow() {\n  while (true) {\n    const { payload } = yield take(Lists.toggleCard().type);\n    if (payload && payload.pageId) {\n      const page = yield select(PageIds.selectPageByPageId(payload.pageId));\n      if (page) {\n        const cypher = yield select(CypherCodecs.selectByPage(page));\n        if (cypher) {\n          yield* Requests.parsePage({ page, parserName: \"parseCypher\" });\n        } else {\n          yield* Requests.parsePage({ page, parserName: \"parseModel\" });\n        }\n      }\n    }\n  }\n}\n\nfunction parseList(exponent, encodedList) {\n  function parseCards(cards, rest) {\n    if (rest === \"\") {\n      return cards;\n    }\n\n    const pageId = rest.slice(0, exponent);\n\n    if (rest[exponent] === \"(\") {\n      const blockEnd = rest.indexOf(\")\");\n      const delimiter = rest.indexOf(\",\");\n      if (!blockEnd || !delimiter) {\n        return [];\n      }\n\n      const block = rest.slice(exponent + 1, blockEnd);\n      const [cortexIds, warjackWeaponIds] = block.split(\",\");\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: partitionBy(exponent, cortexIds),\n            warjackWeaponIds: partitionBy(exponent, warjackWeaponIds),\n            vehicleWeaponId: [],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    if (rest[exponent] === \"[\") {\n      const blockEnd = rest.indexOf(\"]\");\n      if (!blockEnd) {\n        return [];\n      }\n\n      const vehicleWeaponId = rest.slice(exponent + 1, blockEnd);\n      return parseCards(\n        [\n          ...cards,\n          {\n            pageId,\n            cortexIds: [],\n            warjackWeaponIds: [],\n            vehicleWeaponId: [vehicleWeaponId],\n          },\n        ],\n        rest.slice(blockEnd + 1)\n      );\n    }\n\n    return parseCards(\n      [\n        ...cards,\n        { pageId, cortexIds: [], warjackWeaponIds: [], vehicleWeaponId: [] },\n      ],\n      rest.slice(exponent)\n    );\n  }\n\n  const cards = parseCards([], encodedList);\n\n  const decode = (string) => {\n    const normalizedString = string.replace(/^0+/, \"\") || \"0\";\n    if (normalizedString === \"0\") return null;\n    return parseInt(fromBase62(normalizedString), 10);\n  };\n\n  return cards\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId: decode(pageId),\n      cortexIds: cortexIds.map(decode),\n      warjackWeaponIds: warjackWeaponIds.map(decode),\n      vehicleWeaponId: vehicleWeaponId.map(decode),\n    }))\n    .map(({ pageId, cortexIds, warjackWeaponIds, vehicleWeaponId }) => ({\n      pageId,\n      ...(cortexIds.length === 0 ? {} : { cortexIds }),\n      ...(warjackWeaponIds.length === 0 ? {} : { warjackWeaponIds }),\n      ...(vehicleWeaponId.length === 0\n        ? {}\n        : { vehicleWeaponId: vehicleWeaponId[0] }),\n      hidden: true,\n    }));\n}\n\nfunction partitionBy(slice, string) {\n  var strings = [];\n\n  for (let i = 0; i < string.length; i += slice) {\n    strings[strings.length] = string.slice(i, i + slice);\n  }\n\n  return strings;\n}\n","import { all, put, select } from \"redux-saga/effects\";\nimport { RefreshWikiPages } from \"../../messages\";\nimport { Requests } from \"../../state/io/Requests\";\nimport { cacheParserNames } from \"./cacheParserNames\";\nimport { cacheWikiPages } from \"./cacheWikiPages\";\nimport { fetchCadres } from \"./fetchCadres\";\nimport { parseWikiPages } from \"./parseWikiPages\";\nimport { triggerFetchWikiPages } from \"./triggerFetchWikiPages\";\nimport { ui } from \"./ui\";\n\nfunction* processes() {\n  yield all([\n    continuePending(),\n    cacheWikiPages(),\n    parseWikiPages(),\n    triggerFetchWikiPages(),\n    cacheParserNames(),\n    ui(),\n    fetchCadres(),\n    fetchInitialData(),\n    refresh(),\n  ]);\n}\n\nexport { processes };\n\nfunction* fetchInitialData() {\n  const pages = [\n    { page: \"Warcaster\", parserName: \"parseFactions\" },\n    { page: \"Wild_Card\", parserName: \"parseWildCard\" },\n    { page: \"Cypher_Codecs\", parserName: \"parseCypherCodecs\" },\n  ];\n  for (const page of pages) {\n    yield* Requests.parsePage(page);\n  }\n}\n\nfunction* continuePending() {\n  const pending = yield select(Requests.selectPending());\n  for (const params of pending) {\n    yield put(Requests.fetch(params));\n  }\n}\n\nfunction* refresh() {\n  yield put(RefreshWikiPages());\n}\n","import { StateShard } from \"./utils\";\n\nconst Version = StateShard(\"Version\", init, {}, {}, {});\n\nexport { Version };\n\nfunction init(state) {\n  state.version = \"2023-07-06T22:58:00.000Z\";\n}\n","import { AppSync } from \"./AppSync\";\nimport { CadreCategoryMembers } from \"./CadreCategoryMembers\";\nimport { CadreModels } from \"./CadreModels\";\nimport { Cyphers } from \"./Cyphers\";\nimport { CypherCodecs } from \"./CypherCodecs\";\nimport { EditMode } from \"./EditMode\";\nimport { Factions } from \"./Factions\";\nimport { FactionModels } from \"./FactionModels\";\nimport { ListIndex } from \"./ListIndex\";\nimport { Lists } from \"./Lists\";\nimport { Models } from \"./Models\";\nimport { PageIds } from \"./PageIds\";\nimport { ParserNames } from \"./ParserNames\";\nimport { Requests } from \"./io/Requests\";\nimport { ToggleSections } from \"./ToggleSections\";\nimport { Url } from \"./Url\";\nimport { VehicleWeapons } from \"./VehicleWeapons\";\nimport { Version } from \"./Version\";\nimport { WarjackWeapons } from \"./WarjackWeapons\";\nimport { WildCardModels } from \"./WildCardModels\";\nimport { immer, initAll } from \"./utils\";\n\nconst objects = [\n  AppSync,\n  CadreCategoryMembers,\n  CadreModels,\n  CypherCodecs,\n  Cyphers,\n  EditMode,\n  Factions,\n  FactionModels,\n  Models,\n  PageIds,\n  ParserNames,\n  Requests,\n  ToggleSections,\n  Url,\n  VehicleWeapons,\n  WarjackWeapons,\n  WildCardModels,\n  // UI\n  ListIndex,\n  Lists,\n  // General\n  Version,\n];\n\nconst state = initAll(...objects)({});\n\nconst dispatch = immer(({ type, payload }) => {\n  const namespaces = Object.fromEntries(\n    objects.map((group) => [group.namespace, group])\n  );\n\n  const namespace = type.substring(0, type.indexOf(\".\"));\n  if (namespace && namespaces[namespace]) {\n    return redirect({ type, payload }, namespaces[namespace]);\n  }\n  return (state) => state;\n});\n\nexport { dispatch, state };\n\nfunction redirect(action, obj) {\n  return (state) =>\n    immer(({ type, payload }) => {\n      const f = obj.dispatch[type] || ((state, payload) => state);\n      return (state) => f(state, payload);\n    })(state, action);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport { applyMiddleware, createStore } from \"redux\";\nimport createSagaMiddleware from \"redux-saga\";\nimport { composeWithDevTools } from \"redux-devtools-extension\";\nimport \"./index.css\";\nimport App from \"./ui/App\";\nimport { processes } from \"./businessLogic/processes\";\nimport { dispatch, state } from \"./state\";\n\nconst saga = initSaga();\nconst store = initStore(saga);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nsaga.run(processes);\n\nfunction initStore(saga) {\n  const reset = document.location.search === \"?reset\";\n\n  const persistedState = localStorage.getItem(\"reduxState\")\n    ? JSON.parse(localStorage.getItem(\"reduxState\"))\n    : state;\n\n  const latestState =\n    !reset && new Date(persistedState.version) >= new Date(state.version)\n      ? persistedState\n      : state;\n\n  const composedEnhancers = composeWithDevTools(applyMiddleware(saga));\n  const store = createStore(dispatch, latestState, composedEnhancers);\n\n  store.subscribe(() => {\n    localStorage.setItem(\"reduxState\", JSON.stringify(store.getState()));\n  });\n\n  return store;\n}\n\nfunction initSaga() {\n  return createSagaMiddleware();\n}\n"],"sourceRoot":""}